System.register("chunks:///_virtual/AchievementItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./QuestData.ts","./AchievementSubItem.ts","./EventListener.ts","./GameEvent.ts"],(function(e){var t,n,i,r,s,o,c,a,l,h,u,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,r=e.ScrollView,s=e.Prefab,o=e._decorator,c=e.Component,a=e.instantiate},function(e){l=e.QuestData},function(e){h=e.AchievementSubItem},function(e){u=e.EventListener},function(e){m=e.GameEvent}],execute:function(){var p,f,v,d,b,E,w;i._RF.push({},"c88dcG9GfZFlZiHC7G21V3E","AchievementItem",void 0);const{ccclass:I,property:P}=o;e("AchievementItem",(p=I("AchievementItem"),f=P(r),v=P(s),p((E=t((b=class extends c{constructor(){super(...arguments),n(this,"rewardList",E,this),n(this,"rewardItem",w,this)}init(){this.setContent()}setContent(){let e=l.instance.achievements;0==this.rewardList.content.children.length?e.forEach(((e,t)=>{let n=a(this.rewardItem);n.getComponent(h).init(e),n.parent=this.rewardList.content})):this.rewardList.content.children.forEach(((t,n)=>{e[n]?(t.active=!0,t.getComponent(h).init(e[n])):t.active=!1}))}onEnable(){u.on(m.UPDATE_DAILY_QUEST_POPUP,this.setContent,this)}onDisable(){u.off(m.UPDATE_DAILY_QUEST_POPUP,this.setContent,this)}}).prototype,"rewardList",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=t(b.prototype,"rewardItem",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=b))||d));i._RF.pop()}}}));

System.register("chunks:///_virtual/AchievementSubItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RewardItem.ts","./QuestData.ts","./HttpService.ts","./Api.ts","./OpenPopupManager.ts","./LanguageManager.ts","./PlayerData.ts"],(function(e){var t,r,n,i,a,s,o,u,l,c,p,g,h,d,m,b,w,f,I;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.initializerDefineProperty},function(e){n=e.cclegacy,i=e.Label,a=e.ProgressBar,s=e.Node,o=e.Sprite,u=e._decorator,l=e.Component,c=e.Color,p=e.UITransform,g=e.Vec3},function(e){h=e.RewardItem},function(e){d=e.QuestData},function(e){m=e.HttpService},function(e){b=e.Api},function(e){w=e.OpenPopupManager},function(e){f=e.LanguageManager},function(e){I=e.PlayerData}],execute:function(){var v,y,A,P,S,M,R,z,B,D,L,V,E,_,C;n._RF.push({},"449322MGnZLoolVuyU5BdnB","AchievementSubItem",void 0);const{ccclass:T,property:H}=u;e("AchievementSubItem",(v=T("AchievementSubItem"),y=H(h),A=H(i),P=H(a),S=H(i),M=H(s),R=H(o),v((D=t((B=class extends l{constructor(){super(...arguments),r(this,"rewardItem",D,this),r(this,"desc",L,this),r(this,"progress",V,this),r(this,"progressValue",E,this),r(this,"buttons",_,this),r(this,"itemBg",C,this),this.data=void 0}init(e){this.data=e,this.rewardItem.init(e.rewards[0]),this.desc.string=f.instance.getLang(e.desc,[e.target]),this.progress.progress=e.num>=e.target?1:e.num/e.target,this.progressValue.string=`${e.num}/${e.target}`,this.buttons.children[0].active=e.num<e.target,this.buttons.children[1].active=e.num>=e.target,this.itemBg.color=e.num<e.target?new c(216,231,242,255):new c(255,252,83,255)}claimReward(){m.instance.post(b.EVENT_ACHIEVEMENT_CLAIM,{groupId:this.data.groupId}).then((e=>{0==e.code?(I.instance.getPlayerInfo(!1),w.instance.showRewardPopup(this.data.rewards,null,(t=>{if(t){let t=this.node.getComponent(p).convertToWorldSpaceAR(new g(0,0,0));w.instance.showRewardAnimPopup(t,e.data.rewards)}})),d.instance.getEventInfo()):w.instance.showToast(e.msg)}))}}).prototype,"rewardItem",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=t(B.prototype,"desc",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=t(B.prototype,"progress",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=t(B.prototype,"progressValue",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(B.prototype,"buttons",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(B.prototype,"itemBg",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=B))||z));n._RF.pop()}}}));

System.register("chunks:///_virtual/ActiveItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts"],(function(e){var t,i,r,n,l,o,a,s,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){r=e.cclegacy,n=e.Label,l=e.Sprite,o=e._decorator,a=e.Component},function(e){s=e.OpenPopupManager},function(e){c=e.Constants}],execute:function(){var u,p,b,f,m,h,g,v,y,d,w;r._RF.push({},"e1358Wa2qRNYabCIoCCqzLD","ActiveItem",void 0);const{ccclass:z,property:C}=o;e("ActiveItem",(u=z("ActiveItem"),p=C(n),b=C(n),f=C(l),m=C(n),u((v=t((g=class extends a{constructor(){super(...arguments),i(this,"title",v,this),i(this,"leftTime",y,this),i(this,"reward",d,this),i(this,"leftNumber",w,this)}init(){}toDetail(){s.instance.show(c.PopupUI.ActiveDetailPopup)}}).prototype,"title",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=t(g.prototype,"leftTime",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=t(g.prototype,"reward",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=t(g.prototype,"leftNumber",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=g))||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/AdManager.ts",["cc","./HttpService.ts","./Api.ts","./OpenPopupManager.ts","./GameDefine.ts","./EventListener.ts","./GameEvent.ts"],(function(t){var i,o,s,n,e,r,d,a;return{setters:[function(t){i=t.cclegacy,o=t._decorator},function(t){s=t.HttpService},function(t){n=t.Api},function(t){e=t.OpenPopupManager},function(t){r=t.GameDefine},function(t){d=t.EventListener},function(t){a=t.GameEvent}],execute:function(){var h,c;i._RF.push({},"36136ZXzb9G6J7LMyXnX9NK","AdManager",void 0);const{ccclass:A,property:_}=o;t("AdManager",A("AdManager")(((c=class t{constructor(){this.adController=null,this._sign=null,this._adsgramBlockId=null,this.onClickAShow=null,this._initAdTypes=[l.Monatag,l.AdSurge,l.Adsonar,l.Onclicka,l.Adsgram],this._showAdOrders=[l.Monatag,l.AdSurge,l.Adsonar,l.Onclicka,l.Adsgram]}init(t,i){this._adsgramBlockId=i+"";let o=[];if(t&&t.length)for(let i=0;i<t.length;i++)this._initAdTypes.indexOf(t[i])>=0&&o.push(t[i]);o.length>0&&(this._showAdOrders=o),this._initAdsgram(),this._initOnclicka(),this._initMonatag(),this._initAdsonar(),this._initAdSurge()}_initAdsgram(){if(this._adsgramBlockId&&this._showAdOrders.indexOf(l.Adsgram)>=0)try{this.adController=window.Adsgram.init({blockId:this._adsgramBlockId+""}),this.adController.addEventListener("onNonStopShow",this.onAdsgramNonStopShow)}catch(t){console.log(t);let i=t.description?t.description:t.toString();s.instance.post(n.SYSTEM_WARN,{type:"ad",message:"adsgram|init|"+i+"|blockId:"+this._adsgramBlockId}).then((t=>{})).catch((t=>{}))}}_initOnclicka(){try{window.initCdTma&&window.initCdTma({id:"6046939"}).then((t=>{this.onClickAShow=t})).catch((t=>{let i=t.description?t.description:t.toString();s.instance.post(n.SYSTEM_WARN,{type:"ad",message:"onclicka|init|"+i+"|blockId:"+this._adsgramBlockId}).then((t=>{})).catch((t=>{}))}))}catch(t){console.log(t);let i=t.description?t.description:t.toString();s.instance.post(n.SYSTEM_WARN,{type:"ad",message:"onclicka|init|"+i+"|blockId:"+this._adsgramBlockId}).then((t=>{})).catch((t=>{}))}}_initMonatag(){if(window.show_8638756)return;const t=document.createElement("script");t.src="//niphaumeenses.net/vignette.min.js",t.dataset.zone="8638756",t.dataset.sdk="show_8638756",document.body.appendChild(t)}_initAdSurge(){if(window.showAdSurge)return;const t=document.createElement("script");t.src="//cdn.adsurge.tech/sdk.js",t.dataset.surge="0f208ff20fadojcfedec",document.body.appendChild(t)}_initAdsonar(){if(window.Sonar)return;const t=document.createElement("script");t.src="//static.sonartech.io/lib/1.0.0/sonar.js?appId=app_cef4b346",document.body.appendChild(t)}onAdsgramNonStopShow(){console.log("onNonStopShow")}clear(){this.adController&&this.adController.removeEventListener("onNonStopShow",this.onAdsgramNonStopShow)}showGameAd(t,i,o){this.reportAd(t,i),r.isDebug?o(0,this._sign,""):(d.emit(a.SHOW_LOADING),this._showAd(this._showAdOrders,o,""))}showAd(t,i,o){d.emit(a.SHOW_LOADING),s.instance.post(n.AD_REPORT,{type:t,subId:i}).then((t=>{if(0==t.code){let i=t.data.sign;if(r.isDebug)return d.emit(a.HIDE_LOADING),void o(0,i);this._showAd(this._showAdOrders,o,i)}else d.emit(a.HIDE_LOADING),e.instance.showToast(t.msg)}))}reportAd(t,i,o){s.instance.post(n.AD_REPORT,{type:t,subId:i}).then((t=>{0==t.code&&(this._sign=t.data.sign)}))}showSpecailAd(t,i,o,r){d.emit(a.SHOW_LOADING),s.instance.post(n.AD_REPORT,{type:t,subId:i}).then((t=>{if(0==t.code){let i=t.data.sign;this._showAd(o,r,i)}else d.emit(a.HIDE_LOADING),e.instance.showToast(t.msg)}))}_showAd(t,i,o,s,n){if(void 0===s&&(s=0),void 0===n&&(n=""),t.length>s){let n=t[s];n==l.Adsgram?this._showAdsgramAd(t,i,o,s):n==l.Onclicka?this._showOnclickaAd(t,i,o,s):n==l.Adsonar?this._showAdsonarAd(t,i,o,s):n==l.AdsonarReward?this._showAdsonarRewardAd(t,i,o,s):n==l.AdSurge?this._showAdSurgeAd(t,i,o,s):this._showMonatagAd(t,i,o,s)}else d.emit(a.HIDE_LOADING),i(1,o||this._sign),e.instance.showToast(n)}showMonatagAd(t,i,o){d.emit(a.SHOW_LOADING),window.show_8638756?window.show_8638756().then((t=>{setTimeout(function(){o(0)}.bind(this),200)})).catch((t=>{o(-1)})):o(-1)}showPopAd(t,i,o){d.emit(a.SHOW_LOADING),s.instance.post(n.AD_REPORT,{type:t,subId:i}).then((t=>{if(0==t.code){let i=t.data.sign;this.showMonatagAdPop(o,i)}else d.emit(a.HIDE_LOADING),e.instance.showToast(t.msg)}))}showMonatagAdPop(t,i){if(!window.show_8638756)return this.reportError(l.Monatag,"MonatagAd pop is null",0),this._initMonatag(),t(1),void d.emit(a.HIDE_LOADING);window.show_8638756("pop").then((o=>{t(0,i),d.emit(a.HIDE_LOADING)})).catch((i=>{t(1),d.emit(a.HIDE_LOADING),console.log(i)}))}_showMonatagAd(t,i,o,s){if(!window.show_8638756)return this.reportError(l.Monatag,"MonatagAd is null",s),this._showAd(t,i,o,++s,"ad.error"),void this._initMonatag();window.show_8638756().then((t=>{d.emit(a.HIDE_LOADING),setTimeout(function(){i(0,o||this._sign,t)}.bind(this),500)})).catch((n=>{let e=n.description?n.description:n.toString();this.reportError(l.Monatag,e,s),this._showAd(t,i,o,++s,e)}))}_showAdSurgeAd(t,i,o,s){window.showAdSurge?window.showAdSurge().then((t=>{d.emit(a.HIDE_LOADING),setTimeout(function(){i(0,o||this._sign,t)}.bind(this),500)})).catch((n=>{let e=n.description?n.description:n.toString();this.reportError(l.AdSurge,e,s),this._showAd(t,i,o,++s,e)})):this._showAd(t,i,o,++s,"")}_showAdsonarRewardAd(t,i,o,s){if(!window.Sonar)return this.reportError(l.AdsonarReward,"Adsonar is null",s),this._showAd(t,i,o,++s,"ad.error"),void this._initAdsonar();window.Sonar.show({adUnit:"ad1",onShow:()=>{},onReward:t=>{d.emit(a.HIDE_LOADING),setTimeout(function(){i(0,o||this._sign,t)}.bind(this),500)},onClose:()=>{},onError:()=>{}}).then((n=>{if("error"===n.status){let e=n.message;this.reportError(l.AdsonarReward,e,s),this._showAd(t,i,o,++s,e)}})).catch((n=>{let e=n.description?n.description:n.toString();this.reportError(l.AdsonarReward,e,s),this._showAd(t,i,o,++s,e)}))}_showAdsonarAd(t,i,o,s){if(!window.Sonar)return this.reportError(l.Adsonar,"Adsonar is null",s),this._showAd(t,i,o,++s,"ad.error"),void this._initAdsonar();window.Sonar.show({adUnit:"ad2",onShow:()=>{},onClose:t=>{d.emit(a.HIDE_LOADING),setTimeout(function(){i(0,o||this._sign,t)}.bind(this),500)},onError:()=>{console.log("onError")}}).then((n=>{if("error"===n.status){let e=n.message;this.reportError(l.Adsonar,e,s),this._showAd(t,i,o,++s,e)}})).catch((n=>{let e=n.description?n.description:n.toString();this.reportError(l.Adsonar,e,s),this._showAd(t,i,o,++s,e)}))}_showAdsgramAd(t,i,o,s){if(!this.adController)return this.reportError(l.Adsgram,"adController is null",s),void this._showAd(t,i,o,++s,"ad.error");this.adController.show().then((t=>{d.emit(a.HIDE_LOADING),setTimeout(function(){i(0,o||this._sign,t)}.bind(this),500)})).catch((n=>{console.log(n,"error");let e=n.description?n.description:n.toString();this.reportError(l.Adsgram,e,s),this._showAd(t,i,o,++s,e)}))}_showOnclickaAd(t,i,o,s){if(!this.onClickAShow)return this.reportError(l.Onclicka,"onClickAShow is null",s),this._showAd(t,i,o,++s,"ad.error"),void this._initOnclicka();this.onClickAShow().then((()=>{d.emit(a.HIDE_LOADING),setTimeout(function(){i(0,o||this._sign)}.bind(this),500)})).catch((n=>{d.emit(a.HIDE_LOADING),console.log(n,"error");let e=n.description?n.description:n.toString();this.reportError(l.Onclicka,e,s),this._showAd(t,i,o,++s,e)}))}reportError(t,i,o){let e="ad:"+t+"|msg:"+i+"|index:"+o;t==l.Adsgram&&(e+="|blockId:"+this._adsgramBlockId),s.instance.post(n.SYSTEM_WARN,{type:"ad",message:e}).then((t=>{})).catch((t=>{}))}static get instance(){return this._instance||(this._instance=new t),this._instance}})._instance=null,h=c))||h);let l=t("AdPlatform",function(t){return t.Adsgram="adsgram",t.Onclicka="onclicka",t.Monatag="monatag",t.MonatagLink="monataglink",t.Adsonar="adsonar",t.AdSurge="adsurge",t.AdsonarReward="adsonarReward",t}({}));t("AdType",function(t){return t.BATTLE="battle",t.SHOP_BOX="boxShop",t.ENERGY="energy",t.SHOP_DIAMOND="diamondShop",t.SHOP_DAILY="dailyShop",t.SHOP_DAILY_REFRESH="dailyShopRefresh",t.LUCK_SPIN="luckSpin",t.DUNGEON_FIGHTEND_BATTLE="fightendBattle",t.CASHHERO_WEAPONS="cashheroWeaponsRefresh",t.SIGNIN="signin",t.INVEST="invest",t.TASKAD="taskAd",t.TAPAD="tapAd",t.SNIPERAD="sniper",t.EVENT_SIGN="eventSign",t.EVENT_DAILY="eventDaily",t.EQUIPBOX="equipbox",t}({})),t("AdBattleType",function(t){return t[t.REVIVE=0]="REVIVE",t[t.REFRESH_GRID=1]="REFRESH_GRID",t[t.REFRESH_WEAPON=2]="REFRESH_WEAPON",t[t.COIN=3]="COIN",t[t.REFRESH_SKILL=4]="REFRESH_SKILL",t[t.GETALL_SKILL=5]="GETALL_SKILL",t[t.DOUBLE_SPEED=6]="DOUBLE_SPEED",t[t.ADVANCE_WEAPON=7]="ADVANCE_WEAPON",t[t.ADVANCE_GRID=8]="ADVANCE_GRID",t}({}));i._RF.pop()}}}));

System.register("chunks:///_virtual/AdModel.ts",["cc"],(function(E){var _;return{setters:[function(E){_=E.cclegacy}],execute:function(){_._RF.push({},"6f0e2/PnV5G7KCVFTG5r0+O","AdModel",void 0);E("AdGameType",function(E){return E[E.GAME_TYPE_GRID=0]="GAME_TYPE_GRID",E[E.GAME_TYPE_WEAPON=1]="GAME_TYPE_WEAPON",E[E.GAME_TYPE_COIN=2]="GAME_TYPE_COIN",E[E.GAME_TYPE_SPEEDUP=3]="GAME_TYPE_SPEEDUP",E}({}));_._RF.pop()}}}));

System.register("chunks:///_virtual/AdTipsPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./OpenPopupManager.ts","./ResourcesUtil.ts","./GridData.ts","./LanguageManager.ts","./SpriteEx.ts","./PlayerData.ts","./AdManager.ts","./GameData.ts","./AdModel.ts","./GameController.ts","./GameEvent.ts","./EventListener.ts"],(function(t){var e,i,n,o,s,a,c,r,l,p,h,u,d,g,b,m,f,I,_,P,E,A,y,v,w;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,o=t.Label,s=t.Sprite,a=t.Node,c=t._decorator,r=t.Component,l=t.UITransform,p=t.Layout,h=t.instantiate,u=t.UIOpacity},function(t){d=t.Constants},function(t){g=t.OpenPopupManager},function(t){b=t.ResourcesUtil},function(t){m=t.GridData},function(t){f=t.LanguageManager},function(t){I=t.SpriteEx},function(t){_=t.PlayerData},function(t){P=t.AdBattleType},function(t){E=t.GameData},function(t){A=t.AdGameType},function(t){y=t.default},function(t){v=t.GameEvent},function(t){w=t.EventListener}],execute:function(){var L,G,T,C,S,D,B,z,N,F,M,k,O,U,R,W,Y,j,x,H,K;n._RF.push({},"7b6cfGTHlND17wc9mK9ZRk4","AdTipsPopup",void 0);const{ccclass:V,property:X}=c;t("AdTipsPopup",(L=V("AdTipsPopup"),G=X(o),T=X(o),C=X(s),S=X(s),D=X(a),B=X(s),z=X(I),N=X(a),F=X(s),L((O=e((k=class extends r{constructor(){super(...arguments),i(this,"title",O,this),i(this,"desc",U,this),i(this,"icon",R,this),i(this,"gridIcon",W,this),i(this,"gridList",Y,this),i(this,"coinIcon",j,this),i(this,"watchIcon",x,this),i(this,"speedIcon",H,this),i(this,"bubbleIcon",K,this),this._callBack=void 0,this._type=0}show(t,e,i){this._type=t,this._callBack=i,this.icon.node.active=!1,this.coinIcon.node.active=!1,this.gridList.active=!1,this.speedIcon.active=!1,this.bubbleIcon.node.active=!1,_.instance.chapterObj.ticket>0?this.watchIcon.index=1:this.watchIcon.index=0,t==A.GAME_TYPE_WEAPON?this.setWeaponIcon(e):t==A.GAME_TYPE_GRID?this.setGridIcon(e):t==A.GAME_TYPE_COIN?(this.desc.string=f.instance.getLang("game.watchAdGetSilver"),this.coinIcon.node.active=!0,this.icon.node.active=!1):t==A.GAME_TYPE_SPEEDUP&&(this.desc.string=f.instance.getLang("game.watchAdSpeedup"),this.speedIcon.active=!0)}setWeaponIcon(t){let e=t.gridType.split("_"),i=Number(e[1]),n=Number(e[0]),o=t.scale*(3==n?.75:1),s=m.instance.getGridSizeByRowCol(i,n),a=3==n?15:0,c=d.weaponIconPath+t.res+"/spriteFrame";b.geSpriteFrame(c).then((t=>{this.icon.spriteFrame=t,this.icon.node.angle=a,this.icon.node.getComponent(l).setContentSize(s),this.icon.node.setScale(o,o),this.icon.node.active=!0}));let r=[];for(let e=0;e<t.points.length;e++)r.push(t.points[e].join(""));let p=d.gridPath+"bubble_"+r.join("_")+"/spriteFrame";b.geSpriteFrame(p).then((t=>{this.bubbleIcon.spriteFrame=t,this.bubbleIcon.node.angle=a,this.bubbleIcon.node.active=!0,this.bubbleIcon.node.setScale(o,o)})),this.desc.string=f.instance.getLang("game.watchAdGetWeapon")}setGridIcon(t){this.desc.string=f.instance.getLang("game.watchAdGetSlot"),this.gridList.removeAllChildren();let e=t.gridType.split("_"),i=Number(e[1]),n=Number(e[0]),o=m.instance.getGridSizeByRowCol(i,n),s=3==n?15:0,a=.75;Number(n)>=3?a=.5:Number(n)>=2&&(a=.75),this.gridList.angle=s;let c=m.instance.getGridSize();c.width=a*c.width,c.height=a*c.height;let r=d.weaponIconPath+t.res+"/spriteFrame";b.getSpriteFrame(r).then((e=>{this.gridIcon.spriteFrame=e;let i=t.points;this.gridList.getComponent(p).spacingX=m.instance.space*a,this.gridList.getComponent(p).spacingY=m.instance.space*a,this.gridList.getComponent(l).width=o.width*a,this.gridList.getComponent(l).height=o.height*a,this.gridList.getComponent(p).updateLayout(!0);for(let t=0;t<i.length;t++){const e=i[t];for(let t=0;t<e.length;t++){const i=e[t];let n=h(this.gridIcon.node);n.active=!0,n.parent=this.gridList,n.getComponent(l).setContentSize(c),this.icon.node.setScale(I,I),n.getComponent(u).opacity=i?255:0}}this.gridList.active=!0}));let g=[];for(let e=0;e<t.points.length;e++)g.push(t.points[e].join(""));let I=.75*(3==n?.75:1),_=d.gridPath+"bubble_"+g.join("_")+"/spriteFrame";b.geSpriteFrame(_).then((t=>{this.bubbleIcon.spriteFrame=t,this.bubbleIcon.node.active=!0,this.bubbleIcon.node.angle=s,this.bubbleIcon.node.setScale(I,I)}))}onCloseBtn(){this.gridList.removeAllChildren(),this.coinIcon.node.active=!1,this.icon.node.active=!1,this.gridList.active=!1,g.instance.hide(d.PopupUI.AdTipsPopup),y.resume(),this._callBack&&this._callBack(!1)}onWatchBtn(t){let e=P.COIN;if(this._type==A.GAME_TYPE_GRID?e=P.ADVANCE_GRID:this._type==A.GAME_TYPE_WEAPON?e=P.ADVANCE_WEAPON:this._type==A.GAME_TYPE_SPEEDUP&&(e=P.DOUBLE_SPEED),_.instance.chapterObj.ticket>0){if(E.instance.spendTicket(e)){g.instance.hide(d.PopupUI.AdTipsPopup),y.resume();let e=t.target.getWorldPosition();this._callBack&&this._callBack(!0,e),w.emit(v.UPDATE_BATTLE_TICKET)}}else E.instance.watchAd(e,(e=>{if(0==e){g.instance.hide(d.PopupUI.AdTipsPopup),y.resume();let e=t.target.getWorldPosition();this._callBack&&this._callBack(!0,e)}}))}}).prototype,"title",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(k.prototype,"desc",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(k.prototype,"icon",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(k.prototype,"gridIcon",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(k.prototype,"gridList",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(k.prototype,"coinIcon",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(k.prototype,"watchIcon",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(k.prototype,"speedIcon",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(k.prototype,"bubbleIcon",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=k))||M));n._RF.pop()}}}));

System.register("chunks:///_virtual/AniBg.ts",["cc"],(function(t){var e,n,o,s,i,r;return{setters:[function(t){e=t.cclegacy,n=t.Component,o=t.UITransform,s=t.tween,i=t.v3,r=t._decorator}],execute:function(){var c;e._RF.push({},"82da1pt/NBJ85BeRNpJiBJe","AniBg",void 0);const{ccclass:a,property:p}=r;t("AniBg",a("AniBg")(c=class extends n{start(){this.node.getComponent(o).setContentSize(2e3,2e3),s(this.node).set({position:i(0,0,0)}).to(10,{position:i(403,202)}).union().repeatForever().start()}})||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/AnimationUI.ts",["cc"],(function(t){var e,n,o,i,s,a,c,r,l;return{setters:[function(t){e=t.cclegacy,n=t.Component,o=t.Node,i=t.BlockInputEvents,s=t.UITransform,a=t.UIOpacity,c=t.tween,r=t.v3,l=t._decorator}],execute:function(){var d;e._RF.push({},"a05e5ex0PBBGKnHqFKc4eio","AnimationUI",void 0);const{ccclass:p,property:g}=l;t("AnimationUI",p("AnimationUI")(d=class extends n{constructor(){super(...arguments),this._during=.1,this._blocker=null}onLoad(){let t=this.node.getChildByName("blocker");if(t)this._blocker=t;else{let t=new o("blocker");t.addComponent(i),t.addComponent(s),t.parent=this.node,t.getComponent(s).setContentSize(this.node.getComponent(s).contentSize),this._blocker=t}}close(t){this._blocker.active=!0;let e=this.node.getChildByName("Bg"),n=this.node.getChildByName("Content");e.getComponent(a)||e.addComponent(a),c(e.getComponent(a)).to(this._during,{opacity:0},{easing:"backIn"}).start(),c(n).to(this._during,{scale:r(.5,.5,.5)}).call((()=>{this._blocker.active=!1,t&&t()})).start()}open(t){this._blocker.active=!0;let e=this.node.getChildByName("Bg"),n=this.node.getChildByName("Content");e.getComponent(a)?(e.getComponent(a).opacity=0,c(e.getComponent(a)).to(this._during,{opacity:255},{easing:"backOut"}).start()):(e.addComponent(a),e.getComponent(a).opacity=0,c(e.getComponent(a)).to(this._during,{opacity:255},{easing:"backOut"}).start()),n.setScale(.5,.5,.5),c(n).to(this._during,{scale:r(1,1,1)}).call((()=>{this._blocker.active=!1,t&&t()})).start()}})||d);e._RF.pop()}}}));

System.register("chunks:///_virtual/Api.ts",["cc"],(function(e){var _,E;return{setters:[function(e){_=e.cclegacy,E=e._decorator}],execute:function(){var t,T;_._RF.push({},"0907bgJANRBBpK3vHm+NHxo","Api",void 0);const{ccclass:a,property:A}=E;e("Api",a("Api")(((T=class{}).USER_INFO="/user/info",T.USER_PLAYER_INFO="/user/player/info",T.ASSET_BALANCE="/asset/balance",T.USER_GUIDE_STEP="user/guide/step",T.USER_BATTLE_STEP="user/battle/step",T.USER_LOAD_STEP="user/load/step",T.SYSTEM_WARN="/system/warn",T.AUTH_LOGIN="/auth/login",T.EVENT_INFO="/event/info",T.EVENT_NEWER="/event/newer",T.EVENT_QUEST_FINISH="/event/quest/finish",T.EVENT_QUEST_CLAIM="/event/quest/claim",T.EVENT_SIGN_CLAIM="/event/sign/claim",T.EVENT_ACHIEVEMENT_CLAIM="event/achievement/claim",T.EVENT_HERO_INFO="/event/hero/info",T.EVENT_HERO_CLAIM="/event/hero/claim",T.EVENT_DAILY_INFO="/event/daily/info",T.EVENT_DAILY_CLAIM="/event/daily/claim",T.SHOP_INFO="/shop/info",T.SHOP_DAILY_BUY="/shop/buy",T.SHOP_BOX_BUY="/shop/box/buy",T.SHOP_CHEST_BUY="/shop/chest/buy",T.SHOP_GOLD_BUY="/shop/gold/buy",T.SHOP_DIAMOND_PREBUY="/shop/diamond/prebuy",T.SHOP_DIAMOND_BUY="/shop/diamond/buy",T.SHOP_DAILY_REFRESH="/shop/daily/refresh",T.SHOP_ENERGY_BUY="chapter/energy/buy",T.SHOP_HERO_PREBUY="/shop/hero/prebuy",T.PYAMENT_BILL_INFO="payment/bill/info",T.CHAPTER_INFO="chapter/info",T.CHAPTER_CLAIM="chapter/claim",T.CHAPTER_BATTLE_START="chapter/battle/start",T.CHAPTER_BATTLE_REPORT="chapter/battle/report",T.CHAPTER_BATTLE_SETTLE="chapter/battle/settle",T.CHAPTER_BATTLE_REBORN="chapter/battle/reborn",T.CHAPTER_BATTLE_RAID="chapter/battle/raid",T.CHAPTER_BATTLE_REVIVE="chapter/battle/revive",T.CHEST_UNLOCK="chapter/chest/unlock",T.CHEST_OPEN="chapter/chest/open",T.DUNGEON_INFO="dungeon/info",T.DUNGEON_FIGHTEND_START="dungeon/fightend/start",T.DUNGEON_FIGHTEND_SETTLE="dungeon/fightend/settle",T.WEAPON_INFO="weapon/info",T.WEAPON_LEVELUP="weapon/levelup",T.WEAPON_EQUIP="weapon/equip",T.CHAPTER_BATTLE_TICKET="chapter/battle/ticket",T.CHAPTER_BATTLE_AD="chapter/battle/ad",T.HERO_INFO="hero/info",T.HERO_UNLOCK="hero/unlock",T.HERO_LEVELUP="hero/levelup",T.HERO_AWAKE="hero/awake",T.HERO_SET="hero/set",T.HERO_EQUIPMENT_EQUIP="hero/equipment/equip",T.HERO_EQUIPMENT_REMOVE="hero/equipment/remove",T.TOPUP_MONTHLY_PASS_INFO="topup/pass/info",T.TOPUP_MONTHLY_PASS_PREBUY="topup/pass/prebuy",T.TOPUP_MONTHLY_PASS_CLAIM="topup/pass/claim",T.TOPUP_FUND_INFO="topup/fund/info",T.TOPUP_FUND_PREBUY="topup/fund/prebuy",T.TOPUP_FUND_CLAIM="topup/fund/claim",T.TOPUP_FIRST_INFO="topup/first/info",T.TOPUP_FIRST_PREBUY="topup/first/prebuy",T.TOPUP_FIRST_CLAIM="topup/first/claim",T.ITEM_LIST="item/list",T.FRENS_INFO="frens/info",T.FRENS_LIST="frens/list",T.FRENS_INVITEES="/frens/invitees",T.FRENS_REWARD_CLAIM="frens/claim",T.EQUIP_OPEN="equip/open",T.EQUIP_LIST="equip/list",T.EQUIP_ENHANCE="equip/enhance",T.EQUIP_STARUP="equip/starup",T.EQUIP_FORGING="equip/forging",T.AD_REPORT="ad/report",T.WALLET_WITHDRAW="/asset/withdraw",T.WALLET_BILL_LAST="/asset/bill/last",T.WALLET_WITHDRAW_INFO="asset/withdraw/info",T.WALLET_WITHDRAW_BILL="asset/withdraw/bill",T.USER_AVATARS="user/avatars",T.USER_EDIT_AVATAR="user/edit/avatar",T.USER_EDIT_NAME="user/edit/name",T.USER_PROFILE="user/profile",T.USER_SET_COUNTRY="user/set/country",T.LUCKSPIN_INFO="luckSpin/info",T.LUCKSPIN_DRAW="luckSpin/draw",T.MAIL_LIST="mail/list",T.MAIL_READ="mail/read",T.TASK_LIST="task/info",T.TASK_REPORT="task/report",T.TASK_CLAIM="task/claim",T.CHAPTER_RANK="chapter/rank",T.CASHHERO_INFO="cashhero/info",T.CASHHERO_COUNTRY_RANK="cashhero/country/rank",T.CASHHERO_USER_RANK="cashhero/user/rank",T.CASHHERO_REFRESH_WEAPON="cashhero/weapon/refresh",T.CASHHERO_TASK_CLAIM="cashhero/task/claim",T.CASHHERO_START="cashhero/start",T.CASHHERO_SETTLE="cashhero/settle",T.CASHHERO_ISSUE_LAST="cashhero/issue/last",T.CASHHERO_ISSUE_HISTORY="cashhero/issue/history",T.CASHHERO_ISSUE_CLAIM="cashhero/issue/claim",T.CASH_INFO="/cash/info",T.CASH_SWAP="/cash/swap",T.CASH_BILL="/cash/bill",T.TAP_INFO="tap/info",T.TAP_TICKET_AD="tap/ticket/ad",T.TAP_TICKET_BUY="tap/ticket/buy",T.TAP_SETTLE="tap/settle",T.EARN_INFO="earn/info",T.EARN_INVEST="earn/invest",T.EARN_CLAIM="earn/claim",T.EARN_HOSTORY="earn/history",T.EARN_TASK_CLAIM="earn/task/claim",T.SNIPER_INFO="/sniper/info",T.SNIPER_PLAY="/sniper/play",T.SNIPER_UNLOCK="/sniper/unlock",T.SNIPER_SETTLE="/sniper/settle",t=T))||t);_._RF.pop()}}}));

System.register("chunks:///_virtual/AreaItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,i,n,o,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.initializerDefineProperty},function(e){i=e.cclegacy,n=e.Label,o=e._decorator,a=e.Component}],execute:function(){var l,s,p,c,u,b,h,g,m,f,y;i._RF.push({},"284adkGFBVB7KEuWshJZiCb","AreaItem",void 0);const{ccclass:v,property:d}=o;e("AreaItem",(l=v("AreaItem"),s=d(n),p=d(n),c=d(n),u=d(n),l((g=t((h=class extends a{constructor(){super(...arguments),r(this,"rank",g,this),r(this,"province",m,this),r(this,"rate",f,this),r(this,"people",y,this)}init(e){this.rank.string=e.rank.toString(),this.province.string=e.province,this.rate.string=e.rate,this.people.string=e.people.toString()}}).prototype,"rank",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=t(h.prototype,"province",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=t(h.prototype,"rate",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=t(h.prototype,"people",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=h))||b));i._RF.pop()}}}));

System.register("chunks:///_virtual/AudioManager.ts",["cc","./ResourcesUtil.ts","./CfgMgr.ts","./SoundModel.ts","./Configuration.ts","./Constants.ts"],(function(s){var t,e,i,o,u,n,c,a,l,h,r,m;return{setters:[function(s){t=s.cclegacy,e=s.Node,i=s.director,o=s.Button,s.Toggle,u=s.AudioSource,n=s.AudioClip,c=s.assetManager},function(s){a=s.ResourcesUtil},function(s){l=s.CfgMgr},function(s){h=s.SoundCfg},function(s){r=s.Configuration},function(s){m=s.Constants}],execute:function(){t._RF.push({},"05fc0Ua1slE04pfKYS6Neg/","AudioManager",void 0);class d{constructor(){this.dictWeaponSoundIndex={},this.mainVolume=1,this._musicVolume=1,this._soundVolume=1,this._musicSwitch=1,this._soundSwitch=1,this._mapSound=new Map,this._mapMusic=new Map,this._persistRootNode=null,this._musicSource=null,this._curSounds=[]}static get instance(){return this._instance||(this._instance=new d),this._instance}get musicSource(){return this._musicSource}get musicVolume(){return this._musicVolume*this._musicSwitch}set musicVolume(s){this._musicVolume=s,r.instance.setConfigData("musicVolume",s.toFixed(2)),this._setCurMusicVolume()}get soundVolume(){return this._soundVolume*this._soundSwitch}set soundVolume(s){this._soundVolume=s,r.instance.setConfigData("soundVolume",s.toFixed(2)),this._setCurSoundVolume()}init(){if(this._persistRootNode)return;this._persistRootNode=new e("audio"),i.getScene().addChild(this._persistRootNode),i.addPersistRootNode(this._persistRootNode),this.SetButtonSound(),this._musicSwitch=this.getAudioSetting(!0)?1:0,this._soundSwitch=this.getAudioSetting(!1)?1:0;let s=r.instance.getConfigData("musicVolume");this.musicVolume=s&&Number(s)<=1&&Number(s)>=0?Number(s):1;let t=r.instance.getConfigData("soundVolume");this.soundVolume=t&&Number(t)<=1&&Number(t)>=0?Number(t):1}SetButtonSound(){o.prototype.touchBeganClone||(o.prototype.touchBeganClone=o.prototype._onTouchEnded,o.prototype._onTouchEnded=function(s){this.interactable&&this.enabledInHierarchy&&d.instance.playSound(3),this.touchBeganClone(s)})}_setCurMusicVolume(){for(const s of this._mapMusic.values())s.volume=this.musicVolume}_setCurSoundVolume(){for(const s of this._mapSound.values())s.forEach((s=>{s.volume=this.soundVolume}))}getAudioSetting(s){let t;return t=s?r.instance.getConfigData("music"):r.instance.getConfigData("sound"),!t||"true"===t}_getAudioSource(s){let t;return this._mapSound.forEach(((e,i)=>{if(s.name!=i);else if(e.length>0){const s=e.pop();t=s,this._mapSound.set(i,e)}})),t||(t=this._persistRootNode.addComponent(u)),t.clip=s,t.currentTime=0,t}async playMusic(s,t,e){let i=this._geAudioNameById(s);if(console.log(i),!i)return;let o=i.Mp3,c=m.AUDIO_FILE_PATH.MUSIC+o,l=this._musicSource;if(l&&l.stop(),l&&l.clip.name==o);else if(this._mapMusic.get(o))l&&!this._mapMusic.get(l.clip.name)&&this._mapMusic.set(l.clip.name,l),l=this._mapMusic.get(o);else{let s=this._getExistMusicSource(o);if(!s){let t=await a.loadResNew(c,n);s=this._getExistMusicSource(o),s||(s=this._persistRootNode.addComponent(u),s.clip=t,this._mapMusic.set(o,s))}l=s}l.currentTime=0,l.volume=i.Volume*this.musicVolume,l.loop=t,l.playOnAwake=!1,this._musicSource=l,this._musicSwitch&&l.play(),e&&e()}_getExistMusicSource(s){for(let t=this._persistRootNode.components.length-1;t>=0;t--){let e=this._persistRootNode.components[t];if(e instanceof u&&e.clip.name==s)return e}return null}_geAudioNameById(s){return l.getDataById(new h,s)}async playSound(s,t,e){void 0===t&&(t=!1);let i=this._geAudioNameById(s);if(!i)return;let o=i.Mp3,u=m.AUDIO_FILE_PATH.SOUND+o;const c=await a.loadResNew(u,n);let l=this._getAudioSource(c);l.volume=i.Volume*this.soundVolume,l.loop=t,l.playOnAwake=!1,this._curSounds.push(l),this._soundSwitch&&(l.play(),setTimeout((()=>{if(this._curSounds.indexOf(l)>=0&&this._curSounds.splice(this._curSounds.indexOf(l),1),this._mapSound.get(o)){const s=this._mapSound.get(o);s.push(l),this._mapSound.set(o,s)}else this._mapSound.set(o,[l]);e?.()}),1e3*l.duration))}isSoundPlaying(s){return this._curSounds.some((t=>t.clip?.name==s))}isMusicExist(s){return null!=this._mapMusic.get(s)}isMusicPlaying(s){return this._musicSource&&this._musicSource.clip.name==s&&this._musicSource.playing}async preLoadMusics(s){for(let t=0;t<s.length;t++){const e=s[t];let i=this._geAudioNameById(e);if(!i)continue;let o=i.Mp3,c=m.AUDIO_FILE_PATH.MUSIC+o;const l=await a.loadResNew(c,n);if(l){const s=this._persistRootNode.addComponent(u);s.clip=l,this._mapMusic.set(o,s)}}}switchMusic(s){s?this.resumeMusic():this.stopMusic(),r.instance.setConfigData("music",`${s}`)}switchSound(s){s?this.resumeSound():this.pauseSound(),r.instance.setConfigData("sound",`${s}`)}stopAllAudio(){this.stopMusic(),this.pauseSound()}stopMusic(){this._musicSwitch=0,this._musicSource&&this._musicSource.pause()}stopAllMusic(){for(const s of this._mapMusic.values())s&&s.playing&&s.stop()}destroyMusic(){this._musicSource.clip&&(this._mapMusic.has(this._musicSource.clip.name)&&this._mapMusic.delete(this._musicSource.clip.name),this._musicSource&&(this._musicSource.destroy(),this._musicSource=null))}pauseSound(){this._soundSwitch=0,this._curSounds.forEach((s=>{s.playing&&s.pause()}))}stopAllSound(){for(const s of this._mapSound.values())s&&s.length&&s.forEach((s=>{s&&s.playing&&s.stop()}));for(let s=0;s<this._curSounds.length;s++){let t=this._curSounds[s];t&&t.playing&&t.stop()}}stopSoundArr(s){for(const t of this._mapSound.values())t&&t.length&&t.forEach((t=>{t&&t.playing&&-1!=s.indexOf(t.clip.name)&&t.stop()}));for(let t=0;t<this._curSounds.length;t++){let e=this._curSounds[t];e&&e.playing&&-1!=s.indexOf(e.clip.name)&&e.stop()}}stopMusicArr(s){for(let t of this._mapMusic.values())t&&t.playing&&-1!=s.indexOf(t.clip.name)&&t.stop()}resumeAll(){this.resumeMusic(),this.resumeSound()}resumeMusic(){this._musicSwitch=1,this._musicSource&&(this._musicSource.volume=this.musicVolume,this._musicSource.play())}resumeSound(){this._soundSwitch=1,this._curSounds.forEach((s=>{s.state==u.AudioState.PAUSED&&(s.volume=this.soundVolume,s.play())}))}removeMusic(s){for(let t=0;t<s.length;t++){const e=s[t],i=this._mapMusic.get(e);this._mapMusic.delete(e),i&&(c.releaseAsset(i.clip),i.destroy(),this._mapMusic[e]=null)}}removeSound(s){for(let t=0;t<s.length;t++){const e=s[t],i=this._mapSound.get(e);i&&i.length&&(this._mapSound.delete(e),i.forEach((s=>{c.releaseAsset(s.clip),s.destroy()})))}}setMusic(s){this.musicVolume=s;for(let s of this._mapMusic.values())s&&(s.volume=this.musicVolume*this.mainVolume)}setMusicWithoutSave(s){for(let t of this._mapMusic.values())t&&(t.volume=s*this.mainVolume)}setSound(s){this.soundVolume=s;for(const s of this._mapSound.values())s&&s.length&&s.forEach((s=>{s.volume=this.soundVolume*this.mainVolume}));for(let s=0;s<this._curSounds.length;s++){this._curSounds[s].volume=this.soundVolume*this.mainVolume}}}s("AudioManager",d),d._instance=void 0,t._RF.pop()}}}));

System.register("chunks:///_virtual/AvatarItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,i,n,a,o,s,l,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.initializerDefineProperty},function(e){i=e.cclegacy,n=e.Sprite,a=e.sp,o=e._decorator,s=e.Component,l=e.Color,c=e.tween}],execute:function(){var p,u,b,w,h,v,m;i._RF.push({},"0e1dbkCJ69LKJ1sScXmRfw3","AvatarItem",void 0);const{ccclass:d,property:f}=o;e("AvatarItem",(p=d("AvatarItem"),u=f(n),b=f(a.Skeleton),p((v=t((h=class extends s{constructor(){super(...arguments),r(this,"bg",v,this),r(this,"avatar",m,this),this.colors=[new l(20,126,238,255),new l(81,204,255,255),new l(249,157,64,255),new l(88,188,254,255),new l(242,194,56,255),new l(173,116,208,255),new l(112,173,50,255),new l(224,74,84,255)]}init(e){let t=["0","0","0"];""!=e&&(t=e.split("-")),this.bg.color=this.colors[t[1]];let r="skin"+(Number(t[0])+1);c(this.node).delay(.1).call((()=>{this.avatar.setSkin(r)})).start()}}).prototype,"bg",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=t(h.prototype,"avatar",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=h))||w));i._RF.pop()}}}));

System.register("chunks:///_virtual/AvatarPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AvatarSubItem.ts","./OpenPopupManager.ts","./Constants.ts","./UserData.ts","./HttpService.ts","./Api.ts","./EventListener.ts","./GameEvent.ts","./AvatarItem.ts","./CfgMgr.ts","./CountryModel.ts","./ResourcesUtil.ts"],(function(t){var e,i,a,n,r,s,o,l,u,c,h,p,f,m,b,v,g,d,y,C,I,w,A,T,U;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){a=t.cclegacy,n=t.Label,r=t.Node,s=t.Sprite,o=t.Prefab,l=t.Button,u=t._decorator,c=t.Component,h=t.Color,p=t.instantiate},function(t){f=t.AvatarSubItem},function(t){m=t.OpenPopupManager,b=t.LayerType},function(t){v=t.Constants},function(t){g=t.UserData},function(t){d=t.HttpService},function(t){y=t.Api},function(t){C=t.EventListener},function(t){I=t.GameEvent},function(t){w=t.AvatarItem},function(t){A=t.CfgMgr},function(t){T=t.CountryCfg},function(t){U=t.ResourcesUtil}],execute:function(){var N,P,E,_,S,R,z,D,B,F,L,x,M,O,$,k,H,V,Y,G,j,q,J,K,Q,W,X,Z,tt,et,it;a._RF.push({},"e7bb10+DfFHbIStR1PYq0Ik","AvatarPopup",void 0);const{ccclass:at,property:nt}=u;t("AvatarPopup",(N=at("AvatarPopup"),P=nt(w),E=nt(n),_=nt(n),S=nt(r),R=nt(s),z=nt(n),D=nt(r),B=nt(r),F=nt(r),L=nt(r),x=nt(o),M=nt(l),O=nt(r),$=nt(r),N((V=e((H=class extends c{constructor(){super(...arguments),i(this,"avatar",V,this),i(this,"username",Y,this),i(this,"country",G,this),i(this,"countryBtn",j,this),i(this,"flag",q,this),i(this,"tipsText",J,this),i(this,"avatarNode",K,this),i(this,"frameNode",Q,this),i(this,"avatarContent",W,this),i(this,"frameContent",X,this),i(this,"avatarItem",Z,this),i(this,"useBtn",tt,this),i(this,"bgItem",et,this),i(this,"tabs",it,this),this.selectAvatarId=0,this.selectFrame=0,this.tips="",this.bgList=[new h(20,126,238,255),new h(81,204,255,255),new h(249,157,64,255),new h(88,188,254,255),new h(242,194,56,255),new h(173,116,208,255),new h(112,173,50,255),new h(224,74,84,255)]}show(){g.instance.init(),this.setName(),this.avatar.init(g.instance.userInfo.avatar),this.setCountryInfo(g.instance.userInfo.country)}init(){this.avatarContent.removeAllChildren(),g.instance.avatarIds.forEach(((t,e)=>{let i=p(this.avatarItem);i.getComponent(f).init(t,((t,e,i)=>{this.selectAvatarId=t,this.tipsText.node.parent.active=e,this.tipsText.string=i,this.tips=i})),i.parent=this.avatarContent})),0==this.frameContent.children.length&&g.instance.bgIds.forEach(((t,e)=>{let i=p(this.bgItem);i.getChildByName("bg").getComponent(s).color=this.bgList[t],i.on("click",(e=>{this.selectFrame=t,this.selectBg()})),i.parent=this.frameContent})),this.tipsText.node.parent.active=!1}onUpdateCountry(t){var e=A.getDataById(new T,t);e&&this.setCountryInfo(e.code)}setCountryInfo(t){let e=t?t.toLowerCase():"unknown",i=v.flagsPath+e+"/spriteFrame";U.geSpriteFrame(i).then((t=>{this.flag.spriteFrame=t}));var a=A.getCfgDataArray(new T);let n=t||"Unknown";for(let e=0;e<a.length;e++){let i=a[e];t.toLowerCase()==i.code.toLowerCase()&&(n=i.native)}this.country.string=n,this.countryBtn.active=!t}setName(){this.username.string=g.instance.userInfo.name}onTabTouch(t,e){this.avatarNode.active="avatar"==e,this.frameNode.active="frame"==e,this.frameNode.active?this.tipsText.node.parent.active=!1:this.tipsText.node.parent.active=-1==this.selectAvatarId,this.tabs.children[0].getComponent(s).color="avatar"==e?new h(20,126,238,255):new h(17,102,238,255),this.tabs.children[1].getComponent(s).color="frame"==e?new h(20,126,238,255):new h(17,102,238,255)}onCloseTouch(){m.instance.hide(v.PopupUI.AvatarPopup)}selectBg(){this.frameContent.children.forEach(((t,e)=>{t.getChildByName("border").active=e==this.selectFrame}))}onSetCountryBtn(){m.instance.show(v.PopupUI.SetCountryPopup,null,b.TOP,!1)}onUseTouch(){if(this.avatarNode.active&&-1==this.selectAvatarId)return void m.instance.showToast(this.tips);let t=this.selectAvatarId;-1==t&&(t=Number(g.instance.userInfo.avatar.split("-")[0])),d.instance.post(y.USER_EDIT_AVATAR,{avatar:`${t}-${this.selectFrame}-0`}).then((e=>{0==e.code?(g.instance.userInfo.avatar=`${t}-${this.selectFrame}-0`,this.avatar.init(g.instance.userInfo.avatar),C.emit(I.UPDTAE_AVATAR_INFO,`${t}-${this.selectFrame}-0`),m.instance.showToast("Success")):m.instance.showToast(e.msg)}))}editUsername(){m.instance.show(v.PopupUI.EditNamePopup)}onEnable(){C.on(I.INIT_AVATAR_LIST,this.init,this),C.on(I.UPDATE_USER_NAME,this.setName,this),C.on(I.UPDATE_USER_COUNTRY,this.onUpdateCountry,this)}onDisable(){C.off(I.INIT_AVATAR_LIST,this.init,this),C.off(I.UPDATE_USER_NAME,this.setName,this),C.off(I.UPDATE_USER_COUNTRY,this.onUpdateCountry,this)}}).prototype,"avatar",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=e(H.prototype,"username",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=e(H.prototype,"country",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=e(H.prototype,"countryBtn",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=e(H.prototype,"flag",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=e(H.prototype,"tipsText",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=e(H.prototype,"avatarNode",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=e(H.prototype,"frameNode",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=e(H.prototype,"avatarContent",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=e(H.prototype,"frameContent",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=e(H.prototype,"avatarItem",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tt=e(H.prototype,"useBtn",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),et=e(H.prototype,"bgItem",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),it=e(H.prototype,"tabs",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=H))||k));a._RF.pop()}}}));

System.register("chunks:///_virtual/AvatarsModel.ts",["cc"],(function(t){var s;return{setters:[function(t){s=t.cclegacy}],execute:function(){s._RF.push({},"11e77Rf2cBG05+N2CT9/S8E","AvatarsModel",void 0);t("AvatarCfg",class{constructor(){this.ClassName="Avatar",this.Id=void 0,this.type=void 0,this.desc=void 0,this.chapter=void 0}}),s._RF.pop()}}}));

System.register("chunks:///_virtual/AvatarSubItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UserData.ts","./PlayerData.ts","./GameEvent.ts","./EventListener.ts","./LanguageManager.ts"],(function(t){var e,a,i,n,c,r,s,l,o,h,u,p,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.initializerDefineProperty},function(t){i=t.cclegacy,n=t.Node,c=t.sp,r=t._decorator,s=t.Component,l=t.tween},function(t){o=t.UserData},function(t){h=t.PlayerData},function(t){u=t.GameEvent},function(t){p=t.EventListener},function(t){v=t.LanguageManager}],execute:function(){var d,b,A,_,k,f,g,C,I;i._RF.push({},"9d42cZCh49CkqDvN2ID0qQF","AvatarSubItem",void 0);const{ccclass:m,property:y}=r;t("AvatarSubItem",(d=m("AvatarSubItem"),b=y(n),A=y(c.Skeleton),_=y(n),d((g=e((f=class extends s{constructor(){super(...arguments),a(this,"checkedNode",g,this),a(this,"avatar",C,this),a(this,"lock",I,this),this._avatarId=0,this._callback=null,this._chapter=0}init(t,e){this._callback=e,this._avatarId=t;let a=o.instance.getAvatarCfg(t),i=h.instance.chapterObj.chapterId;this._chapter=a.chapter,i>a.chapter?this.lock.active=!1:this.lock.active=!0;let n=Number(o.instance.userInfo.avatar.split("-")[0]);this.checkedNode.active=t==n,l(this.node).delay(.1).call((()=>{this.avatar.setSkin("skin"+(t+1))})).start()}onTapBtn(t){this.checkedNode.active=t,p.emit(u.CANCEL_ACTIVE_AVATAR,this._avatarId);let e=!(h.instance.chapterObj.chapterId>this._chapter),a=v.instance.getLang("game.unlockchapter",[this._chapter]);this._callback&&this._callback(e?-1:this._avatarId,e,a)}onCancelActive(t){this._avatarId!=t&&(this.checkedNode.active=!1)}onEnable(){p.on(u.CANCEL_ACTIVE_AVATAR,this.onCancelActive,this)}onDisable(){p.off(u.CANCEL_ACTIVE_AVATAR,this.onCancelActive,this)}}).prototype,"checkedNode",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=e(f.prototype,"avatar",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=e(f.prototype,"lock",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=f))||k));i._RF.pop()}}}));

System.register("chunks:///_virtual/axios.js",["./cjs-loader.mjs"],(function(e,t){var r;return{setters:[function(e){r=e.default}],execute:function(){let n;e("default",void 0);const o=e("__cjsMetaURL",t.meta.url);r.define(o,(function(t,r,o,i,a){var s,u;s=this,u=function(){function e(e){var r,n;function o(r,n){try{var a=e[r](n),s=a.value,u=s instanceof t;Promise.resolve(u?s.v:s).then((function(t){if(u){var n="return"===r?"return":"next";if(!s.k||t.done)return o(n,t);t=e[n](t).value}i(a.done?"return":"normal",t)}),(function(e){o("throw",e)}))}catch(e){i("throw",e)}}function i(e,t){switch(e){case"return":r.resolve({value:t,done:!0});break;case"throw":r.reject(t);break;default:r.resolve({value:t,done:!1})}(r=r.next)?o(r.key,r.arg):n=null}this._invoke=function(e,t){return new Promise((function(i,a){var s={key:e,arg:t,resolve:i,reject:a,next:null};n?n=n.next=s:(r=n=s,o(e,t))}))},"function"!=typeof e.return&&(this.return=void 0)}function t(e,t){this.v=e,this.k=t}function r(e){var r={},n=!1;function o(r,o){return n=!0,o=new Promise((function(t){t(e[r](o))})),{done:!1,value:new t(o,1)}}return r["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},r.next=function(e){return n?(n=!1,e):o("next",e)},"function"==typeof e.throw&&(r.throw=function(e){if(n)throw n=!1,e;return o("throw",e)}),"function"==typeof e.return&&(r.return=function(e){return n?(n=!1,e):o("return",e)}),r}function n(e){var t,r,n,i=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);i--;){if(r&&null!=(t=e[r]))return t.call(e);if(n&&null!=(t=e[n]))return new o(t.call(e));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function o(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return(o=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new o(e)}function i(e){return new t(e,0)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(){u=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),s=new P(n||[]);return o(a,"_invoke",{value:T(e,r,s)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",d="executing",y="completed",v={};function m(){}function b(){}function g(){}var w={};f(w,a,(function(){return this}));var E=Object.getPrototypeOf,O=E&&E(E(L([])));O&&O!==r&&n.call(O,a)&&(w=O);var S=g.prototype=m.prototype=Object.create(w);function x(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function R(e,t){function r(o,i,a,s){var u=h(e[o],e,i);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(f).then((function(e){c.value=e,a(c)}),(function(e){return r("throw",e,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function T(t,r,n){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=j(s,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var c=h(t,r,n);if("normal"===c.type){if(o=n.done?y:"suspendedYield",c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=h(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function L(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(typeof t+" is not iterable")}return b.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:b,configurable:!0}),b.displayName=f(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,f(e,c,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},x(R.prototype),f(R.prototype,s,(function(){return this})),t.AsyncIterator=R,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new R(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(S),f(S,c,"Generator"),f(S,a,(function(){return this})),f(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function c(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function h(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){l(i,n,o,a,s,"next",e)}function s(e){l(i,n,o,a,s,"throw",e)}a(void 0)}))}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,c(n.key),n)}}function y(e,t,r){return t&&d(e.prototype,t),r&&d(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e,t,r){return(t=c(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t){return b(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||w(e,t)||O()}function b(e){if(Array.isArray(e))return e}function g(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function w(e,t){if(e){if("string"==typeof e)return E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(e,t):void 0}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function O(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function S(e,t){return function(){return e.apply(t,arguments)}}e.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},e.prototype.next=function(e){return this._invoke("next",e)},e.prototype.throw=function(e){return this._invoke("throw",e)},e.prototype.return=function(e){return this._invoke("return",e)};var x,R=Object.prototype.toString,T=Object.getPrototypeOf,j=(x=Object.create(null),function(e){var t=R.call(e);return x[t]||(x[t]=t.slice(8,-1).toLowerCase())}),k=function(e){return e=e.toLowerCase(),function(t){return j(t)===e}},A=function(e){return function(t){return f(t)===e}},P=Array.isArray,L=A("undefined"),_=k("ArrayBuffer"),N=A("string"),C=A("function"),F=A("number"),U=function(e){return null!==e&&"object"===f(e)},D=function(e){if("object"!==j(e))return!1;var t=T(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},B=k("Date"),I=k("File"),q=k("Blob"),M=k("FileList"),z=k("URLSearchParams"),H=m(["ReadableStream","Request","Response","Headers"].map(k),4),J=H[0],W=H[1],G=H[2],K=H[3];function V(e,t){var r,n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=o.allOwnKeys,a=void 0!==i&&i;if(null!=e)if("object"!==f(e)&&(e=[e]),P(e))for(r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else{var s,u=a?Object.getOwnPropertyNames(e):Object.keys(e),c=u.length;for(r=0;r<c;r++)s=u[r],t.call(null,e[s],s,e)}}function X(e,t){t=t.toLowerCase();for(var r,n=Object.keys(e),o=n.length;o-- >0;)if(t===(r=n[o]).toLowerCase())return r;return null}var $,Y="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,Q=function(e){return!L(e)&&e!==Y},Z=($="undefined"!=typeof Uint8Array&&T(Uint8Array),function(e){return $&&e instanceof $}),ee=k("HTMLFormElement"),te=function(e){var t=Object.prototype.hasOwnProperty;return function(e,r){return t.call(e,r)}}(),re=k("RegExp"),ne=function(e,t){var r=Object.getOwnPropertyDescriptors(e),n={};V(r,(function(r,o){var i;!1!==(i=t(r,o,e))&&(n[o]=i||r)})),Object.defineProperties(e,n)},oe="abcdefghijklmnopqrstuvwxyz",ie="0123456789",ae={DIGIT:ie,ALPHA:oe,ALPHA_DIGIT:oe+oe.toUpperCase()+ie},se=k("AsyncFunction"),ue={isArray:P,isArrayBuffer:_,isBuffer:function(e){return null!==e&&!L(e)&&null!==e.constructor&&!L(e.constructor)&&C(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:function(e){var t;return e&&("function"==typeof FormData&&e instanceof FormData||C(e.append)&&("formdata"===(t=j(e))||"object"===t&&C(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&_(e.buffer)},isString:N,isNumber:F,isBoolean:function(e){return!0===e||!1===e},isObject:U,isPlainObject:D,isReadableStream:J,isRequest:W,isResponse:G,isHeaders:K,isUndefined:L,isDate:B,isFile:I,isBlob:q,isRegExp:re,isFunction:C,isStream:function(e){return U(e)&&C(e.pipe)},isURLSearchParams:z,isTypedArray:Z,isFileList:M,forEach:V,merge:function e(){for(var t=Q(this)&&this||{},r=t.caseless,n={},o=function(t,o){var i=r&&X(n,o)||o;D(n[i])&&D(t)?n[i]=e(n[i],t):D(t)?n[i]=e({},t):P(t)?n[i]=t.slice():n[i]=t},i=0,a=arguments.length;i<a;i++)arguments[i]&&V(arguments[i],o);return n},extend:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=n.allOwnKeys;return V(t,(function(t,n){r&&C(t)?e[n]=S(t,r):e[n]=t}),{allOwnKeys:o}),e},trim:function(e){return e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,r,n){e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:function(e,t,r,n){var o,i,a,s={};if(t=t||{},null==e)return t;do{for(i=(o=Object.getOwnPropertyNames(e)).length;i-- >0;)a=o[i],n&&!n(a,e,t)||s[a]||(t[a]=e[a],s[a]=!0);e=!1!==r&&T(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:j,kindOfTest:k,endsWith:function(e,t,r){e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;var n=e.indexOf(t,r);return-1!==n&&n===r},toArray:function(e){if(!e)return null;if(P(e))return e;var t=e.length;if(!F(t))return null;for(var r=new Array(t);t-- >0;)r[t]=e[t];return r},forEachEntry:function(e,t){for(var r,n=(e&&e[Symbol.iterator]).call(e);(r=n.next())&&!r.done;){var o=r.value;t.call(e,o[0],o[1])}},matchAll:function(e,t){for(var r,n=[];null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm:ee,hasOwnProperty:te,hasOwnProp:te,reduceDescriptors:ne,freezeMethods:function(e){ne(e,(function(t,r){if(C(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;var n=e[r];C(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=function(){throw Error("Can not rewrite read-only method '"+r+"'")}))}))},toObjectSet:function(e,t){var r={},n=function(e){e.forEach((function(e){r[e]=!0}))};return P(e)?n(e):n(String(e).split(t)),r},toCamelCase:function(e){return e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,r){return t.toUpperCase()+r}))},noop:function(){},toFiniteNumber:function(e,t){return null!=e&&Number.isFinite(e=+e)?e:t},findKey:X,global:Y,isContextDefined:Q,ALPHABET:ae,generateString:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ae.ALPHA_DIGIT,r="",n=t.length;e--;)r+=t[Math.random()*n|0];return r},isSpecCompliantForm:function(e){return!!(e&&C(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:function(e){var t=new Array(10);return function e(r,n){if(U(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[n]=r;var o=P(r)?[]:{};return V(r,(function(t,r){var i=e(t,n+1);!L(i)&&(o[r]=i)})),t[n]=void 0,o}}return r}(e,0)},isAsyncFn:se,isThenable:function(e){return e&&(U(e)||C(e))&&C(e.then)&&C(e.catch)}};function ce(e,t,r,n,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),o&&(this.response=o)}ue.inherits(ce,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ue.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var fe=ce.prototype,le={};function he(e){return ue.isPlainObject(e)||ue.isArray(e)}function pe(e){return ue.endsWith(e,"[]")?e.slice(0,-2):e}function de(e,t,r){return e?e.concat(t).map((function(e,t){return e=pe(e),!r&&t?"["+e+"]":e})).join(r?".":""):t}["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((function(e){le[e]={value:e}})),Object.defineProperties(ce,le),Object.defineProperty(fe,"isAxiosError",{value:!0}),ce.from=function(e,t,r,n,o,i){var a=Object.create(fe);return ue.toFlatObject(e,a,(function(e){return e!==Error.prototype}),(function(e){return"isAxiosError"!==e})),ce.call(a,e.message,t,r,n,o),a.cause=e,a.name=e.name,i&&Object.assign(a,i),a};var ye=ue.toFlatObject(ue,{},null,(function(e){return/^is[A-Z]/.test(e)}));function ve(e,t,r){if(!ue.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;var n=(r=ue.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!ue.isUndefined(t[e])}))).metaTokens,o=r.visitor||c,i=r.dots,a=r.indexes,s=(r.Blob||"undefined"!=typeof Blob&&Blob)&&ue.isSpecCompliantForm(t);if(!ue.isFunction(o))throw new TypeError("visitor must be a function");function u(e){if(null===e)return"";if(ue.isDate(e))return e.toISOString();if(!s&&ue.isBlob(e))throw new ce("Blob is not supported. Use a Buffer instead.");return ue.isArrayBuffer(e)||ue.isTypedArray(e)?s&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,r,o){var s=e;if(e&&!o&&"object"===f(e))if(ue.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else if(ue.isArray(e)&&function(e){return ue.isArray(e)&&!e.some(he)}(e)||(ue.isFileList(e)||ue.endsWith(r,"[]"))&&(s=ue.toArray(e)))return r=pe(r),s.forEach((function(e,n){!ue.isUndefined(e)&&null!==e&&t.append(!0===a?de([r],n,i):null===a?r:r+"[]",u(e))})),!1;return!!he(e)||(t.append(de(o,r,i),u(e)),!1)}var l=[],h=Object.assign(ye,{defaultVisitor:c,convertValue:u,isVisitable:he});if(!ue.isObject(e))throw new TypeError("data must be an object");return function e(r,n){if(!ue.isUndefined(r)){if(-1!==l.indexOf(r))throw Error("Circular reference detected in "+n.join("."));l.push(r),ue.forEach(r,(function(r,i){!0===(!(ue.isUndefined(r)||null===r)&&o.call(t,r,ue.isString(i)?i.trim():i,n,h))&&e(r,n?n.concat(i):[i])})),l.pop()}}(e),t}function me(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function be(e,t){this._pairs=[],e&&ve(e,this,t)}var ge=be.prototype;function we(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ee(e,t,r){if(!t)return e;var n,o=r&&r.encode||we,i=r&&r.serialize;if(n=i?i(t,r):ue.isURLSearchParams(t)?t.toString():new be(t,r).toString(o)){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e}ge.append=function(e,t){this._pairs.push([e,t])},ge.toString=function(e){var t=e?function(t){return e.call(this,t,me)}:me;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var Oe,Se=function(){function e(){p(this,e),this.handlers=[]}return y(e,[{key:"use",value:function(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}},{key:"eject",value:function(e){this.handlers[e]&&(this.handlers[e]=null)}},{key:"clear",value:function(){this.handlers&&(this.handlers=[])}},{key:"forEach",value:function(e){ue.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}]),e}(),xe={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Re={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:be,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Te="undefined"!=typeof window&&"undefined"!=typeof document,je=(Oe="undefined"!=typeof navigator&&navigator.product,Te&&["ReactNative","NativeScript","NS"].indexOf(Oe)<0),ke="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,Ae=Te&&window.location.href||"http://localhost",Pe=s(s({},Object.freeze({__proto__:null,hasBrowserEnv:Te,hasStandardBrowserWebWorkerEnv:ke,hasStandardBrowserEnv:je,origin:Ae})),Re);function Le(e){function t(e,r,n,o){var i=e[o++];if("__proto__"===i)return!0;var a=Number.isFinite(+i),s=o>=e.length;return i=!i&&ue.isArray(n)?n.length:i,s?(ue.hasOwnProp(n,i)?n[i]=[n[i],r]:n[i]=r,!a):(n[i]&&ue.isObject(n[i])||(n[i]=[]),t(e,r,n[i],o)&&ue.isArray(n[i])&&(n[i]=function(e){var t,r,n={},o=Object.keys(e),i=o.length;for(t=0;t<i;t++)n[r=o[t]]=e[r];return n}(n[i])),!a)}if(ue.isFormData(e)&&ue.isFunction(e.entries)){var r={};return ue.forEachEntry(e,(function(e,n){t(function(e){return ue.matchAll(/\w+|\[(\w*)]/g,e).map((function(e){return"[]"===e[0]?"":e[1]||e[0]}))}(e),n,r,0)})),r}return null}var _e={transitional:xe,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){var r,n=t.getContentType()||"",o=n.indexOf("application/json")>-1,i=ue.isObject(e);if(i&&ue.isHTMLForm(e)&&(e=new FormData(e)),ue.isFormData(e))return o?JSON.stringify(Le(e)):e;if(ue.isArrayBuffer(e)||ue.isBuffer(e)||ue.isStream(e)||ue.isFile(e)||ue.isBlob(e)||ue.isReadableStream(e))return e;if(ue.isArrayBufferView(e))return e.buffer;if(ue.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return ve(e,new Pe.classes.URLSearchParams,Object.assign({visitor:function(e,t,r,n){return Pe.isNode&&ue.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((r=ue.isFileList(e))||n.indexOf("multipart/form-data")>-1){var a=this.env&&this.env.FormData;return ve(r?{"files[]":e}:e,a&&new a,this.formSerializer)}}return i||o?(t.setContentType("application/json",!1),function(e,t,r){if(ue.isString(e))try{return(0,JSON.parse)(e),ue.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||_e.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(ue.isResponse(e)||ue.isReadableStream(e))return e;if(e&&ue.isString(e)&&(r&&!this.responseType||n)){var o=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(e){if(o){if("SyntaxError"===e.name)throw ce.from(e,ce.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Pe.classes.FormData,Blob:Pe.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ue.forEach(["delete","get","head","post","put","patch"],(function(e){_e.headers[e]={}}));var Ne=_e,Ce=ue.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Fe=Symbol("internals");function Ue(e){return e&&String(e).trim().toLowerCase()}function De(e){return!1===e||null==e?e:ue.isArray(e)?e.map(De):String(e)}function Be(e,t,r,n,o){return ue.isFunction(n)?n.call(this,t,r):(o&&(t=r),ue.isString(t)?ue.isString(n)?-1!==t.indexOf(n):ue.isRegExp(n)?n.test(t):void 0:void 0)}var Ie=function(e,t){function r(e){p(this,r),e&&this.set(e)}return y(r,[{key:"set",value:function(e,t,r){var n=this;function o(e,t,r){var o=Ue(t);if(!o)throw new Error("header name must be a non-empty string");var i=ue.findKey(n,o);(!i||void 0===n[i]||!0===r||void 0===r&&!1!==n[i])&&(n[i||t]=De(e))}var i=function(e,t){return ue.forEach(e,(function(e,r){return o(e,r,t)}))};if(ue.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(ue.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))i(function(e){var t,r,n,o={};return e&&e.split("\n").forEach((function(e){n=e.indexOf(":"),t=e.substring(0,n).trim().toLowerCase(),r=e.substring(n+1).trim(),!t||o[t]&&Ce[t]||("set-cookie"===t?o[t]?o[t].push(r):o[t]=[r]:o[t]=o[t]?o[t]+", "+r:r)})),o}(e),t);else if(ue.isHeaders(e)){var a,s=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=w(e))){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}(e.entries());try{for(s.s();!(a=s.n()).done;){var u=m(a.value,2),c=u[0];o(u[1],c,r)}}catch(e){s.e(e)}finally{s.f()}}else null!=e&&o(t,e,r);return this}},{key:"get",value:function(e,t){if(e=Ue(e)){var r=ue.findKey(this,e);if(r){var n=this[r];if(!t)return n;if(!0===t)return function(e){for(var t,r=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;t=n.exec(e);)r[t[1]]=t[2];return r}(n);if(ue.isFunction(t))return t.call(this,n,r);if(ue.isRegExp(t))return t.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}},{key:"has",value:function(e,t){if(e=Ue(e)){var r=ue.findKey(this,e);return!(!r||void 0===this[r]||t&&!Be(0,this[r],r,t))}return!1}},{key:"delete",value:function(e,t){var r=this,n=!1;function o(e){if(e=Ue(e)){var o=ue.findKey(r,e);!o||t&&!Be(0,r[o],o,t)||(delete r[o],n=!0)}}return ue.isArray(e)?e.forEach(o):o(e),n}},{key:"clear",value:function(e){for(var t=Object.keys(this),r=t.length,n=!1;r--;){var o=t[r];e&&!Be(0,this[o],o,e,!0)||(delete this[o],n=!0)}return n}},{key:"normalize",value:function(e){var t=this,r={};return ue.forEach(this,(function(n,o){var i=ue.findKey(r,o);if(i)return t[i]=De(n),void delete t[o];var a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(function(e,t,r){return t.toUpperCase()+r}))}(o):String(o).trim();a!==o&&delete t[o],t[a]=De(n),r[a]=!0})),this}},{key:"concat",value:function(){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=this.constructor).concat.apply(e,[this].concat(r))}},{key:"toJSON",value:function(e){var t=Object.create(null);return ue.forEach(this,(function(r,n){null!=r&&!1!==r&&(t[n]=e&&ue.isArray(r)?r.join(", "):r)})),t}},{key:Symbol.iterator,value:function(){return Object.entries(this.toJSON())[Symbol.iterator]()}},{key:"toString",value:function(){return Object.entries(this.toJSON()).map((function(e){var t=m(e,2);return t[0]+": "+t[1]})).join("\n")}},{key:Symbol.toStringTag,get:function(){return"AxiosHeaders"}}],[{key:"from",value:function(e){return e instanceof this?e:new this(e)}},{key:"concat",value:function(e){for(var t=new this(e),r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return n.forEach((function(e){return t.set(e)})),t}},{key:"accessor",value:function(e){var t=(this[Fe]=this[Fe]={accessors:{}}).accessors,r=this.prototype;function n(e){var n=Ue(e);t[n]||(function(e,t){var r=ue.toCamelCase(" "+t);["get","set","has"].forEach((function(n){Object.defineProperty(e,n+r,{value:function(e,r,o){return this[n].call(this,t,e,r,o)},configurable:!0})}))}(r,e),t[n]=!0)}return ue.isArray(e)?e.forEach(n):n(e),this}}]),r}();Ie.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),ue.reduceDescriptors(Ie.prototype,(function(e,t){var r=e.value,n=t[0].toUpperCase()+t.slice(1);return{get:function(){return r},set:function(e){this[n]=e}}})),ue.freezeMethods(Ie);var qe=Ie;function Me(e,t){var r=this||Ne,n=t||r,o=qe.from(n.headers),i=n.data;return ue.forEach(e,(function(e){i=e.call(r,i,o.normalize(),t?t.status:void 0)})),o.normalize(),i}function ze(e){return!(!e||!e.__CANCEL__)}function He(e,t,r){ce.call(this,null==e?"canceled":e,ce.ERR_CANCELED,t,r),this.name="CanceledError"}function Je(e,t,r){var n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(new ce("Request failed with status code "+r.status,[ce.ERR_BAD_REQUEST,ce.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}function We(e,t){e=e||10;var r,n=new Array(e),o=new Array(e),i=0,a=0;return t=void 0!==t?t:1e3,function(s){var u=Date.now(),c=o[a];r||(r=u),n[i]=s,o[i]=u;for(var f=a,l=0;f!==i;)l+=n[f++],f%=e;if((i=(i+1)%e)===a&&(a=(a+1)%e),!(u-r<t)){var h=c&&u-c;return h?Math.round(1e3*l/h):void 0}}}function Ge(e,t){var r=0,n=1e3/t,o=null;return function(){var t=arguments,i=!0===this,a=Date.now();if(i||a-r>n)return o&&(clearTimeout(o),o=null),r=a,e.apply(null,arguments);o||(o=setTimeout((function(){return o=null,r=Date.now(),e.apply(null,t)}),n-(a-r)))}}ue.inherits(He,ce,{__CANCEL__:!0});var Ke=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,n=0,o=We(50,250);return Ge((function(r){var i=r.loaded,a=r.lengthComputable?r.total:void 0,s=i-n,u=o(s);n=i;var c={loaded:i,total:a,progress:a?i/a:void 0,bytes:s,rate:u||void 0,estimated:u&&a&&i<=a?(a-i)/u:void 0,event:r,lengthComputable:null!=a};c[t?"download":"upload"]=!0,e(c)}),r)},Ve=Pe.hasStandardBrowserEnv?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function n(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=n(window.location.href),function(t){var r=ue.isString(t)?n(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0},Xe=Pe.hasStandardBrowserEnv?{write:function(e,t,r,n,o,i){var a=[e+"="+encodeURIComponent(t)];ue.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),ue.isString(n)&&a.push("path="+n),ue.isString(o)&&a.push("domain="+o),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function $e(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}var Ye=function(e){return e instanceof qe?s({},e):e};function Qe(e,t){t=t||{};var r={};function n(e,t,r){return ue.isPlainObject(e)&&ue.isPlainObject(t)?ue.merge.call({caseless:r},e,t):ue.isPlainObject(t)?ue.merge({},t):ue.isArray(t)?t.slice():t}function o(e,t,r){return ue.isUndefined(t)?ue.isUndefined(e)?void 0:n(void 0,e,r):n(e,t,r)}function i(e,t){if(!ue.isUndefined(t))return n(void 0,t)}function a(e,t){return ue.isUndefined(t)?ue.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function s(r,o,i){return i in t?n(r,o):i in e?n(void 0,r):void 0}var u={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:function(e,t){return o(Ye(e),Ye(t),!0)}};return ue.forEach(Object.keys(Object.assign({},e,t)),(function(n){var i=u[n]||o,a=i(e[n],t[n],n);ue.isUndefined(a)&&i!==s||(r[n]=a)})),r}var Ze,et,tt,rt,nt=function(e){var t,r,n=Qe({},e),o=n.data,i=n.withXSRFToken,a=n.xsrfHeaderName,s=n.xsrfCookieName,u=n.headers,c=n.auth;if(n.headers=u=qe.from(u),n.url=Ee($e(n.baseURL,n.url),e.params,e.paramsSerializer),c&&u.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),ue.isFormData(o))if(Pe.hasStandardBrowserEnv||Pe.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if(!1!==(t=u.getContentType())){var f=b(r=t?t.split(";").map((function(e){return e.trim()})).filter(Boolean):[])||g(r)||w(r)||O(),l=f[0],h=f.slice(1);u.setContentType([l||"multipart/form-data"].concat(function(e){return function(e){if(Array.isArray(e))return E(e)}(e)||g(e)||w(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(h)).join("; "))}if(Pe.hasStandardBrowserEnv&&(i&&ue.isFunction(i)&&(i=i(n)),i||!1!==i&&Ve(n.url))){var p=a&&s&&Xe.read(s);p&&u.set(a,p)}return n},ot="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,r){var n,o=nt(e),i=o.data,a=qe.from(o.headers).normalize(),s=o.responseType;function u(){o.cancelToken&&o.cancelToken.unsubscribe(n),o.signal&&o.signal.removeEventListener("abort",n)}var c=new XMLHttpRequest;function f(){if(c){var n=qe.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders());Je((function(e){t(e),u()}),(function(e){r(e),u()}),{data:s&&"text"!==s&&"json"!==s?c.response:c.responseText,status:c.status,statusText:c.statusText,headers:n,config:e,request:c}),c=null}}c.open(o.method.toUpperCase(),o.url,!0),c.timeout=o.timeout,"onloadend"in c?c.onloadend=f:c.onreadystatechange=function(){c&&4===c.readyState&&(0!==c.status||c.responseURL&&0===c.responseURL.indexOf("file:"))&&setTimeout(f)},c.onabort=function(){c&&(r(new ce("Request aborted",ce.ECONNABORTED,o,c)),c=null)},c.onerror=function(){r(new ce("Network Error",ce.ERR_NETWORK,o,c)),c=null},c.ontimeout=function(){var e=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded",t=o.transitional||xe;o.timeoutErrorMessage&&(e=o.timeoutErrorMessage),r(new ce(e,t.clarifyTimeoutError?ce.ETIMEDOUT:ce.ECONNABORTED,o,c)),c=null},void 0===i&&a.setContentType(null),"setRequestHeader"in c&&ue.forEach(a.toJSON(),(function(e,t){c.setRequestHeader(t,e)})),ue.isUndefined(o.withCredentials)||(c.withCredentials=!!o.withCredentials),s&&"json"!==s&&(c.responseType=o.responseType),"function"==typeof o.onDownloadProgress&&c.addEventListener("progress",Ke(o.onDownloadProgress,!0)),"function"==typeof o.onUploadProgress&&c.upload&&c.upload.addEventListener("progress",Ke(o.onUploadProgress)),(o.cancelToken||o.signal)&&(n=function(t){c&&(r(!t||t.type?new He(null,e,c):t),c.abort(),c=null)},o.cancelToken&&o.cancelToken.subscribe(n),o.signal&&(o.signal.aborted?n():o.signal.addEventListener("abort",n)));var l,h,p=(l=o.url,(h=/^([-+\w]{1,25})(:?\/\/|:)/.exec(l))&&h[1]||"");p&&-1===Pe.protocols.indexOf(p)?r(new ce("Unsupported protocol "+p+":",ce.ERR_BAD_REQUEST,e)):c.send(i||null)}))},it=function(e,t){var r,n=new AbortController,o=function(e){if(!r){r=!0,a();var t=e instanceof Error?e:this.reason;n.abort(t instanceof ce?t:new He(t instanceof Error?t.message:t))}},i=t&&setTimeout((function(){o(new ce("timeout ".concat(t," of ms exceeded"),ce.ETIMEDOUT))}),t),a=function(){e&&(i&&clearTimeout(i),i=null,e.forEach((function(e){e&&(e.removeEventListener?e.removeEventListener("abort",o):e.unsubscribe(o))})),e=null)};e.forEach((function(e){return e&&e.addEventListener&&e.addEventListener("abort",o)}));var s=n.signal;return s.unsubscribe=a,[s,function(){i&&clearTimeout(i),i=null}]},at=u().mark((function e(t,r){var n,o,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.byteLength,r&&!(n<r)){e.next=5;break}return e.next=4,t;case 4:return e.abrupt("return");case 5:o=0;case 6:if(!(o<n)){e.next=13;break}return i=o+r,e.next=10,t.slice(o,i);case 10:o=i,e.next=6;break;case 13:case"end":return e.stop()}}),e)})),st=function(){var t,o=(t=u().mark((function e(t,o,a){var s,c,f,l,h,p;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=!1,c=!1,e.prev=2,l=n(t);case 4:return e.next=6,i(l.next());case 6:if(!(s=!(h=e.sent).done)){e.next=27;break}if(p=h.value,e.t0=r,e.t1=n,e.t2=at,!ArrayBuffer.isView(p)){e.next=15;break}e.t3=p,e.next=18;break;case 15:return e.next=17,i(a(String(p)));case 17:e.t3=e.sent;case 18:return e.t4=e.t3,e.t5=o,e.t6=(0,e.t2)(e.t4,e.t5),e.t7=(0,e.t1)(e.t6),e.t8=i,e.delegateYield((0,e.t0)(e.t7,e.t8),"t9",24);case 24:s=!1,e.next=4;break;case 27:e.next=33;break;case 29:e.prev=29,e.t10=e.catch(2),c=!0,f=e.t10;case 33:if(e.prev=33,e.prev=34,!s||null==l.return){e.next=38;break}return e.next=38,i(l.return());case 38:if(e.prev=38,!c){e.next=41;break}throw f;case 41:return e.finish(38);case 42:return e.finish(33);case 43:case"end":return e.stop()}}),e,null,[[2,29,33,43],[34,,38,42]])})),function(){return new e(t.apply(this,arguments))});return function(e,t,r){return o.apply(this,arguments)}}(),ut=function(e,t,r,n,o){var i=st(e,t,o),a=0;return new ReadableStream({type:"bytes",pull:function(e){return h(u().mark((function t(){var o,s,c,f;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.next();case 2:if(o=t.sent,s=o.done,c=o.value,!s){t.next=9;break}return e.close(),n(),t.abrupt("return");case 9:f=c.byteLength,r&&r(a+=f),e.enqueue(new Uint8Array(c));case 12:case"end":return t.stop()}}),t)})))()},cancel:function(e){return n(e),i.return()}},{highWaterMark:2})},ct=function(e,t){var r=null!=e;return function(n){return setTimeout((function(){return t({lengthComputable:r,total:e,loaded:n})}))}},ft="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,lt=ft&&"function"==typeof ReadableStream,ht=ft&&("function"==typeof TextEncoder?(Ze=new TextEncoder,function(e){return Ze.encode(e)}):function(){var e=h(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Uint8Array,e.next=3,new Response(t).arrayBuffer();case 3:return e.t1=e.sent,e.abrupt("return",new e.t0(e.t1));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),pt=lt&&(et=!1,tt=new Request(Pe.origin,{body:new ReadableStream,method:"POST",get duplex(){return et=!0,"half"}}).headers.has("Content-Type"),et&&!tt),dt=lt&&!!function(){try{return ue.isReadableStream(new Response("").body)}catch(e){}}(),yt={stream:dt&&function(e){return e.body}};ft&&(rt=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((function(e){!yt[e]&&(yt[e]=ue.isFunction(rt[e])?function(t){return t[e]()}:function(t,r){throw new ce("Response type '".concat(e,"' is not supported"),ce.ERR_NOT_SUPPORT,r)})})));var vt=function(){var e=h(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return",0);case 2:if(!ue.isBlob(t)){e.next=4;break}return e.abrupt("return",t.size);case 4:if(!ue.isSpecCompliantForm(t)){e.next=8;break}return e.next=7,new Request(t).arrayBuffer();case 7:case 14:return e.abrupt("return",e.sent.byteLength);case 8:if(!ue.isArrayBufferView(t)){e.next=10;break}return e.abrupt("return",t.byteLength);case 10:if(ue.isURLSearchParams(t)&&(t+=""),!ue.isString(t)){e.next=15;break}return e.next=14,ht(t);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),mt=function(){var e=h(u().mark((function e(t,r){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ue.toFiniteNumber(t.getContentLength()),e.abrupt("return",null==n?vt(r):n);case 2:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),bt={http:null,xhr:ot,fetch:ft&&function(){var e=h(u().mark((function e(t){var r,n,o,i,a,c,f,l,h,p,d,y,v,b,g,w,E,O,S,x,R,T,j,k,A,P,L,_,N;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=nt(t),n=r.url,o=r.method,i=r.data,a=r.signal,c=r.cancelToken,f=r.timeout,l=r.onDownloadProgress,h=r.onUploadProgress,p=r.responseType,d=r.headers,y=r.withCredentials,v=void 0===y?"same-origin":y,b=r.fetchOptions,p=p?(p+"").toLowerCase():"text",g=a||c||f?it([a,c],f):[],w=m(g,2),E=w[0],O=w[1],R=function(){!S&&setTimeout((function(){E&&E.unsubscribe()})),S=!0},e.prev=4,e.t0=h&&pt&&"get"!==o&&"head"!==o,!e.t0){e.next=11;break}return e.next=9,mt(d,i);case 9:e.t1=T=e.sent,e.t0=0!==e.t1;case 11:if(!e.t0){e.next=15;break}j=new Request(n,{method:"POST",body:i,duplex:"half"}),ue.isFormData(i)&&(k=j.headers.get("content-type"))&&d.setContentType(k),j.body&&(i=ut(j.body,65536,ct(T,Ke(h)),null,ht));case 15:return ue.isString(v)||(v=v?"cors":"omit"),x=new Request(n,s(s({},b),{},{signal:E,method:o.toUpperCase(),headers:d.normalize().toJSON(),body:i,duplex:"half",withCredentials:v})),e.next=19,fetch(x);case 19:return A=e.sent,P=dt&&("stream"===p||"response"===p),dt&&(l||P)&&(L={},["status","statusText","headers"].forEach((function(e){L[e]=A[e]})),_=ue.toFiniteNumber(A.headers.get("content-length")),A=new Response(ut(A.body,65536,l&&ct(_,Ke(l,!0)),P&&R,ht),L)),p=p||"text",e.next=25,yt[ue.findKey(yt,p)||"text"](A,t);case 25:return N=e.sent,!P&&R(),O&&O(),e.next=30,new Promise((function(e,r){Je(e,r,{data:N,headers:qe.from(A.headers),status:A.status,statusText:A.statusText,config:t,request:x})}));case 30:return e.abrupt("return",e.sent);case 33:if(e.prev=33,e.t2=e.catch(4),R(),!e.t2||"TypeError"!==e.t2.name||!/fetch/i.test(e.t2.message)){e.next=38;break}throw Object.assign(new ce("Network Error",ce.ERR_NETWORK,t,x),{cause:e.t2.cause||e.t2});case 38:throw ce.from(e.t2,e.t2&&e.t2.code,t,x);case 39:case"end":return e.stop()}}),e,null,[[4,33]])})));return function(t){return e.apply(this,arguments)}}()};ue.forEach(bt,(function(e,t){if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));var gt=function(e){return"- ".concat(e)},wt=function(e){return ue.isFunction(e)||null===e||!1===e},Et=function(e){for(var t,r,n=(e=ue.isArray(e)?e:[e]).length,o={},i=0;i<n;i++){var a=void 0;if(r=t=e[i],!wt(t)&&void 0===(r=bt[(a=String(t)).toLowerCase()]))throw new ce("Unknown adapter '".concat(a,"'"));if(r)break;o[a||"#"+i]=r}if(!r){var s=Object.entries(o).map((function(e){var t=m(e,2),r=t[0],n=t[1];return"adapter ".concat(r," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));throw new ce("There is no suitable adapter to dispatch the request "+(n?s.length>1?"since :\n"+s.map(gt).join("\n"):" "+gt(s[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return r};function Ot(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new He(null,e)}function St(e){return Ot(e),e.headers=qe.from(e.headers),e.data=Me.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Et(e.adapter||Ne.adapter)(e).then((function(t){return Ot(e),t.data=Me.call(e,e.transformResponse,t),t.headers=qe.from(t.headers),t}),(function(t){return ze(t)||(Ot(e),t&&t.response&&(t.response.data=Me.call(e,e.transformResponse,t.response),t.response.headers=qe.from(t.response.headers))),Promise.reject(t)}))}var xt={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){xt[e]=function(r){return f(r)===e||"a"+(t<1?"n ":" ")+e}}));var Rt={};xt.transitional=function(e,t,r){function n(e,t){return"[Axios v1.7.2] Transitional option '"+e+"'"+t+(r?". "+r:"")}return function(r,o,i){if(!1===e)throw new ce(n(o," has been removed"+(t?" in "+t:"")),ce.ERR_DEPRECATED);return t&&!Rt[o]&&(Rt[o]=!0,console.warn(n(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,o,i)}};var Tt={assertOptions:function(e,t,r){if("object"!==f(e))throw new ce("options must be an object",ce.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(e),o=n.length;o-- >0;){var i=n[o],a=t[i];if(a){var s=e[i],u=void 0===s||a(s,i,e);if(!0!==u)throw new ce("option "+i+" must be "+u,ce.ERR_BAD_OPTION_VALUE)}else if(!0!==r)throw new ce("Unknown option "+i,ce.ERR_BAD_OPTION)}},validators:xt},jt=Tt.validators,kt=function(){function e(t){p(this,e),this.defaults=t,this.interceptors={request:new Se,response:new Se}}var t;return y(e,[{key:"request",value:(t=h(u().mark((function e(t,r){var n,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._request(t,r);case 3:return e.abrupt("return",e.sent);case 6:if(e.prev=6,e.t0=e.catch(0),e.t0 instanceof Error){Error.captureStackTrace?Error.captureStackTrace(n={}):n=new Error,o=n.stack?n.stack.replace(/^.+\n/,""):"";try{e.t0.stack?o&&!String(e.t0.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(e.t0.stack+="\n"+o):e.t0.stack=o}catch(e){}}throw e.t0;case 10:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(e,r){return t.apply(this,arguments)})},{key:"_request",value:function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{};var r=t=Qe(this.defaults,t),n=r.transitional,o=r.paramsSerializer,i=r.headers;void 0!==n&&Tt.assertOptions(n,{silentJSONParsing:jt.transitional(jt.boolean),forcedJSONParsing:jt.transitional(jt.boolean),clarifyTimeoutError:jt.transitional(jt.boolean)},!1),null!=o&&(ue.isFunction(o)?t.paramsSerializer={serialize:o}:Tt.assertOptions(o,{encode:jt.function,serialize:jt.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();var a=i&&ue.merge(i.common,i[t.method]);i&&ue.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete i[e]})),t.headers=qe.concat(a,i);var s=[],u=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(u=u&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));var c,f=[];this.interceptors.response.forEach((function(e){f.push(e.fulfilled,e.rejected)}));var l,h=0;if(!u){var p=[St.bind(this),void 0];for(p.unshift.apply(p,s),p.push.apply(p,f),l=p.length,c=Promise.resolve(t);h<l;)c=c.then(p[h++],p[h++]);return c}l=s.length;var d=t;for(h=0;h<l;){var y=s[h++],v=s[h++];try{d=y(d)}catch(e){v.call(this,e);break}}try{c=St.call(this,d)}catch(e){return Promise.reject(e)}for(h=0,l=f.length;h<l;)c=c.then(f[h++],f[h++]);return c}},{key:"getUri",value:function(e){return Ee($e((e=Qe(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}]),e}();ue.forEach(["delete","get","head","options"],(function(e){kt.prototype[e]=function(t,r){return this.request(Qe(r||{},{method:e,url:t,data:(r||{}).data}))}})),ue.forEach(["post","put","patch"],(function(e){function t(t){return function(r,n,o){return this.request(Qe(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}kt.prototype[e]=t(),kt.prototype[e+"Form"]=t(!0)}));var At=kt,Pt=function(){function e(t){if(p(this,e),"function"!=typeof t)throw new TypeError("executor must be a function.");var r;this.promise=new Promise((function(e){r=e}));var n=this;this.promise.then((function(e){if(n._listeners){for(var t=n._listeners.length;t-- >0;)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},t((function(e,t,o){n.reason||(n.reason=new He(e,t,o),r(n.reason))}))}return y(e,[{key:"throwIfRequested",value:function(){if(this.reason)throw this.reason}},{key:"subscribe",value:function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}},{key:"unsubscribe",value:function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}}}],[{key:"source",value:function(){var t;return{token:new e((function(e){t=e})),cancel:t}}}]),e}(),Lt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Lt).forEach((function(e){var t=m(e,2),r=t[0],n=t[1];Lt[n]=r}));var _t=Lt,Nt=function e(t){var r=new At(t),n=S(At.prototype.request,r);return ue.extend(n,At.prototype,r,{allOwnKeys:!0}),ue.extend(n,r,null,{allOwnKeys:!0}),n.create=function(r){return e(Qe(t,r))},n}(Ne);return Nt.Axios=At,Nt.CanceledError=He,Nt.CancelToken=Pt,Nt.isCancel=ze,Nt.VERSION="1.7.2",Nt.toFormData=ve,Nt.AxiosError=ce,Nt.Cancel=Nt.CanceledError,Nt.all=function(e){return Promise.all(e)},Nt.spread=function(e){return function(t){return e.apply(null,t)}},Nt.isAxiosError=function(e){return ue.isObject(e)&&!0===e.isAxiosError},Nt.mergeConfig=Qe,Nt.AxiosHeaders=qe,Nt.formToJSON=function(e){return Le(ue.isHTMLForm(e)?new FormData(e):e)},Nt.getAdapter=Et,Nt.HttpStatusCode=_t,Nt.default=Nt,Nt},"object"==typeof t&&void 0!==o?o.exports=u():"function"==typeof define&&define.amd?define(u):(s="undefined"!=typeof globalThis?globalThis:s||self).axios=u(),n=e("default",o.exports)}),{})}}}));

System.register("chunks:///_virtual/axios.mjs_cjs=&original=.js",["./axios.js","./cjs-loader.mjs"],(function(e,t){var s,a;return{setters:[function(t){s=t.__cjsMetaURL;var a={};a.__cjsMetaURL=t.__cjsMetaURL,a.default=t.default,e(a)},function(e){a=e.default}],execute:function(){s||a.throwInvalidWrapper("./axios.js",t.meta.url),a.require(s)}}}));

System.register("chunks:///_virtual/BackgroundAdapter.ts",["cc"],(function(t){var e,n,o,c,r;return{setters:[function(t){e=t.cclegacy,n=t.Component,o=t.screen,c=t.UITransform,r=t._decorator}],execute:function(){var a;e._RF.push({},"71ae6w0ow1ACok/pAFH3tJT","BackgroundAdapter",void 0);const{ccclass:i,property:d}=r;t("BackgroundAdapter",i("BackgroundAdapter")(a=class extends n{onLoad(){let t=o.windowSize,e=this.node.getComponent(c).contentSize,n=Math.min(t.width/e.width,t.height/e.height),r=e.width*n,a=e.height*n,i=Math.max(t.width/r,t.height/a);this.node.setScale(i,i,i)}})||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/BagData.ts",["cc","./Constants.ts","./CfgMgr.ts","./Configuration.ts","./WeaponLevelModel.ts","./SkillUpgradeModel.ts","./WeaponModel.ts","./SkillModel.ts","./LanguageManager.ts","./HttpService.ts","./Api.ts","./EventListener.ts","./GameEvent.ts","./PlayerData.ts","./GameDefine.ts"],(function(a){var e,t,n,i,s,r,o,l,g,p,h,c,d,u,D,f,_;return{setters:[function(a){e=a.cclegacy},function(a){t=a.Constants},function(a){n=a.CfgMgr},function(a){i=a.Configuration},function(a){s=a.WeaponLevelCfg},function(a){r=a.SkillUpgradeCfg},function(a){o=a.WeaponCfg,l=a.WeaponType},function(a){g=a.SkillCfg,p=a.TargetType},function(a){h=a.LanguageManager},function(a){c=a.HttpService},function(a){d=a.Api},function(a){u=a.EventListener},function(a){D=a.GameEvent},function(a){f=a.PlayerData},function(a){_=a.GameDefine}],execute:function(){e._RF.push({},"93744qyQJ9Na72gUVqNx+1H","BagData",void 0);class w{constructor(){this._placeData=[],this._bagWeaponData=new Map,this._wearBagData=new Map,this._noWearBagData=new Map,this._noWearBagArr=[],this._lockBagData=new Map,this._weaponSkillMapData=new Map,this._weaponLevelMapData=new Map,this._skillMapData=new Map}initCfg(){this._weaponSkillMapData.clear(),this._skillMapData.clear(),this.initWeaponSkillData(),this.initLevelData(),this.initPlaceData(5)}initWeaponSkillData(){let a=n.getCfgDataArray(new r);for(let e=0;e<a.length;e++){const t=a[e];if(t.weaponId){let a=[];this._weaponSkillMapData.has(t.weaponId)?(a=this._weaponSkillMapData.get(t.weaponId),a.push(t.Id)):a.push(t.Id),this._weaponSkillMapData.set(t.weaponId,a)}}}initLevelData(){let a=n.getCfgDataArray(new s);for(let e=0;e<a.length;e++){const t=a[e];let n=t.weaponId+"|"+t.level;this._weaponLevelMapData.set(n,t)}}initPlaceData(a){let e=[],n=[];e=t.SysConstant.InitPlace.ConstantValue.split("|");for(let t=0;t<e.length;t++)if(a>t)n.push(0);else{const a=e[t];n.push(Number(a))}this._placeData=n}initWeaponData(a,e){if(void 0===e&&(e=0),this._bagWeaponData.clear(),_.isDebug&&f.instance.chapterObj.chapterId>=2){this.getWeaponData()}for(let e=0;e<a.length;e++){const t=a[e];let n=new W;n.weaponId=t.weaponId,n.level=t.level,n.fragment=t.fragment,n.blueprint=t.blueprint?t.blueprint:0,n.fragments=t.fragments,n.sid=t.sid,n.golds=t.golds,n.unlock=1,this._bagWeaponData.set(t.weaponId,n)}let t=[];this._noWearBagData.clear(),this._noWearBagArr=[],this._wearBagData.clear(),this._bagWeaponData.forEach((a=>{let e=new W;e.weaponId=a.weaponId,e.level=a.level,e.sid=a.sid,e.unlock=1,e.fragment=a.fragment,e.blueprint=a.blueprint,e.golds=a.golds,t.push(a.weaponId.toString()),-1==a.sid?(this._noWearBagData.set(e.weaponId,e),this._noWearBagArr.push(e.weaponId)):this._wearBagData.set(e.sid,e)})),e>0&&this.initPlaceData(e),this._lockBagData.clear();let n=this.getWeaponData();for(let a=0;a<n.length;a++){const e=n[a];if(!t.includes(e.Id.toString())){let a=new W;a.weaponId=e.Id,a.level=0,a.sid=-1,a.unlock=0,a.fragment=0,a.blueprint=0,this._lockBagData.set(a.weaponId,a)}}u.emit(D.UPDATE_BAG_POPUP)}getBagDataFromNetwork(){c.instance.post(d.WEAPON_INFO,{}).then((a=>{0==a.code&&this.initWeaponData(a.data.bagWeapons,a.data.slot)}))}getPlaceData(){return this._placeData}getWearData(){return Array.from(this._wearBagData.values())}getNoWearData(){let a=[];for(let e=0;e<this._noWearBagArr.length;e++)this._noWearBagData.has(this._noWearBagArr[e])&&a.push(this._noWearBagData.get(this._noWearBagArr[e]));return a}getNoWearWeapon(a){return this._noWearBagData.get(a)}getNoWearArr(){return this._noWearBagArr}getLockData(){return Array.from(this._lockBagData.values())}getBagWeaponObj(a){return this._bagWeaponData.get(a)}getWeaponIcon(a,e){if(void 0===e&&(e=0),0==e&&this._bagWeaponData.has(a)){e=this._bagWeaponData.get(a).level}let t=0;e>=15?t=3:e>=10?t=2:e>=5&&(t=1);let n=this.getWeaponCfgById(a).skillIds[t];return w.instance.getWeaponSkillCfgById(n).res}getWeaponCfgById(a){return n.getDataById(new o,a)}getWeaponData(){let a=[],e=n.getCfgDataArray(new o);for(let t=0;t<e.length;t++){const n=e[t];n.isShow&&a.push(n)}return a}onUpAction(a){this._wearBagData.set(a.sid,a),this._noWearBagData.delete(a.weaponId),this._noWearBagArr.indexOf(a.weaponId)>=0&&this._noWearBagArr.splice(this._noWearBagArr.indexOf(a.weaponId),1),this.submitEquip(a.weaponId,a.sid)}onDownAction(a){let e=a.sid;a.sid=-1,this._noWearBagData.set(a.weaponId,a),-1==this._noWearBagArr.indexOf(a.weaponId)&&this._noWearBagArr.push(a.weaponId),this._wearBagData.delete(e),this.submitEquip(a.weaponId,-1)}checkUpEquip(){let a=0,e=this.getWearData().length;for(let e=0;e<this._placeData.length;e++){this._placeData[e]||a++}return!(e<a)}getWeaponSkillCfgById(a){return n.getDataById(new g,a)}getWeaponUpgradeSkillCfgById(a){return n.getDataById(new r,a)}getWeaponSkillArrByWeaponId(a){return this._weaponSkillMapData.get(a)}getWeaponObjById(a){let e=null,t=Array.from(this._wearBagData.values());for(let n=0;n<t.length;n++){const i=t[n];if(i.weaponId==a){e=i;break}}return this._noWearBagData.has(a)&&(e=this._noWearBagData.get(a)),this._lockBagData.has(a)&&(e=this._lockBagData.get(a)),e}getEquipAtkType(a){let e=h.instance.getLang("game.physical");switch(a){case l.ATTACK_PHYSICAL:e=h.instance.getLang("game.physical");break;case l.ATTACK_MAGIC:e=h.instance.getLang("game.magic");break;case l.ARMOR_SHIELD:case l.ARMOR_HP:case l.ARMOR_HPPER:e=h.instance.getLang("game.armor");break;case l.ECONOMY:e=h.instance.getLang("game.economy")}return e}getEquipAtkTargetType(a){let e=h.instance.getLang("game.targetclosest");switch(a){case p.TARGET_NEAREST:e=h.instance.getLang("game.targetclosest");break;case p.TARGET_RANDOM:e=h.instance.getLang("game.targetrandom");break;case p.TARGET_SELF:e=h.instance.getLang("game.targetself")}return e}getBagWeaponMap(){let a=new Map;return this._bagWeaponData.forEach((e=>{a.set(e.weaponId,e.level)})),a}getCarryWeaponMap(){let a=new Map;return this._wearBagData.forEach((e=>{a.set(e.weaponId,e.level)})),a}getCarryWeaponArr(){let a=[];return this._wearBagData.forEach((e=>{a.push(e.weaponId)})),a}getWeaponsByQuality(a){let e=[];return this._wearBagData.forEach((a=>{e.push(a.weaponId)})),e}checkCarryWeapon(){let a=this.getCarryWeaponArr().length,e=0,t=f.instance.chapterObj.chapterId;for(let a=0;a<this._placeData.length;a++)this._placeData[a]<t&&e++;return a==e}getWeaponLevelCfgByLevel(a,e){let t=a+"|"+e;return this._weaponLevelMapData.has(t)?this._weaponLevelMapData.get(t):null}calWeaponLevelCfgByLevel(a,e){let t=new s;t.addDamage=0,t.addBuff=0,t.addHp=0;for(let n=1;n<=e;n++){let e=this.getWeaponLevelCfgByLevel(a,n);e&&(t.addDamage+=e.addDamage,t.addBuff+=e.addBuff,t.addHp+=e.addHp)}return t}isWeaponMaxLevel(a,e){let t=a+"|"+(e+1);return!this._weaponLevelMapData.has(t)}checkWeaponUpgrage(a){if(this.isWeaponMaxLevel(a.weaponId,a.level))return!1;let e=a.weaponId+"|"+a.level;if(this._weaponLevelMapData.has(e)&&a.unlock){let t=this._weaponLevelMapData.get(e);return a.fragment>=t.fragment&&a.blueprint>=t.blueprint&&f.instance.assetObj.gold>=t.gold}return!1}getUnlockSkillsEntry(a,e){let t=this._weaponSkillMapData.get(a),n=[];if(t&&t.length>0)for(let a=0;a<t.length;a++){const i=this.getWeaponUpgradeSkillCfgById(t[a]);i.weaponLevel<=e&&i.weight>0&&n.push(i)}return n}savePlaceData(){i.instance.setConfigData(t.placeConfigId,JSON.stringify(this._placeData))}saveWeaponData(){let a=this.getWearData(),e=this.getNoWearData(),n=a.concat(e);i.instance.setConfigData(t.weaponConfigId,JSON.stringify(n))}onUpgrade(a,e){c.instance.post(d.WEAPON_LEVELUP,{weaponId:a}).then((a=>{0==a.code&&(this.initWeaponData(a.data.bagWeapons),e())}))}submitEquip(a,e){c.instance.post(d.WEAPON_EQUIP,{weaponId:a,sid:e}).then((a=>{a.code}))}static get instance(){return this._instance||(this._instance=new w),this._instance}}a("BagData",w),w._instance=null;class W{constructor(){this.weaponId=void 0,this.level=void 0,this.fragment=void 0,this.blueprint=void 0,this.sid=void 0,this.unlock=void 0,this.golds=void 0,this.fragments=void 0}}a("BagWeaponObj",W);a("EquipType",function(a){return a[a.UP=0]="UP",a[a.DOWN=1]="DOWN",a[a.LOCK=2]="LOCK",a[a.CHANGE=3]="CHANGE",a[a.DETAIL=4]="DETAIL",a}({}));e._RF.pop()}}}));

System.register("chunks:///_virtual/BagDetailPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./BagData.ts","./SysOpenData.ts","./PlayerData.ts","./EventListener.ts","./GameEvent.ts","./WeaponSkillItem.ts","./BagWeaponItem.ts","./WeaponModel.ts","./ResourcesUtil.ts","./LanguageManager.ts","./SpriteEx.ts"],(function(e){var t,n,i,a,o,r,l,s,g,p,d,h,u,c,m,f,C,b,y,B,w,N,P,v,_,O,A,I,k;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,a=e.Label,o=e.Node,r=e.Button,l=e.Prefab,s=e.ScrollView,g=e.ParticleSystem2D,p=e._decorator,d=e.Component,h=e.instantiate,u=e.Sprite,c=e.UITransform,m=e.Color},function(e){f=e.OpenPopupManager},function(e){C=e.Constants},function(e){b=e.BagData,y=e.EquipType},function(e){B=e.SysOpenData},function(e){w=e.PlayerData},function(e){N=e.EventListener},function(e){P=e.GameEvent},function(e){v=e.WeaponSkillItem},function(e){_=e.BagWeaponItem},function(e){O=e.WeaponType},function(e){A=e.ResourcesUtil},function(e){I=e.LanguageManager},function(e){k=e.SpriteEx}],execute:function(){var L,j,S,T,z,D,M,E,H,x,$,q,W,U,R,F,G,X,V,K,Q,Y,J,Z,ee,te,ne,ie,ae,oe,re,le,se,ge,pe,de,he,ue,ce,me,fe,Ce,be;i._RF.push({},"c37e4Q2/hlFlIXbnoMNrIkq","BagDetailPopup",void 0);const{ccclass:ye,property:Be}=p;e("BagDetailPopup",(L=ye("BagDetailPopup"),j=Be(a),S=Be(a),T=Be(a),z=Be(a),D=Be(o),M=Be(r),E=Be(a),H=Be(o),x=Be(l),$=Be(s),q=Be(o),W=Be(l),U=Be(o),R=Be(o),F=Be(o),G=Be(o),X=Be(o),V=Be(g),K=Be(g),Q=Be(g),L((Z=t((J=class extends d{constructor(){super(...arguments),n(this,"title",Z,this),n(this,"desc",ee,this),n(this,"lockDesc",te,this),n(this,"equipAtkType",ne,this),n(this,"btnList",ie,this),n(this,"upgradeBtn",ae,this),n(this,"needGold",oe,this),n(this,"equipItem",re,this),n(this,"equipPrefab",le,this),n(this,"scrollView",se,this),n(this,"content",ge,this),n(this,"equipEntryPrefab",pe,this),n(this,"targetNode",de,this),n(this,"cdNode",he,this),n(this,"atkNode",ue,this),n(this,"rangeNode",ce,this),n(this,"upgradeMaterial",me,this),n(this,"upgradeAnim1",fe,this),n(this,"upgradeAnim2",Ce,this),n(this,"upgradeAnim3",be,this),this._weaponObj=null,this._weaponCfg=null}show(e){this.setContent(e)}setContent(e){let t=b.instance.getWeaponCfgById(e.weaponId);this._weaponObj=e,this._weaponCfg=t,this.title.string=I.instance.getLang(t.name),this.desc.string=I.instance.getLang(t.desc),this.equipItem.removeAllChildren();let n=h(this.equipPrefab);n.parent=this.equipItem,n.getComponent(_).init(e,y.DETAIL),this.equipAtkType.string=b.instance.getEquipAtkType(t.type),this.btnList.active=!!e.unlock,this.setSkillContent(),this.setUpgradeInfo(),this.setAttrInfo()}setUnlockDesc(e,t){if(t&&e){let e=B.instance.getSysOpenCfgById(t);if(e){let t=e.unlock.toString(),n=I.instance.getLang(e.desc,[t]);this.lockDesc.string=n}}}setSkillContent(){this.content.removeAllChildren();let e=b.instance.getWeaponSkillArrByWeaponId(this._weaponObj.weaponId);if(null!=e){for(let t=0;t<e.length;t++){const n=e[t];let i=h(this.equipEntryPrefab);i.parent=this.content,i.getComponent(v).init(n)}this.scrollView.scrollToTop()}}setAttrInfo(){let e=b.instance.getWeaponCfgById(this._weaponObj.weaponId),t=b.instance.getWeaponLevelCfgByLevel(this._weaponObj.weaponId,this._weaponObj.level+1);this.targetNode.getChildByName("value").getComponent(a).string=`${b.instance.getEquipAtkTargetType(e.targetType)}`,this.targetNode.getChildByName("add").getComponent(a).string="",this.cdNode.getChildByName("value").getComponent(a).string=`${e.cd}s`,this.cdNode.getChildByName("add").getComponent(a).string="";let n=b.instance.calWeaponLevelCfgByLevel(this._weaponObj.weaponId,this._weaponObj.level);e.type==O.ATTACK_PHYSICAL||e.type==O.ATTACK_MAGIC?(this.atkNode.getChildByName("icon").getComponent(k).index=0,this.rangeNode.getChildByName("icon").getComponent(k).index=0,this.atkNode.getChildByName("desc").getComponent(a).string=I.instance.getLang("game.atk"),this.rangeNode.getChildByName("desc").getComponent(a).string=I.instance.getLang("game.range"),this.atkNode.getChildByPath("layout/value").getComponent(a).string=`${e.damage+n.addDamage}`,this.atkNode.getChildByPath("layout/add").getComponent(a).string=t&&t.addDamage?`+${t.addDamage}`:"",this.rangeNode.getChildByPath("layout/value").getComponent(a).string=`${e.range}`,this.rangeNode.getChildByPath("layout/add").getComponent(a).string=""):e.type==O.ARMOR_HP?(this.atkNode.getChildByName("icon").getComponent(k).index=1,this.rangeNode.getChildByName("icon").getComponent(k).index=1,this.atkNode.getChildByName("desc").getComponent(a).string=I.instance.getLang("game.hp"),this.rangeNode.getChildByName("desc").getComponent(a).string=I.instance.getLang("game.healing"),this.atkNode.getChildByPath("layout/value").getComponent(a).string=`${e.hp+n.addHp}`,this.atkNode.getChildByPath("layout/add").getComponent(a).string=t&&t.addHp?`+${t.addHp}`:"",this.rangeNode.getChildByPath("layout/value").getComponent(a).string=`${e.addHp+n.addBuff}`,this.rangeNode.getChildByPath("layout/add").getComponent(a).string=t&&t.addBuff?`+${t.addBuff}`:""):e.type==O.ARMOR_SHIELD?(this.atkNode.getChildByName("icon").getComponent(k).index=1,this.rangeNode.getChildByName("icon").getComponent(k).index=2,this.atkNode.getChildByName("desc").getComponent(a).string=I.instance.getLang("game.hp"),this.rangeNode.getChildByName("desc").getComponent(a).string=I.instance.getLang("game.armor"),this.atkNode.getChildByPath("layout/value").getComponent(a).string=`${e.hp+n.addHp}`,this.atkNode.getChildByPath("layout/add").getComponent(a).string=t&&t.addHp?`+${t.addHp}`:"",this.rangeNode.getChildByPath("layout/value").getComponent(a).string=`${e.addShield+n.addBuff}`,this.rangeNode.getChildByPath("layout/add").getComponent(a).string=t&&t.addBuff?`+${t.addBuff}`:""):e.type==O.ARMOR_HPPER&&(this.atkNode.getChildByName("icon").getComponent(k).index=1,this.rangeNode.getChildByName("icon").getComponent(k).index=3,this.atkNode.getChildByName("desc").getComponent(a).string=I.instance.getLang("game.hp"),this.rangeNode.getChildByName("desc").getComponent(a).string=I.instance.getLang("game.healing"),this.atkNode.getChildByPath("layout/value").getComponent(a).string=`${e.hp+n.addHp}`,this.atkNode.getChildByPath("layout/add").getComponent(a).string=t&&t.addHp?`+${t.addHp}`:"",this.rangeNode.getChildByPath("layout/value").getComponent(a).string=`${e.addHpPer+n.addBuff}%`,this.rangeNode.getChildByPath("layout/add").getComponent(a).string=t&&t.addBuff?`+${t.addBuff}%`:"")}setUpgradeInfo(){if(b.instance.isWeaponMaxLevel(this._weaponObj.weaponId,this._weaponObj.level))this.upgradeMaterial.active=!1,this.upgradeBtn.interactable=!1,this.needGold.string=I.instance.getLang("bag.fulllevel"),this.upgradeBtn.getComponent(u).grayscale=!0;else{this.upgradeMaterial.active=!0;let e=b.instance.getWeaponLevelCfgByLevel(this._weaponObj.weaponId,0==this._weaponObj.level?1:this._weaponObj.level),t=C.weaponIconPath+b.instance.getWeaponIcon(this._weaponObj.weaponId)+"/spriteFrame";A.geSpriteFrame(t).then((e=>{let t=this.upgradeMaterial.getChildByPath("fragment/icon").getComponent(u);t.spriteFrame=e;let n=t.getComponent(c).contentSize;n.height>=n.width?t.getComponent(c).setContentSize(64*n.width/n.height,64):t.getComponent(c).setContentSize(64,64*n.height/n.width)})),this.upgradeMaterial.getChildByPath("fragment/lbText").getComponent(a).string=this._weaponObj.fragment+"/"+e.fragment,this._weaponObj.fragment>=e.fragment?this.upgradeMaterial.getChildByPath("fragment/lbText").getComponent(a).color=(new m).fromHEX("#ffffff"):this.upgradeMaterial.getChildByPath("fragment/lbText").getComponent(a).color=(new m).fromHEX("#F52670");let n=C.itemsPath+"blueprint_"+this._weaponCfg.grid+"/spriteFrame";A.geSpriteFrame(n).then((e=>{let t=this.upgradeMaterial.getChildByPath("blueprint/icon").getComponent(u);t.spriteFrame=e;t.getComponent(c).contentSize;t.getComponent(c).setContentSize(64,64)})),this.upgradeMaterial.getChildByPath("blueprint/lbText").getComponent(a).string=this._weaponObj.blueprint+"/"+e.blueprint,this._weaponObj.blueprint>=e.blueprint?this.upgradeMaterial.getChildByPath("blueprint/lbText").getComponent(a).color=(new m).fromHEX("#ffffff"):this.upgradeMaterial.getChildByPath("blueprint/lbText").getComponent(a).color=(new m).fromHEX("#F52670"),this.upgradeBtn.interactable=!0,this.needGold.string=`${e.gold}`,this.upgradeBtn.getComponent(u).grayscale=!1}}onUpgradeBtn(){let e=b.instance.getWeaponLevelCfgByLevel(this._weaponObj.weaponId,this._weaponObj.level);if(e){let t=w.instance.assetObj;t.gold>=e.gold&&this._weaponObj.fragment>=e.fragment&&this._weaponObj.blueprint>=e.blueprint?b.instance.onUpgrade(this._weaponObj.weaponId,(()=>{this._weaponObj=b.instance.getWeaponObjById(this._weaponObj.weaponId),this.setContent(this._weaponObj),w.instance.subCoin(e.gold),N.emit(P.UPDATE_POPUP_UPGRADE_INFO),this.showUpgradeAnim()})):this._weaponObj.fragment<e.fragment?f.instance.showToast("fragment.insufficient"):this._weaponObj.blueprint<e.blueprint?f.instance.showToast("blueprint.insufficient"):t.gold<e.gold&&f.instance.showToast("gold.insufficient")}}showUpgradeAnim(){this.upgradeAnim1.node.active=!0,this.upgradeAnim2.node.active=!0,this.upgradeAnim3.node.active=!0,this.upgradeAnim1.getComponent(g).resetSystem(),this.upgradeAnim2.getComponent(g).resetSystem(),this.upgradeAnim3.getComponent(g).resetSystem(),this.scheduleOnce((()=>{this.upgradeAnim1.node.active=!1,this.upgradeAnim2.node.active=!1,this.upgradeAnim3.node.active=!1}),2)}onResetBtn(){}onCloseBtn(){f.instance.hide(C.PopupUI.BagDetailPopup)}}).prototype,"title",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(J.prototype,"desc",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t(J.prototype,"lockDesc",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=t(J.prototype,"equipAtkType",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=t(J.prototype,"btnList",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=t(J.prototype,"upgradeBtn",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=t(J.prototype,"needGold",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=t(J.prototype,"equipItem",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=t(J.prototype,"equipPrefab",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=t(J.prototype,"scrollView",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ge=t(J.prototype,"content",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=t(J.prototype,"equipEntryPrefab",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=t(J.prototype,"targetNode",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),he=t(J.prototype,"cdNode",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ue=t(J.prototype,"atkNode",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ce=t(J.prototype,"rangeNode",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),me=t(J.prototype,"upgradeMaterial",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fe=t(J.prototype,"upgradeAnim1",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ce=t(J.prototype,"upgradeAnim2",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),be=t(J.prototype,"upgradeAnim3",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=J))||Y));i._RF.pop()}}}));

System.register("chunks:///_virtual/BagHeroData.ts",["cc","./CfgMgr.ts","./HeroModel.ts","./HeroLevelModel.ts","./HeroSkillModel.ts","./OpenPopupManager.ts","./HttpService.ts","./Api.ts","./EventListener.ts","./GameEvent.ts","./HeroEquipData.ts"],(function(e){var t,a,r,o,i,s,n,h,l,d,g,c,H;return{setters:[function(e){t=e.cclegacy,a=e._decorator},function(e){r=e.CfgMgr},function(e){o=e.HeroCfg,i=e.HeroObj},function(e){s=e.HeroLevelCfg},function(e){n=e.HeroSkillCfg},function(e){h=e.OpenPopupManager},function(e){l=e.HttpService},function(e){d=e.Api},function(e){g=e.EventListener},function(e){c=e.GameEvent},function(e){H=e.HeroEquipData}],execute:function(){var _,f;t._RF.push({},"2d836IFrEVPqqDHkyMsaLA3","BagHeroData",void 0);const{ccclass:u}=a;e("BagHeroData",u("BagHeroData")(((f=class e{constructor(){this._heroData=new Map,this._heroLevelData=new Map,this._heroSkillData=new Map,this._activeHeroData=new Map,this._activeHeroId=0,this._food=0,this._enhanceStone=0,this._forgingStone=0,this._blueprintItems=[],this._curHero=null}get activeHeroId(){return this._activeHeroId}get food(){return this._food}get enhanceStone(){return this._enhanceStone}get forgingStone(){return this._forgingStone}get blueprintItems(){return this._blueprintItems}get curHero(){return this._curHero}set curHero(e){this._curHero=e}initCfg(){let e=r.getCfgDataArray(new o);this._heroData.clear();for(let t=0;t<e.length;t++){let a=e[t];this._heroData.set(a.Id,a)}let t=r.getCfgDataArray(new s);this._heroLevelData.clear();for(let e=0;e<t.length;e++){let a=t[e],r=a.heroId+"|"+a.level;this._heroLevelData.set(r,a)}let a=r.getCfgDataArray(new n);this._heroSkillData.clear();for(let e=0;e<a.length;e++){let t=a[e],r=t.heroId+"|"+t.star;this._heroSkillData.set(r,t)}H.instance.initCfg()}initHeroData(e){this._activeHeroData.clear();for(let t=0;t<e.length;t++){const a=e[t];let r=new i;r.fragment=a.fragment,r.heroId=a.heroId,r.isUsed=a.isUsed,r.level=a.level,r.star=a.star,r.equips=a.equips;let{addHp:o,addDamage:s}=this.calAddHpAndDamage(a.heroId,a.level,a.star);r.addDamage=s,r.addHp=o,a.isUsed&&(this._activeHeroId=a.heroId),r.maxLevel=this.getMaxLevel(a.heroId,a.star),this._activeHeroData.set(a.heroId,r)}g.emit(c.UPDATE_HERO_INFO)}getHeroCfgById(e){return r.getDataById(new o,e)}getHeroIcon(e){return r.getDataById(new o,e).res}getHeroObjById(e){return this._activeHeroData.get(e)}getHeroLevelCfgByHeroId(e){let t=[],a=10;for(;this._heroLevelData.has(e+"|"+a);)t.push(this._heroLevelData.get(e+"|"+a)),a+=10;return t}getSkillsByHeroId(e){let t=this._activeHeroData.get(e),a=[];for(let r=0;r<=t.star;r++){let t=this.getHeroSkillByHeroId(e,r);if(0==t.type)for(let e=0;e<t.upgradeSkills.length;e++)a.push(t.upgradeSkills[e])}return a}getActiveSkillByHero(e){let t=this.getHeroSkillByHeroId(e,0);return 1==t.type?t:null}getHeroSkillByHeroId(e,t){return void 0===t&&(t=0),this._heroSkillData.get(e+"|"+t)}getHeroSkillCfgByHeroId(e){let t=[],a=0;for(;this._heroSkillData.has(e+"|"+a);)t.push(this._heroSkillData.get(e+"|"+a)),a++;return t}getMaxLevel(e,t){let a=e+"|"+t;if(this._heroSkillData.has(a)){return this._heroSkillData.get(a).maxLevel}return 0}calAddHpAndDamage(e,t,a){let r=0,o=0;for(let a=0;a<Math.ceil(t/10);a++){let i=e+"|"+10*a;if(this._heroLevelData.has(i)){let s=this._heroLevelData.get(i),n=t>10*(a+1)||t%10==0?10:t%10;for(let e=0;e<n;e++)r+=Number(s.addHp),o+=Number(s.addDamage);if(10==n){let t=e+"|"+10*(a+1);if(this._heroLevelData.has(t)){let e=this._heroLevelData.get(t);r+=Number(e.extraAddHp),o+=Number(e.extraAddDamage)}}}}for(let t=0;t<a;t++){let a=e+"|"+t;if(this._heroSkillData.has(a)){let e=this._heroSkillData.get(a);r+=Number(e.addHp),o+=Number(e.addDamage)}}return{addDamage:o,addHp:r}}getUpgradeFood(e,t){let a=e+"|"+10*Math.floor((t+1)/10);if(this._heroLevelData.has(a)){return this._heroLevelData.get(a).food}return 0}getActiveHeros(){let e=[];return this._heroData.forEach((t=>{if(this._activeHeroData.has(t.Id)){let a=this._activeHeroData.get(t.Id);a.level>0&&e.push(a)}})),e}getLockedHeros(){let e=[];return this._heroData.forEach((t=>{if(this._activeHeroData.has(t.Id)){let a=this._activeHeroData.get(t.Id);0==a.level&&e.push(a)}else{let a=new i;a.heroId=t.Id,a.isUsed=!1,a.fragment=0,a.level=0,a.addDamage=0,a.addHp=0,a.star=0,a.maxLevel=this.getMaxLevel(t.Id,0),e.push(a)}})),e}useHero(e){if(0!=this._activeHeroId){let e=this._activeHeroId,t=this._activeHeroData.get(e);t.isUsed=!1,this._activeHeroData.set(e,t)}let t=this._activeHeroData.get(e);t.isUsed=!0,this._activeHeroData.set(e,t),this._activeHeroId=e,g.emit(c.UPDATE_HERO_INFO),l.instance.post(d.HERO_SET,{heroId:e}).then((e=>{}))}unlockHero(e){let t=this._activeHeroData.get(e);this.getHeroSkillByHeroId(e,t.star).fragment>t.fragment?h.instance.showToast("fragment.insufficient"):l.instance.post(d.HERO_UNLOCK,{heroId:e}).then((a=>{if(0==a.code){t.level=1;let{addHp:a,addDamage:r}=this.calAddHpAndDamage(t.heroId,t.level,t.star);t.addDamage=r,t.addHp=a,this._activeHeroData.set(e,t),g.emit(c.UPDATE_HERO_INFO)}else h.instance.showToast(a.msg)}))}upgradeHero(e,t){let a=this._activeHeroData.get(e);a.level!=a.maxLevel?(this._food<this.getUpgradeFood(e,a.level)&&h.instance.showToast("food.insufficient"),l.instance.post(d.HERO_LEVELUP,{heroId:e}).then((e=>{0==e.code?(this.initHeroData(e.data.heros),this._food=e.data.food,this._enhanceStone=e.data.enhanceStone,this._forgingStone=e.data.forgingStone,this._blueprintItems=e.data.blueprints,g.emit(c.UPDATE_HERO_INFO),t()):h.instance.showToast(e.msg)}))):h.instance.showToast("hero.maxLevelToAwaken")}awakeHero(t){let a=this._activeHeroData.get(t),r=a.star+1,o=e.instance.getHeroSkillByHeroId(a.heroId,r);null!=o?(a.fragment<o.fragment&&h.instance.showToast("fragment.insufficient"),l.instance.post(d.HERO_AWAKE,{heroId:t}).then((e=>{0==e.code?(this.initHeroData(e.data.heros),this._food=e.data.food,this._enhanceStone=e.data.enhanceStone,this._forgingStone=e.data.forgingStone,this._blueprintItems=e.data.blueprints,g.emit(c.UPDATE_HERO_INFO)):h.instance.showToast(e.msg)}))):h.instance.showToast("hero.maxAwaken")}getHeroDataFromNetwork(){l.instance.post(d.HERO_INFO,{}).then((e=>{0==e.code&&(this.initHeroData(e.data.heros),this._food=e.data.food,this._enhanceStone=e.data.enhanceStone,this._forgingStone=e.data.forgingStone,this._blueprintItems=e.data.blueprints)}))}static get instance(){return this._instance||(this._instance=new e),this._instance}})._instance=null,_=f))||_);e("BagHeroResult",class{constructor(){this.heros=void 0,this.food=void 0,this.enhanceStone=void 0,this.forgingStone=void 0,this.blueprints=void 0}});e("HeroType",function(e){return e[e.UP=0]="UP",e[e.DOWN=1]="DOWN",e[e.LOCK=2]="LOCK",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/BagHeroItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./BagHeroData.ts","./Constants.ts","./ResourcesUtil.ts","./SpriteEx.ts","./LanguageManager.ts"],(function(e){var t,i,r,n,a,s,o,l,h,g,u,c,p,f,b,m,d,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){r=e.cclegacy,n=e.Label,a=e.sp,s=e.Node,o=e.Prefab,l=e.ProgressBar,h=e._decorator,g=e.Component,u=e.instantiate},function(e){c=e.OpenPopupManager,p=e.LayerType},function(e){f=e.BagHeroData},function(e){b=e.Constants},function(e){m=e.ResourcesUtil},function(e){d=e.SpriteEx},function(e){v=e.LanguageManager}],execute:function(){var y,_,P,L,H,w,z,B,C,I,O,S,D,N,j,k,U,x,F,M,R,E,T,K,q;r._RF.push({},"03241T/h7tOUKEp8nKUkW5/","BagHeroItem",void 0);const{ccclass:A,property:W}=h;e("BagHeroItem",(y=A("BagHeroItem"),_=W(n),P=W(d),L=W(a.Skeleton),H=W(n),w=W(s),z=W(s),B=W(s),C=W(s),I=W(o),O=W(l),S=W(n),y((j=t((N=class extends g{constructor(){super(...arguments),i(this,"heroName",j,this),i(this,"bg",k,this),i(this,"icon",U,this),i(this,"level",x,this),i(this,"levelNode",F,this),i(this,"used",M,this),i(this,"starList",R,this),i(this,"redpoint",E,this),i(this,"star",T,this),i(this,"fragmentProgress",K,this),i(this,"fragmentLabel",q,this),this._heroObj=null,this._heroCfg=null}init(e){if(this._heroObj=e,this._heroCfg=f.instance.getHeroCfgById(e.heroId),this.bg.index=this._heroCfg.quality-1,this.level.string=e.level.toString(),this.redpoint.active=!1,0==e.level){this.levelNode.active=!1;let t=f.instance.getHeroSkillByHeroId(e.heroId,0);this._heroObj.fragment>=t.fragment&&(this.redpoint.active=!0),this.fragmentProgress.progress=this._heroObj.fragment/t.fragment,this.fragmentLabel.string=this._heroObj.fragment+"/"+t.fragment,this.fragmentProgress.node.parent.active=!0}else this.fragmentProgress.node.parent.active=!1,this.levelNode.active=!0;this.heroName.string=v.instance.getLang(this._heroCfg.name),this.used.active=e.isUsed;for(let t=0;t<e.star;t++)if(!this.starList.children[t]){u(this.star).parent=this.starList}for(let t=this.starList.children.length-1;t>e.star-1;t--)this.starList.children[t].removeFromParent();this.setHeroFrames()}setHeroFrames(){let e=b.heroSpinePath+this._heroCfg.skeleton;m.getSkeletonData(e).then((e=>{this.icon.skeletonData=e,this.icon.node.setScale(.5*this._heroCfg.scale,.5*this._heroCfg.scale),this.icon.setAnimation(0,"idle",!0)}))}onInfoBtn(){c.instance.show(b.PopupUI.HeroDetailPopup,null,p.TOP,!1,this._heroObj)}}).prototype,"heroName",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(N.prototype,"bg",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=t(N.prototype,"icon",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=t(N.prototype,"level",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(N.prototype,"levelNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=t(N.prototype,"used",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(N.prototype,"starList",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=t(N.prototype,"redpoint",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=t(N.prototype,"star",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=t(N.prototype,"fragmentProgress",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=t(N.prototype,"fragmentLabel",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=N))||D));r._RF.pop()}}}));

System.register("chunks:///_virtual/BagModel.ts",["cc"],(function(i){var t;return{setters:[function(i){t=i.cclegacy}],execute:function(){t._RF.push({},"2d3ad7YaddLVaGcEN1TRnbz","BagModel",void 0);i("BagCfg",class{constructor(){this.ClassName="Bag",this.Id=void 0,this.name=void 0,this.private_gridLen=void 0,this.max_gridLen=void 0,this.private_gridWidth=void 0,this.private_gredHeight=void 0,this.private_space=void 0,this.picture=void 0,this.private_grid=void 0,this.max_grid=void 0}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/BagPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BagData.ts","./EventListener.ts","./GameEvent.ts","./SlotItem.ts","./BagWeaponItem.ts"],(function(t){var e,n,i,o,l,s,a,h,r,c,p,d,u,g,C,f,m,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,o=t.ScrollView,l=t.Label,s=t.Node,a=t.Prefab,h=t._decorator,r=t.Component,c=t.instantiate,p=t.Layout,d=t.Sprite},function(t){u=t.BagData,g=t.EquipType},function(t){C=t.EventListener},function(t){f=t.GameEvent},function(t){m=t.SlotItem},function(t){b=t.BagWeaponItem}],execute:function(){var P,w,I,_,D,y,S,U,N,O,L,B,W,x,E,A,v,q,k,z,T;i._RF.push({},"5cb8f1LrbdFVL/2sWMnbi9G","BagPopup",void 0);const{ccclass:G,property:j}=h;t("BagPopup",(P=G("BagPopup"),w=j(o),I=j(l),_=j(s),D=j(s),y=j(s),S=j(a),U=j(a),N=j(s),O=j(s),P((W=e((B=class extends r{constructor(){super(...arguments),n(this,"scrollview",W,this),n(this,"upPlace",x,this),n(this,"placeContent",E,this),n(this,"downContent",A,this),n(this,"lockContent",v,this),n(this,"equipPrefab",q,this),n(this,"placePrefab",k,this),n(this,"exchangeContent",z,this),n(this,"equipList",T,this),this._isUpdate=!1,this._isUpdatePlace=!1,this._placeCount=8,this._upCount=0,this.changeNode=null,this.changeData=null}show(){u.instance.getBagDataFromNetwork(),this.scrollview.scrollToTop(),!this._isUpdate&&this.setPlaceList(),!this._isUpdate&&this.setWearEquipList(),!this._isUpdate&&this.setNoWearEquipList(),!this._isUpdate&&this.setLockEquipList(),C.emit(f.init_POPUP_WEAPON_STATUS),this.upPlace.string=`${this._upCount}/${this._placeCount}`,this._isUpdate=!0}setPlaceList(){if(this._isUpdatePlace)return;this._isUpdatePlace=!0;let t=u.instance.getPlaceData();if(this._placeCount=t.length,0==this.placeContent.children.length){for(let e=0;e<t.length;e++){const n=t[e];let i=c(this.placePrefab);i.parent=this.placeContent,i.getComponent(m).init(n,e)}this.scheduleOnce((()=>{this.placeContent.getComponent(p).enabled=!1;for(let t=this.placeContent.children.length-1;t>=0;t--)this.placeContent.children[t].setSiblingIndex(100+t);this._isUpdatePlace=!1}),.1)}else{if(this.placeContent.getComponent(p).enabled)return;for(let t=this.placeContent.children.length-1;t>=0;t--)this.placeContent.children[t].setSiblingIndex(100+t);for(let e=0;e<t.length;e++){const n=t[e];if(this.placeContent.children[e])this.placeContent.children[e].getComponent(m).init(n,e);else{const n=t[e];let i=c(this.placePrefab);i.parent=this.placeContent,i.getComponent(m).init(n,e)}}this.scheduleOnce((()=>{this.placeContent.getComponent(p).enabled=!1;for(let t=this.placeContent.children.length-1;t>=0;t--)this.placeContent.children[t].setSiblingIndex(100+t);this._isUpdatePlace=!1}),.1)}}getSlotItemBySid(t){let e=this.placeContent.children,n=null;for(let i=0;i<e.length;i++)if(e[i].getComponent(m).sid==t){n=e[i];break}return n}updatePlaceItem(t){t.getComponent(m).updateWeapon()}setWearEquipList(){let t=u.instance.getWearData();this._upCount=t.length;let e=[];for(let n=0;n<t.length;n++){const i=t[n];let o=i.sid;e.push(o);let l=this.getSlotItemBySid(o);this.updatePlaceItem(l);let s=l.getChildByName("content");if(0==s.children.length){let t=c(this.equipPrefab);t.parent=s,t.getComponent(b).init(i,g.UP)}else s.children[0].getComponent(b).init(i,g.UP)}let n=u.instance.getPlaceData();for(let t=0;t<n.length;t++)if(-1==e.indexOf(t)){this.getSlotItemBySid(t).getChildByName("content").removeAllChildren()}}setNoWearEquipList(){let t=u.instance.getNoWearData();this.downContent.removeAllChildren(),this.downContent.getComponent(p).enabled=!0;for(let e=0;e<t.length;e++){const n=t[e];let i=c(this.equipPrefab);i.parent=this.downContent,i.getComponent(b).init(n,g.DOWN)}this.downContent.parent.active=!!t.length,this.setDownInfoAfterIndex()}setLockEquipList(){let t=u.instance.getLockData(),e=0;for(e=0;e<t.length;e++){const n=t[e];if(this.lockContent.children[e])this.lockContent.children[e].getComponent(b).init(n,g.LOCK);else{let t=c(this.equipPrefab);t.parent=this.lockContent,t.getComponent(b).init(n,g.LOCK);let e=t.getComponentsInChildren(d);for(let t=0;t<e.length;t++){e[t].grayscale=!0}}}for(let t=this.lockContent.children.length-1;t>=e;t--)this.lockContent.children[t].removeFromParent();this.lockContent.parent.active=!!t.length}getSlotId(){let t=this.placeContent.children,e=-1,n=[];for(let e=0;e<t.length;e++){const i=t[e];if(!i.getChildByName("content").children.length){let t=i.getComponent(m).chapterId,e=i.getComponent(m).sid;0==t&&n.push(e)}}return n.length&&(e=Math.min(...n)),e}onUpDownAction(t,e){if(t.sid>=0){this.setDownInfoBeforeIndex(),this.downContent.getComponent(p).enabled=!0;let e=t.sid;this.getSlotItemBySid(e).getChildByName("content").children[0].destroy(),u.instance.onDownAction(t);let n=c(this.equipPrefab);n.parent=this.downContent,n.getComponent(b).init(t,g.DOWN),this.setDownInfoAfterIndex()}else{let n=this.getSlotId();if(n>=0){this.setDownInfoBeforeIndex(),this.downContent.getComponent(p).enabled=!0,t.sid=n,u.instance.onUpAction(t);let i=this.getSlotItemBySid(n).getChildByName("content"),o=c(this.equipPrefab);o.parent=i,o.getComponent(b).init(t,g.UP),e.destroy(),this.setDownInfoAfterIndex()}else this.exchangeContent.active=!0,this.equipList.active=!1,this.changeData=t,this.changeNode=e,this.exchangeContent.getChildByName("equipItem").getComponent(b).init(t,g.DOWN),this.placeContent.children.forEach(((t,e)=>{let n=t.getChildByName("content");n.children.length>0&&n.children[0].getComponent(b).setChangeStatus()}))}}cancelChange(){this.exchangeContent.active=!1,this.equipList.active=!0,this.placeContent.children.forEach(((t,e)=>{let n=t.getChildByName("content");n.children.length>0&&n.children[0].getComponent(b).closeChangeStatus()}))}setDownInfoBeforeIndex(){let t=u.instance.getNoWearArr();this.downContent.getComponent(p).enabled=!1;let e=this.downContent.children;e.sort(((e,n)=>{let i=e.getComponent(b).weaponObj.weaponId,o=n.getComponent(b).weaponObj.weaponId;return t.indexOf(i)-t.indexOf(o)}));for(let t=0;t<e.length;t++)e[t].setSiblingIndex(t);this.downContent._updateSiblingIndex()}setDownInfoAfterIndex(){this.scheduleOnce((()=>{let t=u.instance.getNoWearArr();this.downContent.getComponent(p).enabled=!1;let e=this.downContent.children;e.sort(((e,n)=>{let i=e.getComponent(b).weaponObj.weaponId,o=n.getComponent(b).weaponObj.weaponId;return t.indexOf(o)-t.indexOf(i)}));for(let t=0;t<e.length;t++)e[t].setSiblingIndex(t);this.downContent._updateSiblingIndex()}),.1)}async change(t,e){this.cancelChange(),C.emit(f.WEAPON_DOWN_UP,t,e),this.scheduleOnce((()=>{C.emit(f.WEAPON_DOWN_UP,this.changeData,this.changeNode)}),0)}onUpdateShopItems(){this.setPlaceList(),this.setWearEquipList(),this.setNoWearEquipList(),this.setLockEquipList(),C.emit(f.init_POPUP_WEAPON_STATUS),this.upPlace.string=`${this._upCount}/${this._placeCount}`}onGuideEvent(){}onEnable(){C.on(f.UPDATE_BAG_POPUP,this.onUpdateShopItems,this),C.on(f.WEAPON_DOWN_UP,this.onUpDownAction,this)}onDisable(){C.off(f.UPDATE_BAG_POPUP,this.onUpdateShopItems,this),C.off(f.WEAPON_DOWN_UP,this.onUpDownAction,this)}update(){this.downContent.parent.active=!!this.downContent.children.length,this.lockContent.parent.active=!!this.lockContent.children.length}}).prototype,"scrollview",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(B.prototype,"upPlace",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(B.prototype,"placeContent",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(B.prototype,"downContent",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(B.prototype,"lockContent",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(B.prototype,"equipPrefab",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(B.prototype,"placePrefab",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(B.prototype,"exchangeContent",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(B.prototype,"equipList",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=B))||L));i._RF.pop()}}}));

System.register("chunks:///_virtual/BagTokenPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./PlayerData.ts"],(function(e){var t,n,o,a,s,p,r,i,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){o=e.cclegacy,a=e.Label,s=e._decorator,p=e.Component},function(e){r=e.OpenPopupManager},function(e){i=e.Constants},function(e){c=e.PlayerData}],execute:function(){var u,l,g,P,b;o._RF.push({},"26803hG1PpFH4Va3eBimF19","BagTokenPopup",void 0);const{ccclass:f,property:h}=s;e("BagTokenPopup",(u=f("BagTokenPopup"),l=h(a),u((b=t((P=class extends p{constructor(){super(...arguments),n(this,"bagText",b,this)}show(){this.bagText.string=`${c.instance.assetObj.bag}`}onCloseTouch(){r.instance.hide(i.PopupUI.BagTokenPopup)}}).prototype,"bagText",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=P))||g));o._RF.pop()}}}));

System.register("chunks:///_virtual/BagTowerData.ts",["cc","./HttpService.ts","./Api.ts","./AdManager.ts","./EventListener.ts","./GameEvent.ts","./OpenPopupManager.ts","./PlayerData.ts"],(function(s){var t,e,a,i,o,n,h,c,r,d;return{setters:[function(s){t=s.cclegacy,e=s._decorator},function(s){a=s.HttpService},function(s){i=s.Api},function(s){o=s.AdManager,n=s.AdType},function(s){h=s.EventListener},function(s){c=s.GameEvent},function(s){r=s.OpenPopupManager},function(s){d=s.PlayerData}],execute:function(){var u,_;t._RF.push({},"106a9dx0ExFGI7kc5Uwp1Zs","BagTowerData",void 0);const{ccclass:v,property:A}=e;s("BagTowerData",v("BagTowerData")(((_=class s{constructor(){this._cashheroObj=null,this._adObj=null,this._countryRankData=[],this._lastIssueUsers=[],this._mineRecords=[]}get cashheroObj(){return this._cashheroObj}get adObj(){return this._adObj}get lastIssueUsers(){return this._lastIssueUsers}get mineRecords(){return this._mineRecords}getBagTowerInfo(s){void 0===s&&(s=!0),a.instance.post(i.CASHHERO_INFO,{}).then((t=>{0==t.code&&(this._cashheroObj=t.data.cashhero,this._adObj=t.data.adTask,h.emit(c.UPDATE_CASHHERO_DATA,s))}))}getLastIssue(){a.instance.post(i.CASHHERO_ISSUE_LAST,{}).then((s=>{0==s.code&&(this._lastIssueUsers=s.data.users,h.emit(c.UPDATE_CASHHERO_ISSUE_LAST))}))}getHistory(){a.instance.post(i.CASHHERO_ISSUE_HISTORY,{}).then((s=>{0==s.code&&(this._mineRecords=s.data.history,h.emit(c.UPDATE_CASHHERO_ISSUE_HISTORY))}))}getCountryData(){a.instance.post(i.CASHHERO_USER_RANK,{}).then((s=>{0==s.code&&(this._countryRankData=s.data.countries,h.emit(c.UPDATE_CASHHERO_USER_DATA))}))}refreshWeapons(){o.instance.showAd(n.CASHHERO_WEAPONS,0,((s,t)=>{0==s&&a.instance.post(i.CASHHERO_REFRESH_WEAPON,{sign:t}).then((s=>{0==s.code?(this._cashheroObj=s.data.cashhero,h.emit(c.UPDATE_CASHHERO_WEAPONS)):r.instance.showToast(s.msg)}))}))}claimTicket(){a.instance.post(i.CASHHERO_TASK_CLAIM,{}).then((s=>{0==s.code?(this._cashheroObj=s.data.cashhero,this._adObj=s.data.adTask,h.emit(c.UPDATE_CASHHERO_DATA),r.instance.showToast("Success")):r.instance.showToast(s.msg)}))}claimReward(s){a.instance.post(i.CASHHERO_ISSUE_CLAIM,{issue:s}).then((s=>{0==s.code?(this._cashheroObj=s.data.cashhero,this.getHistory(),d.instance.getPlayerInfo(),r.instance.showToast("Success")):r.instance.showToast(s.msg)}))}getCountryRankData(){return this._countryRankData}clear(){}static get instance(){return this._instance||(this._instance=new s),this._instance}})._instance=null,u=_))||u);s("CountryObj",class{constructor(){this.rank=void 0,this.country=void 0,this.pass=void 0,this.users=[]}});s("UserObj",class{constructor(){this.avatar=void 0,this.nickname=void 0}});s("CashheroResult",class{constructor(){this.cashhero=void 0,this.adTask=void 0}});s("CashheroObj",class{constructor(){this.issue=void 0,this.limit=void 0,this.pass=void 0,this.event=void 0,this.energyConsume=void 0,this.countdown=void 0,this.weapons=void 0,this.weaponRefreshLimit=void 0,this.pool=void 0,this.token=void 0,this.issueTotalPass=void 0,this.inviteCount=void 0}});s("CashheroAdObj",class{constructor(){this.adBonus=void 0,this.adBonusDailyMax=void 0,this.adWatchEachBonus=void 0,this.validAdWatch=void 0}});s("CashheroRankResult",class{constructor(){this.countries=void 0}});s("CashheroUserObj",class{constructor(){this.rank=void 0,this.pass=void 0,this.token=void 0,this.amount=void 0,this.weight=void 0,this.user=void 0}});s("CashheroRecordObj",class{constructor(){this.issue=void 0,this.amount=void 0,this.token=void 0,this.draw=void 0}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/BagTowerPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./OpenPopupManager.ts","./ScrollViewHelper.ts","./CountryItem.ts","./BagTowerData.ts","./EventListener.ts","./GameEvent.ts","./Util.ts","./TowerData.ts","./PlayerData.ts","./ResourcesUtil.ts","./SpriteEx.ts"],(function(e){var t,n,i,o,r,s,a,l,u,c,h,p,b,g,w,T,d,y,f,m,P,C,_,E,R,O;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,o=e.Label,r=e.Node,s=e.Button,a=e._decorator,l=e.Component,u=e.ScrollView,c=e.UITransform,h=e.v3,p=e.instantiate,b=e.tween},function(e){g=e.Constants},function(e){w=e.OpenPopupManager,T=e.LayerType},function(e){d=e.ScrollViewHelper},function(e){y=e.CountryItem},function(e){f=e.BagTowerData},function(e){m=e.EventListener},function(e){P=e.GameEvent},function(e){C=e.Util},function(e){_=e.TowerData},function(e){E=e.PlayerData},function(e){R=e.ResourcesUtil},function(e){O=e.SpriteEx}],execute:function(){var v,A,I,S,N,U,B,D,H,j,x,L,z,G,X,k,F,M,W,V,Y,$,K,q,J,Q,Z,ee,te,ne,ie,oe,re,se,ae;i._RF.push({},"f35ca9MBdpGvKljuRhb5R9A","BagTowerPopup",void 0);const{ccclass:le,property:ue}=a;e("BagTowerPopup",(v=le("BagTowerPopup"),A=ue(d),I=ue(o),S=ue(o),N=ue(o),U=ue(r),B=ue(o),D=ue(O),H=ue(o),j=ue(o),x=ue(o),L=ue(o),z=ue(s),G=ue(r),X=ue(r),k=ue(r),F=ue(o),v((V=t((W=class extends l{constructor(){super(...arguments),n(this,"scrollViewHelper",V,this),n(this,"energy",Y,this),n(this,"energyTime",$,this),n(this,"pass",K,this),n(this,"crowIcon",q,this),n(this,"rewardText",J,this),n(this,"rewardIcon",Q,this),n(this,"timeText",Z,this),n(this,"issue",ee,this),n(this,"amount",te,this),n(this,"leftNumber",ne,this),n(this,"startBtn",ie,this),n(this,"battleEnergy",oe,this),n(this,"animNode",re,this),n(this,"energyIcon",se,this),n(this,"eventLabel",ae,this),this._endX=0,this._startX=0,this._battleTouchNumber=0}show(){this._endX=0,this._startX=0,f.instance.getBagTowerInfo(),f.instance.getCountryData(),this.setScrollviewContent(),this.setContent(),this.powerCountdown(),this.onUpdatePlayerInfo()}update(e){if(0==this._endX)return;let t=this.eventLabel.node.position;t.x<=this._endX&&this.eventLabel.node.setPosition(this._startX,t.y),this.eventLabel.node.setPosition(t.x-100*e,t.y)}setScrollviewContent(){let e=f.instance.getCountryRankData();this.scrollViewHelper.resetData(e,((e,t,n)=>{t.getComponent(y).init(n)}),!0,null),this.scrollViewHelper.getComponent(u).scrollToTop()}setContent(e){void 0===e&&(e=!0);let t=f.instance.cashheroObj;t&&("usdt"==t.token.toUpperCase()?this.rewardIcon.index=1:"usdt"==t.token.toUpperCase()?this.rewardIcon.index=0:this.rewardIcon.index=2,this.startBtn.interactable=!0,this.amount.string=t.pool+" "+t.token.toUpperCase(),this.leftNumber.string=`${t.limit}`,e&&(this.pass.string=`${t.pass}`),t.issueTotalPass>0?this.rewardText.string=Number(t.pool*t.pass/t.issueTotalPass).toFixed(2):this.rewardText.string="0",this.issue.string="S"+t.issue,t.event&&t.event.length>10?(this.eventLabel.node.parent.parent.active=!0,this.eventLabel.string=t.event.split("\n")[0],this.scheduleOnce((()=>{this.eventLabel.node.position;let e=this.eventLabel.node.getComponent(c).contentSize;this._endX=200-e.width-400,this._startX=-200}),1)):(this.eventLabel.node.parent.parent.active=!1,this._endX=0))}updateTime(){f.instance.cashheroObj&&(f.instance.cashheroObj.countdown<=0&&(f.instance.getBagTowerInfo(),this.unschedule(this.updateTime)),f.instance.cashheroObj.countdown--,this.timeText.string=C.timeToStrings(f.instance.cashheroObj.countdown))}powerCountdown(){let e=E.instance.energyObj;this.energyTime.node.active=e.energyRefillCountdown>0,e.energyRefillCountdown>0?(this.schedule(this.setPowerCountdown,1),this.energyTime.string=C.timeToString(e.energyRefillCountdown)):this.unschedule(this.setPowerCountdown)}setPowerCountdown(){E.instance.energyObj.energyRefillCountdown-=1,E.instance.energyObj.energyRefillCountdown>=0?this.energyTime.string=C.timeToString(E.instance.energyObj.energyRefillCountdown):(E.instance.getPlayerInfo(),this.energyTime.node.active=!1,this.unschedule(this.setPowerCountdown))}onCloseBtn(){w.instance.hide(g.PopupUI.BagTowerPopup)}onStartBtn(){if(!E.instance.userObj.country)return w.instance.show(g.PopupUI.SetCountryPopup,null,T.TOP,!1),void w.instance.showToast("cashhero.setRegion");if(!f.instance.cashheroObj)return;if(0==f.instance.cashheroObj.limit)return;if(0!=this._battleTouchNumber)return;this._battleTouchNumber++,E.instance.energyObj.energy>=5?(E.instance.setEnergy(-5),m.emit(P.CASHHERO_COST_ENERGY_BATTLE,5),_.instance.startBattle(((e,t)=>{0==e?(this._battleTouchNumber++,7==this._battleTouchNumber&&(w.instance.show(g.PopupUI.TowerGame,null,T.TOP,!1,f.instance.cashheroObj.weapons),this._battleTouchNumber=0)):(this._battleTouchNumber=0,w.instance.showToast(t))}))):(this._battleTouchNumber=0,w.instance.showToast("stamina.insufficient"))}onShowEnergyBtn(){w.instance.showEnergyPopup()}onRankTouch(){w.instance.show(g.PopupUI.RankPopup,null,T.TOP,!1,"country")}onTicketTouch(){w.instance.show(g.PopupUI.BagTowerTicketPopup)}onRecordTouch(){w.instance.show(g.PopupUI.BagTowerRecordPopup)}onRuleTouch(){w.instance.show(g.PopupUI.BagTowerRulePopup)}onEventTouch(){w.instance.show(g.PopupUI.BagTowerRulePopup,null,T.TOP,!1,f.instance.cashheroObj.event)}onWeaponTouch(){w.instance.show(g.PopupUI.BagTowerWeaponPopup)}onFlyEnergy(e){let t=this.battleEnergy.getComponent(c).convertToWorldSpaceAR(h(0,0,0)),n=this.animNode.getComponent(c).convertToNodeSpaceAR(t),i=this.energyIcon.getComponent(c).convertToWorldSpaceAR(h(0,0,0)),o=g.commonPreabPath+"energyItem",r=this.animNode.getComponent(c).convertToNodeSpaceAR(i);R.getPrefab(o).then((t=>{for(let i=0;i<e;i++){let o=p(t),s=2*(Math.random()-.5)*100+r.x,a=2*(Math.random()-.5)*50+r.y;o.parent=this.animNode,o.setPosition(r),this.scheduleOnce((()=>{b(o).to(.2,{position:h(s,a,0)},{easing:"sineIn"}).delay(.2).to(1,{position:n},{easing:"sineInOut"}).call((()=>{o.destroy(),this._battleTouchNumber>0&&this._battleTouchNumber++,this._battleTouchNumber==e+2&&(w.instance.show(g.PopupUI.TowerGame,null,T.TOP,!1,f.instance.cashheroObj.weapons),this._battleTouchNumber=0)})).start()}),.05+.05*i)}}))}onFlyCrown(e){let t=this.crowIcon.getPosition(),n=e.pos,i=g.commonPreabPath+"crownItem",o=this.crowIcon.parent.getComponent(c).convertToNodeSpaceAR(n);R.getPrefab(i).then((e=>{for(let n=0;n<1;n++){let i=p(e),r=2*(Math.random()-.5)*100+o.x,s=2*(Math.random()-.5)*50+o.y;i.parent=this.crowIcon.parent,i.setPosition(o),this.scheduleOnce((()=>{b(i).to(.2,{position:h(r,s,0)},{easing:"sineIn"}).delay(.2).to(1,{position:t},{easing:"sineInOut"}).call((()=>{i.destroy(),this.pass.string=`${f.instance.cashheroObj.pass}`})).start()}),.05+.05*n)}}))}onUpdatePlayerInfo(e){let t=E.instance.energyObj;e&&"all"!=e&&"energy"!=e||(this.energy.string=`${t.energy}/${t.energyMax}`)}onEnable(){m.on(P.UPDATE_PLAYER_DATA,this.onUpdatePlayerInfo,this),m.on(P.UPDATE_CASHHERO_DATA,this.setContent,this),m.on(P.UPDATE_CASHHERO_USER_DATA,this.setScrollviewContent,this),m.on(P.CASHHERO_COST_ENERGY_BATTLE,this.onFlyEnergy,this),m.on(P.CASHHERO_GET_CROWN_REWARD,this.onFlyCrown,this),this.schedule(this.updateTime,1)}onDisable(){m.off(P.UPDATE_PLAYER_DATA,this.onUpdatePlayerInfo,this),m.off(P.UPDATE_CASHHERO_DATA,this.setContent,this),m.off(P.UPDATE_CASHHERO_USER_DATA,this.setScrollviewContent,this),m.off(P.CASHHERO_COST_ENERGY_BATTLE,this.onFlyEnergy,this),m.off(P.CASHHERO_GET_CROWN_REWARD,this.onFlyCrown,this),this.unschedule(this.updateTime)}}).prototype,"scrollViewHelper",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(W.prototype,"energy",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(W.prototype,"energyTime",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(W.prototype,"pass",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(W.prototype,"crowIcon",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(W.prototype,"rewardText",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(W.prototype,"rewardIcon",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(W.prototype,"timeText",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(W.prototype,"issue",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t(W.prototype,"amount",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=t(W.prototype,"leftNumber",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=t(W.prototype,"startBtn",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=t(W.prototype,"battleEnergy",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),re=t(W.prototype,"animNode",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=t(W.prototype,"energyIcon",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=t(W.prototype,"eventLabel",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=W))||M));i._RF.pop()}}}));

System.register("chunks:///_virtual/BagTowerRecordPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./BagTowerData.ts","./EventListener.ts","./GameEvent.ts","./UserRankItem2.ts","./RecordItem.ts"],(function(e){var t,s,i,n,r,o,a,l,u,c,p,h,m,b,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,s=e.initializerDefineProperty},function(e){i=e.cclegacy,n=e.Prefab,r=e.Node,o=e._decorator,a=e.Component,l=e.instantiate},function(e){u=e.OpenPopupManager},function(e){c=e.Constants},function(e){p=e.BagTowerData},function(e){h=e.EventListener},function(e){m=e.GameEvent},function(e){b=e.UserRankItem},function(e){d=e.RecordItem}],execute:function(){var f,R,g,I,w,S,C,E,y,T,H,U,_,P,v,A,D;i._RF.push({},"3563djv7lZKIpCfbFq7nntX","BagTowerRecordPopup",void 0);const{ccclass:L,property:B}=o;e("BagTowerRecordPopup",(f=L("BagTowerRecordPopup"),R=B(n),g=B(n),I=B(r),w=B(r),S=B(r),C=B(r),E=B(r),f((H=t((T=class extends a{constructor(){super(...arguments),s(this,"userRankItem",H,this),s(this,"userRewardItem",U,this),s(this,"tabs",_,this),s(this,"issueScroll",P,this),s(this,"mineScroll",v,this),s(this,"issueUsers",A,this),s(this,"mineRewards",D,this)}show(){p.instance.getLastIssue(),p.instance.getHistory(),this.setLastIssueContent(),this.setHistoryContent()}setLastIssueContent(){this.issueUsers.removeAllChildren(),p.instance.lastIssueUsers.forEach(((e,t)=>{let s=l(this.userRankItem);s.getComponent(b).init(e),s.parent=this.issueUsers}))}setHistoryContent(){this.mineRewards.removeAllChildren(),p.instance.mineRecords.forEach(((e,t)=>{let s=l(this.userRewardItem);s.getComponent(d).init(e),s.parent=this.mineRewards}))}onCloseTouch(){u.instance.hide(c.PopupUI.BagTowerRecordPopup)}switchTab(e,t){this.tabs.children.forEach(((e,s)=>{this.tabs.children[s].getChildByName("checked").active=s==t})),this.issueScroll.active=0==t,this.mineScroll.active=1==t}onEnable(){h.on(m.UPDATE_CASHHERO_ISSUE_LAST,this.setLastIssueContent,this),h.on(m.UPDATE_CASHHERO_ISSUE_HISTORY,this.setHistoryContent,this)}onDisable(){h.off(m.UPDATE_CASHHERO_ISSUE_LAST,this.setLastIssueContent,this),h.off(m.UPDATE_CASHHERO_ISSUE_HISTORY,this.setHistoryContent,this)}}).prototype,"userRankItem",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=t(T.prototype,"userRewardItem",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(T.prototype,"tabs",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=t(T.prototype,"issueScroll",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=t(T.prototype,"mineScroll",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=t(T.prototype,"issueUsers",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(T.prototype,"mineRewards",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=T))||y));i._RF.pop()}}}));

System.register("chunks:///_virtual/BagTowerRulePopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./OpenPopupManager.ts","./LanguageManager.ts"],(function(e){var n,t,r,o,a,i,s,l,u,p;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.initializerDefineProperty},function(e){r=e.cclegacy,o=e.RichText,a=e.Label,i=e._decorator,s=e.Component},function(e){l=e.Constants},function(e){u=e.OpenPopupManager},function(e){p=e.LanguageManager}],execute:function(){var h,c,g,d,y,w,b;r._RF.push({},"77a36nzC6xMuJZ/3ciHArmM","BagTowerRulePopup",void 0);const{ccclass:f,property:m}=i;e("BagTowerRulePopup",(h=f("BagTowerRulePopup"),c=m(o),g=m(a),h((w=n((y=class extends s{constructor(){super(...arguments),t(this,"ruleText",w,this),t(this,"title",b,this)}show(e){e?(this.title.string=p.instance.getLang("tips"),this.ruleText.string=e):(this.title.string=p.instance.getLang("rules"),this.ruleText.string="\nWeekly Challenge: Fight for Glory and Rewards! \n\nWin battles to claim your share of the prize pool! 🌟\n\nEvent Time:\n\nWeekly event: Starts every Wednesday at UTC 0:00 and ends next Tuesday at UTC 23:59.\n\nAbout Weapon:\n\nThe weapon is randomly generated based on the weapons the user already owns, and its base attack power is determined by the weapon's attributes.\n\nEvent Rules:\n\nChoose Your Region: Your region will be set automatically based on your IP when you join the event. The more total victories your region achieves, the higher its ranking and the bigger the bonus reward multiplier.\n\nWin Battles to Claim Rewards: Each battle victory increases your share of the prize pool.\n\nMore Wins, Bigger Rewards: The more battles you win, the higher your reward proportion.\n\nReward Calculation:\n\nYour reward = (Your wins × (1 + Region Bonus)) ÷ Total wins × Prize Pool\n\nRegion Bonus (based on regional ranking):\n\n1st: +0.5\n\n2nd: +0.4\n\n3rd: +0.3\n\n4th: +0.2\n\n5th: +0.1\n\nFor Example: \n\nIf your region ranks 1st and you win 50 battles, while the total battle count for the week is 500: \n\nYour reward = 50 × (1 + 0.5) ÷ 500 × Prize Pool = 15% of the Prize Pool.\n\nHow to Get Battle Attempts:\n\nDaily Free Battles: Get 3 free battle attempts each day.\n\nInvite Friends: Earn 1 extra battle attempt for each friend you invite.\n\nWatch Ads: Get 3 free attempts each day.\n\nJoin now, represent your region, and battle your way to a share of the prize pool! 🏆💰")}onCloseTouch(){u.instance.hide(l.PopupUI.BagTowerRulePopup)}}).prototype,"ruleText",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=n(y.prototype,"title",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=y))||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/BagTowerTicketPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./BagTowerData.ts","./EventListener.ts","./GameEvent.ts","./LanguageManager.ts","./PlayerData.ts"],(function(t){var e,n,i,a,o,r,s,c,u,l,p,g,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,a=t.Label,o=t._decorator,r=t.Component},function(t){s=t.OpenPopupManager},function(t){c=t.Constants},function(t){u=t.BagTowerData},function(t){l=t.EventListener},function(t){p=t.GameEvent},function(t){g=t.LanguageManager},function(t){h=t.PlayerData}],execute:function(){var T,d,b,f,w,k,m,y,B,P,v,C,x;i._RF.push({},"2c493I39lVBPbUgqudbiYnW","BagTowerTicketPopup",void 0);const{ccclass:D,property:L}=o;t("BagTowerTicketPopup",(T=D("BagTowerTicketPopup"),d=L(a),b=L(a),f=L(a),w=L(a),k=L(a),T((B=e((y=class extends r{constructor(){super(...arguments),n(this,"adTicketText",B,this),n(this,"ticketText",P,this),n(this,"adProgressText",v,this),n(this,"adTodayTicket",C,this),n(this,"inviteTicket",x,this)}show(){u.instance.getBagTowerInfo(),u.instance.cashheroObj&&this.setContent()}setContent(){let t=u.instance.adObj;this.adTicketText.string=g.instance.getLang("cashhero.watchadearn",[t.adBonusDailyMax]),this.ticketText.string=`${u.instance.cashheroObj.limit}`,this.adProgressText.string=g.instance.getLang("cashhero.watchads",[t.validAdWatch,t.adWatchEachBonus]),this.adTodayTicket.string=g.instance.getLang("cashhero.todayearn",[t.adBonus,t.adBonusDailyMax]),this.inviteTicket.string=g.instance.getLang("cashhero.inviteearn",[u.instance.cashheroObj.inviteCount,u.instance.cashheroObj.inviteCount])}onCloseTouch(){s.instance.hide(c.PopupUI.BagTowerTicketPopup)}onInviteBtn(){let t=h.instance.configObj.tgBot+"?startapp="+h.instance.userObj.code;const e="https://t.me/share/url?url="+encodeURIComponent(t)+"&text="+encodeURIComponent("BagWar battle time! Join BagWar now with my link for epic rewards! 🎁🔥");window.Telegram&&window.Telegram.WebApp.openTelegramLink(e)}onClaimBtn(){u.instance.claimTicket()}onEnable(){l.on(p.UPDATE_CASHHERO_DATA,this.setContent,this)}onDisable(){l.off(p.UPDATE_CASHHERO_DATA,this.setContent,this)}}).prototype,"adTicketText",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(y.prototype,"ticketText",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(y.prototype,"adProgressText",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(y.prototype,"adTodayTicket",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(y.prototype,"inviteTicket",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=y))||m));i._RF.pop()}}}));

System.register("chunks:///_virtual/BagTowerWeaponItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./SpriteEx.ts","./BagData.ts","./OpenPopupManager.ts","./ResourcesUtil.ts"],(function(e){var t,n,i,o,a,r,s,p,c,u,l,g,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,o=e.Sprite,a=e._decorator,r=e.Component,s=e.UITransform},function(e){p=e.Constants},function(e){c=e.SpriteEx},function(e){u=e.BagData},function(e){l=e.OpenPopupManager,g=e.LayerType},function(e){h=e.ResourcesUtil}],execute:function(){var f,m,d,w,I,y,b;i._RF.push({},"8ca18ioqwNMWqe4S6hEitDV","BagTowerWeaponItem",void 0);const{ccclass:B,property:P}=a;e("BagTowerWeaponItem",(f=B("BagTowerWeaponItem"),m=P(c),d=P(o),f((y=t((I=class extends r{constructor(){super(...arguments),n(this,"bg",y,this),n(this,"icon",b,this),this._weaponId=0}init(e){this._weaponId=e;let t=u.instance.getWeaponCfgById(e);this.bg.index=t.quality;let n=p.weaponIconPath+u.instance.getWeaponIcon(e,15)+"/spriteFrame";h.geSpriteFrame(n).then((e=>{this.icon.spriteFrame=e;let t=this.icon.getComponent(s).contentSize,n=Math.min(80/t.width,80/t.height);this.icon.node.setScale(n,n)}))}onTapBtn(){let e=u.instance.getWeaponObjById(this._weaponId);l.instance.show(p.PopupUI.BagDetailPopup,null,g.TOP,!1,e)}}).prototype,"bg",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=t(I.prototype,"icon",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=I))||w));i._RF.pop()}}}));

System.register("chunks:///_virtual/BagTowerWeaponPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./BagTowerData.ts","./EventListener.ts","./GameEvent.ts","./BagTowerWeaponItem.ts"],(function(e){var n,t,o,a,i,r,p,s,l,u,c,h,f,w,b;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.initializerDefineProperty},function(e){o=e.cclegacy,a=e.Node,i=e.Label,r=e.Prefab,p=e._decorator,s=e.Component,l=e.instantiate},function(e){u=e.OpenPopupManager},function(e){c=e.Constants},function(e){h=e.BagTowerData},function(e){f=e.EventListener},function(e){w=e.GameEvent},function(e){b=e.BagTowerWeaponItem}],execute:function(){var g,m,C,P,T,W,d,E,B;o._RF.push({},"b9d83bsFK9E3LzZ52GtTYfn","BagTowerWeaponPopup",void 0);const{ccclass:v,property:y}=p;e("BagTowerWeaponPopup",(g=v("BagTowerWeaponPopup"),m=y(a),C=y(i),P=y(r),g((d=n((W=class extends s{constructor(){super(...arguments),t(this,"weaponContent",d,this),t(this,"leftnumber",E,this),t(this,"weaponItem",B,this)}show(){this.onUpdateWeaponContent()}onCloseTouch(){u.instance.hide(c.PopupUI.BagTowerWeaponPopup)}onRefreshTouch(){h.instance.refreshWeapons()}onUpdateWeaponContent(){let e=h.instance.cashheroObj.weapons;this.weaponContent.removeAllChildren();for(let n=0;n<e.length;n++){let t=e[n],o=l(this.weaponItem);o.getComponent(b).init(t),o.parent=this.weaponContent}this.leftnumber.string=`${h.instance.cashheroObj.weaponRefreshLimit}`}onEnable(){f.on(w.UPDATE_CASHHERO_WEAPONS,this.onUpdateWeaponContent,this)}onDisable(){f.off(w.UPDATE_CASHHERO_WEAPONS,this.onUpdateWeaponContent,this)}}).prototype,"weaponContent",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=n(W.prototype,"leftnumber",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=n(W.prototype,"weaponItem",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=W))||T));o._RF.pop()}}}));

System.register("chunks:///_virtual/BagWeaponItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BagData.ts","./Constants.ts","./ResourcesUtil.ts","./OpenPopupManager.ts","./EventListener.ts","./GameEvent.ts","./SpriteEx.ts","./SysOpenData.ts","./BagPopup.ts","./LanguageManager.ts"],(function(e){var t,n,i,a,o,s,r,l,c,p,u,h,g,b,f,_,w,d,O,P,m,v,y,B,I;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,a=e.Label,o=e.Node,s=e.Sprite,r=e.ProgressBar,l=e._decorator,c=e.Component,p=e.UITransform,u=e.tween,h=e.Vec3,g=e.Tween},function(e){b=e.EquipType,f=e.BagData},function(e){_=e.Constants},function(e){w=e.ResourcesUtil},function(e){d=e.OpenPopupManager,O=e.LayerType},function(e){P=e.EventListener},function(e){m=e.GameEvent},function(e){v=e.SpriteEx},function(e){y=e.SysOpenData},function(e){B=e.BagPopup},function(e){I=e.LanguageManager}],execute:function(){var T,j,S,k,U,E,L,A,W,z,D,C,q,N,F,x,G,M,R,$,H,K,V,J,Q,X,Y,Z,ee,te,ne,ie,ae,oe,se,re,le;i._RF.push({},"982021FWyJCk5cbhftj/GEV","BagWeaponItem",void 0);const{ccclass:ce,property:pe}=l;e("BagWeaponItem",(T=ce("BagWeaponItem"),j=pe(v),S=pe(a),k=pe(o),U=pe(a),E=pe(a),L=pe(s),A=pe(s),W=pe(r),z=pe(a),D=pe(o),C=pe(s),q=pe(o),N=pe(o),F=pe(o),x=pe(a),G=pe(o),M=pe(o),T((H=t(($=class extends c{constructor(){super(...arguments),n(this,"bg",H,this),n(this,"title",K,this),n(this,"skin",V,this),n(this,"level",J,this),n(this,"desc",Q,this),n(this,"icon",X,this),n(this,"grid",Y,this),n(this,"progressBar",Z,this),n(this,"proText",ee,this),n(this,"lock",te,this),n(this,"doubleTag",ne,this),n(this,"contentBar",ie,this),n(this,"contentBtn",ae,this),n(this,"element",oe,this),n(this,"btnLb",se,this),n(this,"upgradeAnim",re,this),n(this,"infoBtn",le,this),this._equipType=b.LOCK,this._weaponObj=null}get weaponObj(){return this._weaponObj}init(e,t){this._equipType=t,this._weaponObj=e,this.upgradeAnim.active=f.instance.checkWeaponUpgrage(e),this.setWeaponInfo(),this.setProgress()}setWeaponInfo(){let e=f.instance.getWeaponCfgById(this._weaponObj.weaponId);this.bg.index=e.quality,this._equipType!=b.DETAIL?(this.title.node.active=!!this._weaponObj.unlock,this.skin&&(this.skin.active=!1)):(this.title.node.active=!1,this.skin.active=!0),this.element.active=!1,this.title.string=I.instance.getLang(`${e.name}`),this.level.string=this._weaponObj.unlock?`Lv.${this._weaponObj.level}`:I.instance.getLang("bag.locked");this._weaponObj.unlock&&(this._weaponObj.level>=e.skillIds.length?e.skillIds.length:this._weaponObj.level);let t=_.weaponIconPath+f.instance.getWeaponIcon(e.Id)+"/spriteFrame",n=_.gridIconPath+e.grid+"/spriteFrame";w.geSpriteFrame(t).then((e=>{this.icon.spriteFrame=e;let t=this.icon.getComponent(p).contentSize,n=Math.min(90/t.width,90/t.height);this.icon.node.setScale(n,n)})),w.geSpriteFrame(n).then((e=>{this.grid.spriteFrame=e})),this.desc.node.active=!this._weaponObj.unlock,this.setUnlockDesc(this._weaponObj.unlock,e.sid),this.progressBar.node.active=!!this._weaponObj.unlock,this.lock.active=!this._weaponObj.unlock,this.btnLb.string=this._equipType==b.UP?I.instance.getLang("bag.remove"):I.instance.getLang("bag.use"),e.doubleLevel>0?(this.doubleTag.node.active=!0,this._weaponObj.level>=e.doubleLevel?this.doubleTag.grayscale=!1:this.doubleTag.grayscale=!0):this.doubleTag.node.active=!1}setUnlockDesc(e,t){if(t&&!e){let e=y.instance.getSysOpenCfgById(t);if(e){let t=e.unlock.toString(),n=I.instance.getLang(e.desc,[t]);this.desc.string=n}else this.desc.string=""}else this.desc.string=""}setProgress(){if(f.instance.isWeaponMaxLevel(this._weaponObj.weaponId,this._weaponObj.level))this.progressBar.node.active=!1;else{this.progressBar.node.active=!0;let e=this._weaponObj.fragment,t=f.instance.getWeaponLevelCfgByLevel(this._weaponObj.weaponId,0==this._weaponObj.level?1:this._weaponObj.level);this.proText.string=`${e}/${t.fragment}`,this.progressBar.progress=e/t.fragment}}onTouchBtn(){switch(this._equipType){case b.UP:case b.DOWN:this.setInfoStatus();break;case b.LOCK:this.onInfoBtn();break;case b.CHANGE:P.handle[m.WEAPON_DOWN_UP][0].target.getComponent(B).change(this._weaponObj,this.node)}}setChangeStatus(){this._equipType=b.CHANGE,u(this.node).sequence(u().to(.8,{scale:new h(1.1,1.1,1)}),u().to(.8,{scale:new h(1,1,1)})).repeatForever().start()}closeChangeStatus(){this._equipType=b.UP,g.stopAllByTarget(this.node)}onInfoBtn(){P.emit(m.init_POPUP_WEAPON_STATUS),d.instance.show(_.PopupUI.BagDetailPopup,null,O.TOP,!1,this._weaponObj)}onSkinBtn(){d.instance.show(_.PopupUI.WeaponStylePopup,null,O.TOP,!1,this._weaponObj.weaponId)}onActionBtn(){P.emit(m.WEAPON_DOWN_UP,this._weaponObj,this.node),this.contentBar.active=!this.contentBar.active,this.contentBtn.active=!this.contentBtn.active}setInfoStatus(){P.emit(m.init_POPUP_WEAPON_STATUS,this._weaponObj.weaponId),this.contentBar.active=!this.contentBar.active,this.contentBtn&&(this.contentBtn.active=!this.contentBtn.active)}initInfoStaus(e){this._weaponObj&&(e&&this._weaponObj.weaponId==e||(this.contentBar.active=!0,this.contentBtn.active=!1))}updateEquipInfo(){this.init(this._weaponObj,this._equipType)}onEnable(){P.on(m.init_POPUP_WEAPON_STATUS,this.initInfoStaus,this),P.on(m.UPDATE_POPUP_UPGRADE_INFO,this.updateEquipInfo,this)}onDisable(){P.off(m.init_POPUP_WEAPON_STATUS,this.initInfoStaus,this),P.off(m.UPDATE_POPUP_UPGRADE_INFO,this.updateEquipInfo,this)}}).prototype,"bg",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t($.prototype,"title",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t($.prototype,"skin",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t($.prototype,"level",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t($.prototype,"desc",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t($.prototype,"icon",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t($.prototype,"grid",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t($.prototype,"progressBar",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t($.prototype,"proText",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t($.prototype,"lock",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=t($.prototype,"doubleTag",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=t($.prototype,"contentBar",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=t($.prototype,"contentBtn",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=t($.prototype,"element",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=t($.prototype,"btnLb",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=t($.prototype,"upgradeAnim",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=t($.prototype,"infoBtn",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=$))||R));i._RF.pop()}}}));

System.register("chunks:///_virtual/BagWeaponModel.ts",["cc"],(function(s){var o;return{setters:[function(s){o=s.cclegacy}],execute:function(){o._RF.push({},"1ab4eeNMlpFFrHEYIzlU6m0","BagWeaponModel",void 0);s("BagWeaponCfg",class{constructor(){this.ClassName="BagWeapon",this.weaponId=void 0,this.sid=void 0,this.fragment=void 0,this.level=void 0,this.golds=void 0}});s("BagWeaponResult",class{constructor(){this.slot=void 0,this.bagWeapons=void 0}});s("BagWeaponModel",class{constructor(){this.weaponId=void 0,this.sid=void 0,this.fragment=void 0,this.blueprint=void 0,this.level=void 0,this.fragments=void 0,this.golds=void 0}}),o._RF.pop()}}}));

System.register("chunks:///_virtual/BaseComponent.ts",["cc","./GameDefine.ts","./GameController.ts","./GameData.ts"],(function(e){var t,n,a,i,s;return{setters:[function(e){t=e.Component,n=e.cclegacy},function(e){a=e.GameDefine},function(e){i=e.default},function(e){s=e.GameData}],execute:function(){n._RF.push({},"12e28pWfOpKyIbZwZp3vv5F","BaseComponent",void 0);e("default",class extends t{constructor(){super(...arguments),this._now_time=0}childUpdate(e){}update(e){if(!i.pause_data.state_b)for(this._now_time+=e*s.instance.gameSpeed;this._now_time>=a.frameTime;)this.childUpdate(a.frameTime),this._now_time-=a.frameTime}}),n._RF.pop()}}}));

System.register("chunks:///_virtual/BattleLevelModel.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"c25beFq2cdPHpZ9fLzDLadI","BattleLevelModel",void 0);e("BattleLevelCfg",class{constructor(){this.ClassName="BattleLevel",this.Id=void 0,this.level=void 0,this.exp=void 0}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/BattleUIManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventListener.ts","./GameEvent.ts","./PoolManager.ts","./DamageItem.ts","./ResourcesUtil.ts","./BlastItem.ts","./HeroHpItem.ts","./MonsterHpItem.ts","./Constants.ts","./Shadow.ts","./MonsterBuffItem.ts","./MonsterBuffData.ts","./HeroData.ts"],(function(t){var e,n,a,i,o,s,r,l,f,h,d,m,C,g,b,u,p,I,c,P,U,_,D,N;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){a=t.cclegacy,i=t.Node,o=t._decorator,s=t.Component,r=t.Vec3,l=t.instantiate,f=t.Animation,h=t.AnimationClip,d=t.Sprite},function(t){m=t.EventListener},function(t){C=t.GameEvent},function(t){g=t.PoolManager},function(t){b=t.DamageItem},function(t){u=t.ResourcesUtil},function(t){p=t.BlastItem},function(t){I=t.HeroHpItem},function(t){c=t.MonsterHpItem},function(t){P=t.Constants},function(t){U=t.Shadow},function(t){_=t.MonsterBuffItem},function(t){D=t.MonsterBuffData},function(t){N=t.HeroData}],execute:function(){var S,B,E,H,M,w,F;a._RF.push({},"8b377pXlFFISI2cYT0s3FLN","BattleUIManager",void 0);const{ccclass:y,property:A}=o;t("BattleUIManager",(S=y("BattleUIManager"),B=A(i),E=A(i),S((w=e((M=class extends s{constructor(){super(...arguments),n(this,"battleUIUpParent",w,this),n(this,"battleUIDownParent",F,this),this._battlerUIPrefabData=new Map,this._battleUiNode=new Map}init(){this.onCreateHeroHp(N.instance.heroPoint)}onCreateDamageNum(t,e,n,a){let i="damageNum",o=null,s=null;if(this._battlerUIPrefabData.has(i))s=this._battlerUIPrefabData.get(i),o=g.instance.getNodeItem(s),this.battleUIUpParent.addChild(o),o.setPosition(t),o.getComponent(b).init(e,n);else{let a=P.battlePath+i;u.getPrefab(a).then((a=>{this._battlerUIPrefabData.set(i,a),o=g.instance.getNodeItem(a),this.battleUIUpParent.addChild(o),o.setPosition(t),o.getComponent(b).init(e,n)}))}}onCreateDieEffect(t){let e="blastItem",n=null,a=null,i=this.battleUIDownParent.getChildByName("Die");if(this._battlerUIPrefabData.has(e))a=this._battlerUIPrefabData.get(e),n=g.instance.getNodeItem(a),i.addChild(n),n.setPosition(t),n.getComponent(p).init();else{let a=P.battlePath+e;u.getPrefab(a).then((a=>{this._battlerUIPrefabData.set(e,a),n=g.instance.getNodeItem(a),i.addChild(n),n.setPosition(t),n.getComponent(p).init()}))}}onCreateHeroHp(t){let e="heroHpItem",n=null,a=null,i=this.battleUIUpParent,o=new r(t.x,t.y-30,0);if(this._battlerUIPrefabData.has(e))a=this._battlerUIPrefabData.get(e),n=g.instance.getNodeItem(a),i.addChild(n),n.setPosition(o),n.getComponent(I).init();else{let t=P.battlePath+e;u.getPrefab(t).then((t=>{this._battlerUIPrefabData.set(e,t),n=g.instance.getNodeItem(t),i.addChild(n),n.setPosition(o),n.getComponent(I).init()}))}}onCreateMonsterHp(t){let e="monsterHpItem",n=null,a=null,i=this.battleUIUpParent;if(this._battlerUIPrefabData.has(e))a=this._battlerUIPrefabData.get(e),n=g.instance.getNodeItem(a),i.addChild(n),n.getComponent(c).init(t),t.monsterHpItem=n.getComponent(c);else{let a=P.battlePath+e;u.getPrefab(a).then((a=>{this._battlerUIPrefabData.set(e,a),n=g.instance.getNodeItem(a),i.addChild(n),n.getComponent(c).init(t),t.monsterHpItem=n.getComponent(c)}))}}onCreateMonsterShadow(t){let e="shadown",n=null,a=null,i=this.battleUIDownParent.getChildByName("Shadow");if(this._battlerUIPrefabData.has(e))a=this._battlerUIPrefabData.get(e),n=g.instance.getNodeItem(a),i.addChild(n),n.getComponent(U).init(t),t.monsterShadow=n.getComponent(U);else{let a=P.battlePath+e;u.getPrefab(a).then((a=>{this._battlerUIPrefabData.set(e,a),n=g.instance.getNodeItem(a),i.addChild(n),n.getComponent(U).init(t),t.monsterShadow=n.getComponent(U)}))}}onCreateMonsterDebuff(t,e){let n=e.buffCfg.Id,a=null,i=2==e.buffCfg.lowLayer?this.battleUIUpParent:this.battleUIDownParent.getChildByName("Buff");if(this._battleUiNode.has(n.toString()))a=g.instance.getNodeItemById(this._battleUiNode.get(n.toString()),n.toString()),a.setPosition(1e4,1e4),i.addChild(a),a.getComponent(_).init(t,e),D.instance.addBuffItem(e,a.getComponent(_));else{let o=P.battlePath+"monsterBuffItem";u.getPrefab(o).then((o=>{if(e.buffCfg.frames>1){let s=P.buffPath+e.buffCfg.res;u.getSpriteAtlas(s).then((s=>{a=l(o);let r=a.getChildByName("icon").getComponent(f),d=h.createWithSpriteFrames(s,e.buffCfg.frames);d.name="effect",d.wrapMode=h.WrapMode.Loop,r.addClip(d),r.node.setScale(e.buffCfg.scale,e.buffCfg.scale),a.setPosition(1e4,1e4),i.addChild(a),this._battleUiNode.set(n.toString(),a),a.getComponent(_).init(t,e),D.instance.addBuffItem(e,a.getComponent(_))}))}else{let s=P.buffPath+e.buffCfg.res+"/spriteFrame";u.getSpriteFrame(s).then((s=>{a=l(o),a.getChildByName("icon").getComponent(d).spriteFrame=s,a.setScale(e.buffCfg.scale,e.buffCfg.scale,1),a.setPosition(1e4,1e4),i.addChild(a),this._battleUiNode.set(n.toString(),a),a.getComponent(_).init(t,e),D.instance.addBuffItem(e,a.getComponent(_))}))}}))}}onCreateHeroDebuff(t,e){let n=t.buffCfg.Id,a=null,i=this.battleUIDownParent;if(this._battleUiNode.has(n.toString()))a=g.instance.getNodeItemById(this._battleUiNode.get(n.toString()),n.toString()),i.addChild(a),a.getComponent(_).init(null,t),a.setPosition(e);else{let o=P.battlePath+"monsterBuffItem";u.getPrefab(o).then((o=>{if(t.buffCfg.frames>1){let s=P.buffPath+t.buffCfg.res;u.getSpriteAtlas(s).then((s=>{a=l(o);let r=a.getChildByName("icon").getComponent(f),d=h.createWithSpriteFrames(s,t.buffCfg.frames);d.name="effect",d.wrapMode=h.WrapMode.Loop,r.addClip(d),i.addChild(a),this._battleUiNode.set(n.toString(),a),a.getComponent(_).init(null,t),a.setPosition(e)}))}else{let s=P.buffPath+t.buffCfg.res+"/spriteFrame";u.getSpriteFrame(s).then((s=>{a=l(o),a.getChildByName("icon").getComponent(d).spriteFrame=s,a.setScale(t.buffCfg.scale,t.buffCfg.scale,1),i.addChild(a),this._battleUiNode.set(n.toString(),a),a.getComponent(_).init(null,t),a.setPosition(e)}))}}))}}onCreateMonsterBuff(t,e){let n=e.buffCfg.Id,a=null,i=2==e.buffCfg.lowLayer?this.battleUIUpParent:this.battleUIDownParent.getChildByName("Buff");if(this._battleUiNode.has(n.toString()))a=g.instance.getNodeItemById(this._battleUiNode.get(n.toString()),n.toString()),a.setPosition(1e4,1e4),i.addChild(a),a.getComponent(_).init(t,e),D.instance.addBuffItem(e,a.getComponent(_));else{let o=P.battlePath+"monsterBuffItem";u.getPrefab(o).then((o=>{if(e.buffCfg.frames>1){let s=P.buffPath+e.buffCfg.res;u.getSpriteAtlas(s).then((s=>{a=l(o);let r=a.getChildByName("icon").getComponent(f),d=h.createWithSpriteFrames(s,e.buffCfg.frames);d.name="effect",d.wrapMode=h.WrapMode.Loop,r.addClip(d),a.setPosition(1e4,1e4),i.addChild(a),this._battleUiNode.set(n.toString(),a),a.getComponent(_).init(t,e),D.instance.addBuffItem(e,a.getComponent(_))}))}else{let s=P.buffPath+e.buffCfg.res+"/spriteFrame";u.getSpriteFrame(s).then((s=>{a=l(o),a.getChildByName("icon").getComponent(d).spriteFrame=s,a.setPosition(1e4,1e4),i.addChild(a),this._battleUiNode.set(n.toString(),a),a.getComponent(_).init(t,e),D.instance.addBuffItem(e,a.getComponent(_))}))}}))}}revive(){this._battlerUIPrefabData.clear(),this._battleUiNode.clear(),this.battleUIUpParent.removeAllChildren(),this.battleUIDownParent.getChildByName("Die").removeAllChildren(),this.battleUIDownParent.getChildByName("Shadow").removeAllChildren(),this.battleUIDownParent.getChildByName("Buff").removeAllChildren()}clear(){this._battlerUIPrefabData.clear(),this._battleUiNode.clear(),this.battleUIUpParent.removeAllChildren(),this.battleUIDownParent.getChildByName("Die").removeAllChildren(),this.battleUIDownParent.getChildByName("Shadow").removeAllChildren(),this.battleUIDownParent.getChildByName("Buff").removeAllChildren()}onReviveHero(){this.battleUIUpParent.removeAllChildren(),this.battleUIDownParent.getChildByName("Die").removeAllChildren(),this.battleUIDownParent.getChildByName("Shadow").removeAllChildren(),this.battleUIDownParent.getChildByName("Buff").removeAllChildren()}onEnable(){m.on(C.CREATE_DAMAGER_NUM,this.onCreateDamageNum,this),m.on(C.SHOW_MONSTER_DIE_EFFECT,this.onCreateDieEffect,this),m.on(C.SHOW_HERO_HP,this.onCreateHeroHp,this),m.on(C.SHOW_MONSTER_HP,this.onCreateMonsterHp,this),m.on(C.SHOW_MONSTER_SHADOW,this.onCreateMonsterShadow,this),m.on(C.CREATE_MONSTER_DEBUFF,this.onCreateMonsterDebuff,this),m.on(C.CREATE_HERO_DEBUFF,this.onCreateHeroDebuff,this),m.on(C.SHOW_MONSTER_BUFF,this.onCreateMonsterBuff,this),m.on(C.REVIVE_SELECT_BAG,this.onReviveHero,this)}onDisable(){m.off(C.CREATE_DAMAGER_NUM,this.onCreateDamageNum,this),m.off(C.SHOW_MONSTER_DIE_EFFECT,this.onCreateDieEffect,this),m.off(C.SHOW_HERO_HP,this.onCreateHeroHp,this),m.off(C.SHOW_MONSTER_HP,this.onCreateMonsterHp,this),m.off(C.SHOW_MONSTER_SHADOW,this.onCreateMonsterShadow,this),m.off(C.CREATE_MONSTER_DEBUFF,this.onCreateMonsterDebuff,this),m.off(C.CREATE_HERO_DEBUFF,this.onCreateHeroDebuff,this),m.off(C.SHOW_MONSTER_BUFF,this.onCreateMonsterBuff,this),m.off(C.REVIVE_SELECT_BAG,this.onReviveHero,this)}}).prototype,"battleUIUpParent",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(M.prototype,"battleUIDownParent",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=M))||H));a._RF.pop()}}}));

System.register("chunks:///_virtual/BgManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./ResourcesUtil.ts","./PlayerData.ts","./ChapterMapData.ts"],(function(t){var e,r,a,s,n,i,o,c,p,g,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.initializerDefineProperty},function(t){a=t.cclegacy,s=t.Node,n=t._decorator,i=t.Component,o=t.Sprite},function(t){c=t.Constants},function(t){p=t.ResourcesUtil},function(t){g=t.PlayerData},function(t){l=t.ChapterMapData}],execute:function(){var u,h,f,m,b;a._RF.push({},"bba98kwfVtJD5TEjlbR665q","BgManager",void 0);const{ccclass:B,property:C}=n;t("BgManager",(u=B("BgManager"),h=C(s),u((b=e((m=class extends i{constructor(){super(...arguments),r(this,"bgs",b,this)}init(){this.setBattleBgRes(),this.setGridBgRes()}setBattleBgRes(){let t=g.instance.curChapter,e=l.instance.getChapterCfg(t),r=c.mapPath+e.battleMap+"/spriteFrame";let a=this.bgs[0].getComponent(o);p.geSpriteFrame(r).then((t=>{a.spriteFrame=t}))}setGridBgRes(){let t=c.mapPath+"gridBg/spriteFrame";let e=this.bgs[1].getComponent(o);p.geSpriteFrame(t).then((t=>{e.spriteFrame=t}))}clear(){}}).prototype,"bgs",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=m))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/BillItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Util.ts"],(function(t){var i,e,s,n,r,a,l,o;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){s=t.cclegacy,n=t.Label,r=t.Node,a=t._decorator,l=t.Component},function(t){o=t.Util}],execute:function(){var c,u,h,p,m,d,w,g,b,B,f,y,T;s._RF.push({},"2917a4H7CFFspyJ00wuUYc2","BillItem",void 0);const{ccclass:v,property:z}=a;t("BillItem",(c=v("BillItem"),u=z(n),h=z(n),p=z(n),m=z(r),d=z(r),c((b=i((g=class extends l{constructor(){super(...arguments),e(this,"amount",b,this),e(this,"state",B,this),e(this,"time",f,this),e(this,"penddingBtn",y,this),e(this,"successBtn",T,this),this.withdrawTime=0}init(t){this.unschedule(this.updateWithdrawTime),this.amount.string=Number(t.amount/1e3).toFixed(2),"success"==t.state?(this.successBtn.active=!0,this.penddingBtn.active=!1):(this.penddingBtn.active=!0,this.successBtn.active=!1,this.state.string=t.state.toUpperCase(),"pending"==t.state?(this.time.node.active=!0,this.withdrawTime=t.withdrawTime,this.time.string=o.timeToString(this.withdrawTime),this.schedule(this.updateWithdrawTime,1)):this.time.node.active=!1)}updateWithdrawTime(){this.withdrawTime+=1,this.time.string=o.timeToString(this.withdrawTime)}}).prototype,"amount",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=i(g.prototype,"state",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=i(g.prototype,"time",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=i(g.prototype,"penddingBtn",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=i(g.prototype,"successBtn",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=g))||w));s._RF.pop()}}}));

System.register("chunks:///_virtual/BlastItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PoolManager.ts"],(function(t){var e,n,i,o,s,r,a;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,o=t.sp,s=t._decorator,r=t.Component},function(t){a=t.PoolManager}],execute:function(){var c,l,p,u,m;i._RF.push({},"6cdfbbCEVFPtarMgjH7Ar9b","BlastItem",void 0);const{ccclass:f,property:d}=s;t("BlastItem",(c=f("BlastItem"),l=d(o.Skeleton),c((m=e((u=class extends r{constructor(){super(...arguments),n(this,"spine",m,this)}init(){this.spine.setAnimation(0,"animation",!1),this.spine.setCompleteListener((t=>{"animation"==t.animation.name&&a.instance.putNode(this.node)}))}}).prototype,"spine",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=u))||p));i._RF.pop()}}}));

System.register("chunks:///_virtual/BlastItem2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PoolManager.ts"],(function(e){var t,n,i,o,s,r,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,o=e.sp,s=e._decorator,r=e.Component},function(e){a=e.PoolManager}],execute:function(){var c,l,p,u,m;i._RF.push({},"e2d7cUZHr5MYZ1Zl0HtI2PT","BlastItem",void 0);const{ccclass:d,property:f}=s;e("BlastItem",(c=d("BlastItem"),l=f(o.Skeleton),c((m=t((u=class extends r{constructor(){super(...arguments),n(this,"spine",m,this)}init(){this.spine.setAnimation(0,"animation",!1),this.spine.setCompleteListener((e=>{"animation"==e.animation.name&&a.instance.putNode(this.node)}))}}).prototype,"spine",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=u))||p));i._RF.pop()}}}));

System.register("chunks:///_virtual/BoxManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./EventListener.ts","./GameEvent.ts","./ResourcesUtil.ts","./Constants.ts","./CoinMode.ts","./GuideData.ts"],(function(e){var t,n,o,i,s,r,a,c,l,u,p,E,h,f,_,C,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){o=e.cclegacy,i=e.Node,s=e._decorator,r=e.instantiate,a=e.sp,c=e.UITransform,l=e.v3},function(e){u=e.default},function(e){p=e.EventListener},function(e){E=e.GameEvent},function(e){h=e.ResourcesUtil},function(e){f=e.Constants},function(e){_=e.CoinObj},function(e){C=e.GuideData,d=e.GuideStep}],execute:function(){var m,x,B,b,A;o._RF.push({},"847ceV2XWlA37OAqupKooMM","BoxManager",void 0);const{ccclass:G,property:D}=s;e("BoxManager",(m=G("BoxManager"),x=D(i),m((A=t((b=class extends u{constructor(){super(...arguments),n(this,"boxParent",A,this),this._pickBox=!1}onEnable(){p.on(E.CREATE_DROP_BOX,this.onCreateDropBox,this)}onDisable(){p.off(E.CREATE_DROP_BOX,this.onCreateDropBox,this)}onCreateDropBox(e,t){let n=f.battlePath+"boxItem";this.boxParent.setPosition(0,0),h.getPrefab(n).then((n=>{let o=r(n);o.parent=this.boxParent,o.setPosition(e);let i=o.getChildByName("box").getComponent(a.Skeleton),s=o.getComponent(c).convertToWorldSpaceAR(l(0,0,0));this.scheduleOnce((()=>{this.showFlyGoldAnim(s,t)}),.5),i.setCompleteListener((()=>{o.destroy(),C.instance.curStep!=d.GUIDE_STEP10_WAVE1_DONE&&p.emit(E.RESET_SELECT_BAG)}))}))}showFlyGoldAnim(e,t){let n=new _;n.pos=e,n.num=t,p.emit(E.GAME_CHANGE_COIN,n),p.emit(E.GAME_CHANGE_BAG,n)}clear(){this._pickBox=!1}}).prototype,"boxParent",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=b))||B));o._RF.pop()}}}));

System.register("chunks:///_virtual/BuffModel.ts",["cc"],(function(_){var E;return{setters:[function(_){E=_.cclegacy}],execute:function(){E._RF.push({},"bfb59mgx31MPbvoRlZ6g4n3","BuffModel",void 0);_("BuffCfg",class{constructor(){this.ClassName="Buff",this.Id=void 0,this.type=void 0,this.skillType=void 0,this.res=void 0,this.frames=void 0,this.scale=void 0,this.range=void 0,this.cd=void 0,this.bossCd=void 0,this.during=void 0,this.lowLayer=void 0,this.hpPer=void 0,this.speedPer=void 0,this.damagePer=void 0,this.attackPer=void 0,this.probability=void 0,this.layers=void 0,this.critPer=void 0,this.aimSkills=[],this.subBuffId=void 0}});_("BuffType",function(_){return _[_.BUFF_SHIELD=1]="BUFF_SHIELD",_[_.BUFF_INSPIRE_OTHER=2]="BUFF_INSPIRE_OTHER",_[_.BUFF_INSPIRE_SELF=3]="BUFF_INSPIRE_SELF",_[_.BUFF_SPEED_UP=4]="BUFF_SPEED_UP",_[_.BUFF_HERO_FIRE=5]="BUFF_HERO_FIRE",_[_.DEBUFF_SPEED_DEC=11]="DEBUFF_SPEED_DEC",_[_.DEBUFF_FREEZE=12]="DEBUFF_FREEZE",_[_.DEBUFF_DAMAGE_ADD=13]="DEBUFF_DAMAGE_ADD",_[_.DEBUFF_ATTACH_CRIT_INJURED=14]="DEBUFF_ATTACH_CRIT_INJURED",_[_.DEBUFF_CRIT_INJURED_CRITPER_ADD=15]="DEBUFF_CRIT_INJURED_CRITPER_ADD",_[_.DEBUFF_DAMAGE_OVERLAY_ADD=16]="DEBUFF_DAMAGE_OVERLAY_ADD",_[_.DEBUFF_ATTACH_MAGIC_INJURED=17]="DEBUFF_ATTACH_MAGIC_INJURED",_}({})),_("BuffSkillType",function(_){return _[_.DEBUFF_MONSTER_UP_TYPE=0]="DEBUFF_MONSTER_UP_TYPE",_[_.DEBUFF_MONSTER_NORMAL_TYPE=1]="DEBUFF_MONSTER_NORMAL_TYPE",_[_.BUFF_MONSTER_NORMAL_TYPE=2]="BUFF_MONSTER_NORMAL_TYPE",_[_.BUFF_HERO_NORMAL_TYPE=3]="BUFF_HERO_NORMAL_TYPE",_}({}));E._RF.pop()}}}));

System.register("chunks:///_virtual/BuffObj.ts",["cc","./BuffModel.ts"],(function(e){var t,s;return{setters:[function(e){t=e.cclegacy},function(e){s=e.BuffType}],execute:function(){t._RF.push({},"1a4feqM+GxH0YS+Af1tKohr","BuffObj",void 0);e("BuffObj",class{constructor(){this.layer=0,this.isClear=!1,this._buffCfg=null,this._type=0,this._damage=0,this._skillId=0,this._weaponId=0,this._monsterKey="",this._targetMonsterKey=""}get buffCfg(){return this._buffCfg}get damage(){return this._damage}get monsterKey(){return this._monsterKey}get skillId(){return this._skillId}get weaponId(){return this._weaponId}get targetMonsterKey(){return this._targetMonsterKey}init(e,t,s,i,r,f){void 0===r&&(r=0),void 0===f&&(f=""),this._monsterKey=e,this._buffCfg=i,this._weaponId=t,this._skillId=s,this._type=i.type,this._damage=r,this._targetMonsterKey=f}append(e){for(let t=0;t<e.length;t++)this._buffCfg.damagePer+=e[t].damagePer,this._buffCfg.during+=e[t].during}reset(e,t){void 0===t&&(t=0),this._buffCfg=e,this._damage=t,this.isClear=!1}isFullLayer(){return!this.isClear&&this.layer>=this._buffCfg.layers}isFreeze(){return!this.isClear&&this._type==s.DEBUFF_FREEZE}isCritInjured(){return!this.isClear&&this._type==s.DEBUFF_ATTACH_CRIT_INJURED}getSpeedDec(){return this.isClear?0:this._buffCfg.speedPer}getDamagePer(e){return this.isClear?0:this._type==s.DEBUFF_DAMAGE_OVERLAY_ADD?this._buffCfg.damagePer*this.layer:this._type==s.DEBUFF_ATTACH_CRIT_INJURED||this._type==s.DEBUFF_ATTACH_MAGIC_INJURED?-1!=this._buffCfg.aimSkills.indexOf(e)?this._buffCfg.damagePer:0:this._buffCfg.damagePer}getAttackPer(){return this.isClear?0:this._buffCfg.damagePer}getCritPer(e){return this.isClear?0:-1!=this._buffCfg.aimSkills.indexOf(e)?this._buffCfg.critPer:0}clear(){this.isClear=!0}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/CashBillItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,s,r,l,a;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){s=t.cclegacy,r=t.Label,l=t._decorator,a=t.Component}],execute:function(){var n,o,c,u,h,p,d,b,y;s._RF.push({},"042089xE1tGoKELT6atEOju","CashBillItem",void 0);const{ccclass:g,property:m}=l;t("CashBillItem",(n=g("CashBillItem"),o=m(r),c=m(r),u=m(r),n((d=e((p=class extends a{constructor(){super(...arguments),i(this,"day",d,this),i(this,"cash",b,this),i(this,"usdt",y,this)}init(t){this.day.string=t.date,this.cash.string=`${t.cash}`,this.usdt.string=`${t.usdt}`}}).prototype,"day",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=e(p.prototype,"cash",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=e(p.prototype,"usdt",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=p))||h));s._RF.pop()}}}));

System.register("chunks:///_virtual/CashBillPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./CashData.ts","./GameEvent.ts","./EventListener.ts","./CashBillItem.ts"],(function(t){var e,n,i,s,o,l,a,r,c,p,u,h,C,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,s=t.Node,o=t.Prefab,l=t._decorator,a=t.Component,r=t.instantiate},function(t){c=t.OpenPopupManager},function(t){p=t.Constants},function(t){u=t.CashData},function(t){h=t.GameEvent},function(t){C=t.EventListener},function(t){f=t.CashBillItem}],execute:function(){var P,m,b,B,g,_,v;i._RF.push({},"cf950OrNThF676L/SJeRfzT","CashBillPopup",void 0);const{ccclass:d,property:D}=l;t("CashBillPopup",(P=d("CashBillPopup"),m=D(s),b=D(o),P((_=e((g=class extends a{constructor(){super(...arguments),n(this,"content",_,this),n(this,"item",v,this)}show(){u.instance.getCashBills(),this.setContent()}setContent(){this.content.removeAllChildren();let t=u.instance.bills;for(let e=0;e<t.length;e++){let n=t[e],i=r(this.item);i.getComponent(f).init(n),i.parent=this.content}}onCloseTouch(){c.instance.hide(p.PopupUI.CashBillPopup)}onEnable(){C.on(h.UPDATE_CASH_BILL_POPUP,this.setContent,this)}onDisable(){C.off(h.UPDATE_CASH_BILL_POPUP,this.setContent,this)}}).prototype,"content",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=e(g.prototype,"item",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=g))||B));i._RF.pop()}}}));

System.register("chunks:///_virtual/CashData.ts",["cc","./Api.ts","./CfgMgr.ts","./EventListener.ts","./HttpService.ts","./OpenPopupManager.ts","./PlayerData.ts","./GameEvent.ts","./CashExchangeModel.ts"],(function(t){var s,a,i,n,e,c,o,h,r;return{setters:[function(t){s=t.cclegacy},function(t){a=t.Api},function(t){i=t.CfgMgr},function(t){n=t.EventListener},function(t){e=t.HttpService},function(t){c=t.OpenPopupManager},function(t){o=t.PlayerData},function(t){h=t.GameEvent},function(t){r=t.CashExchangeCfg}],execute:function(){s._RF.push({},"ba1b6fagiVAe7f7rlz5ya9R","CashData",void 0);class l{constructor(){this.cash=-1,this.cashAmounts=[],this.bills=[]}getExchangeCfgs(){return i.getCfgDataArray(new r)}getCashInfo(){e.instance.post(a.CASH_INFO,{}).then((t=>{0==t.code&&(this.cashAmounts=t.data.items,this.cash=t.data.cash,n.emit(h.UPDATE_CASH_POPUP))}))}getCashBills(){e.instance.post(a.CASH_BILL,{}).then((t=>{0==t.code&&(this.bills=t.data.bill,n.emit(h.UPDATE_CASH_BILL_POPUP))}))}swap(t,s){e.instance.post(a.CASH_SWAP,{id:t}).then((t=>{0==t.code?(s&&s(),this.getCashInfo(),o.instance.getPlayerInfo()):c.instance.showToast(t.msg)}))}static get instance(){return this._instance||(this._instance=new l),this._instance}}t("CashData",l),l._instance=null;t("CashInfoResult",class{constructor(){this.items=void 0,this.cash=void 0}});t("CashBillResult",class{constructor(){this.bill=void 0}});t("CashExchangeModel",class{constructor(){this.id=void 0,this.cash=void 0,this.usdt=void 0,this.state=void 0,this.star=void 0}});t("CashBillModel",class{constructor(){this.cash=void 0,this.usdt=void 0,this.date=void 0}}),s._RF.pop()}}}));

System.register("chunks:///_virtual/CashExchangeModel.ts",["cc"],(function(s){var t;return{setters:[function(s){t=s.cclegacy}],execute:function(){t._RF.push({},"4bf21gRkjJDnrvv3yza7+0z","CashExchangeModel",void 0);s("CashExchangeCfg",class{constructor(){this.ClassName="CashExchange",this.Id=void 0,this.cash=void 0,this.usdt=void 0,this.star=void 0}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/CashItemPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./CashData.ts","./PlayerData.ts","./CoinMode.ts","./EventListener.ts","./GameEvent.ts"],(function(t){var e,s,n,i,a,o,r,c,l,u,h,p,f,m,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,s=t.initializerDefineProperty},function(t){n=t.cclegacy,i=t.Label,a=t.Node,o=t._decorator,r=t.Component,c=t.Color},function(t){l=t.OpenPopupManager},function(t){u=t.Constants},function(t){h=t.CashData},function(t){p=t.PlayerData},function(t){f=t.CoinObj},function(t){m=t.EventListener},function(t){b=t.GameEvent}],execute:function(){var C,_,w,d,D,O,P,g,j,y,v,E,I;n._RF.push({},"82ba6ZR4xtICrAmI6DTgOw8","CashItemPopup",void 0);const{ccclass:A,property:R}=o;t("CashItemPopup",(C=A("CashItemPopup"),_=R(i),w=R(i),d=R(i),D=R(i),O=R(a),C((j=e((g=class extends r{constructor(){super(...arguments),s(this,"claimAmount",j,this),s(this,"fee",y,this),s(this,"amountReceived",v,this),s(this,"star",E,this),s(this,"swapBtn",I,this),this._cashObj=null,this._pos=null}show(t,e){this._cashObj=t,this._pos=e,this.claimAmount.string=this._cashObj.cash+" Cash = "+this._cashObj.usdt+"$",this.claimAmount.color=h.instance.cash>this._cashObj.cash?(new c).fromHEX("#ffffff"):(new c).fromHEX("#D97DFF"),this.amountReceived.string=this._cashObj.usdt+" USDT",this.star.string=p.instance.starObj.balance+"/"+this._cashObj.star,this.star.color=p.instance.starObj.balance>=this._cashObj.star?(new c).fromHEX("#ffffff"):(new c).fromHEX("#D97DFF")}onSwapBtn(){h.instance.swap(this._cashObj.id,(()=>{let t=new f;t.num=100,t.pos=this._pos,m.emit(b.UPDATE_CASH_REWARD,t),l.instance.hide(u.PopupUI.CashItemPopup)}))}onCloseBtn(){l.instance.hide(u.PopupUI.CashItemPopup)}}).prototype,"claimAmount",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=e(g.prototype,"fee",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=e(g.prototype,"amountReceived",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=e(g.prototype,"star",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=e(g.prototype,"swapBtn",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=g))||P));n._RF.pop()}}}));

System.register("chunks:///_virtual/CashPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./CashData.ts","./GameEvent.ts","./EventListener.ts","./CashSubItem.ts","./ResourcesUtil.ts"],(function(t){var e,n,i,s,o,a,r,l,u,c,h,p,m,b,P,C,f,A,d,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,s=t.Label,o=t.ScrollView,a=t.Prefab,r=t.Node,l=t._decorator,u=t.Component,c=t.instantiate,h=t.UITransform,p=t.tween,m=t.v3},function(t){b=t.OpenPopupManager},function(t){P=t.Constants},function(t){C=t.CashData},function(t){f=t.GameEvent},function(t){A=t.EventListener},function(t){d=t.CashSubItem},function(t){g=t.ResourcesUtil}],execute:function(){var _,y,E,D,I,S,U,v,T,w,R,M,H,z,N;i._RF.push({},"275a2MMSt1Ns44vggH5XL1N","CashPopup",void 0);const{ccclass:O,property:L}=l;t("CashPopup",(_=O("CashPopup"),y=L(s),E=L(s),D=L(o),I=L(a),S=L(r),U=L(r),_((w=e((T=class extends u{constructor(){super(...arguments),n(this,"balance",w,this),n(this,"usdtBalance",R,this),n(this,"amountContent",M,this),n(this,"cashSubItem",H,this),n(this,"content",z,this),n(this,"usdtAni",N,this)}show(){A.emit(f.UPDATE_CHAPTER_STOP_ANIM),C.instance.getCashInfo(),this.setContent()}setContent(){let t=C.instance.cashAmounts;if(this.content.removeAllChildren(),0!=t.length){for(let e=0;e<t.length;e++){let n=t[e];if(1==n.state)continue;let i=c(this.cashSubItem);i.getComponent(d).init(n),i.parent=this.content}this.balance.string=C.instance.cash+"",this.usdtBalance.string=Number(.001*C.instance.cash).toFixed(3)+"$"}}onCloseTouch(){A.emit(f.UPDATE_CHAPTER_PLAY_ANIM),b.instance.hide(P.PopupUI.CashPopup)}showHistory(){b.instance.show(P.PopupUI.CashBillPopup)}onGameCash(t){let e=this.usdtAni.getPosition(),n=Math.min(t.num,10),i=t.pos,s=P.commonPreabPath+"usdtItem",o=this.usdtAni.parent.getComponent(h).convertToNodeSpaceAR(i);g.getPrefab(s).then((t=>{for(let i=0;i<n;i++){let n=c(t),s=2*(Math.random()-.5)*100+o.x,a=2*(Math.random()-.5)*50+o.y;n.parent=this.usdtAni.parent,n.setPosition(o),this.scheduleOnce((()=>{p(n).to(.2,{position:m(s,a,0)},{easing:"sineIn"}).delay(.2).to(1,{position:e},{easing:"sineInOut"}).call((()=>{n.destroy()})).start()}),.05+.05*i)}}))}onEnable(){A.on(f.UPDATE_CASH_POPUP,this.setContent,this),A.on(f.UPDATE_CASH_REWARD,this.onGameCash,this)}onDisable(){A.off(f.UPDATE_CASH_POPUP,this.setContent,this),A.on(f.UPDATE_CASH_REWARD,this.onGameCash,this)}}).prototype,"balance",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=e(T.prototype,"usdtBalance",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=e(T.prototype,"amountContent",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=e(T.prototype,"cashSubItem",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=e(T.prototype,"content",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=e(T.prototype,"usdtAni",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=T))||v));i._RF.pop()}}}));

System.register("chunks:///_virtual/CashSubItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./GuideData.ts"],(function(t){var e,n,s,i,a,o,u,r,c,p,l,h,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){s=t.cclegacy,i=t.Label,a=t.Node,o=t._decorator,u=t.Component,r=t.UITransform,c=t.Vec3},function(t){p=t.OpenPopupManager,l=t.LayerType},function(t){h=t.Constants},function(t){m=t.GuideData}],execute:function(){var b,d,f,g,y,I,C,P,_;s._RF.push({},"97628JpcHpII74VEM3u+qHL","CashSubItem",void 0);const{ccclass:v,property:O}=o;t("CashSubItem",(b=v("CashSubItem"),d=O(i),f=O(i),g=O(a),b((C=e((I=class extends u{constructor(){super(...arguments),n(this,"amount",C,this),n(this,"usdtAmount",P,this),n(this,"mask",_,this),this._cashObj=void 0}init(t){this._cashObj=t,this.amount.string=t.cash+"",this.usdtAmount.string="="+t.usdt+"$",this.mask.active=0!=t.state}onTapBtn(){if(0==this._cashObj.state){let t=this.node.getComponent(r).convertToWorldSpaceAR(new c(0,0,0));m.instance.guideMode&&p.instance.hide(h.PopupUI.GuidePopup),p.instance.show(h.PopupUI.CashItemPopup,null,l.TOP,!1,this._cashObj,t)}else p.instance.showToast("cash.uncomplete")}}).prototype,"amount",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=e(I.prototype,"usdtAmount",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=e(I.prototype,"mask",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=I))||y));s._RF.pop()}}}));

System.register("chunks:///_virtual/CfgMgr.ts",["cc","./Debug.ts"],(function(t){var e,a;return{setters:[function(t){e=t.cclegacy},function(t){a=t.Debug}],execute:function(){e._RF.push({},"8f0fcdZNgJLlbkVxJmLK0oC","CfgMgr",void 0);class s{static addCfgData(t,e){if(null==t||!this.CfgDataList.has(t))return void a.info("Error: The config isn't exist"+t);let s=this.CfgData.get(t),i=this.CfgDataList.get(t);e.forEach((e=>{if(e.hasOwnProperty("Id")){let t=e.Id;s[t]=e,i.push(e)}else a.info("The Config Id Field Error:",t)}))}static setCfgData(t,e){let s={},i=[];e.forEach((e=>{if(e.hasOwnProperty("Id")){let t=e.Id;s[t]=e,i.push(e)}else a.info("The Config Id Field Error:",t)})),this.CfgData.set(t,s),this.CfgDataList.set(t,i)}static getCfgData(t){let e=t.ClassName;return this.CfgData.has(e)?this.CfgData.get(e):(a.info("Error: the config doesn't exist "+e),null)}static hasCfg(t){return!!this.CfgData.has(t)}static getCfgDataArray(t){let e=t.ClassName;return null!=e&&this.CfgDataList.has(e)?this.CfgDataList.get(e):(a.info("Error: the config doesn't exist"+e),null)}static getDataById(t,e){let s=t.ClassName,i=null;if(this.CfgData.has(s)){let t=this.CfgData.get(s);t[e]?i=t[e]:a.info(s+":The ID doesn't exist"+e)}else a.info(s+":The Config doesn't exist"+e);return i}static clearByKey(t){this.CfgData.delete(t),this.CfgDataList.delete(t)}}t("CfgMgr",s),s.CfgData=new Map,s.CfgDataList=new Map,e._RF.pop()}}}));

System.register("chunks:///_virtual/ChapterChestItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./ResourcesUtil.ts","./RewardTipItem.ts","./RewardModel.ts","./ChestModel.ts","./OpenPopupManager.ts","./Api.ts","./HttpService.ts","./PlayerData.ts","./ItemModel.ts"],(function(e){var t,n,s,i,r,o,a,l,p,c,d,h,u,m,f,w,b,g,C,I;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){s=e.cclegacy,i=e.sp,r=e.Label,o=e._decorator,a=e.Component,l=e.instantiate,p=e.UITransform,c=e.Vec3},function(e){d=e.Constants},function(e){h=e.ResourcesUtil},function(e){u=e.RewardTipItem},function(e){m=e.RewardObj},function(e){f=e.ChestStatus},function(e){w=e.OpenPopupManager},function(e){b=e.Api},function(e){g=e.HttpService},function(e){C=e.PlayerData},function(e){I=e.ItemIdType}],execute:function(){var _,v,P,R,y,A,T;s._RF.push({},"2ff54rqghNKqKGUfmPHDBel","ChapterChestItem",void 0);const{ccclass:x,property:S}=o;e("ChapterChestItem",(_=x("ChapterChestItem"),v=S(i.Skeleton),P=S(r),_((A=t((y=class extends a{constructor(){super(...arguments),n(this,"box",A,this),n(this,"desc",T,this),this._status=f.Unavailable,this._rewards=[],this._rewardId=0}init(e,t,n,s){this._rewardId=e,this._rewards=s.split(","),this._status=t,this.desc.string=n,0==t?this.box.setAnimation(0,"unavailable",!0):1==t?this.box.setAnimation(0,"available",!0):this.box.setAnimation(0,"received",!0)}onOpenChest(){if(this._status==f.Unavailable){let e=d.commonPreabPath+"rewardTipItem";h.getPrefab(e).then((e=>{let t=l(e);t.parent=this.node.parent.parent;let n=this.node.getPosition();n.y+=this.node.getComponent(p).width/2;let s=this.node.parent.getComponent(p).convertToWorldSpaceAR(n),i=this.node.parent.parent.getComponent(p).convertToNodeSpaceAR(s);t.setPosition(i);let r=[];for(let e=0;e<this._rewards.length;e++){let t=this._rewards[e].split("|"),n=new m;n.itemId=Number(t[0]),n.count=Number(t[1]),r.push(n)}t.getComponent(u).init(r)}))}else if(this._status==f.Available){let e=!1,t=[I.Diamond,I.Energy,I.Exp,I.Food,I.Gold,I.Ticket];for(let n=0;n<this._rewards.length;n++){let s=this._rewards[n].split("|"),i=Number(s[0]);-1==t.indexOf(i)&&(e=!0)}if(g.instance.post(b.CHAPTER_CLAIM,{rewardId:this._rewardId}).then((t=>{0==t.code&&(C.instance.getPlayerInfo(!1),e&&w.instance.showRewardPopup(t.data.rewards,this.node.getComponent(p).convertToWorldSpaceAR(new c(0,0,0))))})),!e){let e=[];for(let t=0;t<this._rewards.length;t++){let n=this._rewards[t].split("|"),s=new m;s.itemId=Number(n[0]),s.count=Number(n[1]),e.push(s)}C.instance.removeRewardId(this._rewardId),w.instance.showRewardPopup(e,this.node.getComponent(p).convertToWorldSpaceAR(new c(0,0,0)))}}}}).prototype,"box",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(y.prototype,"desc",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=y))||R));s._RF.pop()}}}));

System.register("chunks:///_virtual/ChapterData.ts",["cc","./CfgMgr.ts","./ChapterEventModel.ts","./ChapterModel.ts","./ItemModel.ts"],(function(t){var e,r,a,n,s;return{setters:[function(t){e=t.cclegacy},function(t){r=t.CfgMgr},function(t){a=t.ChapterEventCfg},function(t){n=t.ChapterCfg},function(t){s=t.ItemIdType}],execute:function(){e._RF.push({},"037c1pT24xDKr9WjwmVRWAA","ChapterData",void 0);class h{constructor(){this._chapterIdArr=[],this._maxChapterId=0}init(){let t=0,e=r.getCfgDataArray(new n);for(let r=0;r<e.length;r++)t=t>e[r].Id?t:e[r].Id;this._maxChapterId=t}get maxChapterId(){return this._maxChapterId}getChapterData(){return r.getCfgDataArray(new n)}getChapterCfgById(t){return r.getDataById(new n,t)}getChapterBag(t){let e=r.getDataById(new n,t),a=0;if(e.perWaveRewards)for(let t=0;t<e.perWaveRewards.length;t++){let r=e.perWaveRewards[t];s.Bag==r[0]&&(a=r[1])}return a/1e3}getChapterMonsterId(t,e){void 0===e&&(e=1);let n=r.getCfgDataArray(new a);for(let r=0;r<n.length;r++)if(n[r].chapter==t&&e==n[r].wave)return n[r].monsters[0][0];return 0}getChapter(t){return this._chapterIdArr.indexOf(t)+1}static get instance(){return this._instance||(this._instance=new h),this._instance}}t("ChapterData",h),h._instance=null,e._RF.pop()}}}));

System.register("chunks:///_virtual/ChapterEventModel.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"32241t2YThK/bgnFGmH36of","ChapterEventModel",void 0);t("ChapterEventCfg",class{constructor(){this.ClassName="ChapterEvent",this.Id=void 0,this.chapter=void 0,this.wave=void 0,this.eType=void 0,this.hpUp=void 0,this.box=void 0,this.monsterLevel=void 0,this.monsters=void 0}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/ChapterItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./ResourcesUtil.ts","./PlayerData.ts","./ChapterData.ts","./CfgMgr.ts","./MonsterModel.ts"],(function(t){var e,r,i,n,a,s,o,c,h,p,l,u,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.initializerDefineProperty},function(t){i=t.cclegacy,n=t.Node,a=t.Sprite,s=t._decorator,o=t.Component},function(t){c=t.Constants},function(t){h=t.ResourcesUtil},function(t){p=t.PlayerData},function(t){l=t.ChapterData},function(t){u=t.CfgMgr},function(t){f=t.MonsterCfg}],execute:function(){var m,C,d,g,I,b,M,y,F,_,D;i._RF.push({},"8fc9aR0W6BMFruYFmCr58/O","ChapterItem",void 0);const{ccclass:k,property:S}=s;t("ChapterItem",(m=k("ChapterItem"),C=S(n),d=S(a),g=S(a),I=S(a),m((y=e((M=class extends o{constructor(){super(...arguments),r(this,"lock",y,this),r(this,"chapterIcon",F,this),r(this,"chapterMask",_,this),r(this,"monster",D,this),this._chapterCfg=null,this._isLoaded=!1}init(t){this._chapterCfg=t}show(){this._isLoaded||(this._isLoaded=!0,this.setChapterInfo(this._chapterCfg),this.setChapterMonster(this._chapterCfg))}setChapterInfo(t){let e=c.chaterMapPath+t.mapId+"/spriteFrame";p.instance.chapterObj.chapterId<t.Id&&(this.lock.active=!0),h.getSpriteFrame(e).then((t=>{this.chapterIcon.spriteFrame=t,this.chapterMask.spriteFrame=t}))}setChapterMonster(t){let e=l.instance.getChapterMonsterId(t.Id);if(e){let t=u.getDataById(new f,e),r=c.monsterIconPath+t.icon+"/spriteFrame";h.geSpriteFrame(r).then((e=>{this.monster&&(this.monster.spriteFrame=e,this.monster.node.setScale(t.iconScale,t.iconScale))}))}}}).prototype,"lock",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(M.prototype,"chapterIcon",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(M.prototype,"chapterMask",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(M.prototype,"monster",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=M))||b));i._RF.pop()}}}));

System.register("chunks:///_virtual/ChapterMapData.ts",["cc","./CfgMgr.ts","./ChapterModel.ts","./PlayerData.ts"],(function(t){var a,e,r,s;return{setters:[function(t){a=t.cclegacy},function(t){e=t.CfgMgr},function(t){r=t.ChapterCfg},function(t){s=t.PlayerData}],execute:function(){a._RF.push({},"76678VIX75Efa0Bu8ve9nTW","ChapterMapData",void 0);class n{constructor(){this._chapterMapData=null,this._chapterDropRewardData=new Map}get chapterMapData(){return this._chapterMapData}init(){this.setChapterMapData()}getChapterCfg(t){return e.getDataById(new r,t)}setChapterMapData(){let t=s.instance.curChapter;this._chapterMapData=e.getDataById(new r,t)}setChapterRewardData(t,a){let e=a.split("|"),r=null,s=Number(e[0]),n=Number(e[1]);t.has(s)?r.Num+=n:(r=new p,r.ItemId=s,r.Num=n,t.set(s,r))}getChapterRewardData(t){let a=new Map;if(this._chapterMapData.startReward){let t=this._chapterMapData.startReward.split(",");for(let e=0;e<t.length;e++){const r=t[e];this.setChapterRewardData(a,r)}}if(t&&this._chapterMapData.winReward){let t=this._chapterMapData.winReward.split(",");for(let e=0;e<t.length;e++){const r=t[e];this.setChapterRewardData(a,r)}}return Array.from(a.values())}clear(){this._chapterMapData=null,this._chapterDropRewardData.clear()}static get instance(){return this._instance||(this._instance=new n),this._instance}}t("ChapterMapData",n),n._instance=null;class p{constructor(){this.ItemId=void 0,this.Num=void 0}}t("ChapterDropRewardObj",p),a._RF.pop()}}}));

System.register("chunks:///_virtual/ChapterModel.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"2530f+OzZ9CfYvZ5BsmGlGp","ChapterModel",void 0);t("ChapterCfg",class{constructor(){this.ClassName="Chapter",this.Id=void 0,this.name=void 0,this.lType=void 0,this.mapId=void 0,this.battleMap=void 0,this.startReward=void 0,this.randomReward=void 0,this.winReward=void 0,this.perWaveRewards=void 0,this.waveRewards=void 0}});t("ChapterRewardCfg",class{constructor(){this.ClassName="ChapterReward",this.Id=void 0,this.ChapterId=void 0,this.Lock=void 0,this.Reward=void 0}});t("ChapterModel",class{constructor(){this.chapterId=1,this.maxWave=0,this.unclaimRewards=[],this.waveRewards=[],this.raidNumber=5,this.ticket=0,this.revivalCoin=0,this.level=void 0,this.exp=void 0,this.battleSpeedUp=void 0,this.expMax=void 0,this.unfinishedBattle=void 0}});t("ChapterBattleModel",class{constructor(){this.battleId=void 0,this.wave=void 0,this.waveInfo=void 0}}),i._RF.pop()}}}));

System.register("chunks:///_virtual/ChapterPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventListener.ts","./OpenPopupManager.ts","./PlayerData.ts","./GameEvent.ts","./ChapterData.ts","./ChapterItem.ts","./BagData.ts","./Util.ts","./Constants.ts","./ChapterChestItem.ts","./ChestModel.ts","./GameData.ts","./LanguageManager.ts","./GameDefine.ts","./ResourcesUtil.ts","./GuideData.ts","./ItemModel.ts","./Main.ts","./AvatarItem.ts","./ChestData.ts","./ChestItem.ts","./QuestData.ts","./TapData.ts","./TapEvent.ts"],(function(t){var e,n,i,a,s,o,r,h,u,p,c,l,g,d,m,b,f,C,P,_,w,I,T,E,A,y,R,D,v,G,U,B,S,N,O,L,M,x,k,z,j,W,F;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,a=t.Label,s=t.ProgressBar,o=t.Prefab,r=t.Node,h=t.PageView,u=t._decorator,p=t.Component,c=t.instantiate,l=t.director,g=t.UITransform,d=t.Vec3,m=t.tween,b=t.v3},function(t){f=t.EventListener},function(t){C=t.OpenPopupManager,P=t.LayerType},function(t){_=t.PlayerData},function(t){w=t.GameEvent},function(t){I=t.ChapterData},function(t){T=t.ChapterItem},function(t){E=t.BagData},function(t){A=t.Util},function(t){y=t.Constants},function(t){R=t.ChapterChestItem},function(t){D=t.ChestStatus},function(t){v=t.GameData},function(t){G=t.LanguageManager},function(t){U=t.GameDefine,B=t.GameMode},function(t){S=t.ResourcesUtil},function(t){N=t.GuideData,O=t.GuideStep},function(t){L=t.ItemIdType},function(t){M=t.Main},function(t){x=t.AvatarItem},function(t){k=t.ChestData},function(t){z=t.ChestItem},function(t){j=t.QuestData},function(t){W=t.TapData},function(t){F=t.TapEvent}],execute:function(){var H,V,Y,Q,$,q,X,J,K,Z,tt,et,nt,it,at,st,ot,rt,ht,ut,pt,ct,lt,gt,dt,mt,bt,ft,Ct,Pt,_t,wt,It,Tt,Et,At,yt,Rt,Dt,vt,Gt,Ut,Bt,St,Nt,Ot,Lt,Mt,xt,kt,zt,jt,Wt,Ft,Ht,Vt,Yt,Qt,$t,qt,Xt;i._RF.push({},"67dd1+qrP9B7rYTtUKTntkJ","ChapterPopup",void 0);const{ccclass:Jt,property:Kt}=u;t("ChapterPopup",(H=Jt("ChapterPopup"),V=Kt(a),Y=Kt(a),Q=Kt(a),$=Kt(a),q=Kt(a),X=Kt(a),J=Kt(s),K=Kt(a),Z=Kt(o),tt=Kt(r),et=Kt(r),nt=Kt(h),it=Kt(a),at=Kt(r),st=Kt(r),ot=Kt(a),rt=Kt(r),ht=Kt(a),ut=Kt(r),pt=Kt(r),ct=Kt(r),lt=Kt(r),gt=Kt(r),dt=Kt(r),mt=Kt(x),bt=Kt(o),ft=Kt(r),Ct=Kt({type:[r]}),Pt=Kt(r),H((It=e((wt=class extends p{constructor(){super(...arguments),n(this,"gold",It,this),n(this,"diamond",Tt,this),n(this,"power",Et,this),n(this,"usdt",At,this),n(this,"star",yt,this),n(this,"bag",Rt,this),n(this,"levelProgress",Dt,this),n(this,"level",vt,this),n(this,"chapterPrefab",Gt,this),n(this,"leftBtn",Ut,this),n(this,"rightBtn",Bt,this),n(this,"pageView",St,this),n(this,"title",Nt,this),n(this,"leftList",Ot,this),n(this,"rightList",Lt,this),n(this,"cashReward",Mt,this),n(this,"airdropRedpoint",xt,this),n(this,"raidNumber",kt,this),n(this,"chapterResult",zt,this),n(this,"buttons",jt,this),n(this,"battleEnergy",Wt,this),n(this,"unlockInfo",Ft,this),n(this,"countDown",Ht,this),n(this,"chapterChestList",Vt,this),n(this,"avatar",Yt,this),n(this,"chestPrefab",Qt,this),n(this,"cashChestList",$t,this),n(this,"aniFrames",qt,this),n(this,"animNode",Xt,this),this._maxChapterId=0,this._curChapter=1,this._touchBtn=!1,this._battleTouchNumber=0}show(){this._maxChapterId=I.instance.maxChapterId,this._battleTouchNumber=0,this._touchBtn=!1,this.onUpdatePlayerInfo(),this.showChapterList(),this.powerCountdown(),this.showCashChests(),j.instance.getNewerInfo(),this.checkUnLockItems(),N.instance.guideMode||0!=_.instance.userObj.step||0!=N.instance.curStep||(N.instance.guideMode=!0,C.instance.show(y.PopupUI.NewerRewardPopup,null,P.TOP,!1,(()=>{N.instance.curStep=1,C.instance.show(y.PopupUI.GuidePopup,null,P.TOP,!1,this.airdropRedpoint.parent,(()=>{}),(()=>{}))}))),U.gameMode==B.FIGHTEND&&(U.gameMode=B.NORMAL,C.instance.show(y.PopupUI.DungeonPopup,null,P.TOP,!1,(()=>{C.instance.show(y.PopupUI.FightEndPopup)}))),W.instance.getTapInfo()}powerCountdown(){let t=_.instance.energyObj;this.countDown.active=t.energyRefillCountdown>0,t.energyRefillCountdown>0?(this.schedule(this.setPowerCountdown,1),this.countDown.getComponent(a).string=A.timeToString(t.energyRefillCountdown)):this.unschedule(this.setPowerCountdown)}setPowerCountdown(){_.instance.energyObj.energyRefillCountdown-=1,_.instance.energyObj.energyRefillCountdown>=0?this.countDown.getComponent(a).string=A.timeToString(_.instance.energyObj.energyRefillCountdown):(_.instance.getPlayerInfo(),this.countDown.active=!1,this.unschedule(this.setPowerCountdown))}showChapterList(){if(!this.pageView.getPages().length){let t=I.instance.getChapterData();for(let e=0;e<t.length;e++){const n=t[e];let i=c(this.chapterPrefab);this.pageView.addPage(i),i.getComponent(T).init(n)}this._curChapter=_.instance.curChapter,this.pageView.getPages()[this._curChapter-1].getComponent(T).show(),this.pageView.scrollToPage(this._curChapter-1),this.setChapterTitle(),this.setChapterChest(),this.setLeftRightStatus(),this.setChapterStatus()}}showCashChests(){let t=k.instance.chests;for(let e=0;e<t.length;e++){let n=this.cashChestList.children[e];n.active=!0,n.getComponent(z).init(t[e])}}setChapterChest(){let t=I.instance.getChapterCfgById(this._curChapter).waveRewards,e=_.instance.chapterObj,n=this.chapterChestList.children;for(let i=0;i<n.length;i++){const a=n[i];if(t.length>i){let n=t[i],s=n[0],o=n[1],r=D.Unavailable;r=this._curChapter>e.chapterId?D.Unavailable:this._curChapter==e.chapterId?e.maxWave>=o?e.waveRewards.indexOf(s)>=0?D.Available:D.Received:D.Unavailable:e.waveRewards.indexOf(s)>=0?D.Available:D.Received;let h=G.instance.getLang("game.wave",[o]);a.getComponent(R).init(s,r,h,n[2]),a.active=!0}else a.active=!1}}setChapterTitle(){let t=_.instance.chapterObj,e=I.instance.getChapterCfgById(this._curChapter);this.title.string=e.Id+"."+G.instance.getLang(e.name),this.chapterResult.active=e.Id<=t.chapterId,e.Id==t.chapterId?this.chapterResult.getComponent(a).string=G.instance.getLang("game.maxwave",[t.maxWave]):e.Id<t.chapterId&&(this.chapterResult.getComponent(a).string=G.instance.getLang("game.cleared"))}setChapterStatus(){let t=_.instance.chapterObj;this.buttons.active=this._curChapter<=t.chapterId,this.unlockInfo.active=this._curChapter>t.chapterId,this._curChapter>t.chapterId&&(this.unlockInfo.getComponent(a).string=G.instance.getLang("game.unlockchapter",[this._curChapter-1]))}setLeftRightStatus(){1==this._curChapter?(this.leftBtn.active=!1,this.rightBtn.active=!0):this._curChapter<this._maxChapterId?(this.leftBtn.active=!0,this.rightBtn.active=!0):(this.leftBtn.active=!0,this.rightBtn.active=!1);let t=_.instance.chapterObj.waveRewards,e=I.instance.getChapterCfgById(this._curChapter).waveRewards,n=e[0][0],i=e[e.length-1][0],a=!1,s=!1;for(let e=0;e<t.length;e++)if(t[e]<n&&(a=!0),t[e]>i){s=!0;break}this.leftBtn.getChildByName("redpoint").active=a,this.rightBtn.getChildByName("redpoint").active=s}checkUnLockItems(){let t=v.instance.unlockItems;v.instance.unlockItems=[],t.length>0&&(C.instance.show(y.PopupUI.UnlockItemPopup,null,P.TOP,!1,t,(()=>{})),E.instance.getBagDataFromNetwork())}onBattleBtn(){if(U.chapterId=this._curChapter,U.isDebug&&1!=_.instance.chapterObj.chapterId)return v.instance.clear(),v.instance.initBattle(this._curChapter),this._battleTouchNumber+=2,void f.emit(w.COST_ENERGY_BATTLE,5);if(0!=this._battleTouchNumber)return;this._battleTouchNumber++;let t=E.instance.checkCarryWeapon();if(U.isDebug&&(t=!0),t){_.instance.energyObj.energy>=5?(_.instance.setEnergy(-5),f.emit(w.COST_ENERGY_BATTLE,5),v.instance.startBattle(this._curChapter,((t,e)=>{0==t?(U.gameMode=B.NORMAL,U.chapterId=this._curChapter,this._battleTouchNumber++,7==this._battleTouchNumber&&(1==this._curChapter&&_.instance.chapterObj.chapterId<2&&(N.instance.battleMode=!0,N.instance.initBattleStep=O.GUIDE_STEP1_BATTLE_FIRST),f.emit(w.SHOW_LOADING,"main"),l.loadScene("Game",(()=>{f.emit(w.HIDE_LOADING)})))):(this._battleTouchNumber=0,C.instance.showToast("stamina.insufficient"))}))):(this._battleTouchNumber=0,C.instance.showToast("stamina.insufficient"))}else this._battleTouchNumber=0,C.instance.showToast("game.insufficientCarried")}onRaidBtn(){let t=_.instance.chapterObj.chapterId==this._curChapter?this._curChapter-1:this._curChapter;0!=t?v.instance.raid(t,((t,e)=>{this.chechChestReward(t),C.instance.showRewardPopup(t,this.buttons.getChildByName("mopUpBtn").getComponent(g).convertToWorldSpaceAR(new d(0,0,0)),(()=>{e.length>0&&C.instance.show(y.PopupUI.LevelupPopup,null,P.TOP,!1,e)}))})):C.instance.showToast("server.battle.clearfirst")}onCashheroBtn(){C.instance.show(y.PopupUI.BagTowerPopup)}onSniperBtn(){C.instance.show(y.PopupUI.SniperPopup)}onAirdropBtn(){N.instance.guideMode&&C.instance.hide(y.PopupUI.GuidePopup),C.instance.show(y.PopupUI.TapGame)}chechChestReward(t){let e=[L.CashChestCommon,L.CashChestUncommon,L.CashChestRare,L.CashChestEqic];for(let n=0;n<t.length;n++){if(e[t[n].itemId]>=0)break}k.instance.getChestData()}onLeftBtn(){this._touchBtn=!0,this._curChapter--,this._curChapter<=1&&(this._curChapter=1),_.instance.curChapter=this._curChapter,this.pageView.getPages()[this._curChapter-1].getComponent(T).show(),this.pageView.setCurrentPageIndex(this._curChapter-1),this.setChapterTitle(),this.setChapterChest(),this.setLeftRightStatus(),this.setChapterStatus()}onRightBtn(){this._touchBtn=!0,this._curChapter++,this._curChapter>=this._maxChapterId&&(this._curChapter=this._maxChapterId),_.instance.curChapter=this._curChapter,this.pageView.getPages()[this._curChapter-1].getComponent(T).show(),this.pageView.setCurrentPageIndex(this._curChapter-1),this.setChapterTitle(),this.setChapterChest(),this.setLeftRightStatus(),this.setChapterStatus()}onPagerEvent(){this._touchBtn?this._touchBtn=!1:(this._curChapter=this.pageView.getCurrentPageIndex()+1,this.setChapterTitle(),this.setChapterChest(),this.setLeftRightStatus())}onWalletBtn(){C.instance.show(y.PopupUI.WithdrawPopup),N.instance.guideMode&&C.instance.hide(y.PopupUI.GuidePopup)}onAddCurrency(t,e){switch(Number(e)){case L.Energy:C.instance.showEnergyPopup();break;case L.Bag:C.instance.show(y.PopupUI.BagTokenPopup);break;case L.Star:C.instance.show(y.PopupUI.StarPopup);break;default:C.instance.Canvas.getComponent(M).onClickBtn(null,"0")}}onUpdatePlayerInfo(t){let e=_.instance.assetObj,n=_.instance.chapterObj,i=_.instance.energyObj;t&&"all"!=t&&"gold"!=t||A.numberAnimation(this.gold,e.gold),t&&"all"!=t&&"diamond"!=t||A.numberAnimation(this.diamond,e.diamond),t&&"all"!=t&&"energy"!=t||(this.power.string=`${i.energy}/${i.energyMax}`),t&&"all"!=t&&"usdt"!=t||(e.usdt>.1?(this.usdt.string=Number(e.usdt).toFixed(3)+"",this.usdt.node.parent.active=!0):this.usdt.node.parent.active=!1),t&&"all"!=t&&"star"!=t||A.numberAnimation(this.star,_.instance.starObj.balance),t&&"all"!=t&&"bag"!=t||(this.bag.string=Number(e.bag).toFixed(0)+""),this.raidNumber.string=`${-1==n.raidNumber?"♾️":n.raidNumber}`,this.changeAvatar(_.instance.userObj.avatar),t&&"all"!=t&&"exp"!=t||(this.level.string=`Lv.${n.level}`,this.levelProgress.progress=n.exp/n.expMax),this.setChapterChest()}onGameChest(t){let e=null;for(let t=0;t<this.cashChestList.children.length;t++){let n=this.cashChestList.children[t].getComponent(z);if(n.chestObj.isUnlock&&n.chestObj.chest){e=this.cashChestList.children[t];break}}}onGameItem(t,e){let n=["gold","diamond","energy","usdt","exp","star","bag"],i=n.indexOf(e);if(-1==i)return;let a=this.aniFrames[i].getPosition(),s="bag"==e?15:Math.min(t.num,10),o=t.pos,r=y.commonPreabPath+n[i]+"Item",h=this.aniFrames[i].parent.getComponent(g).convertToNodeSpaceAR(o);S.getPrefab(r).then((t=>{for(let n=0;n<s;n++){let o=c(t),r=2*(Math.random()-.5)*(i%2==0?100:50)+h.x,u=2*(Math.random()-.5)*(i%2==0?50:100)+h.y;o.parent=this.aniFrames[i].parent,o.setPosition(h),this.scheduleOnce((()=>{m(o).to(.2,{position:b(r,u,0)},{easing:"sineIn"}).delay(.2).to(1,{position:a},{easing:"sineInOut"}).call((()=>{o.destroy(),1!=s&&1!=n||f.emit(w.UPDATE_PLAYER_DATA,e)})).start()}),.05+.05*n)}}))}onFlyEnergy(t){let e=this.battleEnergy.getComponent(g).convertToWorldSpaceAR(b(0,0,0)),n=this.animNode.getComponent(g).convertToNodeSpaceAR(e),i=this.aniFrames[2].getComponent(g).convertToWorldSpaceAR(b(0,0,0)),a=y.commonPreabPath+"energyItem",s=this.animNode.getComponent(g).convertToNodeSpaceAR(i);S.getPrefab(a).then((e=>{for(let i=0;i<t;i++){let a=c(e),o=2*(Math.random()-.5)*100+s.x,r=2*(Math.random()-.5)*50+s.y;a.parent=this.animNode,a.setPosition(s),this.scheduleOnce((()=>{m(a).to(.2,{position:b(o,r,0)},{easing:"sineIn"}).delay(.2).to(1,{position:n},{easing:"sineInOut"}).call((()=>{a.destroy(),this._battleTouchNumber>0&&this._battleTouchNumber++,this._battleTouchNumber==t+2&&(f.emit(w.SHOW_LOADING,"main"),U.gameMode=B.NORMAL,U.chapterId=this._curChapter,1==this._curChapter&&_.instance.chapterObj.chapterId<2&&(N.instance.battleMode=!0,N.instance.initBattleStep=O.GUIDE_STEP1_BATTLE_FIRST),l.loadScene("Game",(()=>{f.emit(w.HIDE_LOADING)})))})).start()}),.05+.05*i)}}))}onInviteTouch(){C.instance.showInvitePopup()}onHeroInviteTouch(){C.instance.show(y.PopupUI.EventInvitePopup)}onLlamaTouch(){C.instance.show(y.PopupUI.EventLlamaPopup)}onHeroSigninTouch(){C.instance.show(y.PopupUI.EventSigninePopup)}onEventDailyTouch(){C.instance.show(y.PopupUI.EventDailyPopup)}onMailBoxBtn(){C.instance.show(y.PopupUI.MailBoxPopup)}onSetTouch(){C.instance.showSettingPopup()}onRankTouch(){C.instance.showRankPopup()}onLevelupTouch(){C.instance.show(y.PopupUI.LevelupPopup,null,P.TOP,!1,[])}onBagTouch(){C.instance.show(y.PopupUI.WarehousePopup)}onTopupBtn(t,e){"pass"==e?C.instance.show(y.PopupUI.MonthlyPassPopup,null,P.TOP,!1):"fund"==e?C.instance.show(y.PopupUI.FundPopup,null,P.TOP,!1):"first"==e?C.instance.show(y.PopupUI.FirstTopupPopup):"spin"==e?(N.instance.guideMode&&N.instance.curStep==O.GUIDE_STEP5_SPIN_BTN&&(C.instance.hide(y.PopupUI.GuidePopup),N.instance.curStep=1),C.instance.show(y.PopupUI.DailySpinPopup)):"task"==e&&C.instance.show(y.PopupUI.TaskPopup)}onAvatarTouch(){C.instance.show(y.PopupUI.AvatarPopup,null,P.TOP,!1)}showDailyQuest(){N.instance.guideMode&&N.instance.curStep==O.GUIDE_STEP9_DAILYSIGNIN_BTN&&(N.instance.curStep=1,C.instance.hide(y.PopupUI.GuidePopup)),C.instance.showDailyQuestPopup()}showDungeonPopup(){C.instance.show(y.PopupUI.DungeonPopup)}onGameCoin(t){this.onGameItem(t,"gold")}onGameDiamond(t){this.onGameItem(t,"diamond")}onGameExp(t){this.onGameItem(t,"exp")}onGameEnergy(t){this.onGameItem(t,"energy")}onGameStar(t){this.onGameItem(t,"star")}onGameBag(t){this.onGameItem(t,"bag")}changeAvatar(t){this.avatar.init(t)}onGuideEvent(){N.instance.guideMode&&(N.instance.curStep==O.GUIDE_STEP4_AIRDROP_END_GAME&&(N.instance.curStep=1,C.instance.show(y.PopupUI.GuidePopup,null,P.TOP,!1,this.leftList.getChildByName("spinBtn"),(()=>{}),(()=>{}))),N.instance.curStep==O.GUIDE_STEP8_SPIN?(N.instance.curStep=1,C.instance.show(y.PopupUI.GuidePopup,null,P.TOP,!1,this.cashReward.node.parent,(()=>{}),(()=>{}))):N.instance.curStep==O.GUIDE_STEP11_DONE&&(N.instance.guideMode=!1,C.instance.show(y.PopupUI.GuidePopup)))}onUpdateCash(){if(j.instance.signInfo&&0==j.instance.signInfo.week&&j.instance.signInfo.signDay<7){this.cashReward.node.parent.active=!0;let t=j.instance.signInfo,e=0,n=t.signRewards[t.signDay].rewards;for(let t=0;t<n.length;t++)n[t].itemId==L.Bag&&(e=n[t].count);t.isSign?(this.cashReward.node.parent.getChildByName("redpoint").active=!1,this.cashReward.string=G.instance.getLang("event.bagtomorrow",[e])):(this.cashReward.node.parent.getChildByName("redpoint").active=!0,this.cashReward.string=G.instance.getLang("event.bagclaim",[e]))}else this.cashReward.node.parent.active=!1}onUpdateTapInfo(){let t=W.instance.tapObj;t.adLimit>0||t.ticket>0?this.airdropRedpoint.active=!0:this.airdropRedpoint.active=!1}onStopButtonAnim(){this.buttons.active=!1}onPlayButtonAnim(){this.buttons.active=!0}onEnable(){f.on(w.UPDATE_PLAYER_DATA,this.onUpdatePlayerInfo,this),f.on(w.GET_GOLD_REWARD,this.onGameCoin,this),f.on(w.GET_DIAMOND_REWARD,this.onGameDiamond,this),f.on(w.GET_ENERGY_REWARD,this.onGameEnergy,this),f.on(w.GET_EXP_REWARD,this.onGameExp,this),f.on(w.GET_STAR_REWARD,this.onGameStar,this),f.on(w.GET_BAG_REWARD,this.onGameBag,this),f.on(w.COST_ENERGY_BATTLE,this.onFlyEnergy,this),f.on(w.UPDTAE_AVATAR_INFO,this.changeAvatar,this),f.on(w.UPDATE_CHAPTER_CHEST,this.showCashChests,this),f.on(w.UPDATE_CHAPTER_PLAY_ANIM,this.onPlayButtonAnim,this),f.on(w.UPDATE_CHAPTER_STOP_ANIM,this.onStopButtonAnim,this),f.on(w.GUIDE_ACTION,this.onGuideEvent,this),f.on(w.UPDATE_DAILY_QUEST_POPUP,this.onUpdateCash,this),f.on(F.UPDATE_TAP_DATA,this.onUpdateTapInfo,this)}onDisable(){f.off(w.UPDATE_PLAYER_DATA,this.onUpdatePlayerInfo,this),f.off(w.GET_GOLD_REWARD,this.onGameCoin,this),f.off(w.GET_DIAMOND_REWARD,this.onGameDiamond,this),f.off(w.GET_ENERGY_REWARD,this.onGameEnergy,this),f.off(w.GET_EXP_REWARD,this.onGameExp,this),f.off(w.GET_STAR_REWARD,this.onGameStar,this),f.off(w.GET_BAG_REWARD,this.onGameBag,this),f.off(w.UPDATE_CHAPTER_CHEST,this.showCashChests,this),f.off(w.COST_ENERGY_BATTLE,this.onFlyEnergy,this),f.off(w.UPDTAE_AVATAR_INFO,this.changeAvatar,this),f.off(w.UPDATE_CHAPTER_PLAY_ANIM,this.onPlayButtonAnim,this),f.off(w.UPDATE_CHAPTER_STOP_ANIM,this.onStopButtonAnim,this),f.off(w.GUIDE_ACTION,this.onGuideEvent,this),f.off(w.UPDATE_DAILY_QUEST_POPUP,this.onUpdateCash,this),f.off(F.UPDATE_TAP_DATA,this.onUpdateTapInfo,this)}}).prototype,"gold",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Tt=e(wt.prototype,"diamond",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Et=e(wt.prototype,"power",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),At=e(wt.prototype,"usdt",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),yt=e(wt.prototype,"star",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Rt=e(wt.prototype,"bag",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Dt=e(wt.prototype,"levelProgress",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vt=e(wt.prototype,"level",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Gt=e(wt.prototype,"chapterPrefab",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ut=e(wt.prototype,"leftBtn",[tt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Bt=e(wt.prototype,"rightBtn",[et],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),St=e(wt.prototype,"pageView",[nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Nt=e(wt.prototype,"title",[it],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ot=e(wt.prototype,"leftList",[at],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Lt=e(wt.prototype,"rightList",[st],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Mt=e(wt.prototype,"cashReward",[ot],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xt=e(wt.prototype,"airdropRedpoint",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),kt=e(wt.prototype,"raidNumber",[ht],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zt=e(wt.prototype,"chapterResult",[ut],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jt=e(wt.prototype,"buttons",[pt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wt=e(wt.prototype,"battleEnergy",[ct],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ft=e(wt.prototype,"unlockInfo",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ht=e(wt.prototype,"countDown",[gt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vt=e(wt.prototype,"chapterChestList",[dt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Yt=e(wt.prototype,"avatar",[mt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qt=e(wt.prototype,"chestPrefab",[bt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$t=e(wt.prototype,"cashChestList",[ft],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),qt=e(wt.prototype,"aniFrames",[Ct],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Xt=e(wt.prototype,"animNode",[Pt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_t=wt))||_t));i._RF.pop()}}}));

System.register("chunks:///_virtual/ChestData.ts",["cc","./Constants.ts","./Api.ts","./CfgMgr.ts","./EventListener.ts","./HttpService.ts","./OpenPopupManager.ts","./PlayerData.ts","./GameEvent.ts","./ItemModel.ts"],(function(t){var s,e,n,i,c,o,a,h,r,u,l;return{setters:[function(t){s=t.cclegacy},function(t){e=t.Constants},function(t){n=t.Api},function(t){i=t.CfgMgr},function(t){c=t.EventListener},function(t){o=t.HttpService},function(t){a=t.OpenPopupManager,h=t.LayerType},function(t){r=t.PlayerData},function(t){u=t.GameEvent},function(t){l=t.ItemCfg}],execute:function(){s._RF.push({},"e85e9DKPNVFCrmukV4FMn9s","ChestData",void 0);class p{constructor(){this.chests=[]}init(){}getChestData(){o.instance.post(n.CHAPTER_INFO,{}).then((t=>{this.chests=t.data.chests,c.emit(u.UPDATE_CHAPTER_CHEST)}))}openChest(t,s,i){o.instance.post(n.CHEST_OPEN,{slot:t.slot}).then((n=>{0==n.code?(this.chests=n.data.chests,c.emit(u.UPDATE_CHAPTER_CHEST),i&&i(),r.instance.getPlayerInfo(!1),a.instance.show(e.PopupUI.ChestOpenPopup,null,h.TOP,!1,t,n.data.rewards,s)):a.instance.showToast(n.msg)}))}unlockSlot(t,s){o.instance.post(n.CHEST_UNLOCK,{slot:t.slot}).then((t=>{0==t.code?(this.chests=t.data.chests,c.emit(u.UPDATE_CHAPTER_CHEST),s&&s(),r.instance.getPlayerInfo(),a.instance.showToast("Success")):a.instance.showToast(t.msg)}))}getItemCfg(t){return i.getDataById(new l,t)}static get instance(){return this._instance||(this._instance=new p),this._instance}}t("ChestData",p),p._instance=null;t("ChapterInfoResult",class{constructor(){this.chests=void 0}});t("ChestOpenResult",class{constructor(){this.rewards=void 0,this.chests=void 0}});t("ChestObj",class{constructor(){this.slot=void 0,this.isUnlock=void 0,this.price=void 0,this.unlockPrice=void 0,this.chest=void 0,this.countdown=void 0}}),s._RF.pop()}}}));

System.register("chunks:///_virtual/ChestDetailPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./SpriteEx.ts","./ChestData.ts","./Util.ts"],(function(t){var e,i,n,s,o,a,u,r,l,p,h,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,s=t.Label,o=t.Node,a=t._decorator,u=t.Component},function(t){r=t.OpenPopupManager},function(t){l=t.Constants},function(t){p=t.SpriteEx},function(t){h=t.ChestData},function(t){c=t.Util}],execute:function(){var b,d,f,m,g,y,C,_,D,P,w,x,T,O,j;n._RF.push({},"77b54sses5EapfpF5oEwGpl","ChestDetailPopup",void 0);const{ccclass:z,property:v}=a;t("ChestDetailPopup",(b=z("ChestDetailPopup"),d=v(s),f=v(p),m=v(p),g=v(s),y=v(s),C=v(o),b((P=e((D=class extends u{constructor(){super(...arguments),i(this,"title",P,this),i(this,"banner",w,this),i(this,"icon",x,this),i(this,"fee",T,this),i(this,"timeText",O,this),i(this,"buyBtn",j,this),this._chestObj=void 0,this._pos=void 0}show(t,e){this._chestObj=t,this._pos=e;let i=h.instance.getItemCfg(t.chest.itemId);this.icon.index=i.quality,this.banner.index=i.quality<2?0:1,this.fee.string=t.price+"",this.updateTime(),this.schedule(this.updateTime,1)}onBuyBoxBtn(){h.instance.openChest(this._chestObj,this._pos,(()=>{r.instance.hide(l.PopupUI.ChestDetailPopup)}))}updateTime(){this._chestObj.countdown<=0&&(h.instance.getChestData(),this.unschedule(this.updateTime)),this._chestObj.countdown--,this.timeText.string=c.timeToStrings(this._chestObj.countdown)}onCloseTouch(){this.unschedule(this.updateTime),r.instance.hide(l.PopupUI.ChestDetailPopup)}}).prototype,"title",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=e(D.prototype,"banner",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=e(D.prototype,"icon",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=e(D.prototype,"fee",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=e(D.prototype,"timeText",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(D.prototype,"buyBtn",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=D))||_));n._RF.pop()}}}));

System.register("chunks:///_virtual/ChestItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SpriteEx.ts","./ChestData.ts","./Util.ts","./OpenPopupManager.ts","./Constants.ts"],(function(t){var e,i,s,n,c,o,h,a,l,r,u,p,d,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){s=t.cclegacy,n=t.Label,c=t._decorator,o=t.Component,h=t.UITransform,a=t.Vec3},function(t){l=t.SpriteEx},function(t){r=t.ChestData},function(t){u=t.Util},function(t){p=t.OpenPopupManager,d=t.LayerType},function(t){b=t.Constants}],execute:function(){var m,f,T,g,O,j,v,x,C;s._RF.push({},"43a9bkVYWBPgYff15hREATw","ChestItem",void 0);const{ccclass:k,property:w}=c;t("ChestItem",(m=k("ChestItem"),f=w(l),T=w(l),g=w(n),m((v=e((j=class extends o{constructor(){super(...arguments),i(this,"lock",v,this),i(this,"chest",x,this),i(this,"timeText",C,this),this.chestObj=null}init(t){if(this.chestObj=t,this.unschedule(this.updateTime),this.chestObj.isUnlock)if(this.chestObj.chest){this.lock.node.active=!1,this.chest.node.active=!0,this.timeText.node.parent.active=!0;let t=r.instance.getItemCfg(this.chestObj.chest.itemId);this.chest.index=t.quality,this.timeText.string=u.timeToStrings(this.chestObj.countdown),this.schedule(this.updateTime,1)}else this.lock.node.active=!0,this.lock.index=1,this.chest.node.active=!1,this.timeText.node.parent.active=!1;else this.lock.node.active=!0,this.lock.index=0,this.chest.node.active=!1,this.timeText.node.parent.active=!1}updateTime(){this.chestObj.countdown<=0&&(r.instance.getChestData(),this.unschedule(this.updateTime)),this.chestObj.countdown--,this.timeText.string=u.timeToStrings(this.chestObj.countdown)}onTapBtn(){if(this.chestObj.isUnlock)if(this.chestObj.chest){let t=this.node.getComponent(h).convertToWorldSpaceAR(new a(0,0,0));p.instance.show(b.PopupUI.ChestDetailPopup,null,d.TOP,!1,this.chestObj,t)}else p.instance.showToast("chest.getone");else p.instance.show(b.PopupUI.ChestUnlockPopup,null,d.TOP,!1,this.chestObj)}onEnable(){}onDisable(){this.unschedule(this.updateTime)}}).prototype,"lock",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(j.prototype,"chest",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(j.prototype,"timeText",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=j))||O));s._RF.pop()}}}));

System.register("chunks:///_virtual/ChestModel.ts",["cc"],(function(e){var a;return{setters:[function(e){a=e.cclegacy}],execute:function(){a._RF.push({},"5fc42R9SQhEbL4SiFWpxqsV","ChestModel",void 0);e("ChestAnim",{Unavailable:"unavailable",Available:"available",Received:"received"}),e("ChestStatus",{Unavailable:0,Available:1,Received:2});a._RF.pop()}}}));

System.register("chunks:///_virtual/ChestOpenPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./OpenPopupManager.ts","./SpriteEx.ts","./EventListener.ts","./GameEvent.ts","./ChestData.ts"],(function(t){var e,i,n,s,o,r,a,p,u,l,c,h,b,f,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,s=t.ParticleSystem2D,o=t.Node,r=t.AnimationComponent,a=t.Label,p=t._decorator,u=t.Component},function(t){l=t.Constants},function(t){c=t.OpenPopupManager},function(t){h=t.SpriteEx},function(t){b=t.EventListener},function(t){f=t.GameEvent},function(t){m=t.ChestData}],execute:function(){var g,d,y,C,P,_,w,v,O,x,A,D,E;n._RF.push({},"846f9wCsKBD1qxpN1wrPdC5","ChestOpenPopup",void 0);const{ccclass:S,property:z}=p;t("ChestOpenPopup",(g=S("ChestOpenPopup"),d=z(s),y=z(o),C=z(r),P=z(a),_=z(h),g((O=e((v=class extends u{constructor(){super(...arguments),i(this,"starAnim",O,this),i(this,"bg",x,this),i(this,"boxAnim",A,this),i(this,"title",D,this),i(this,"icon",E,this),this._rewards=[],this._chestObj=null,this._pos=void 0}show(t,e,i){this._chestObj=t,this._rewards=e,this._pos=i;let n=m.instance.getItemCfg(this._chestObj.chest.itemId);this.icon.index=n.quality,this.bg.active=!1,this.boxAnim.play(),this.boxAnim.on(r.EventType.FINISHED,(()=>{this.bg.active=!0,this.starAnim.resetSystem()}))}onCloseBtn(){c.instance.hide(l.PopupUI.ChestOpenPopup),c.instance.showRewardPopup(this._rewards,this._pos,(t=>{})),b.emit(f.UPDATE_SHOP_BOX)}}).prototype,"starAnim",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(v.prototype,"bg",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(v.prototype,"boxAnim",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(v.prototype,"title",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(v.prototype,"icon",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=v))||w));n._RF.pop()}}}));

System.register("chunks:///_virtual/ChestUnlockPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./OpenPopupManager.ts","./ChestData.ts"],(function(t){var e,n,o,s,c,i,p,r,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){o=t.cclegacy,s=t.Label,c=t._decorator,i=t.Component},function(t){p=t.Constants},function(t){r=t.OpenPopupManager},function(t){u=t.ChestData}],execute:function(){var l,a,h,f,P;o._RF.push({},"2e4f4aLPVVGoIJb3FY5Xcbv","ChestUnlockPopup",void 0);const{ccclass:C,property:b}=c;t("ChestUnlockPopup",(l=C("ChestUnlockPopup"),a=b(s),l((P=e((f=class extends i{constructor(){super(...arguments),n(this,"fee",P,this),this._chestObj=null}show(t){this._chestObj=t,this.fee.string=t.unlockPrice+""}onUnlockBtn(){u.instance.unlockSlot(this._chestObj,(()=>{r.instance.hide(p.PopupUI.ChestUnlockPopup)}))}onCloseBtn(){r.instance.hide(p.PopupUI.ChestUnlockPopup)}}).prototype,"fee",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=f))||h));o._RF.pop()}}}));

System.register("chunks:///_virtual/CoinMode.ts",["cc"],(function(t){var o;return{setters:[function(t){o=t.cclegacy}],execute:function(){o._RF.push({},"f5935e0/B9JB7tJDwsoQt7Z","CoinMode",void 0);t("CoinObj",class{constructor(){this.pos=void 0,this.num=void 0}}),o._RF.pop()}}}));

System.register("chunks:///_virtual/ComLoadingPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./OpenPopupManager.ts","./EventListener.ts","./GameEvent.ts"],(function(t){var n,e,i,o,r,a,l,s,u,c,p,d;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){i=t.cclegacy,o=t.Node,r=t._decorator,a=t.Component,l=t.tween,s=t.v3},function(t){u=t.Constants},function(t){c=t.OpenPopupManager},function(t){p=t.EventListener},function(t){d=t.GameEvent}],execute:function(){var h,g,f,b,m,L,y,P,v,D,C,w,E;i._RF.push({},"b17377Nc3VGG7+PGMT/Dk6/","ComLoadingPopup",void 0);const{ccclass:G,property:H}=r;t("ComLoadingPopup",(h=G("ComLoadingPopup"),g=H(o),f=H(o),b=H(o),m=H(o),L=H(o),h((v=n((P=class extends a{constructor(){super(...arguments),e(this,"dot1",v,this),e(this,"dot2",D,this),e(this,"dot3",C,this),e(this,"dot4",w,this),e(this,"loading",E,this)}show(){let t=this.loading.children.length;for(let n=0;n<this.loading.children.length;n++){let e=this.loading.children[n];l(e).sequence(l().delay(.2*n),l().to(.2,{position:s(e.position.x,20,0)},{easing:"circInOut"}),l().to(.2,{position:s(e.position.x,0,0)},{easing:"circInOut"}),l().delay(.2*(t-n))).repeatForever().start()}this.scheduleOnce((()=>{this.onHideLoading()}),10)}onHideLoading(){c.instance.hide(u.PopupUI.ComLoadingPopup)}onEnable(){p.on(d.HIDE_LOADING,this.onHideLoading,this)}onDisable(){p.off(d.HIDE_LOADING,this.onHideLoading,this)}}).prototype,"dot1",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=n(P.prototype,"dot2",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=n(P.prototype,"dot3",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=n(P.prototype,"dot4",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=n(P.prototype,"loading",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=P))||y));i._RF.pop()}}}));

System.register("chunks:///_virtual/ComRewardAnimPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./CoinMode.ts","./ResourcesUtil.ts","./ItemModel.ts","./OpenPopupManager.ts","./EventListener.ts","./GameEvent.ts"],(function(e){var t,n,o,i,a,s,r,l,c,m,h,p,u,d,g,P,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){o=e.cclegacy,i=e.Node,a=e._decorator,s=e.Component,r=e.UITransform,l=e.instantiate,c=e.tween,m=e.v3},function(e){h=e.Constants},function(e){p=e.CoinObj},function(e){u=e.ResourcesUtil},function(e){d=e.ItemIdType},function(e){g=e.OpenPopupManager},function(e){P=e.EventListener},function(e){f=e.GameEvent}],execute:function(){var y,b,A,C,I,M,R,w,E,D,T;o._RF.push({},"9588bqcWnBCW5tA8SUq3myV","ComRewardAnimPopup",void 0);const{ccclass:v,property:G}=a;e("ComRewardAnimPopup",(y=v("ComRewardAnimPopup"),b=G(i),A=G(i),C=G(i),I=G(i),y((w=t((R=class extends s{constructor(){super(...arguments),n(this,"gold",w,this),n(this,"energy",E,this),n(this,"diamond",D,this),n(this,"bag",T,this)}show(e,t){let n=0,o=0,i=0,a=0;for(let e=0;e<t.length;e++){const s=t[e];switch(s.itemId){case d.Gold:i+=s.count;break;case d.Diamond:n+=s.count;break;case d.Bag:a+=s.count;break;case d.Energy:o+=s.count}}if(i>0){let t=new p;t.pos=e,t.num=i,this.onGameGold(t)}if(n>0){let t=new p;t.pos=e,t.num=n,this.onGameDiamond(t)}if(o>0){let t=new p;t.pos=e,t.num=o,this.onGameEnergy(t)}if(a>0){let t=new p;t.pos=e,t.num=a,this.onGameBag(t)}0==i&&0==n&&0==o&&this.close()}checkAutoClose(){this.scheduleOnce((()=>{this.energy.parent.children.length+this.gold.parent.children.length+this.diamond.parent.children.length<=4&&this.close()}),.1)}close(){g.instance.hide(h.PopupUI.ComRewardAnimPopup)}onGameGold(e){let t=this.gold.getPosition(),n=Math.min(10,e.num),o=e.pos,i=h.commonPreabPath+"goldItem",a=this.gold.parent.getComponent(r).convertToNodeSpaceAR(o);u.getPrefab(i).then((e=>{for(let o=0;o<n;o++){let i=l(e),s=2*(Math.random()-.5)*50+a.x,r=2*(Math.random()-.5)*100+a.y;i.parent=this.gold.parent,i.setPosition(a),this.scheduleOnce((()=>{c(i).to(.2,{position:m(s,r,0)},{easing:"sineIn"}).delay(.2).to(1,{position:t},{easing:"sineInOut"}).call((()=>{i.destroy(),1!=n&&o!=n-2||P.emit(f.UPDATE_PLAYER_DATA,"gold"),this.checkAutoClose()})).start()}),.05+.05*o)}}))}onGameDiamond(e){let t=this.diamond.getPosition(),n=Math.min(e.num,10),o=e.pos,i=h.commonPreabPath+"diamondItem",a=this.diamond.parent.getComponent(r).convertToNodeSpaceAR(o);u.getPrefab(i).then((e=>{for(let o=0;o<n;o++){let i=l(e),s=2*(Math.random()-.5)*100+a.x,r=2*(Math.random()-.5)*50+a.y;i.parent=this.diamond.parent,i.setPosition(a),this.scheduleOnce((()=>{c(i).to(.2,{position:m(s,r,0)},{easing:"sineIn"}).delay(.2).to(1,{position:t},{easing:"sineInOut"}).call((()=>{i.destroy(),1!=n&&o!=n-2||P.emit(f.UPDATE_PLAYER_DATA,"diamond"),this.checkAutoClose()})).start()}),.05+.05*o)}}))}onGameEnergy(e){let t=this.energy.getPosition(),n=Math.min(e.num,10),o=e.pos,i=h.commonPreabPath+"energyItem",a=this.energy.parent.getComponent(r).convertToNodeSpaceAR(o);u.getPrefab(i).then((e=>{for(let o=0;o<n;o++){let i=l(e),s=2*(Math.random()-.5)*100+a.x,r=2*(Math.random()-.5)*50+a.y;i.parent=this.energy.parent,i.setPosition(a),this.scheduleOnce((()=>{c(i).to(.2,{position:m(s,r,0)},{easing:"sineIn"}).delay(.2).to(1,{position:t},{easing:"sineInOut"}).call((()=>{i.destroy(),1!=n&&o!=n-2||P.emit(f.UPDATE_PLAYER_DATA,"energy"),this.checkAutoClose()})).start()}),.5+.05*o)}}))}onGameBag(e){let t=this.bag.getPosition(),n=Math.min(e.num,10),o=e.pos,i=h.commonPreabPath+"bagItem",a=this.bag.parent.getComponent(r).convertToNodeSpaceAR(o);u.getPrefab(i).then((e=>{for(let o=0;o<n;o++){let i=l(e),s=2*(Math.random()-.5)*100+a.x,r=2*(Math.random()-.5)*50+a.y;i.parent=this.bag.parent,i.setPosition(a),this.scheduleOnce((()=>{c(i).to(.2,{position:m(s,r,0)},{easing:"sineIn"}).delay(.2).to(1,{position:t},{easing:"sineInOut"}).call((()=>{i.destroy(),1!=n&&o!=n-2||P.emit(f.UPDATE_PLAYER_DATA,"bag"),this.checkAutoClose()})).start()}),.5+.05*o)}}))}}).prototype,"gold",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(R.prototype,"energy",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(R.prototype,"diamond",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(R.prototype,"bag",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=R))||M));o._RF.pop()}}}));

System.register("chunks:///_virtual/ComRewardPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./OpenPopupManager.ts","./RewardItem.ts","./ItemModel.ts","./EventListener.ts","./GameEvent.ts","./CoinMode.ts"],(function(t){var n,e,i,o,s,r,a,u,l,h,c,_,m,p,d,C,f;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){i=t.cclegacy,o=t.ParticleSystem2D,s=t.Prefab,r=t.Node,a=t._decorator,u=t.Component,l=t.Vec3,h=t.instantiate},function(t){c=t.Constants},function(t){_=t.OpenPopupManager},function(t){m=t.RewardItem},function(t){p=t.ItemIdType},function(t){d=t.EventListener},function(t){C=t.GameEvent},function(t){f=t.CoinObj}],execute:function(){var g,w,P,R,b,y,E,D,I,A,G;i._RF.push({},"d6e04vKRHRKhIvli2i+akoG","ComRewardPopup",void 0);const{ccclass:v,property:x}=a;t("ComRewardPopup",(g=v("ComRewardPopup"),w=x(o),P=x(s),R=x(r),b=x(r),g((D=n((E=class extends u{constructor(){super(...arguments),e(this,"rewardAnim",D,this),e(this,"rewardPrefab",I,this),e(this,"content",A,this),e(this,"closeBtn",G,this),this._callBack=null,this._diamondCount=0,this._goldCount=0,this._energyCount=0,this._expCount=0,this._bagCount=0,this._starCount=0,this._animPos=null}show(t,n,e){this._callBack=e,this._diamondCount=0,this._goldCount=0,this._energyCount=0,this._animPos=n,this._expCount=0,this._bagCount=0;for(let n=0;n<t.length;n++){const e=t[n];e.itemId==p.Diamond?this._diamondCount+=e.count:e.itemId==p.Gold?this._goldCount+=e.count:e.itemId==p.Energy?this._energyCount+=e.count:e.itemId==p.Exp?this._expCount+=e.count:e.itemId==p.Bag?this._bagCount+=e.count:e.itemId==p.Star&&(this._starCount+=e.count)}this.setContent(t),this.rewardAnim.resetSystem()}async setContent(t){this.content.removeAllChildren();let n=new l(0,0,0),e=t.length,i=e>=4?4:e;n.x=120*-(i-1)/2;for(let e=0;e<t.length;e++)await new Promise((o=>{this.scheduleOnce((()=>{const s=t[e];let r=h(this.rewardPrefab),a=new l(0,0,0),u=Math.floor(e/i),c=e%i;a.x=n.x+120*c,a.y=-120*u,r.parent=this.content,r.getComponent(m).init(s,!0),r.setPosition(a),o(0)}),.1)}))}onCloseBtn(){if(_.instance.hide(c.PopupUI.ComRewardPopup),this._animPos){if(this._diamondCount>0){let t=new f;t.pos=this._animPos,t.num=this._diamondCount,d.emit(C.GET_DIAMOND_REWARD,t)}if(this._goldCount>0){let t=new f;t.pos=this._animPos,t.num=this._goldCount,d.emit(C.GET_GOLD_REWARD,t)}if(this._energyCount>0){let t=new f;t.pos=this._animPos,t.num=this._energyCount,d.emit(C.GET_ENERGY_REWARD,t)}if(this._expCount>0){let t=new f;t.pos=this._animPos,t.num=this._expCount,d.emit(C.GET_EXP_REWARD,t)}if(this._bagCount>0){let t=new f;t.pos=this._animPos,t.num=this._bagCount,d.emit(C.GET_BAG_REWARD,t)}if(this._starCount>0){let t=new f;t.pos=this._animPos,t.num=this._starCount,d.emit(C.GET_STAR_REWARD,t)}}this._callBack&&this._callBack(this._goldCount>0||this._diamondCount>0||this._energyCount>0||this._bagCount>0||this._starCount>0)}}).prototype,"rewardAnim",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=n(E.prototype,"rewardPrefab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=n(E.prototype,"content",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=n(E.prototype,"closeBtn",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=E))||y));i._RF.pop()}}}));

System.register("chunks:///_virtual/ComTipsPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./OpenPopupManager.ts"],(function(t){var i,e,o,n,s,l,c,r,a,p;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){o=t.cclegacy,n=t.Label,s=t.Sprite,l=t.Node,c=t._decorator,r=t.Component},function(t){a=t.Constants},function(t){p=t.OpenPopupManager}],execute:function(){var u,h,d,b,f,C,m,B,P,g,v;o._RF.push({},"48119HxZClPQb78cKFTBbd6","ComTipsPopup",void 0);const{ccclass:_,property:y}=c;t("ComTipsPopup",(u=_("ComTipsPopup"),h=y(n),d=y(n),b=y(s),f=y(l),u((B=i((m=class extends r{constructor(){super(...arguments),e(this,"title",B,this),e(this,"desc",P,this),e(this,"icon",g,this),e(this,"closeBtn",v,this),this._callBack=void 0}show(t,i){this._callBack=i,this.desc.string=t.desc,this.title.string=t.title,t.hideClose?this.closeBtn.active=!1:this.closeBtn.active=!0}onCloseBtn(){p.instance.hide(a.PopupUI.ComTipsPopup),this._callBack&&this._callBack(!1)}onConfirmBtn(t){p.instance.hide(a.PopupUI.ComTipsPopup);let i=t.target.getWorldPosition();this._callBack&&this._callBack(!0,i)}}).prototype,"title",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=i(m.prototype,"desc",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=i(m.prototype,"icon",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=i(m.prototype,"closeBtn",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=m))||C));t("ComTipsObj",class{constructor(){this.title=void 0,this.desc=void 0,this.icon=void 0,this.hideClose=void 0}}),o._RF.pop()}}}));

System.register("chunks:///_virtual/ConfigModel.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"674a5YS/ylO7KNMN6UmWS0U","ConfigModel",void 0);t("ConfigModel",class{constructor(){this.manifestUrl=void 0,this.network=void 0,this.walletAddress=void 0,this.usdtAddress=void 0,this.adId=void 0,this.tgBot=void 0,this.adType=void 0,this.adTypes=void 0}}),i._RF.pop()}}}));

System.register("chunks:///_virtual/Configuration.ts",["cc","./Constants.ts","./Util.ts"],(function(e){var t,a,s,n;return{setters:[function(e){t=e.cclegacy,a=e.sys},function(e){s=e.Constants},function(e){n=e.Util}],execute:function(){t._RF.push({},"8cb26FZvcBCFoeNEIZPrPgl","Configuration",void 0);class i{constructor(){this._jsonData={},this._markSave=!1}static get instance(){return this._instance||(this._instance=new i),this._instance}init(){let e=a.localStorage.getItem(s.gameConfigId);e&&e.startsWith("@")&&(e=e.substring(1),e=n.decrypt(e),this._jsonData=JSON.parse(e)),setInterval(this.scheduleData.bind(this),500)}clearConfigDataToVersion(){let e=this.getConfigData(s.cacheVersion);if(e){let t=JSON.parse(e),a=n.clone(s.cacheVersionConfig);s.cacheVersionConfig.forEach(((e,s)=>{t.forEach(((t,s)=>{e.versionName==t.versionName&&e.version>t.version&&"gameData"==t.versionName?(this.clearConfigData(),this._jsonData={}):(e.versionName==t.versionName&&e.version>t.version&&this._jsonData.hasOwnProperty(e.versionName)&&delete this._jsonData[e.versionName],a.some(((e,s)=>{if(e.versionName==t.versionName)return a.splice(s,1),!0})))}))})),a.forEach((e=>{this._jsonData.hasOwnProperty(e.versionName)&&delete this._jsonData[e.versionName]}))}else s.cacheVersionConfig.forEach((e=>{this._jsonData.hasOwnProperty(e.versionName)&&delete this._jsonData[e.versionName]}));this.setConfigData(s.cacheVersion,JSON.stringify(s.cacheVersionConfig))}clearByKey(e){this._jsonData.hasOwnProperty(e)&&(delete this._jsonData[e],this._markSave=!0)}clearConfigData(){a.localStorage.clear()}getConfigData(e){return this._jsonData[e]||null}setConfigData(e,t){this._jsonData[e]=t,this._markSave=!0}scheduleData(){if(!this._markSave)return;const e=JSON.stringify(this._jsonData);a.localStorage.setItem(s.gameConfigId,"@"+n.encrypt(e)),this._markSave=!1}}e("Configuration",i),i._instance=null,t._RF.pop()}}}));

System.register("chunks:///_virtual/Constants.ts",["cc"],(function(p){var e;return{setters:[function(p){e=p.cclegacy}],execute:function(){e._RF.push({},"38f6antDZNCibijc56rqZbp","Constants",void 0);class o{}p("Constants",o),o.Prefab={},o.toastPath="Prefab/Popup/Common/toast",o.monsterPath="Prefab/Game/Monster/MonsterPrefab",o.monsterBulletPath="Prefab/Game/Monster/monsterBulletItem",o.weaponPath="Prefab/Game/Weapon/weaponItem",o.weaponBgPath="Prefab/Game/Weapon/weaponBgItem",o.weaponMergePath="Prefab/Game/Weapon/weaponMergeEffect",o.weaponBuffPath="Prefab/Game/Weapon/weaponBuffEffect",o.battSkillPath="Prefab/Game/Skill/skillBulletItem",o.battlePath="Prefab/Game/Battle/",o.shopPreabPath="Prefab/Popup/Shop/",o.dailyQuestPath="Prefab/Popup/DailyQuest/",o.commonPreabPath="Prefab/Popup/Common/",o.towerBattlePath="Prefab/Tower/Battle/",o.towerDoorPath="Prefab/Tower/Battle/towerDoorItem",o.towerHeroPath="Prefab/Tower/Hero/towerHeroItem",o.towerBattSkillPath="Prefab/Tower/Skill/towerSkillBulletItem",o.towerMonsterPath="Prefab/Tower/Monster/towerMonsterItem",o.tapBattlePath="Prefab/Tap/Battle/",o.tapMonsterPath="Prefab/Tap/Monster/tapMonsterItem",o.tapHeroPath="Prefab/Tap/Hero/tapHeroItem",o.tapBattSkillPath="Prefab/Tap/Skill/tapSkillBulletItem",o.qualityPath="Common/quality",o.commonPath="Common/",o.skillIconPath="Game/Skill/",o.mapPath="Game/Map/",o.weaponIconPath="Game/Weapon/",o.heroIconPath="Game/Hero/",o.gridIconPath="Game/Grid/icon/",o.gridPath="Game/Grid/",o.monsterSpinePath="Spine/Monster/",o.monsterIconPath="Game/Monster/",o.chaterMapPath="Map/Chapter/",o.bulletPath="Game/Bullet/",o.buffPath="Game/Buff/",o.heroSpinePath="Spine/Hero/",o.itemsPath="Items/",o.flagsPath="Flags/",o.guidePath="Guide/",o.equipmentsPath="Equipments/",o.SysConstant={},o.ConfigPath="ConfigData/",o.Language="language",o.AUDIO_FILE_PATH={MUSIC:"Audio/Music/",SOUND:"Audio/Sound/"},o.PopupUI={ChapterPopup:"Prefab/Popup/Chapter/chapterPopup",ChestDetailPopup:"Prefab/Popup/Chest/chestDetailPopup",ChestOpenPopup:"Prefab/Popup/Chest/chestOpenPopup",ChestUnlockPopup:"Prefab/Popup/Chest/chestUnlockPopup",BagTokenPopup:"Prefab/Popup/Chapter/bagTokenPopup",NewerRewardPopup:"Prefab/Popup/Newer/newerRewardPopup",HeroPopup:"Prefab/Popup/Hero/heroPopup",HeroDetailPopup:"Prefab/Popup/Hero/heroDetailPopup",EquipDetailPopup:"Prefab/Popup/Hero/equipDetailPopup",EquipActionPopup:"Prefab/Popup/Hero/equipActionPopup",ShopPopup:"Prefab/Popup/Shop/shopPopup",ShopItemPopup:"Prefab/Popup/Shop/shopItemPopup",ComRewardPopup:"Prefab/Popup/Common/comRewardPopup",ComRewardAnimPopup:"Prefab/Popup/Common/comRewardAnimPopup",AvatarPopup:"Prefab/Popup/User/avatarPopup",SetCountryPopup:"Prefab/Popup/User/setCountryPopup",ShopBoxRewardPopup:"Prefab/Popup/Shop/shopBoxRewardPopup",ShopBoxOpenPopup:"Prefab/Popup/Shop/shopBoxOpenPopup",ShopBoxLevelupPopup:"Prefab/Popup/Shop/shopBoxLevelupPopup",ShopBoxDetailPopup:"Prefab/Popup/Shop/shopBoxDetailPopup",ShopBoxWeaponDetailPopup:"Prefab/Popup/Shop/shopBoxWeaponDetailPopup",ShopEnergyPopup:"Prefab/Popup/Shop/shopEnergyPopup",ShopSuccessPopup:"Prefab/Popup/Shop/shopSuccessPopup",BagPopup:"Prefab/Popup/Bag/bagPopup",BagDetailPopup:"Prefab/Popup/Bag/bagDetailPopup",WeaponStylePopup:"Prefab/Popup/Bag/weaponStylePopup",GamePopup:"Prefab/Popup/Game/gamePopup",GameWinPopup:"Prefab/Popup/Game/gameWinPopup",GameRevivePopup:"Prefab/Popup/Game/gameRevivePopup",GameFailPopup:"Prefab/Popup/Game/gameFailPopup",GameDebugPopup:"Prefab/Popup/Game/gameDebugPopup",WeaponDetailPopup:"Prefab/Popup/Weapon/weaponDetailPopup",WeaponSelectPopup:"Prefab/Popup/Weapon/weaponSelectPopup",AdTipsPopup:"Prefab/Popup/Game/adTipsPopup",PausePopup:"Prefab/Popup/Game/pausePopup",ComTipsPopup:"Prefab/Popup/Common/comTipsPopup",ComLoadingPopup:"Prefab/Popup/Common/comLoadingPopup",SettingPopup:"Prefab/Popup/Setting/settingPopup",LanguagePopup:"Prefab/Popup/Setting/languagePopup",RankPopup:"Prefab/Popup/Rank/rankPopup",SkillSelectPopup:"Prefab/Popup/Skill/skillSelectPopup",DailyQuestPopup:"Prefab/Popup/DailyQuest/dailyQuestPopup",InvitePopup:"Prefab/Popup/Invite/invitePopup",InviteTipsPopup:"Prefab/Popup/Invite/inviteTipsPopup",FriendsPopup:"Prefab/Popup/Invite/friendsPopup",EventInvitePopup:"Prefab/Popup/Event/eventInvitePopup",EventLlamaPopup:"Prefab/Popup/Event/eventLlamaPopup",EventSigninePopup:"Prefab/Popup/Event/eventSigninPopup",EventDailyPopup:"Prefab/Popup/Event/eventDailyPopup",WalletPopup:"Prefab/Popup/Wallet/walletPopup",WithdrawPopup:"Prefab/Popup/Wallet/withdrawPopup",WithdrawBillPopup:"Prefab/Popup/Wallet/withdrawBillPopup",SelectWalletPopup:"Prefab/Popup/Wallet/selectWalletPopup",FundPopup:"Prefab/Popup/Topup/fundPopup",MonthlyPassPopup:"Prefab/Popup/Topup/monthlyPassPopup",FirstTopupPopup:"Prefab/Popup/Topup/firstTopupPopup",GuidePopup:"Prefab/Popup/Guide/guidePopup",WarehousePopup:"Prefab/Popup/Warehouse/warehousePopup",EquipBoxDetailPopup:"Prefab/Popup/Warehouse/equipBoxDetailPopup",EquipOpenPopup:"Prefab/Popup/Warehouse/equipOpenPopup",UnlockItemPopup:"Prefab/Popup/Chapter/unlockItemPopup",LevelupPopup:"Prefab/Popup/Chapter/levelupPopup",BagTowerPopup:"Prefab/Popup/Tower/bagTowerPopup",BagTowerRulePopup:"Prefab/Popup/Tower/bagTowerRulePopup",BagTowerWeaponPopup:"Prefab/Popup/Tower/bagTowerWeaponPopup",BagTowerTicketPopup:"Prefab/Popup/Tower/bagTowerTicketPopup",BagTowerRecordPopup:"Prefab/Popup/Tower/bagTowerRecordPopup",EditNamePopup:"Prefab/Popup/User/editNamePopup",RedeemCodePopup:"Prefab/Popup/Setting/redeemCodePopup",DailySpinPopup:"Prefab/Popup/Spin/dailySpinPopup",SpinTipsPopup:"Prefab/Popup/Spin/spinTipsPopup",MailBoxPopup:"Prefab/Popup/MailBox/mailBoxPopup",TaskPopup:"Prefab/Popup/Task/taskPopup",DungeonPopup:"Prefab/Popup/Chapter/dungeonPopup",FightEndPopup:"Prefab/Popup/Chapter/fightEndPopup",FightEndTipPopup:"Prefab/Popup/Chapter/fightEndTipPopup",TowerGame:"Prefab/Tower/towerGame",TowerWinPopup:"Prefab/Tower/Game/towerWinPopup",TowerFailPopup:"Prefab/Tower/Game/towerFailPopup",TapGame:"Prefab/Tap/tapGame",TapWinPopup:"Prefab/Tap/Game/tapWinPopup",TapTicketPopup:"Prefab/Tap/Game/tapTicketPopup",CashPopup:"Prefab/Popup/Cash/cashPopup",CashItemPopup:"Prefab/Popup/Cash/cashItemPopup",CashBillPopup:"Prefab/Popup/Cash/cashBillPopup",StarPopup:"Prefab/Popup/Cash/starPopup",EarnPopup:"Prefab/Popup/Earn/earnPopup",EarnInvestPopup:"Prefab/Popup/Earn/earnInvestPopup",EarnRulePopup:"Prefab/Popup/Earn/earnRulePopup",EarnRecordPopup:"Prefab/Popup/Earn/earnRecordPopup",EarnCashPopup:"Prefab/Popup/Earn/earnCashPopup",EarnSuccessPopup:"Prefab/Popup/Earn/earnSuccessPopup",SniperPopup:"Prefab/Sniper/Popup/sniperPopup",SniperGame:"Prefab/Sniper/Game/sniperGame",SniperWinPopup:"Prefab/Sniper/Popup/sniperWinPopup",SniperOverPopup:"Prefab/Sniper/Popup/sniperOverPopup"},o.cacheVersion="cacheVersion",o.gameConfigId="gameData",o.playerConfigId="playerData",o.placeConfigId="placeData",o.weaponConfigId="weaponData",o.shopSpecialConfigId="shopSpecialData",o.cacheVersionConfig=[{versionName:"gameData",version:1.03},{versionName:"playerData",version:1.01},{versionName:"placeData",version:1.01},{versionName:"equipData",version:1.01}],e._RF.pop()}}}));

System.register("chunks:///_virtual/ContentAdapter.ts",["cc"],(function(t){var e,n,o,i,h,r;return{setters:[function(t){e=t.cclegacy,n=t.Component,o=t.screen,i=t.UITransform,h=t.Size,r=t._decorator}],execute:function(){var c;e._RF.push({},"494f9k+dAhM/KtYR67LvtYz","ContentAdapter",void 0);const{ccclass:d,property:s}=r;t("ContentAdapter",d("ContentAdapter")(c=class extends n{onLoad(){let t=o.windowSize,e=this.node.getComponent(i).contentSize,n=Math.min(t.width/e.width,t.height/e.height),r=e.width*n,c=e.height*n,d=new h;d.width=e.width*(t.width/r),d.height=e.height*(t.height/c),this.node.getComponent(i).setContentSize(d)}})||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/ContentScale.ts",["cc","./Util.ts"],(function(t){var e,c,n,o;return{setters:[function(t){e=t.cclegacy,c=t.Component,n=t._decorator},function(t){o=t.Util}],execute:function(){var s;e._RF.push({},"29ec8b7A9ZAfpoh28pIYAGQ","ContentScale",void 0);const{ccclass:a,property:r}=n;t("ContentScale",a("ContentScale")(s=class extends c{start(){let t=o.adapterScale();this.node.setScale(t,t)}})||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/ContentWidthAdapter.ts",["cc"],(function(t){var e,n,o,i,d;return{setters:[function(t){e=t.cclegacy,n=t.Component,o=t.view,i=t.UITransform,d=t._decorator}],execute:function(){var s;e._RF.push({},"9d1beTZsZVLLodLFMhkBa8y","ContentWidthAdapter",void 0);const{ccclass:r,property:c}=d;t("ContentWidthAdapter",r("ContentWidthAdapter")(s=class extends n{onLoad(){let t=o.getVisibleSize(),e=o.getDesignResolutionSize(),n=t.width>e.width?e.width:t.width;this.node.getComponent(i).width=n}})||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/ContentWidthScaleAdapter.ts",["cc"],(function(t){var e,i,n,o,d;return{setters:[function(t){e=t.cclegacy,i=t.Component,n=t.view,o=t.UITransform,d=t._decorator}],execute:function(){var s;e._RF.push({},"e7ff0vpzL1BzJDirZZHDBLJ","ContentWidthScaleAdapter",void 0);const{ccclass:c,property:r}=d;t("ContentWidthAdapter",c("ContentWidthAdapter")(s=class extends i{onLoad(){let t=n.getVisibleSize(),e=n.getDesignResolutionSize(),i=t.width>e.width?e.width:t.width,d=t.width>e.width?1:t.width/e.width;this.node.getComponent(o).width=i,this.node.setScale(d,d)}})||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/CountryItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UserItem.ts","./Constants.ts","./ResourcesUtil.ts","./CountryTipsItem.ts"],(function(t){var e,n,i,r,o,s,l,a,u,c,h,p,f,b,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,r=t.Prefab,o=t.Node,s=t.Label,l=t.Sprite,a=t._decorator,u=t.Component,c=t.instantiate,h=t.Vec3},function(t){p=t.UserItem},function(t){f=t.Constants},function(t){b=t.ResourcesUtil},function(t){m=t.CountryTipsItem}],execute:function(){var y,g,C,d,I,w,P,U,z,M,_,k,F,T,v;i._RF.push({},"0e073/U0a1P5J02s5BFYS3b","CountryItem",void 0);const{ccclass:x,property:L}=a;t("CountryItem",(y=x("CountryItem"),g=L(r),C=L(o),d=L(s),I=L(s),w=L(l),P=L(r),y((M=e((z=class extends u{constructor(){super(...arguments),n(this,"userPrefab",M,this),n(this,"content",_,this),n(this,"rank",k,this),n(this,"lbName",F,this),n(this,"flag",T,this),n(this,"countryTipsItem",v,this),this._countryObj=null}init(t){this._countryObj=t,this.rank.string=`No.${t.rank}`,this.lbName.string=t.country.toUpperCase();let e=f.flagsPath+t.country.toLowerCase()+"/spriteFrame";b.geSpriteFrame(e).then((t=>{this.flag.spriteFrame=t})),this.showUserList(t.users)}showUserList(t){this.content.removeAllChildren();const e=t.length;let n=[],i=100,r=4,o=0;for(;o<e;){let t=Math.min(r,e-o);const s=360/t;for(let r=0;r<t;r++){const t=r*s*(Math.PI/180),l=i*Math.cos(t),a=i*Math.sin(t);if(n.push({x:l,y:a}),o++,o>=e)break}i+=35,r+=4}let s=0;for(let e of n){let n=c(this.userPrefab);n.setPosition(new h(e.x,e.y,0)),n.parent=this.content,n.getComponent(p).init(t[s]),s++}this.scheduleOnce((()=>{let t=this.content.children;t.sort(((t,e)=>Math.round(e.position.y)-Math.round(t.position.y)));for(let e=0;e<t.length;e++)t[e].setSiblingIndex(e)}),.1)}onTapBtn(){let t=c(this.countryTipsItem);t.parent=this.node;let e=new h(0,25,0);t.setPosition(e),t.getComponent(m).init(this._countryObj)}}).prototype,"userPrefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(z.prototype,"content",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(z.prototype,"rank",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(z.prototype,"lbName",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(z.prototype,"flag",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(z.prototype,"countryTipsItem",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=z))||U));i._RF.pop()}}}));

System.register("chunks:///_virtual/CountryModel.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"4f71eeTVE1MULuntnERwYY7","CountryModel",void 0);t("CountryCfg",class{constructor(){this.ClassName="Country",this.Id=void 0,this.name=void 0,this.code=void 0,this.native=void 0,this.continent=void 0}}),n._RF.pop()}}}));

System.register("chunks:///_virtual/CountryRankItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./ResourcesUtil.ts","./CfgMgr.ts","./CountryModel.ts"],(function(t){var e,n,r,i,o,a,s,l,u,c,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){r=t.cclegacy,i=t.Label,o=t.Sprite,a=t._decorator,s=t.Component},function(t){l=t.Constants},function(t){u=t.ResourcesUtil},function(t){c=t.CfgMgr},function(t){p=t.CountryCfg}],execute:function(){var y,g,f,h,C,b,m,k,w,d,v;r._RF.push({},"76e33DZdyVLlacnWQwWgNfb","CountryRankItem",void 0);const{ccclass:R,property:L}=a;t("CountryRankItem",(y=R("CountryRankItem"),g=L(i),f=L(i),h=L(i),C=L(o),y((k=e((m=class extends s{constructor(){super(...arguments),n(this,"rank",k,this),n(this,"country",w,this),n(this,"value",d,this),n(this,"flag",v,this)}init(t){this.rank&&(this.rank.string=`${t.rank}`);let e=t.country?t.country.toLowerCase():"unknown",n=l.flagsPath+e+"/spriteFrame";u.geSpriteFrame(n).then((t=>{this.flag.spriteFrame=t}));var r=c.getCfgDataArray(new p);let i=t.country?t.country:"Unknown";for(let e=0;e<r.length;e++){let n=r[e];t.country.toLowerCase()==n.code.toLowerCase()&&(i=n.name)}this.country.string=i,this.value.string=`${t.pass}`}}).prototype,"rank",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=e(m.prototype,"country",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=e(m.prototype,"value",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=e(m.prototype,"flag",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=m))||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/CountryTipsItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./ResourcesUtil.ts"],(function(t){var e,n,r,i,o,s,u,l,a,c,p,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){r=t.cclegacy,i=t.Label,o=t.Sprite,s=t.Node,u=t._decorator,l=t.Component,a=t.Vec3,c=t.tween},function(t){p=t.Constants},function(t){b=t.ResourcesUtil}],execute:function(){var h,y,m,f,w,g,C,d,z,v,F;r._RF.push({},"81161MbLyRNNYt/VIqC8qbz","CountryTipsItem",void 0);const{ccclass:I,property:R}=u;t("CountryTipsItem",(h=I("CountryTipsItem"),y=R(i),m=R(o),f=R(i),w=R(s),h((d=e((C=class extends l{constructor(){super(...arguments),n(this,"country",d,this),n(this,"icon",z,this),n(this,"number",v,this),n(this,"arrow",F,this)}init(t){this.country.string=t.country,this.number.string=`${t.pass}`;let e=p.flagsPath+t.country.toLowerCase()+"/spriteFrame";b.geSpriteFrame(e).then((t=>{this.icon.spriteFrame=t})),this.setAnim()}onCloseBtn(t){t.preventSwallow=!0,this.node.parent=null}setAnim(){this.node.scale=new a(0,0,0),c(this.node).to(.2,{scale:new a(1.1,1.1,1.1)}).to(.2,{scale:new a(1,1,1)}).start()}}).prototype,"country",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(C.prototype,"icon",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(C.prototype,"number",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(C.prototype,"arrow",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=C))||g));r._RF.pop()}}}));

System.register("chunks:///_virtual/DailyItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./QuestData.ts","./DailySubItem.ts","./RewardChestItem.ts","./ChestModel.ts","./GameEvent.ts","./EventListener.ts","./Constants.ts","./ResourcesUtil.ts"],(function(t){var e,i,n,s,o,r,a,l,c,h,u,p,d,m,b,f,I,P,g,y,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,s=t.Node,o=t.Label,r=t.ProgressBar,a=t.Prefab,l=t._decorator,c=t.Component,h=t.UITransform,u=t.instantiate,p=t.tween,d=t.v3},function(t){m=t.QuestData},function(t){b=t.DailySubItem},function(t){f=t.RewardChestItem},function(t){I=t.ChestAnim},function(t){P=t.GameEvent},function(t){g=t.EventListener},function(t){y=t.Constants},function(t){L=t.ResourcesUtil}],execute:function(){var D,A,w,C,_,v,E,T,U,k,R,x,z,N,O,F,M;n._RF.push({},"ba5edrbL/FBs5t07LpFHIFr","DailyItem",void 0);const{ccclass:S,property:Q}=l;t("DailyItem",(D=S("DailyItem"),A=Q(s),w=Q(s),C=Q(o),_=Q(r),v=Q(a),E=Q(a),T=Q(s),D((R=e((k=class extends c{constructor(){super(...arguments),i(this,"taskList",R,this),i(this,"boxList",x,this),i(this,"credits",z,this),i(this,"progress",N,this),i(this,"taskItem",O,this),i(this,"rewardItem",F,this),i(this,"icon",M,this)}init(){this.setContent()}onPointAnimation(t){let e=this.icon.getPosition(),i=this.icon.parent.getComponent(h).convertToNodeSpaceAR(t.pos),n=y.commonPreabPath+"badgeItem";L.getPrefab(n).then((t=>{for(let n=0;n<10;n++){let s=u(t),o=2*(Math.random()-.5)*50+i.x,r=2*(Math.random()-.5)*100+i.y;s.parent=this.icon.parent,s.setPosition(i),this.scheduleOnce((()=>{p(s).to(.2,{position:d(o,r,0)},{easing:"sineIn"}).delay(.2).to(1,{position:e},{easing:"sineInOut"}).call((()=>{s.destroy()})).start()}),.05+.05*n)}}))}setContent(){let t=m.instance.dailyQuest;if(null!=t){this.credits.string=t.dailyPoint+"",this.progress.progress=t.dailyPoint/100,t.daily.forEach(((t,e)=>{if(this.taskList.children[e])this.taskList.children[e].getComponent(b).init(t);else{let e=u(this.taskItem);e.getComponent(b).init(t),e.parent=this.taskList}}));for(let e=this.taskList.children.length-1;e>t.daily.length-1;e--)this.taskList.children[e].removeFromParent();t.dailyPointsRewards.forEach(((e,i)=>{let n=I.Received;if(e.draw||(n=t.dailyPoint<e.points?I.Unavailable:I.Available),this.boxList.children[i])this.boxList.children[i].getComponent(f).init(e.rewards,e.points,n,"quest",e.id);else{let t=u(this.rewardItem);t.getComponent(f).init(e.rewards,e.points,n,"quest",e.id),t.parent=this.boxList}}))}}onEnable(){g.on(P.UPDATE_DAILY_QUEST_POPUP,this.setContent,this),g.on(P.UPDATE_DAILY_POINT_ANIMATION,this.onPointAnimation,this)}onDisable(){g.off(P.UPDATE_DAILY_QUEST_POPUP,this.setContent,this),g.off(P.UPDATE_DAILY_POINT_ANIMATION,this.onPointAnimation,this)}}).prototype,"taskList",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=e(k.prototype,"boxList",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=e(k.prototype,"credits",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=e(k.prototype,"progress",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=e(k.prototype,"taskItem",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=e(k.prototype,"rewardItem",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=e(k.prototype,"icon",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=k))||U));n._RF.pop()}}}));

System.register("chunks:///_virtual/DailyQuestPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./QuestData.ts","./LanguageManager.ts","./EventListener.ts","./GameEvent.ts","./ResourcesUtil.ts","./GuideData.ts"],(function(t){var e,n,i,a,s,c,o,l,r,h,u,p,d,g,f,v,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,a=t.Label,s=t.Node,c=t._decorator,o=t.Component,l=t.instantiate},function(t){r=t.OpenPopupManager},function(t){h=t.Constants},function(t){u=t.QuestData},function(t){p=t.LanguageManager},function(t){d=t.EventListener},function(t){g=t.GameEvent},function(t){f=t.ResourcesUtil},function(t){v=t.GuideData,y=t.GuideStep}],execute:function(){var _,m,b,C,P,D,E,I,L;i._RF.push({},"6549awKMGtAS7uVsxAicCVH","DailyQuestPopup",void 0);const{ccclass:w,property:G}=c;t("DailyQuestPopup",(_=w("DailyQuestPopup"),m=G(a),b=G(s),C=G(s),_((E=e((D=class extends o{constructor(){super(...arguments),n(this,"title",E,this),n(this,"content",I,this),n(this,"tabContent",L,this),this._index=0,this._flag=!1,this._popup=["signInItem","dailyItem","weeklyItem","achievementItem"],this._titles=["event.dailysignin","event.daily","event.weekly","event.achievement"]}show(){u.instance.getEventInfo(),this.setContent()}async setContent(){if(!this._flag&&!this.content.children.length){this._flag=!0;for(let t=0;t<this._popup.length;t++){const e=this._popup[t];let n=h.dailyQuestPath+e;await f.getPrefab(n).then((n=>{let i=l(n);i.parent=this.content,i.active=0==t;let a=e[0].toUpperCase()+e.slice(1);i.getComponent(a).init()}))}}this.content.children.forEach(((t,e)=>{t.active=!1})),this.content.children[this._index].active=!0,this.title.string=p.instance.getLang(this._titles[this._index]),this.tabContent.children.forEach(((t,e)=>{t.getChildByName("checked").active=!1})),this.tabContent.children[this._index].getChildByName("checked").active=!0}closePopup(){r.instance.hide(h.PopupUI.DailyQuestPopup),v.instance.guideMode&&v.instance.curStep==y.GUIDE_STEP10_DAILYSIGNIN&&(v.instance.curStep=1,d.emit(g.GUIDE_ACTION))}onSwitchTab(t,e){this.content.children[e]?(this.title.string=p.instance.getLang(this._titles[e]),this.tabContent.children.forEach(((t,e)=>{t.getChildByName("checked").active=!1})),this.tabContent.children[e].getChildByName("checked").active=!0,this.content.children.forEach((t=>{t.active=!1})),this.content.children[e].active=!0,d.emit(g.UPDATE_DAILY_QUEST_POPUP)):this._index=Number(e)}}).prototype,"title",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=e(D.prototype,"content",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=e(D.prototype,"tabContent",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=D))||P));i._RF.pop()}}}));

System.register("chunks:///_virtual/DailySpinData.ts",["cc","./HttpService.ts","./Api.ts","./EventListener.ts","./GameEvent.ts","./AdManager.ts","./OpenPopupManager.ts","./CfgMgr.ts","./DailySpinModel.ts","./PlayerData.ts"],(function(t){var i,s,a,n,e,d,r,o,c,u,h,v;return{setters:[function(t){i=t.cclegacy,s=t._decorator},function(t){a=t.HttpService},function(t){n=t.Api},function(t){e=t.EventListener},function(t){d=t.GameEvent},function(t){r=t.AdManager,o=t.AdType},function(t){c=t.OpenPopupManager},function(t){u=t.CfgMgr},function(t){h=t.DailySpinCfg},function(t){v=t.PlayerData}],execute:function(){var p,l;i._RF.push({},"deb64vtYcFKQ5C5T+KBCCEw","DailySpinData",void 0);const{ccclass:w,property:f}=s;t("DailySpinData",w("DailySpinData")(((l=class t{constructor(){this.rewardList=[],this.adLimit=0,this.clover=0,this.usdtCur=void 0,this.usdtInit=void 0,this.usdtTarget=void 0,this.usdtLeft=void 0,this.countdown=0,this.showReward=!1,this.needUpdate=!0}getDailySpinArr(){return u.getCfgDataArray(new h)}getDailySpinInfo(t){void 0===t&&(t=!0),this.needUpdate=t,a.instance.post(n.LUCKSPIN_INFO).then((t=>{t&&0==t.code&&(this.rewardList=t.data.rewards,this.adLimit=t.data.adLimit,this.clover=t.data.clover,this.usdtCur=t.data.usdtCur,this.usdtInit=t.data.usdtInit,this.usdtTarget=t.data.usdtTarget,this.usdtLeft=t.data.usdtLeft,this.countdown=t.data.countdown,this.usdtInit==this.usdtCur?this.showReward=!0:this.showReward=!1,this.showReward=!1,e.emit(d.UPDTAE_DAILYSPIN_DATA))}))}draw(t){this.clover>0?this._draw("",t):r.instance.showAd(o.LUCK_SPIN,0,((i,s,a)=>{0==i&&this._draw(s,t)}))}_draw(t,i){a.instance.post(n.LUCKSPIN_DRAW,{sign:t}).then((t=>{t&&0==t.code?(i(0,t.data),this.getDailySpinInfo(!1),v.instance.getPlayerInfo()):(i(1),c.instance.showToast(t.msg))}))}static get instance(){return this._instance||(this._instance=new t),this._instance}})._instance=null,p=l))||p);t("DailySpinInfo",class{constructor(){this.rewards=void 0,this.adLimit=void 0,this.clover=void 0,this.usdtCur=void 0,this.usdtInit=void 0,this.usdtTarget=void 0,this.usdtLeft=void 0,this.countdown=void 0}});t("RewardModel",class{constructor(){this.id=void 0,this.reward=void 0}}),i._RF.pop()}}}));

System.register("chunks:///_virtual/DailySpinModel.ts",["cc"],(function(i){var t;return{setters:[function(i){t=i.cclegacy}],execute:function(){t._RF.push({},"74123wigtRDkYfI9GfileBT","DailySpinModel",void 0);i("DailySpinCfg",class{constructor(){this.ClassName="DailySpin",this.Id=void 0,this.reward=void 0}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/DailySpinPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DailySpinData.ts","./ResourcesUtil.ts","./OpenPopupManager.ts","./Constants.ts","./CfgMgr.ts","./ItemModel.ts","./EventListener.ts","./GameEvent.ts","./GuideData.ts","./SpriteEx.ts","./LanguageManager.ts","./Util.ts","./CoinMode.ts"],(function(t){var e,i,n,r,a,s,o,l,p,c,u,h,d,g,m,w,b,f,T,I,y,P,S,C,L,D,R,v,A,x,B,_,E;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,r=t.Node,a=t.RichText,s=t.Label,o=t.ParticleSystem2D,l=t._decorator,p=t.Component,c=t.instantiate,u=t.Sprite,h=t.Color,d=t.UITransform,g=t.Vec3,m=t.tween,w=t.Tween,b=t.v3},function(t){f=t.DailySpinData},function(t){T=t.ResourcesUtil},function(t){I=t.OpenPopupManager,y=t.LayerType},function(t){P=t.Constants},function(t){S=t.CfgMgr},function(t){C=t.ItemCfg,L=t.ItemIdType},function(t){D=t.EventListener},function(t){R=t.GameEvent},function(t){v=t.GuideData,A=t.GuideStep},function(t){x=t.SpriteEx},function(t){B=t.LanguageManager},function(t){_=t.Util},function(t){E=t.CoinObj}],execute:function(){var N,U,z,M,G,F,O,W,H,Y,j,k,q,K,V,Z,J,Q,X,$,tt,et,it,nt,rt,at,st,ot,lt,pt,ct,ut,ht,dt,gt,mt,wt,bt,ft;n._RF.push({},"f28c0Bt0K9DhZw+Hmdu4wSR","DailySpinPopup",void 0);const{ccclass:Tt,property:It}=l;t("DailySpinPopup",(N=Tt("DailySpinPopup"),U=It(r),z=It(r),M=It(a),G=It(a),F=It(s),O=It(r),W=It(r),H=It(r),Y=It(a),j=It(a),k=It(s),q=It(r),K=It(r),V=It(r),Z=It(s),J=It(r),Q=It(x),X=It(o),N((et=e((tt=class extends p{constructor(){super(...arguments),i(this,"initRewardContent",et,this),i(this,"spinWheelContent",it,this),i(this,"initRewardLabel1",nt,this),i(this,"initRewardLabel2",rt,this),i(this,"initRewardAmount",at,this),i(this,"initRewardBg",st,this),i(this,"initRewardIcon",ot,this),i(this,"finger",lt,this),i(this,"progessText",pt,this),i(this,"targetText",ct,this),i(this,"timeText",ut,this),i(this,"pointer",ht,this),i(this,"rewardList",dt,this),i(this,"rewardItem",gt,this),i(this,"spinNum",mt,this),i(this,"spinBtn",wt,this),i(this,"spinIcon",bt,this),i(this,"rewardAnim",ft,this)}show(){D.emit(R.UPDATE_CHAPTER_STOP_ANIM),this.init(),f.instance.getDailySpinInfo(),this.setContent(),v.instance.guideMode&&v.instance.curStep==A.GUIDE_STEP6_SPIN_PAGE&&(v.instance.curStep=1,I.instance.show(P.PopupUI.GuidePopup,null,y.TOP,!1,this.spinBtn,(()=>{}),(()=>{})))}init(){if(0==this.rewardList.children.length){let t=f.instance.getDailySpinArr();for(let e=0;e<t.length;e++){let i=t[e],n=c(this.rewardItem);n.setPosition(0,0),n.angle=-45*e,n.getComponent(u).color=e%2==0?new h(5,62,234,255):new h(13,119,235,255);let r=S.getDataById(new C,i.reward.itemId),a=P.itemsPath+r.icon+"/spriteFrame",s=n.getChildByName("icon").getComponent(u);T.geSpriteFrame(a).then((t=>{s.spriteFrame=t;s.getComponent(d).contentSize})),n.parent=this.rewardList}}}setContent(){if(0==f.instance.rewardList.length)return;f.instance.showReward?(this.spinWheelContent.active=!1,this.initRewardLabel1.string="<b>"+B.instance.getLang("spin.usdtReward1",[Number(f.instance.usdtInit).toFixed(1)])+"</b>",this.initRewardLabel2.string="<b>"+B.instance.getLang("spin.usdtReward2",[Number(f.instance.usdtTarget).toFixed(1)])+"</b>",this.initRewardAmount.string="+"+Number(f.instance.usdtInit).toFixed(1)+"USDT",0==this.initRewardContent.active&&(this.initRewardContent.active=!0,this.initRewardBg.scale=new g(0,0,0),this.initRewardIcon.scale=new g(0,0,0),m(this.initRewardBg).to(.2,{scale:new g(1.1,1.1,1.1)}).to(.2,{scale:new g(1,1,1)}).start(),m(this.initRewardIcon).to(.2,{scale:new g(1.1,1.1,1.1)}).to(.2,{scale:new g(1,1,1)}).start()),w.stopAllByTarget(this.finger),m(this.finger).sequence(m().delay(.5),m().call((()=>{this.finger.children[0].active=!this.finger.children[0].active,this.finger.children[1].active=!this.finger.children[0].active}))).repeatForever().start()):(this.spinWheelContent.active=!0,this.initRewardContent.active=!1),f.instance.needUpdate&&(this.progessText.string=B.instance.getLang("spin.target1",[f.instance.usdtCur,f.instance.usdtTarget]),this.targetText.string=B.instance.getLang("spin.target2",[f.instance.usdtLeft])),f.instance.clover>0?(this.spinIcon.index=1,this.spinNum.string="x"+f.instance.clover.toString()):(this.spinIcon.index=0,this.spinNum.string="x"+f.instance.adLimit.toString());let t=f.instance.rewardList;for(let e in this.rewardList.children){let i=this.rewardList.children[e],n=t[e];i.getChildByName("num").getComponent(s).string=n.reward.count.toString();let r=S.getDataById(new C,n.reward.itemId);if(r){let t=P.itemsPath+r.icon+"/spriteFrame",e=i.getChildByName("icon").getComponent(u);T.geSpriteFrame(t).then((t=>{e.spriteFrame=t;e.getComponent(d).contentSize}))}}}updateTime(){0!=f.instance.rewardList.length&&(f.instance.countdown<=0&&(this.timeText.node.parent.active=!1,this.unschedule(this.updateTime)),f.instance.countdown--,this.timeText.string=_.timeToString(f.instance.countdown))}onGameItem(t){let e=this.progessText.node.getPosition(),i=Math.min(t.num,10),n=t.pos,r=P.commonPreabPath+"usdtItem",a=this.progessText.node.parent.parent.getComponent(d).convertToNodeSpaceAR(n);T.getPrefab(r).then((t=>{for(let n=0;n<i;n++){let r=c(t),s=2*(Math.random()-.5)*100+a.x,o=2*(Math.random()-.5)*50+a.y;r.parent=this.progessText.node.parent.parent,r.setPosition(a),this.scheduleOnce((()=>{m(r).to(.2,{position:b(s,o,0)},{easing:"sineIn"}).delay(.2).to(1,{position:e},{easing:"sineInOut"}).call((()=>{r.destroy(),n==i-1&&(this.progessText.string=B.instance.getLang("spin.target1",[f.instance.usdtCur,f.instance.usdtTarget]),this.targetText.string=B.instance.getLang("spin.target2",[f.instance.usdtLeft]))})).start()}),.05+.05*n)}}))}onSpinTouch(){this.pointer.angle=0;for(let t in this.rewardList.children)this.rewardList.children[t].getChildByName("num").active=!1;if(v.instance.guideMode&&v.instance.curStep==A.GUIDE_STEP7_SPIN_TAKEIT&&(v.instance.curStep=1,I.instance.hide(P.PopupUI.GuidePopup)),0==f.instance.clover&&0==f.instance.adLimit)return;this.pointer.angle=0,this.spinBtn.active=!1;let t=m().by(.5,{angle:-360},{easing:"linear"});m(this.pointer).repeatForever(t).start(),f.instance.draw(((t,e)=>{if(0!=t)return this.pointer.angle=0,this.spinBtn.active=!0,void w.stopAllByTarget(this.pointer);let i=-45*(e.hitId-1)-720,n=m().to(3,{angle:i},{easing:"cubicInOut"}),r=m().call((()=>{let t=e.rewards[0];if(this.rewardAnim.resetSystem(),this.spinBtn.active=!0,this.rewardList.children[e.hitId-1].getChildByName("num").getComponent(s).string=t.count+"",this.rewardList.children[e.hitId-1].getChildByName("num").active=!0,t.itemId==L.USDT){let t=new E;t.num=10,t.pos=this.spinBtn.getComponent(d).convertToWorldSpaceAR(new g(0,0,0)),this.onGameItem(t)}}));w.stopAllByTarget(this.pointer),m(this.pointer).sequence(n,r).start()}))}onTipBtn(){I.instance.show(P.PopupUI.SpinTipsPopup)}onTakeitBtn(){w.stopAllByTarget(this.finger),this.initRewardContent.active=!1,this.spinWheelContent.active=!0,v.instance.guideMode&&v.instance.curStep==A.GUIDE_STEP6_SPIN_PAGE&&(v.instance.curStep=1,I.instance.show(P.PopupUI.GuidePopup,null,y.TOP,!1,this.spinBtn,(()=>{}),(()=>{})))}onCloseTouch(){v.instance.guideMode&&v.instance.curStep==A.GUIDE_STEP8_SPIN&&D.emit(R.GUIDE_ACTION),D.emit(R.UPDATE_CHAPTER_PLAY_ANIM),I.instance.hide(P.PopupUI.DailySpinPopup)}onEnable(){D.on(R.UPDTAE_DAILYSPIN_DATA,this.setContent,this),this.unschedule(this.updateTime),this.schedule(this.updateTime,1)}onDisable(){D.off(R.UPDTAE_DAILYSPIN_DATA,this.setContent,this),this.unschedule(this.updateTime)}}).prototype,"initRewardContent",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),it=e(tt.prototype,"spinWheelContent",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nt=e(tt.prototype,"initRewardLabel1",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rt=e(tt.prototype,"initRewardLabel2",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),at=e(tt.prototype,"initRewardAmount",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),st=e(tt.prototype,"initRewardBg",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ot=e(tt.prototype,"initRewardIcon",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lt=e(tt.prototype,"finger",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pt=e(tt.prototype,"progessText",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ct=e(tt.prototype,"targetText",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ut=e(tt.prototype,"timeText",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ht=e(tt.prototype,"pointer",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dt=e(tt.prototype,"rewardList",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gt=e(tt.prototype,"rewardItem",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mt=e(tt.prototype,"spinNum",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wt=e(tt.prototype,"spinBtn",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bt=e(tt.prototype,"spinIcon",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ft=e(tt.prototype,"rewardAnim",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=tt))||$));n._RF.pop()}}}));

System.register("chunks:///_virtual/DailySubItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./QuestData.ts","./HttpService.ts","./Api.ts","./OpenPopupManager.ts","./LanguageManager.ts","./CoinMode.ts","./EventListener.ts","./GameEvent.ts"],(function(t){var e,i,n,a,s,r,o,l,u,c,p,g,h,m,b,d,y,f,w,B;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,a=t.Label,s=t.ProgressBar,r=t.Node,o=t.Sprite,l=t._decorator,u=t.Component,c=t.Color,p=t.UITransform,g=t.Vec3},function(t){h=t.QuestData},function(t){m=t.HttpService},function(t){b=t.Api},function(t){d=t.OpenPopupManager},function(t){y=t.LanguageManager},function(t){f=t.CoinObj},function(t){w=t.EventListener},function(t){B=t.GameEvent}],execute:function(){var v,D,N,S,I,z,C,T,A,L,P,_,E,M,O,V,k,q,H;n._RF.push({},"e1756SlVTxO8LBnzBeNccXz","DailySubItem",void 0);const{ccclass:Q,property:R}=l;t("DailySubItem",(v=Q("DailySubItem"),D=R(a),N=R(a),S=R(s),I=R(a),z=R(r),C=R(r),T=R(o),A=R(r),v((_=e((P=class extends u{constructor(){super(...arguments),i(this,"point",_,this),i(this,"desc",E,this),i(this,"progress",M,this),i(this,"progressValue",O,this),i(this,"buttons",V,this),i(this,"mask",k,this),i(this,"itemBg",q,this),i(this,"icon",H,this),this.questData=null}init(t){this.questData=t,this.node.getChildByName("item"),this.point.string=t.point.toString(),this.desc.string=y.instance.getLang(t.desc,[t.target]),this.progress.progress=t.num/t.target,this.progressValue.string=`${t.num}/${t.target}`,this.buttons.getChildByName("completedBtn").active=t.draw,this.mask.active=t.draw,t.draw||(t.num<t.target?(this.buttons.getChildByName("peddingBtn").active=!0,this.buttons.getChildByName("claimedBtn").active=!1,this.itemBg.color=new c(216,231,242,255)):(this.buttons.getChildByName("claimedBtn").active=!0,this.buttons.getChildByName("peddingBtn").active=!1,this.itemBg.color=new c(255,252,83,255)))}claimReward(){m.instance.post(b.EVENT_QUEST_FINISH,{questId:this.questData.id}).then((t=>{0==t.code?(h.instance.dailyQuest=t.data,this.flyPointAnimation()):d.instance.showToast(t.msg)})).catch((t=>{d.instance.showToast("network.error")}))}flyPointAnimation(){let t=this.icon.getComponent(p).convertToWorldSpaceAR(new g(0,0,0)),e=new f;e.pos=t,e.num=10,w.emit(B.UPDATE_DAILY_POINT_ANIMATION,e)}}).prototype,"point",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=e(P.prototype,"desc",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=e(P.prototype,"progress",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=e(P.prototype,"progressValue",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=e(P.prototype,"buttons",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=e(P.prototype,"mask",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=e(P.prototype,"itemBg",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=e(P.prototype,"icon",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=P))||L));n._RF.pop()}}}));

System.register("chunks:///_virtual/DamageItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PoolManager.ts","./SkillModel.ts"],(function(e){var t,i,o,a,n,s,r,l,c,u,m,p,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){o=e.cclegacy,a=e.Node,n=e.Label,s=e.Sprite,r=e._decorator,l=e.Component,c=e.v3,u=e.tween,m=e.Color},function(e){p=e.PoolManager},function(e){d=e.DamageType}],execute:function(){var h,f,g,b,y,D,v,L,N;o._RF.push({},"6c20chu39hHKYv9Mua9Oz/X","DamageItem",void 0);const{ccclass:w,property:F}=r;e("DamageItem",(h=w("DamageItem"),f=F(a),g=F(n),b=F(s),h((v=t((D=class extends l{constructor(){super(...arguments),i(this,"damageNode",v,this),i(this,"numLab",L,this),i(this,"crt",N,this),this.monsterKey=""}init(e,t,i){void 0===i&&(i=25),this.numLab.string=`${e}`,this.numLab.fontSize=i,this.setsetDamageColor(t),this.setDamageFlyAnim(e,t)}setDamageScaleAnim(e,t){e>0?(this.node.scale=c(1,1,1),u(this.node).to(.25,{scale:c(.8,.8,.8)}).call((()=>{p.instance.putNode(this.node)})).start()):p.instance.putNode(this.node)}setDamageFlyAnim(e,t){let i=this.damageNode;if(e>0){class e{constructor(){this.position=void 0,this.scale=void 0}}let t=new e;t.position=i.getPosition(),t.scale=1.5,u(t).parallel(u().by(.25,{position:c(0,30,0)},{onUpdate:e=>{i.setPosition(e.position)}}),u().to(.25,{scale:1.3},{onUpdate:e=>{i.setScale(e.scale,e.scale)}})).delay(.25).call((()=>{i.setPosition(0,0,0),p.instance.putNode(this.node)})).start()}else i.setPosition(0,0,0),p.instance.putNode(this.node)}setsetDamageColor(e){switch(e){case d.NORMAL:case d.DEBUFF:this.numLab.color=(new m).fromHEX("#ffffff"),this.crt.node.active=!1;break;case d.CRIT:this.numLab.color=(new m).fromHEX("#FF0000"),this.crt.node.active=!0}}}).prototype,"damageNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(D.prototype,"numLab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(D.prototype,"crt",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=D))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/DamageStatItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventListener.ts","./GameEvent.ts","./DamageStatSubItem.ts"],(function(e){var t,a,n,i,s,o,p,r,m,h,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.initializerDefineProperty},function(e){n=e.cclegacy,i=e.Node,s=e.Prefab,o=e._decorator,p=e.Component,r=e.instantiate},function(e){m=e.EventListener},function(e){h=e.GameEvent},function(e){l=e.DamageStatSubItem}],execute:function(){var g,u,c,d,_,b,M,f,v;n._RF.push({},"33726IpBbdHZ70/HIaddlbm","DamageStatItem",void 0);const{ccclass:w,property:D}=o;e("DamageStatItem",(g=w("DamageStatItem"),u=D(i),c=D(i),d=D(s),g((M=t((b=class extends p{constructor(){super(...arguments),a(this,"weaponContent",M,this),a(this,"content",f,this),a(this,"damageItemPrefab",v,this),this._damageNumberMap=new Map,this._damageNodeMap=new Map,this._weaponLevelMap=new Map,this._active=!1}init(){this._damageNumberMap.clear(),this._damageNodeMap.clear(),this._weaponLevelMap.clear(),this.updateDamages(),this._active=!1,this.content.active=!1}show(){this._active=!this._active,this.content.active=this._active,this.updateDamages()}updateDamage(e,t,a,n,i){this._damageNumberMap.has(n)?this._damageNumberMap.set(n,this._damageNumberMap.get(n)+t):this._damageNumberMap.set(n,t),this._weaponLevelMap.has(n)?i>this._weaponLevelMap.get(n)&&this._weaponLevelMap.set(n,i):this._weaponLevelMap.set(n,i),this.updateDamages()}updateDamages(){if(!this._active)return;let e=Array.from(this._damageNumberMap.values()),t=0;for(let a=0;a<e.length;a++)t+=e[a];this._damageNumberMap.forEach(((e,a)=>{if(this._damageNodeMap.has(a)){this._damageNodeMap.get(a).getComponent(l).updateDamage(e,e/t,this._weaponLevelMap.get(a))}else{let n=r(this.damageItemPrefab);n.parent=this.weaponContent,n.getComponent(l).init(a,this._weaponLevelMap.get(a)),this._damageNodeMap.set(a,n),n.getComponent(l).updateDamage(e,e/t,this._weaponLevelMap.get(a))}}));let a=this.weaponContent.children;a.sort(((e,t)=>t.getComponent(l).damage-e.getComponent(l).damage));for(let e=0;e<a.length;e++)a[e].setSiblingIndex(e);this.weaponContent._updateSiblingIndex()}onEnable(){m.on(h.CREATE_DAMAGER_NUM,this.updateDamage,this)}onDisable(){m.off(h.CREATE_DAMAGER_NUM,this.updateDamage,this)}}).prototype,"weaponContent",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=t(b.prototype,"content",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(b.prototype,"damageItemPrefab",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=b))||_));n._RF.pop()}}}));

System.register("chunks:///_virtual/DamageStatSubItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./ResourcesUtil.ts","./SpriteEx.ts","./WeaponData.ts","./LanguageManager.ts"],(function(e){var t,i,n,a,r,o,s,l,u,c,h,p,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,a=e.Sprite,r=e.Label,o=e._decorator,s=e.Component,l=e.UITransform},function(e){u=e.Constants},function(e){c=e.ResourcesUtil},function(e){h=e.SpriteEx},function(e){p=e.WeaponData},function(e){g=e.LanguageManager}],execute:function(){var m,d,f,b,S,y,_,w,v,D,I,z,F;n._RF.push({},"bb3a3o0zetMaoJHX+8fsvX9","DamageStatSubItem",void 0);const{ccclass:x,property:L}=o;e("DamageStatSubItem",(m=x("DamageStatSubItem"),d=L(h),f=L(a),b=L(r),S=L(r),y=L(a),m((v=t((w=class extends s{constructor(){super(...arguments),i(this,"quality",v,this),i(this,"icon",D,this),i(this,"title",I,this),i(this,"damagePer",z,this),i(this,"damageBar",F,this),this._damage=0,this._weaponId=0,this._level=0}get damage(){return this._damage}init(e,t){this._weaponId=e,this._level=t;let i=p.instance.getWeaponByLevel(t,e);if(null==i)return;this.title.string=g.instance.getLang(i.name),this.quality.index=t-1;let n=u.weaponIconPath+i.res+"/spriteFrame";c.geSpriteFrame(n).then((e=>{this.icon.spriteFrame=e;let t=this.icon.getComponent(l).contentSize,i=Math.min(40/t.width,40/t.height);this.icon.node.setScale(i,i)}))}updateDamage(e,t,i){if(this._damage+=e,this.damagePer.string=Number(100*t).toFixed(1)+"%",this.damageBar.fillRange=t,i>this._level){this._level=i;let e=p.instance.getWeaponByLevel(i,this._weaponId);if(null==e)return;this.quality.index=i-1;let t=u.weaponIconPath+e.res+"/spriteFrame";c.geSpriteFrame(t).then((e=>{this.icon.spriteFrame=e;let t=this.icon.getComponent(l).contentSize,i=Math.min(40/t.width,40/t.height);this.icon.node.setScale(i,i)}))}}}).prototype,"quality",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(w.prototype,"icon",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(w.prototype,"title",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(w.prototype,"damagePer",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(w.prototype,"damageBar",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=w))||_));n._RF.pop()}}}));

System.register("chunks:///_virtual/Debug.ts",["cc","./GameDefine.ts"],(function(e){var o,t,r,l;return{setters:[function(e){o=e.cclegacy,t=e.Graphics,r=e.Node},function(e){l=e.GameDefine}],execute:function(){o._RF.push({},"57624QKseNHsYSFOwkcAy/w","Debug",void 0);e("Debug",class{static log(){if(l.DebugLevel<=0){for(var e=arguments.length,o=new Array(e),t=0;t<e;t++)o[t]=arguments[t];Promise.resolve(console.log.apply(this,o))}}static info(){if(l.DebugLevel<=1){for(var e=arguments.length,o=new Array(e),t=0;t<e;t++)o[t]=arguments[t];Promise.resolve(console.info.apply(this,o))}}static warn(){if(l.DebugLevel<=2){for(var e=arguments.length,o=new Array(e),t=0;t<e;t++)o[t]=arguments[t];Promise.resolve(console.warn.apply(this,o))}}static error(){if(l.DebugLevel<=3){for(var e=arguments.length,o=new Array(e),t=0;t<e;t++)o[t]=arguments[t];Promise.resolve(console.error.apply(this,o))}}static drawFillRect(e,o){let r=e.addComponent(t);r.fillColor.fromHEX("#ff0000"),r.rect(o.x,o.y,o.width,o.height),r.fill()}static drawRect(e,o){let r=e.addComponent(t);r.lineWidth=2,r.strokeColor.fromHEX("#ff0000"),r.rect(o.x,o.y,o.width,o.height),r.stroke()}static drawLine(e){let o=e.addComponent(t);o.lineWidth=2,o.strokeColor.fromHEX("#ffffff"),o.clear(),o.moveTo(100,100),o.lineTo(100,200),o.lineTo(200,200),o.stroke()}static drawPolyGon(e,o){let l=new r;e.addChild(l);let i=l.addComponent(t);i.lineWidth=10,i.strokeColor.fromHEX("#ffffff");for(let e=0;e<o.length;e++){let t=o[e];0==e?i.moveTo(t.x,t.y):i.lineTo(t.x,t.y)}i.close(),i.stroke()}static drawBesize(e,o,l,i,n,s,f){let a=new r;e.addChild(a);let c=a.addComponent(t);c.lineWidth=10,c.strokeColor.fromHEX("#ffffff"),c.moveTo(o.x,o.y),c.bezierCurveTo(i,n,s,f,l.x,l.y),c.stroke()}}),o._RF.pop()}}}));

System.register("chunks:///_virtual/DiamondNumberItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Util.ts"],(function(t){var e,n,r,i,o,c,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){r=t.cclegacy,i=t.Label,o=t._decorator,c=t.Component},function(t){u=t.Util}],execute:function(){var s,a,l,m,p;r._RF.push({},"57fb2LCAcNFyZgn46/S+0IS","DiamondNumberItem",void 0);const{ccclass:b,property:f}=o;t("DiamondNumberItem",(s=b("DiamondNumberItem"),a=f(i),s((p=e((m=class extends c{constructor(){super(...arguments),n(this,"count",p,this)}init(t){this.count.string="+"+u.formatNumber(t)}}).prototype,"count",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=m))||l));r._RF.pop()}}}));

System.register("chunks:///_virtual/DungeonData.ts",["cc","./Api.ts","./CfgMgr.ts","./EventListener.ts","./HttpService.ts","./GameEvent.ts","./FightEndEventModel.ts"],(function(t){var n,i,e,o,s,a,d;return{setters:[function(t){n=t.cclegacy},function(t){i=t.Api},function(t){e=t.CfgMgr},function(t){o=t.EventListener},function(t){s=t.HttpService},function(t){a=t.GameEvent},function(t){d=t.FightEndEventCfg}],execute:function(){n._RF.push({},"10a75xVNGNEW43nVyiCBqBl","DungeonData",void 0);class c{constructor(){this.fightEndInfo=void 0,this._gold=void 0,this._diamond=void 0}get gold(){return this._gold}get diamond(){return this._diamond}getDungeonInfo(){s.instance.post(i.DUNGEON_INFO).then((t=>{0==t.code&&(this.fightEndInfo=t.data.fightend,o.emit(a.UPDATE_DUNGEON_DATA))}))}startBattle(t,n){let i=e.getCfgDataArray(new d);for(let e=0;e<i.length;e++)if(i[e].chapter==t&&i[e].wave==n){let t=i[e];this._diamond=t.bossDiamond,this._gold=t.monsterCoin}}static get instance(){return this._instance||(this._instance=new c),this._instance}}t("DungeonData",c),c._instance=null;t("FightEndModel",class{constructor(){this.adLimit=void 0,this.left=void 0,this.totalLimit=void 0,this.countdown=void 0,this.wave=void 0,this.record=void 0}});t("DungeonModel",class{constructor(){this.fightend=void 0}}),n._RF.pop()}}}));

System.register("chunks:///_virtual/DungeonPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./DungeonData.ts","./GameEvent.ts","./EventListener.ts","./Util.ts"],(function(t){var n,e,i,o,s,u,a,h,r,c,p,g;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){i=t.cclegacy,o=t.Label,s=t._decorator,u=t.Component},function(t){a=t.OpenPopupManager},function(t){h=t.Constants},function(t){r=t.DungeonData},function(t){c=t.GameEvent},function(t){p=t.EventListener},function(t){g=t.Util}],execute:function(){var d,f,l,D,E,m,_;i._RF.push({},"d52b4b9JmlNC7zI4tnHFhXc","DungeonPopup",void 0);const{ccclass:b,property:P}=s;t("DungeonPopup",(d=b("DungeonPopup"),f=P(o),l=P(o),d((m=n((E=class extends u{constructor(){super(...arguments),e(this,"fightEndNumber",m,this),e(this,"fightEndTime",_,this),this._fightEndData=null}show(t){r.instance.getDungeonInfo(),t&&t(),this.setContent()}setContent(){this._fightEndData=r.instance.fightEndInfo,this._fightEndData&&(this.fightEndNumber.string=Number(this._fightEndData.left+this._fightEndData.adLimit).toString())}onCloseTouch(){a.instance.hide(h.PopupUI.DungeonPopup)}onFightEndBtn(){a.instance.show(h.PopupUI.FightEndPopup)}updateTime(){this._fightEndData&&(this._fightEndData.countdown<=0&&(r.instance.getDungeonInfo(),this.unschedule(this.updateTime)),this._fightEndData.countdown--,this.fightEndTime.string=g.timeToString(this._fightEndData.countdown))}onEnable(){p.on(c.UPDATE_DUNGEON_DATA,this.setContent,this),this.unschedule(this.updateTime),this.schedule(this.updateTime,1)}onDisable(){p.off(c.UPDATE_DUNGEON_DATA,this.setContent,this),this.unschedule(this.updateTime)}}).prototype,"fightEndNumber",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=n(E.prototype,"fightEndTime",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=E))||D));i._RF.pop()}}}));

System.register("chunks:///_virtual/EarnCashPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./OpenPopupManager.ts","./EarnData.ts","./EventListener.ts","./GameEvent.ts","./LanguageManager.ts","./PlayerData.ts"],(function(n){var t,e,a,i,s,r,o,c,u,l,h,p,g,d;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.initializerDefineProperty},function(n){a=n.cclegacy,i=n.Label,s=n.RichText,r=n._decorator,o=n.Component},function(n){c=n.Constants},function(n){u=n.OpenPopupManager},function(n){l=n.EarnData},function(n){h=n.EventListener},function(n){p=n.GameEvent},function(n){g=n.LanguageManager},function(n){d=n.PlayerData}],execute:function(){var C,f,m,b,y,E,P,T,v,w,A,D,L;a._RF.push({},"212dd4rc6ZHZbRlLkPl9ijC","EarnCashPopup",void 0);const{ccclass:x,property:R}=r;n("EarnCashPopup",(C=x("EarnCashPopup"),f=R(i),m=R(i),b=R(i),y=R(i),E=R(s),C((v=t((T=class extends o{constructor(){super(...arguments),e(this,"adProgressText",v,this),e(this,"adTodayCash",w,this),e(this,"adCashAmount",A,this),e(this,"inviteCash",D,this),e(this,"gameTips",L,this)}show(){l.instance.getEarnInfo(),this.setContent()}setContent(){if(!l.instance.adObj)return;let n=l.instance.adObj;this.gameTips.string=g.instance.getLang("earn.gamecash"),this.adProgressText.string=g.instance.getLang("cashhero.watchads",[n.validAdWatch,n.adWatchEachCash]),this.adTodayCash.string=g.instance.getLang("earn.cashtoday",[n.adClaim,n.adCashDailyMax]),this.inviteCash.string=g.instance.getLang("earn.friendcash",[l.instance.myIssueObj.inviteCount,200*l.instance.myIssueObj.inviteCount]),this.adCashAmount.string="x"+Math.floor(n.cashRewardAmount*n.adCashDailyMax/1e3)}onClaimBtn(){l.instance.claimTask()}onInviteBtn(){let n=d.instance.configObj.tgBot+"?startapp="+d.instance.userObj.code;const t="https://t.me/share/url?url="+encodeURIComponent(n)+"&text="+encodeURIComponent("BagWar battle time! Join BagWar now with my link for epic rewards! 🎁🔥");window.Telegram&&window.Telegram.WebApp.openTelegramLink(t)}onCloseBtn(){u.instance.hide(c.PopupUI.EarnCashPopup)}onEnable(){h.on(p.UPDATE_EARN_DATA,this.setContent,this)}onDisable(){h.off(p.UPDATE_EARN_DATA,this.setContent,this)}}).prototype,"adProgressText",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(T.prototype,"adTodayCash",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(T.prototype,"adCashAmount",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(T.prototype,"inviteCash",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(T.prototype,"gameTips",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=T))||P));a._RF.pop()}}}));

System.register("chunks:///_virtual/EarnData.ts",["cc","./HttpService.ts","./Api.ts","./AdManager.ts","./EventListener.ts","./GameEvent.ts","./OpenPopupManager.ts","./PlayerData.ts"],(function(s){var t,e,i,n,a,o,c,r,h,u;return{setters:[function(s){t=s.cclegacy,e=s._decorator},function(s){i=s.HttpService},function(s){n=s.Api},function(s){a=s.AdManager,o=s.AdType},function(s){c=s.EventListener},function(s){r=s.GameEvent},function(s){h=s.OpenPopupManager},function(s){u=s.PlayerData}],execute:function(){var d,v;t._RF.push({},"33cb6Q99UdD4496esFBRc5t","EarnData",void 0);const{ccclass:_,property:A}=e;s("EarnData",_("EarnData")(((v=class s{constructor(){this._issueObj=null,this._myIssueObj=null,this._adObj=null,this._earnRecords=[]}get issueObj(){return this._issueObj}get myIssueObj(){return this._myIssueObj}get earnRecords(){return this._earnRecords}get adObj(){return this._adObj}getEarnInfo(){i.instance.post(n.EARN_INFO,{}).then((s=>{0==s.code&&(this._myIssueObj=s.data.myIssueInfo,this._issueObj=s.data.issueInfo,this._adObj=s.data.adTask,c.emit(r.UPDATE_EARN_DATA))}))}getEarnRecords(){i.instance.post(n.EARN_HOSTORY,{}).then((s=>{0==s.code&&(this._earnRecords=s.data.history,c.emit(r.UPDATE_EARN_HISTORY_DATA))}))}invest(s,t,e){this._myIssueObj.investCash>0?a.instance.showAd(o.INVEST,0,((i,n)=>{0==i&&this._invest(s,t,"",e)})):this._invest(s,t,"",e)}_invest(s,t,e,a){i.instance.post(n.EARN_INVEST,{cash:t,issue:s,sign:e}).then((s=>{0==s.code?(this._myIssueObj=s.data.myIssueInfo,this._issueObj=s.data.issueInfo,u.instance.getPlayerInfo(),c.emit(r.UPDATE_EARN_DATA),a&&a()):"earn.unlocktips"==s.msg?h.instance.showToast(s.msg,0,[this._issueObj.inviteRequire]):h.instance.showToast(s.msg)}))}claim(s){i.instance.post(n.EARN_CLAIM,{issue:s}).then((s=>{0==s.code?(this.getEarnRecords(),u.instance.getPlayerInfo(),c.emit(r.UPDATE_EARN_DATA),h.instance.showToast("Success")):h.instance.showToast(s.msg)}))}claimTask(){i.instance.post(n.EARN_TASK_CLAIM,{}).then((s=>{0==s.code?(this.getEarnInfo(),u.instance.getPlayerInfo(),c.emit(r.UPDATE_EARN_DATA),h.instance.showToast("Success")):h.instance.showToast(s.msg)}))}clear(){}static get instance(){return this._instance||(this._instance=new s),this._instance}})._instance=null,d=v))||d);s("EarnResult",class{constructor(){this.issueInfo=void 0,this.myIssueInfo=void 0,this.adTask=void 0}});s("EarnAdObj",class{constructor(){this.adClaim=void 0,this.adCashDailyMax=void 0,this.adWatchEachCash=void 0,this.validAdWatch=void 0,this.cashRewardAmount=void 0}});s("EarnIssueObj",class{constructor(){this.issue=void 0,this.usdtAmount=void 0,this.totalInvest=void 0,this.countdown=void 0,this.inviteRequire=void 0,this.freeAmount=void 0}});s("EarnMyIssueObj",class{constructor(){this.investCash=void 0,this.expectUsdt=void 0,this.inviteCount=void 0}});s("EarnHistoryResult",class{constructor(){this.history=void 0}});s("EarnRecordObj",class{constructor(){this.date=void 0,this.draw=void 0,this.issue=void 0,this.myEarnUsdt=void 0,this.myInvestCash=void 0,this.totalInvest=void 0,this.usdtAmount=void 0}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/EarnInvestPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./OpenPopupManager.ts","./EarnData.ts","./GameEvent.ts","./PlayerData.ts","./EventListener.ts","./GuideData.ts","./RewardModel.ts","./ItemModel.ts"],(function(t){var n,e,a,i,s,o,r,u,c,l,p,h,d,f,P,E,b,m,y;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){a=t.cclegacy,i=t.Label,s=t.EditBox,o=t.Node,r=t._decorator,u=t.Component},function(t){c=t.Constants},function(t){l=t.OpenPopupManager,p=t.LayerType},function(t){h=t.EarnData},function(t){d=t.GameEvent},function(t){f=t.PlayerData},function(t){P=t.EventListener},function(t){E=t.GuideData,b=t.GuideStep},function(t){m=t.RewardObj},function(t){y=t.ItemIdType}],execute:function(){var I,v,D,_,B,g,U,A,O,T,w;a._RF.push({},"5b80fN1qstJ16Y+nFyl2rl/","EarnInvestPopup",void 0);const{ccclass:x,property:j}=r;t("EarnInvestPopup",(I=x("EarnInvestPopup"),v=j(i),D=j(s),_=j(o),B=j(o),I((A=n((U=class extends u{constructor(){super(...arguments),e(this,"cashBalance",A,this),e(this,"amountEditBox",O,this),e(this,"ad",T,this),e(this,"investBtn",w,this),this._amount="0.0"}show(){h.instance.myIssueObj&&h.instance.myIssueObj.investCash>0?this.ad.active=!0:this.ad.active=!1,this.onUpdatePlayerInfo(),this.onMaxBtn()}onAmountChange(t){this._amount=t}onMaxBtn(){this._amount=""+100*Math.floor(f.instance.assetObj.cash/100),this.amountEditBox.string=this._amount}onInvestBtn(){E.instance.curStep==b.GUIDE_STEP3_EARN_INVEST&&(E.instance.curStep=1,l.instance.hide(c.PopupUI.GuidePopup)),h.instance.invest(h.instance.issueObj.issue,this._amount,(()=>{let t=new m;t.count=h.instance.myIssueObj.expectUsdt,t.itemId=y.USDT,l.instance.show(c.PopupUI.EarnSuccessPopup,null,p.TOP,!1,[t]),this.onCloseBtn()}))}onCloseBtn(){l.instance.hide(c.PopupUI.EarnInvestPopup)}onUpdatePlayerInfo(){this.cashBalance.string=`${f.instance.assetObj.cash}`}onEnable(){P.on(d.UPDATE_PLAYER_DATA,this.onUpdatePlayerInfo,this)}onDisable(){P.off(d.UPDATE_PLAYER_DATA,this.onUpdatePlayerInfo,this)}}).prototype,"cashBalance",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=n(U.prototype,"amountEditBox",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=n(U.prototype,"ad",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=n(U.prototype,"investBtn",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=U))||g));a._RF.pop()}}}));

System.register("chunks:///_virtual/EarnItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EarnData.ts"],(function(t){var e,i,a,n,r,s,l,o,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){a=t.cclegacy,n=t.Label,r=t.Button,s=t.Node,l=t._decorator,o=t.Component},function(t){c=t.EarnData}],execute:function(){var h,u,m,b,p,d,y,g,f,v,C,z,w,B,E,I,U;a._RF.push({},"fd57c0z4ZhOsJCxnhHmbW5L","EarnItem",void 0);const{ccclass:_,property:k}=l;t("EarnItem",(h=_("EarnItem"),u=k(n),m=k(n),b=k(n),p=k(n),d=k(n),y=k(r),g=k(s),h((C=e((v=class extends o{constructor(){super(...arguments),i(this,"time",C,this),i(this,"totalUsdt",z,this),i(this,"totalCash",w,this),i(this,"myUsdt",B,this),i(this,"myCash",E,this),i(this,"claimBtn",I,this),i(this,"checked",U,this),this._earnObj=null}init(t){this._earnObj=t,this.totalUsdt.string=`${t.usdtAmount}`,this.totalCash.string=`${t.totalInvest}`,this.myUsdt.string=`${t.myEarnUsdt}`,this.myCash.string=`${t.myInvestCash}`,this.time.string=t.date,t.draw||0==t.myInvestCash?(this.claimBtn.node.active=!1,this.checked.active=!0):(this.claimBtn.node.active=!0,this.checked.active=!1)}onClaimBtn(){c.instance.claim(this._earnObj.issue)}}).prototype,"time",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=e(v.prototype,"totalUsdt",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=e(v.prototype,"totalCash",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=e(v.prototype,"myUsdt",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=e(v.prototype,"myCash",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=e(v.prototype,"claimBtn",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=e(v.prototype,"checked",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=v))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/EarnPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./OpenPopupManager.ts","./EarnData.ts","./EventListener.ts","./GameEvent.ts","./Util.ts","./PlayerData.ts","./LanguageManager.ts","./GuideData.ts"],(function(t){var n,e,i,s,o,a,r,u,l,c,p,h,f,d,b,g;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){i=t.cclegacy,s=t.Label,o=t.RichText,a=t.Node,r=t._decorator,u=t.Component},function(t){l=t.Constants},function(t){c=t.OpenPopupManager},function(t){p=t.EarnData},function(t){h=t.EventListener},function(t){f=t.GameEvent},function(t){d=t.Util},function(t){b=t.PlayerData},function(t){g=t.LanguageManager},null],execute:function(){var P,m,T,w,y,E,A,U,C,v,D,I,R,_,z,L,O,j,x,B,k;i._RF.push({},"2a6d1qYCAFBHbCoPgtPE/tr","EarnPopup",void 0);const{ccclass:M,property:$}=r;t("EarnPopup",(P=M("EarnPopup"),m=$(s),T=$(s),w=$(s),y=$(s),E=$(s),A=$(s),U=$(s),C=$(o),v=$(a),P((R=n((I=class extends u{constructor(){super(...arguments),e(this,"usdt",R,this),e(this,"cash",_,this),e(this,"rewardAmount",z,this),e(this,"countdownText",L,this),e(this,"totalCash",O,this),e(this,"myCash",j,this),e(this,"myUsdt",x,this),e(this,"unlockTips",B,this),e(this,"investBtn",k,this)}show(){p.instance.getEarnInfo(),this.setContent(),this.onUpdatePlayerInfo()}setContent(){if(!p.instance.issueObj)return;this.unschedule(this.updateTime),this.schedule(this.updateTime,1);let t=p.instance.issueObj;this.rewardAmount.string=`${t.usdtAmount} USDT`,0==t.inviteRequire?this.unlockTips.string=g.instance.getLang("earn.unlocktips",[t.inviteRequire]):this.unlockTips.string=g.instance.getLang("earn.investtips",[t.freeAmount,t.inviteRequire,t.freeAmount]);let n=p.instance.myIssueObj;this.myUsdt.string=`${n.expectUsdt}`,this.myCash.string=`${n.investCash}`,this.totalCash.string=`${t.totalInvest}`}updateTime(){p.instance.issueObj&&(p.instance.issueObj.countdown<=0&&(p.instance.getEarnInfo(),this.unschedule(this.updateTime)),p.instance.issueObj.countdown--,this.countdownText.string=d.timeToStrings(p.instance.issueObj.countdown))}onInvestTouch(){c.instance.show(l.PopupUI.EarnInvestPopup)}onRuleTouch(){c.instance.show(l.PopupUI.EarnRulePopup)}onRecordTouch(){c.instance.show(l.PopupUI.EarnRecordPopup)}onCashTouch(){c.instance.show(l.PopupUI.CashPopup)}onEarnCashTouch(){c.instance.show(l.PopupUI.EarnCashPopup)}onWalletBtn(){c.instance.show(l.PopupUI.WithdrawPopup)}onCashheroBtn(){c.instance.show(l.PopupUI.BagTowerPopup)}onUpdatePlayerInfo(){let t=b.instance.assetObj;this.usdt.string=`${t.usdt}`,this.cash.string=Number(t.cash).toFixed(0)}onEnable(){h.on(f.UPDATE_EARN_DATA,this.setContent,this),h.on(f.UPDATE_PLAYER_DATA,this.onUpdatePlayerInfo,this)}onDisable(){h.off(f.UPDATE_EARN_DATA,this.setContent,this),h.off(f.UPDATE_PLAYER_DATA,this.onUpdatePlayerInfo,this),this.unschedule(this.updateTime)}}).prototype,"usdt",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=n(I.prototype,"cash",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=n(I.prototype,"rewardAmount",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=n(I.prototype,"countdownText",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=n(I.prototype,"totalCash",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=n(I.prototype,"myCash",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=n(I.prototype,"myUsdt",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=n(I.prototype,"unlockTips",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=n(I.prototype,"investBtn",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=I))||D));i._RF.pop()}}}));

System.register("chunks:///_virtual/EarnRecordPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./OpenPopupManager.ts","./EarnData.ts","./EventListener.ts","./GameEvent.ts","./EarnItem.ts"],(function(t){var n,e,o,r,i,s,a,c,p,u,l,f,E,h;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){o=t.cclegacy,r=t.Node,i=t.Prefab,s=t._decorator,a=t.Component,c=t.instantiate},function(t){p=t.Constants},function(t){u=t.OpenPopupManager},function(t){l=t.EarnData},function(t){f=t.EventListener},function(t){E=t.GameEvent},function(t){h=t.EarnItem}],execute:function(){var d,m,P,R,b,g,D;o._RF.push({},"cd1ebLmIH5IAantOD3/cuzg","EarnRecordPopup",void 0);const{ccclass:I,property:v}=s;t("EarnInvestPopup",(d=I("EarnRecordPopup"),m=v(r),P=v(i),d((g=n((b=class extends a{constructor(){super(...arguments),e(this,"content",g,this),e(this,"earnItem",D,this)}show(){l.instance.getEarnRecords(),this.setContent()}setContent(){if(!l.instance.earnRecords)return;let t=l.instance.earnRecords;this.content.removeAllChildren();for(let n=0;n<t.length;n++){let e=c(this.earnItem);e.getComponent(h).init(t[n]),e.parent=this.content}}onCloseBtn(){u.instance.hide(p.PopupUI.EarnRecordPopup)}onEnable(){f.on(E.UPDATE_EARN_HISTORY_DATA,this.setContent,this)}onDisable(){f.off(E.UPDATE_EARN_HISTORY_DATA,this.setContent,this)}}).prototype,"content",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=n(b.prototype,"earnItem",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=b))||R));o._RF.pop()}}}));

System.register("chunks:///_virtual/EarnRulePopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./OpenPopupManager.ts"],(function(e){var t,n,o,a,i,r,l,s,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){o=e.cclegacy,a=e.RichText,i=e.Label,r=e._decorator,l=e.Component},function(e){s=e.Constants},function(e){u=e.OpenPopupManager}],execute:function(){var c,p,d,h,y,g,b;o._RF.push({},"91676CE7l5Py4+0D8XROsA/","EarnRulePopup",void 0);const{ccclass:f,property:w}=r;e("EarnRulePopup",(c=f("EarnRulePopup"),p=w(a),d=w(i),c((g=t((y=class extends l{constructor(){super(...arguments),n(this,"ruleText",g,this),n(this,"title",b,this)}show(){this.ruleText.string='🎉 Exciting Update: Airdrop USDT Now Available! 📢\n\nYou can now invest your Cash daily to exchange it for USDT. \n\nThe value of Cash is dynamic and determined by the total Cash invested by all players that day.\n❓❓Value of 1 Cash = Total USDT in Airdrop Pool ÷ Total Cash Invested for the Day\n\nMake your Cash count—log in daily, invest wisely, and get ready to maximize your USDT rewards!\n\n🔗Details:<on click="onClicked"> https://bagwar.gitbook.io/bagwar/economic-model/cash-usdt </on>'}onClicked(){window.open("https://bagwar.gitbook.io/bagwar/economic-model/cash-usdt ")}onCloseBtn(){u.instance.hide(s.PopupUI.EarnRulePopup)}}).prototype,"ruleText",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=t(y.prototype,"title",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=y))||h));o._RF.pop()}}}));

System.register("chunks:///_virtual/EarnSuccessPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./OpenPopupManager.ts","./RewardItem.ts","./EarnData.ts","./Util.ts","./GuideData.ts","./EventListener.ts","./GameEvent.ts"],(function(e){var t,n,i,s,r,o,a,u,c,l,p,h,d,f,m,b,w,E,P,S;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,s=e.ParticleSystem2D,r=e.Prefab,o=e.Node,a=e.Label,u=e._decorator,c=e.Component,l=e.Vec3,p=e.instantiate},function(e){h=e.Constants},function(e){d=e.OpenPopupManager},function(e){f=e.RewardItem},function(e){m=e.EarnData},function(e){b=e.Util},function(e){w=e.GuideData,E=e.GuideStep},function(e){P=e.EventListener},function(e){S=e.GameEvent}],execute:function(){var g,y,T,_,D,I,C,v,A,G,O,x,z;i._RF.push({},"9f22fITayJK2ZIsly5LnzFB","EarnSuccessPopup",void 0);const{ccclass:N,property:R}=u;e("EarnSuccessPopup",(g=N("EarnSuccessPopup"),y=R(s),T=R(r),_=R(o),D=R(o),I=R(a),g((A=t((v=class extends c{constructor(){super(...arguments),n(this,"rewardAnim",A,this),n(this,"rewardPrefab",G,this),n(this,"content",O,this),n(this,"closeBtn",x,this),n(this,"countdownText",z,this)}show(e){w.instance.curStep==E.GUIDE_STEP4_EARN_INVEST_DONE&&(w.instance.curStep=1),this.setContent(e),this.rewardAnim.resetSystem(),this.updateTime(),this.unschedule(this.updateTime),this.schedule(this.updateTime,1)}updateTime(){m.instance.issueObj&&(m.instance.issueObj.countdown<=0&&(m.instance.getEarnInfo(),this.unschedule(this.updateTime)),m.instance.issueObj.countdown--,this.countdownText.string=b.timeToStrings(m.instance.issueObj.countdown))}async setContent(e){this.content.removeAllChildren();let t=new l(0,0,0),n=e.length,i=n>=4?4:n;t.x=120*-(i-1)/2;for(let n=0;n<e.length;n++)await new Promise((s=>{this.scheduleOnce((()=>{const r=e[n];let o=p(this.rewardPrefab),a=new l(0,0,0),u=Math.floor(n/i),c=n%i;a.x=t.x+120*c,a.y=-120*u,o.parent=this.content,o.getComponent(f).init(r,!0),o.setPosition(a),s(0)}),.1)}))}onCloseBtn(){w.instance.curStep==E.GUIDE_STEP5_EARN_CASH_PAGE&&P.emit(S.GUIDE_ACTION),d.instance.hide(h.PopupUI.EarnSuccessPopup),this.unschedule(this.updateTime)}}).prototype,"rewardAnim",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(v.prototype,"rewardPrefab",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(v.prototype,"content",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(v.prototype,"closeBtn",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(v.prototype,"countdownText",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=v))||C));i._RF.pop()}}}));

System.register("chunks:///_virtual/EditNamePopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./HttpService.ts","./Api.ts","./UserData.ts","./EventListener.ts","./GameEvent.ts"],(function(e){var t,n,s,i,o,a,r,u,c,p,m,l,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){s=e.cclegacy,i=e.EditBox,o=e._decorator,a=e.Component},function(e){r=e.OpenPopupManager},function(e){u=e.Constants},function(e){c=e.HttpService},function(e){p=e.Api},function(e){m=e.UserData},function(e){l=e.EventListener},function(e){h=e.GameEvent}],execute:function(){var E,d,f,P,v;s._RF.push({},"e4845kOoRFF17yAmAUcY/EA","EditNamePopup",void 0);const{ccclass:g,property:A}=o;e("EditNamePopup",(E=g("EditNamePopup"),d=A(i),E((v=t((P=class extends a{constructor(){super(...arguments),n(this,"input",v,this),this.username=void 0}show(){this.input.placeholder=m.instance.userInfo.name}nameChange(e){this.username=e}editName(){this.username?c.instance.post(p.USER_EDIT_NAME,{name:this.username}).then((e=>{0==e.code?(m.instance.userInfo.name=this.username,l.emit(h.UPDATE_USER_NAME),this.onCloseTouch()):r.instance.showToast(e.msg)})):r.instance.showToast("Please enter a name")}onCloseTouch(){r.instance.hide(u.PopupUI.EditNamePopup)}}).prototype,"input",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=P))||f));s._RF.pop()}}}));

System.register("chunks:///_virtual/EnergyModel.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"4561ddAAx5NLJLHsOTth62s","EnergyModel",void 0);e("EnergyModel",class{constructor(){this.buyLimit=3,this.buyNumber=15,this.adLimit=3,this.adNumber=15,this.energy=30,this.energyMax=30,this.energyRefillCountdown=void 0,this.price=100,this.token=void 0}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/EquipActionPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./EventListener.ts","./GameEvent.ts","./HeroEquipItem.ts","./EquipEnhanceItem.ts","./HeroEquipData.ts","./EquipForgingItem.ts","./EquipStarupItem.ts"],(function(t){var e,n,i,o,s,a,p,u,r,c,h,l,b,g,f,E,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,o=t.Node,s=t._decorator,a=t.Component,p=t.Sprite,u=t.Color},function(t){r=t.OpenPopupManager},function(t){c=t.Constants},function(t){h=t.EventListener},function(t){l=t.GameEvent},function(t){b=t.HeroEquipItem},function(t){g=t.EquipEnhanceItem},function(t){f=t.HeroEquipData},function(t){E=t.EquipForgingItem},function(t){m=t.EquipStarupItem}],execute:function(){var C,q,T,I,y,d,P,v,_,H,A,B,D,w,O;i._RF.push({},"98b905iiP1NV6I7LPLd+kVO","EquipActionPopup",void 0);const{ccclass:U,property:z}=s;t("EquipActionPopup",(C=U("EquipActionPopup"),q=z(o),T=z(o),I=z(o),y=z(o),d=z(o),P=z(o),C((H=e((_=class extends a{constructor(){super(...arguments),n(this,"starupContent",H,this),n(this,"enhanceContent",A,this),n(this,"forgingContent",B,this),n(this,"equipContent",D,this),n(this,"tabButtons",w,this),n(this,"equipItems",O,this),this.tabType="enhance"}show(t){void 0===t&&(t=null),f.instance.getEquips(),this.tabType="enhance",null==t&&f.instance.equipItems.length&&(t=f.instance.equipItems[0]),this.starupContent.getComponent(m).init(),this.enhanceContent.getComponent(g).init(t),this.forgingContent.getComponent(E).init(t),this.setEquipInfo(t?t.type:0)}setEquipInfo(t){this.equipContent.getComponent(b).init("select",t),this.setTabInfo()}onUpdateHero(){this.setEquipInfo(0)}onTabTouch(t,e){this.tabType=e,this.equipContent.getComponent(b).init("select"),this.setTabInfo()}setTabInfo(){this.starupContent.active="upgrade"==this.tabType,this.enhanceContent.active="enhance"==this.tabType,this.forgingContent.active="forging"==this.tabType,this.tabButtons.children.forEach((t=>{t.getComponent(p).color=new u(41,40,61,255),t.getChildByName("icon").active=!1}));let t=0;"forging"==this.tabType&&(t=1),"upgrade"==this.tabType&&(t=2),this.tabButtons.children[t].getComponent(p).color=new u(49,129,255,255),this.tabButtons.children[t].getChildByName("icon").active=!0,h.emit(l.EQUIP_SWITCH_TAB,"action",this.tabType)}onTab(t){this.tabType=t,this.setTabInfo()}closeDialog(){r.instance.hide(c.PopupUI.EquipActionPopup)}onEnable(){h.on(l.UPDATE_HERO_INFO,this.onUpdateHero,this),h.on(l.UPDATE_HERO_TAB,this.onTab,this)}onDisable(){h.off(l.UPDATE_HERO_INFO,this.onUpdateHero,this),h.off(l.UPDATE_HERO_TAB,this.onTab,this)}}).prototype,"starupContent",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=e(_.prototype,"enhanceContent",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=e(_.prototype,"forgingContent",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=e(_.prototype,"equipContent",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=e(_.prototype,"tabButtons",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=e(_.prototype,"equipItems",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=_))||v));i._RF.pop()}}}));

System.register("chunks:///_virtual/EquipAttrModel.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"5ecdfuSrq1P3rgBVr9Qaaia","EquipAttrModel",void 0);t("EquipAttrCfg",class{constructor(){this.ClassName="EquipAttr",this.Id=void 0,this.name=void 0,this.aimElements=void 0}}),i._RF.pop()}}}));

System.register("chunks:///_virtual/EquipBoxDetailPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./SpriteEx.ts","./CfgMgr.ts","./ItemModel.ts","./ResourcesUtil.ts","./WarehouseData.ts"],(function(t){var e,i,n,o,r,a,u,s,p,l,c,h,f,g,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,o=t.Sprite,r=t.Label,a=t._decorator,u=t.Component,s=t.UITransform},function(t){p=t.OpenPopupManager},function(t){l=t.Constants},function(t){c=t.SpriteEx},function(t){h=t.CfgMgr},function(t){f=t.ItemCfg},function(t){g=t.ResourcesUtil},function(t){b=t.WarehouseData}],execute:function(){var d,m,y,q,x,D,P,w,C,B,E;n._RF.push({},"9984dZK08RFUq96yGLEXYr8","EquipBoxDetailPopup",void 0);const{ccclass:I,property:M}=a;t("EquipBoxDetailPopup",(d=I("EquipBoxDetailPopup"),m=M(o),y=M(c),q=M(r),x=M(r),d((w=e((P=class extends u{constructor(){super(...arguments),i(this,"icon",w,this),i(this,"quality",C,this),i(this,"count",B,this),i(this,"openCount",E,this),this._rewardObj=null}show(t){this._rewardObj=t;let e=h.getDataById(new f,t.itemId),i=l.itemsPath+e.icon+"/spriteFrame";g.geSpriteFrame(i).then((t=>{this.icon.spriteFrame=t;let e=this.icon.getComponent(s).contentSize,i=Math.min(80/e.width,80/e.height);this.icon.node.setScale(i,i)})),this.count.string=`${t.count}`,this.quality.index=e.quality}onOpenBtn(t,e){b.instance.openEquipBox(this._rewardObj.itemId,1,e)}onCloseTouch(){p.instance.hide(l.PopupUI.EquipBoxDetailPopup)}}).prototype,"icon",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=e(P.prototype,"quality",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=e(P.prototype,"count",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=e(P.prototype,"openCount",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=P))||D));n._RF.pop()}}}));

System.register("chunks:///_virtual/EquipDetailPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./EquipItem.ts","./HeroEquipData.ts","./LanguageManager.ts"],(function(t){var e,i,n,a,r,o,l,u,p,s,c,h,g,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,a=t.Node,r=t.Label,o=t._decorator,l=t.Component,u=t.instantiate},function(t){p=t.OpenPopupManager,s=t.LayerType},function(t){c=t.Constants},function(t){h=t.EquipItem},function(t){g=t.HeroEquipData},function(t){m=t.LanguageManager}],execute:function(){var b,q,f,y,A,d,v,E,I,B,P,x,C,_,w,D,L,z,O;n._RF.push({},"03f8eosEmBOJqJkl/2c5fd3","EquipDetailPopup",void 0);const{ccclass:M,property:j}=o;t("EquipDetailPopup",(b=M("EquipDetailPopup"),q=j(a),f=j(a),y=j(a),A=j(r),d=j(r),v=j(a),E=j(a),I=j(a),b((x=e((P=class extends l{constructor(){super(...arguments),i(this,"equipItem",x,this),i(this,"equipBtn",C,this),i(this,"removeBtn",_,this),i(this,"baseAttr",w,this),i(this,"enhanceAttr",D,this),i(this,"extraAttr",L,this),i(this,"extraAttrLayout",z,this),i(this,"extraAttrItem",O,this),this._equipObj=null,this._heroId=0}show(t,e){this._heroId=e,this._equipObj=t,this.equipBtn.active=0==e,this.removeBtn.active=e>0;let i=g.instance.getEquipCfgByItemId(t.itemId,t.star,t.quality);if(this.baseAttr.string="+"+Math.floor(i.atk*(1+i.atkRate)),t.level>0){let e=g.instance.getEnhanceCfgByLevel(t.level);this.enhanceAttr.string="+"+e.atk,this.enhanceAttr.node.parent.active=!0}else this.enhanceAttr.node.parent.active=!1;this.extraAttrLayout.removeAllChildren();let n=!1,a=g.instance.getEquipAttrs(t);for(let t=0;t<a.length;t++){let e=a[t],o=i.attrRate[t];if(o>-1){n=!0;let t=u(this.extraAttrItem);t.getChildByName("attrName").getComponent(r).string=m.instance.getLang(e.name),t.getChildByName("attrValue").getComponent(r).string="+"+Math.floor(e.value*(1+o)),t.setPosition(0,0),t.parent=this.extraAttrLayout}}this.extraAttr.active=!!n,this.equipItem.getComponent(h).init(t,-1)}onEquipBtn(){g.instance.equipEquipment(this._equipObj.id)}onRemoveBtn(){g.instance.removeEquipment(this._equipObj.id,this._heroId)}onAwakenBtn(){p.instance.show(c.PopupUI.EquipActionPopup,null,s.TOP,!1,this._equipObj),p.instance.hide(c.PopupUI.EquipDetailPopup)}onCloseBtn(){p.instance.hide(c.PopupUI.EquipDetailPopup)}}).prototype,"equipItem",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=e(P.prototype,"equipBtn",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=e(P.prototype,"removeBtn",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=e(P.prototype,"baseAttr",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=e(P.prototype,"enhanceAttr",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=e(P.prototype,"extraAttr",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=e(P.prototype,"extraAttrLayout",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=e(P.prototype,"extraAttrItem",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=P))||B));n._RF.pop()}}}));

System.register("chunks:///_virtual/EquipEnhanceItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventListener.ts","./GameEvent.ts","./HeroEquipData.ts","./Constants.ts","./CfgMgr.ts","./ItemModel.ts","./ResourcesUtil.ts","./BagHeroData.ts","./EquipItem.ts","./LanguageManager.ts"],(function(e){var t,i,n,s,r,u,l,a,o,p,h,c,b,g,E,m,_,q,I;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,s=e.Node,r=e.Label,u=e.Sprite,l=e._decorator,a=e.Component,o=e.UITransform},function(e){p=e.EventListener},function(e){h=e.GameEvent},function(e){c=e.HeroEquipData},function(e){b=e.Constants},function(e){g=e.CfgMgr},function(e){E=e.ItemCfg},function(e){m=e.ResourcesUtil},function(e){_=e.BagHeroData},function(e){q=e.EquipItem},function(e){I=e.LanguageManager}],execute:function(){var f,C,L,O,j,v,d,S,T,y,x,w,U,k,z,B,P,M,A;n._RF.push({},"5142bQ7FxxCEr4dRXWejwHz","EquipEnhanceItem",void 0);const{ccclass:D,property:F}=l;e("EquipEnhanceItem",(f=D("EquipEnhanceItem"),C=F(s),L=F(r),O=F(r),j=F(r),v=F(r),d=F(u),S=F(r),T=F(r),f((w=t((x=class extends a{constructor(){super(...arguments),i(this,"equipItem",w,this),i(this,"curLevel",U,this),i(this,"nextLevel",k,this),i(this,"curAtk",z,this),i(this,"nextAtk",B,this),i(this,"blueprintIcon",P,this),i(this,"blueprintText",M,this),i(this,"stoneText",A,this),this._equipObj=null}init(e){this._equipObj=e,this.setContent()}onUpdateEquip(e){this._equipObj=e,this.setContent()}setContent(){if(!this._equipObj)return void this.equipItem.getComponent(q).init(this._equipObj,-1);p.emit(h.EQUIP_CONFIRM_SELECT,[this._equipObj.id]),this.curLevel.string=`Lv.${this._equipObj.level}`;let e=this._equipObj.level+1;c.instance.getEnhanceCfgByLevel(this._equipObj.level+1)||(e-=1),this.nextLevel.string=`Lv.${e}`;let t=c.instance.getBlueprintId(this._equipObj.itemId),i=g.getDataById(new E,t),n=b.itemsPath+i.icon+"/spriteFrame";m.geSpriteFrame(n).then((e=>{this.blueprintIcon.spriteFrame=e;let t=this.blueprintIcon.getComponent(o).contentSize,i=Math.min(32/t.width,32/t.height);this.blueprintIcon.node.setScale(i,i)}));let s=c.instance.getEnhanceCfgByLevel(this._equipObj.level),r=c.instance.getEnhanceCfgByLevel(e);this.curAtk.string=I.instance.getLang("game.atk")+" +"+s.atk,this.nextAtk.string=I.instance.getLang("game.atk")+" +"+r.atk,this.stoneText.string=s.stone+"/"+_.instance.enhanceStone;let u=_.instance.blueprintItems,l=0;for(let e=0;e<u.length;e++){let i=u[e];i.itemId==t&&(l=i.count)}this.blueprintText.string=s.blueprint+"/"+l,this.equipItem.getComponent(q).init(this._equipObj,-1)}onEnhanceBtn(){this._equipObj&&c.instance.enhanceEquipment(this._equipObj.id,(()=>{this._equipObj.level+=1,this.setContent()}))}onSelectEquip(e,t){this._equipObj&&this._equipObj.id==e.id||(this._equipObj&&p.emit(h.EQUIP_CLEAR_SELECT,[this._equipObj.id]),this._equipObj=e,this.setContent(),p.emit(h.EQUIP_CONFIRM_SELECT,[this._equipObj.id]))}onSwitchTab(e){this._equipObj&&p.emit(h.EQUIP_CONFIRM_SELECT,[this._equipObj.id])}onEnable(){p.on(h.EQUIP_CLICK_SELECT,this.onSelectEquip,this),p.on(h.EQUIP_SWITCH_TAB,this.onSwitchTab,this)}onDisable(){p.off(h.EQUIP_CLICK_SELECT,this.onSelectEquip,this),p.off(h.EQUIP_SWITCH_TAB,this.onSwitchTab,this)}}).prototype,"equipItem",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=t(x.prototype,"curLevel",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(x.prototype,"nextLevel",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(x.prototype,"curAtk",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=t(x.prototype,"nextAtk",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=t(x.prototype,"blueprintIcon",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=t(x.prototype,"blueprintText",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=t(x.prototype,"stoneText",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=x))||y));n._RF.pop()}}}));

System.register("chunks:///_virtual/EquipForgingItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventListener.ts","./GameEvent.ts","./HeroEquipData.ts","./BagHeroData.ts","./EquipItem.ts","./LanguageManager.ts"],(function(t){var e,i,n,a,s,r,u,o,l,h,p,g,c,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,a=t.Node,s=t.Label,r=t._decorator,u=t.Component,o=t.instantiate},function(t){l=t.EventListener},function(t){h=t.GameEvent},function(t){p=t.HeroEquipData},function(t){g=t.BagHeroData},function(t){c=t.EquipItem},function(t){b=t.LanguageManager}],execute:function(){var q,m,_,y,E,f,I,C,O,j,L,d,x,A,B,T,S,Q,k,v,w;n._RF.push({},"671e90t9VNDl7LFTaZrRJQG","EquipForgingItem",void 0);const{ccclass:N,property:z}=r;t("EquipForgingItem",(q=N("EquipForgingItem"),m=z(a),_=z(s),y=z(s),E=z(s),f=z(s),I=z(a),C=z(a),O=z(a),j=z(s),q((x=e((d=class extends u{constructor(){super(...arguments),i(this,"equipItem",x,this),i(this,"curQuality",A,this),i(this,"nextQuality",B,this),i(this,"curBaseAtk",T,this),i(this,"nextBaseAtk",S,this),i(this,"extraAttr",Q,this),i(this,"extraAttrLayout",k,this),i(this,"extraAttrItem",v,this),i(this,"stoneText",w,this),this._qualityNames=["common","uncommon","rare","epic","legendary","mythic","supreme"],this._equipObj=null}init(t){this._equipObj=t,this.setContent()}onUpdateEquip(t){this._equipObj=t,this.setContent()}setContent(){if(!this._equipObj)return void this.equipItem.getComponent(c).init(this._equipObj,-1);this.curQuality.string=b.instance.getLang(this._qualityNames[this._equipObj.quality]);let t=this._equipObj.quality+1>=this._qualityNames.length?this._equipObj.quality:this._equipObj.quality+1;this.nextQuality.string=b.instance.getLang(this._qualityNames[t]);let e=p.instance.getEquipCfgByItemId(this._equipObj.itemId,this._equipObj.star,this._equipObj.quality),i=p.instance.getEquipCfgByItemId(this._equipObj.itemId,this._equipObj.star,t);this.curBaseAtk.string=b.instance.getLang("game.atk")+" +"+Math.floor(e.atk*(1+e.atkRate)),this.nextBaseAtk.string=b.instance.getLang("game.atk")+" +"+Math.floor(i.atk*(1+i.atkRate));let n=!1;this.extraAttrLayout.removeAllChildren();let a=p.instance.getEquipAttrs(this._equipObj);for(let t=0;t<a.length;t++){let r=a[t],u=e.attrRate[t],l=i.attrRate[t];if(-1!=u&&-1!=l){n=!0;let t=o(this.extraAttrItem);t.getChildByName("name").getComponent(s).string=b.instance.getLang(r.name),t.getChildByName("cur").getComponent(s).string="+"+Math.floor(r.value*(1+u)),t.getChildByName("next").getComponent(s).string="+"+Math.floor(r.value*(1+l)),t.setPosition(0,0),t.parent=this.extraAttrLayout}}this.extraAttr.active=!!n,this.stoneText.string=e.qualityUp+"/"+g.instance.forgingStone,this.equipItem.getComponent(c).init(this._equipObj,-1)}onForgingBtn(){this._equipObj&&p.instance.forgingEquipment(this._equipObj.id,(()=>{this._equipObj.quality+=1,this.setContent()}))}onSelectEquip(t,e){this._equipObj&&this._equipObj.id==t.id||(this._equipObj&&l.emit(h.EQUIP_CLEAR_SELECT,[this._equipObj.id]),this._equipObj=t,this.setContent(),l.emit(h.EQUIP_CONFIRM_SELECT,[this._equipObj.id]))}onSwitchTab(t){this._equipObj&&l.emit(h.EQUIP_CONFIRM_SELECT,[this._equipObj.id])}onEnable(){l.on(h.EQUIP_CLICK_SELECT,this.onSelectEquip,this),l.on(h.EQUIP_SWITCH_TAB,this.onSwitchTab,this)}onDisable(){l.off(h.EQUIP_CLICK_SELECT,this.onSelectEquip,this),l.off(h.EQUIP_SWITCH_TAB,this.onSwitchTab,this)}}).prototype,"equipItem",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=e(d.prototype,"curQuality",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=e(d.prototype,"nextQuality",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=e(d.prototype,"curBaseAtk",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=e(d.prototype,"nextBaseAtk",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=e(d.prototype,"extraAttr",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=e(d.prototype,"extraAttrLayout",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=e(d.prototype,"extraAttrItem",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=e(d.prototype,"stoneText",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=d))||L));n._RF.pop()}}}));

System.register("chunks:///_virtual/EquipItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SpriteEx.ts","./OpenPopupManager.ts","./Constants.ts","./ResourcesUtil.ts","./HeroEquipData.ts","./GameEvent.ts","./EventListener.ts"],(function(t){var i,e,s,n,a,o,l,r,c,h,u,p,b,E,f,d,m;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){s=t.cclegacy,n=t.Sprite,a=t.Label,o=t.Node,l=t._decorator,r=t.Component,c=t.UITransform},function(t){h=t.SpriteEx},function(t){u=t.OpenPopupManager,p=t.LayerType},function(t){b=t.Constants},function(t){E=t.ResourcesUtil},function(t){f=t.HeroEquipData},function(t){d=t.GameEvent},function(t){m=t.EventListener}],execute:function(){var v,_,C,q,I,S,y,O,g,L,T,P,F,k,j,U,w,x,z;s._RF.push({},"2a7dbK0MqtA25SyN8X1NM+g","EquipItem",void 0);const{ccclass:D,property:R}=l;t("EquipItem",(v=D("EquipItem"),_=R(h),C=R(n),q=R(a),I=R(o),S=R(o),y=R(o),O=R(o),g=R(o),v((P=i((T=class extends r{constructor(){super(...arguments),e(this,"quality",P,this),e(this,"icon",F,this),e(this,"levelText",k,this),e(this,"stars",j,this),e(this,"mask",U,this),e(this,"selected",w,this),e(this,"forbid",x,this),e(this,"plus",z,this),this._equipObj=null,this._heroId=0,this._action=""}init(t,i,e){if(this._equipObj=t,this._heroId=i,this._action=e,!this._equipObj)return this.mask.active=!0,this.plus.active=!0,this.selected.active=!1,void(this.forbid.active=!1);let s=f.instance.equipTypes[t.type];this.levelText.string=`Lv.${t.level}`;let n=b.equipmentsPath+s+"_"+t.star+"/spriteFrame";this.quality.index=t.quality,E.geSpriteFrame(n).then((t=>{this.icon.spriteFrame=t;let i=this.icon.getComponent(c).contentSize,e=Math.min(80/i.width,80/i.height);this.icon.node.setScale(e,e)}));for(let i=0;i<this.stars.children.length;i++)this.stars.children[i].active=t.star>i;this.mask.active=!1}onClickBtn(){"select"!=this._action?-1!=this._heroId&&u.instance.show(b.PopupUI.EquipDetailPopup,null,p.TOP,!1,this._equipObj,this._heroId):m.emit(d.EQUIP_CLICK_SELECT,this._equipObj)}onClearAllSelect(){this.mask.active=!1}onClearSelect(t){this._equipObj&&t.indexOf(this._equipObj.id)>=0&&(this.mask.active=!1)}onConfirmSelect(t){this._action==M.SELECT&&this._equipObj&&t.indexOf(this._equipObj.id)>=0&&(this.mask.active=!0,this.selected.active=!0,this.forbid.active=!1,this.plus.active=!1)}onForbid(t){if(this._action!=M.SELECT)return;t(this._equipObj)?(this.mask.active=!0,this.forbid.active=!0,this.selected.active=!1,this.plus.active=!1):(this.forbid.active&&(this.mask.active=!1),this.forbid.active=!1)}setNull(){this.mask.active=!0,this.plus.active=!0,this.selected.active=!1,this.forbid.active=!1,this.icon.node.active=!1}onEnable(){m.on(d.EQUIP_CONFIRM_SELECT,this.onConfirmSelect,this),m.on(d.EQUIP_CLEAR_SELECT,this.onClearSelect,this),m.on(d.EQUIP_FORBID_SELECT,this.onForbid,this)}onDisable(){m.off(d.EQUIP_CONFIRM_SELECT,this.onConfirmSelect,this),m.off(d.EQUIP_CONFIRM_SELECT,this.onClearSelect,this),m.off(d.EQUIP_FORBID_SELECT,this.onForbid,this)}}).prototype,"quality",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=i(T.prototype,"icon",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=i(T.prototype,"levelText",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=i(T.prototype,"stars",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=i(T.prototype,"mask",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=i(T.prototype,"selected",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=i(T.prototype,"forbid",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=i(T.prototype,"plus",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=T))||L));let M=t("EqiupItemActionType",function(t){return t.DETAIL="detail",t.SELECT="select",t.NONE="none",t}({}));s._RF.pop()}}}));

System.register("chunks:///_virtual/EquipLevelModel.ts",["cc"],(function(e){var i;return{setters:[function(e){i=e.cclegacy}],execute:function(){i._RF.push({},"4d7b4vB8q9NNYbElUpusGkD","EquipLevelModel",void 0);e("EquipLevelCfg",class{constructor(){this.ClassName="EquipLevel",this.Id=void 0,this.level=void 0,this.atk=void 0,this.blueprint=void 0,this.stone=void 0}}),i._RF.pop()}}}));

System.register("chunks:///_virtual/EquipModel.ts",["cc"],(function(i){var t;return{setters:[function(i){t=i.cclegacy}],execute:function(){t._RF.push({},"f7f62/6crlIk7FgijIgjP1c","EquipModel",void 0);i("EquipCfg",class{constructor(){this.ClassName="Equip",this.Id=void 0,this.itemId=void 0,this.type=void 0,this.blueprintId=void 0,this.star=void 0,this.quality=void 0,this.atk=void 0,this.atkRate=void 0,this.qualityUp=void 0,this.refund=void 0,this.attrs=void 0,this.attrValue=void 0,this.attrRate=void 0}});i("EquipObj",class{constructor(){this.id=void 0,this.itemId=void 0,this.type=void 0,this.star=void 0,this.level=void 0,this.quality=void 0}});i("HeroEquipAtkObj",class{constructor(){this.baseAtk=void 0,this.extraAtk=void 0,this.elements=void 0}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/EquipOpenPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./OpenPopupManager.ts","./EquipItem.ts","./RewardItem.ts"],(function(e){var t,n,i,r,o,s,a,l,u,p,c,h,f,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,r=e.ParticleSystem2D,o=e.Prefab,s=e.Node,a=e._decorator,l=e.Component,u=e.Vec3,p=e.instantiate},function(e){c=e.Constants},function(e){h=e.OpenPopupManager},function(e){f=e.EquipItem},function(e){b=e.RewardItem}],execute:function(){var P,m,w,d,g,y,q,C,O,x,E,I,v;i._RF.push({},"02599XJ2XlDdI3I9yt9Pfpc","EquipOpenPopup",void 0);const{ccclass:z,property:D}=a;e("EquipOpenPopup",(P=z("EquipOpenPopup"),m=D(r),w=D(o),d=D(s),g=D(s),y=D(o),P((O=t((C=class extends l{constructor(){super(...arguments),n(this,"rewardAnim",O,this),n(this,"equipPrefab",x,this),n(this,"content",E,this),n(this,"closeBtn",I,this),n(this,"rewardPrefab",v,this)}show(e,t){void 0===t&&(t=[]),this.setContent(e,t),this.rewardAnim.resetSystem()}async setContent(e,t){this.content.removeAllChildren();let n=new u(0,0,0),i=e.length+t.length,r=i>=4?4:i;n.x=120*-(r-1)/2;for(let t=0;t<e.length;t++)await new Promise((i=>{this.scheduleOnce((()=>{const o=e[t];let s=p(this.equipPrefab),a=new u(0,0,0),l=Math.floor(t/r),c=t%r;a.x=n.x+120*c,a.y=-120*l,s.parent=this.content,s.getComponent(f).init(o,-1),s.setPosition(a),s.setScale(.8,.8),i(0)}),.1)}));for(let i=0;i<t.length;i++){let o=i+e.length;await new Promise((e=>{this.scheduleOnce((()=>{const s=t[i];let a=p(this.rewardPrefab),l=new u(0,0,0),c=Math.floor(o/r),h=o%r;l.x=n.x+120*h,l.y=-120*c,a.parent=this.content,a.getComponent(b).init(s,!0),a.setPosition(l),e(0)}),.1)}))}}onCloseBtn(){h.instance.hide(c.PopupUI.EquipOpenPopup)}}).prototype,"rewardAnim",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(C.prototype,"equipPrefab",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(C.prototype,"content",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(C.prototype,"closeBtn",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(C.prototype,"rewardPrefab",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=C))||q));i._RF.pop()}}}));

System.register("chunks:///_virtual/EquipStarupItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventListener.ts","./GameEvent.ts","./HeroEquipData.ts","./ResourcesUtil.ts","./Constants.ts","./OpenPopupManager.ts","./ComTipsPopup.ts","./LanguageManager.ts"],(function(t){var e,i,s,n,a,p,o,u,h,r,l,c,m,_,d,C;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){s=t.cclegacy,n=t.Node,a=t._decorator,p=t.Component,o=t.Sprite,u=t.UITransform},function(t){h=t.EventListener},function(t){r=t.GameEvent},function(t){l=t.HeroEquipData},function(t){c=t.ResourcesUtil},function(t){m=t.Constants},function(t){_=t.OpenPopupManager},function(t){d=t.ComTipsObj},function(t){C=t.LanguageManager}],execute:function(){var g,q,E,I,b;s._RF.push({},"69d2fdWYS9NTKuy/GU1YSZT","EquipStarupItem",void 0);const{ccclass:f,property:O}=a;t("EquipStarupItem",(g=f("EquipStarupItem"),q=O(n),g((b=e((I=class extends p{constructor(){super(...arguments),i(this,"equipItems",b,this),this._equipObjs=[]}init(){this._equipObjs=[],this.setContent()}onUpdateEquip(t){this.setContent()}setContent(){for(let t=0;t<this.equipItems.length;t++){let e=this.equipItems[t],i=this._equipObjs[t];if(i){let t=l.instance.equipTypes[i.type],s=m.equipmentsPath+t+"_"+i.star+"/spriteFrame";c.geSpriteFrame(s).then((t=>{e.getChildByName("icon").getComponent(o).spriteFrame=t;let i=e.getChildByName("icon").getComponent(o).getComponent(u).contentSize,s=Math.min(80/i.width,80/i.height);e.getChildByName("icon").setScale(s,s),e.getChildByName("icon").active=!0}));for(let t=0;t<e.getChildByName("stars").children.length;t++)e.getChildByName("stars").children[t].active=i.star>t;e.getChildByName("stars").active=!0,e.getChildByName("add").active=!1}else e.getChildByName("icon").active=!1,e.getChildByName("stars").active=!1,e.getChildByName("add").active=!0}}onStarupBtn(){this._equipObjs.length<3||l.instance.starupEquipment(this._equipObjs[0].id,this._equipObjs[1].id,this._equipObjs[2].id)}onSelectEquip(t){let e=this._equipObjs.findIndex((e=>e.id==t.id)),i=0==this._equipObjs.length;if(-1==e){for(let e=0;e<this._equipObjs.length;e++){let s=this._equipObjs[e];t.itemId==s.itemId&&t.star==s.star&&(i=!0)}i&&this._equipObjs.length<3&&this._equipObjs.push(t)}else h.emit(r.EQUIP_CLEAR_SELECT,[t.id]),this._equipObjs.splice(e,1);this.setContent();let s=[];for(let t=0;t<this._equipObjs.length;t++)s.push(this._equipObjs[t].id);h.emit(r.EQUIP_CONFIRM_SELECT,s),(i||0==s.length)&&h.emit(r.EQUIP_FORBID_SELECT,(e=>!(0==s.length||e.star==t.star&&e.itemId==t.itemId)))}onClearEquip(){this._equipObjs=[],this.setContent()}onSwitchTab(t){if("action"==t)this._equipObjs=[],this.setContent();else if(this._equipObjs.length>0){let t=[],e=this._equipObjs[0];for(let e=0;e<this._equipObjs.length;e++)t.push(this._equipObjs[e].id);h.emit(r.EQUIP_CONFIRM_SELECT,t),h.emit(r.EQUIP_FORBID_SELECT,(i=>!(0==t.length||i.star==e.star&&i.itemId==e.itemId)))}}onTipsBtn(){let t=new d;t.desc=C.instance.getLang("equip.starupTips"),_.instance.showComTipsPopup(t,(()=>{}))}onEnable(){h.on(r.EQUIP_CLICK_SELECT,this.onSelectEquip,this),h.on(r.EQUIP_SWITCH_TAB,this.onSwitchTab,this)}onDisable(){h.off(r.EQUIP_CLICK_SELECT,this.onSelectEquip,this),h.off(r.EQUIP_SWITCH_TAB,this.onSwitchTab,this)}}).prototype,"equipItems",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=I))||E));s._RF.pop()}}}));

System.register("chunks:///_virtual/EventDailyItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventData.ts","./SpriteEx.ts","./ItemModel.ts","./CfgMgr.ts","./Constants.ts","./BagData.ts","./BagHeroData.ts","./ResourcesUtil.ts"],(function(e){var t,i,r,a,n,o,s,l,c,u,g,h,p,b,d,m,f,w,I;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){r=e.cclegacy,a=e.Label,n=e.Sprite,o=e.Node,s=e._decorator,l=e.Component,c=e.UITransform,u=e.Color},function(e){g=e.EventData},function(e){h=e.SpriteEx},function(e){p=e.ItemCfg,b=e.ItemType},function(e){d=e.CfgMgr},function(e){m=e.Constants},function(e){f=e.BagData},function(e){w=e.BagHeroData},function(e){I=e.ResourcesUtil}],execute:function(){var y,v,B,k,D,z,F,E,x,M,O,C,S,_,H,L,N,j,P,T,R,q,U,$,W,X,G;r._RF.push({},"6d2f5oprShFPqd/4KEl0dGb","EventDailyItem",void 0);const{ccclass:K,property:A}=s;e("EventDailyItem",(y=K("EventDailyItem"),v=A(a),B=A(n),k=A(h),D=A(n),z=A(h),F=A(a),E=A(a),x=A(o),M=A(o),O=A(o),C=A(o),S=A(o),y((L=t((H=class extends l{constructor(){super(...arguments),i(this,"rewardNumber",L,this),i(this,"rewardIcon",N,this),i(this,"rewardBg",j,this),i(this,"progressBar",P,this),i(this,"stageBg",T,this),i(this,"stageNumber",R,this),i(this,"stageText",q,this),i(this,"bgMask",U,this),i(this,"itemMask",$,this),i(this,"lockIcon",W,this),i(this,"checkIcon",X,this),i(this,"adIcon",G,this),this._eventObj=null}init(e,t){this._eventObj=e,this.rewardNumber.string=`${e.reward.count}`;let i=d.getDataById(new p,e.reward.itemId);if(!i)return;let r="";r=i.type==b.WeaponFragment?m.weaponIconPath+f.instance.getWeaponIcon(i.dataId,16)+"/spriteFrame":i.type==b.HeroFragment?m.heroIconPath+w.instance.getHeroIcon(i.dataId)+"/spriteFrame":m.itemsPath+i.icon+"/spriteFrame",I.geSpriteFrame(r).then((e=>{this.rewardIcon.spriteFrame=e;let t=this.rewardIcon.getComponent(c).contentSize,i=Math.min(100/t.width,100/t.height);this.rewardIcon.node.setScale(i,i)})),this.rewardBg.index=i.quality-1>3?3:i.quality-1,this.lockIcon.active=e.isLock,this.bgMask.active=e.isLock,this.itemMask.active=e.isLock,this.checkIcon.active=e.draw,this.adIcon.active=!e.isLock&&0==e.draw,e.id==t+1?this.stageBg.index=1:e.id<t+1?this.stageBg.index=0:this.stageBg.index=2,this.stageNumber.string=`${e.id}`,this.stageText.string=`${e.id} Stage`,e.id<t+1?this.progressBar.color=(new u).fromHEX("#3BFFFF"):this.progressBar.color=(new u).fromHEX("#OOOOOO")}onClaimBtn(){1==this._eventObj.draw||this._eventObj.isLock||g.instance.claimEventDaily(this._eventObj.id)}}).prototype,"rewardNumber",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=t(H.prototype,"rewardIcon",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=t(H.prototype,"rewardBg",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=t(H.prototype,"progressBar",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=t(H.prototype,"stageBg",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(H.prototype,"stageNumber",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=t(H.prototype,"stageText",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=t(H.prototype,"bgMask",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=t(H.prototype,"itemMask",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=t(H.prototype,"lockIcon",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=t(H.prototype,"checkIcon",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=t(H.prototype,"adIcon",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=H))||_));r._RF.pop()}}}));

System.register("chunks:///_virtual/EventDailyPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./OpenPopupManager.ts","./EventData.ts","./EventListener.ts","./GameEvent.ts","./EventDailyItem.ts"],(function(t){var e,n,i,a,s,o,l,r,c,p,u,h,v,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,a=t.Node,s=t.Prefab,o=t._decorator,l=t.Component,r=t.instantiate},function(t){c=t.Constants},function(t){p=t.OpenPopupManager},function(t){u=t.EventData},function(t){h=t.EventListener},function(t){v=t.GameEvent},function(t){y=t.EventDailyItem}],execute:function(){var E,f,D,P,m,b,g,d,I;i._RF.push({},"70b6ezfenZPO42HuQsVVmhG","EventDailyPopup",void 0);const{ccclass:C,property:_}=o;t("EventDailyPopup",(E=C("EventDailyPopup"),f=_(a),D=_(a),P=_(s),E((g=e((b=class extends l{constructor(){super(...arguments),n(this,"content",g,this),n(this,"tips",d,this),n(this,"eventDailyItem",I,this)}show(){u.instance.getEventDailyInfo(),this.setContent()}setContent(){if(0==u.instance.dailyItems.length)return;this.content.removeAllChildren();let t=u.instance.dailyItems;t.forEach(((t,e)=>{let n=r(this.eventDailyItem);n.getComponent(y).init(t,u.instance.dailyStage),n.parent=this.content})),t.length==u.instance.dailyStage?this.tips.active=!0:this.tips.active=!1}onCloseBtn(){p.instance.hide(c.PopupUI.EventDailyPopup)}onEnable(){h.on(v.UPDATE_EVENT_DAILY_POPUP,this.setContent,this)}onDisable(){h.off(v.UPDATE_EVENT_DAILY_POPUP,this.setContent,this)}}).prototype,"content",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=e(b.prototype,"tips",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=e(b.prototype,"eventDailyItem",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=b))||m));i._RF.pop()}}}));

System.register("chunks:///_virtual/EventData.ts",["cc","./AdManager.ts","./Api.ts","./EventListener.ts","./HttpService.ts","./OpenPopupManager.ts","./PlayerData.ts","./GameEvent.ts"],(function(t){var s,i,n,e,a,o,d,c,r;return{setters:[function(t){s=t.cclegacy},function(t){i=t.AdManager,n=t.AdType},function(t){e=t.Api},function(t){a=t.EventListener},function(t){o=t.HttpService},function(t){d=t.OpenPopupManager},function(t){c=t.PlayerData},function(t){r=t.GameEvent}],execute:function(){s._RF.push({},"5fe73atDWtAVYFBTEFkzFz1","EventData",void 0);class h{constructor(){this._day=0,this._signDays=[],this._dailyItems=[],this._dailyStage=0}get day(){return this._day}get signDays(){return this._signDays}get dailyStage(){return this._dailyStage}get dailyItems(){return this._dailyItems}getEventHeroInfo(){o.instance.post(e.EVENT_HERO_INFO,{}).then((t=>{0==t.code&&(this._day=t.data.day,this._signDays=t.data.signDays,a.emit(r.UPDATE_EVENT_SIGNIN_POPUP))}))}signin(t,s){o.instance.post(e.EVENT_HERO_CLAIM,{sign:t,day:s}).then((t=>{0==t.code?(d.instance.showRewardPopup(t.data.rewards),this.getEventHeroInfo()):d.instance.showToast(t.msg)}))}signinWithdAd(t){i.instance.showAd(n.EVENT_SIGN,0,((s,i)=>{0==s&&this.signin(i,t)}))}getEventDailyInfo(){o.instance.post(e.EVENT_DAILY_INFO,{}).then((t=>{0==t.code&&(this._dailyStage=t.data.stageId,this._dailyItems=t.data.items,a.emit(r.UPDATE_EVENT_DAILY_POPUP))}))}claimEventDaily(t){i.instance.showAd(n.EVENT_DAILY,0,((s,i)=>{0==s&&this._claim(i,t)}))}_claim(t,s){o.instance.post(e.EVENT_DAILY_CLAIM,{sign:t,stageId:s}).then((t=>{0==t.code?(d.instance.showRewardPopup(t.data.rewards),this.getEventDailyInfo(),c.instance.getPlayerInfo()):d.instance.showToast(t.msg)}))}static get instance(){return this._instance||(this._instance=new h),this._instance}}t("EventData",h),h._instance=null;t("EventSigninResult",class{constructor(){this.day=void 0,this.signDays=void 0}});t("EventSiginObj",class{constructor(){this.adRewards=void 0,this.day=void 0,this.id=void 0,this.isLock=void 0,this.signRewards=void 0,this.states=void 0}});t("EventDailyResult",class{constructor(){this.stageId=void 0,this.items=void 0}});t("EventDailyObj",class{constructor(){this.id=void 0,this.isLock=void 0,this.reward=void 0,this.draw=void 0}}),s._RF.pop()}}}));

System.register("chunks:///_virtual/EventInvitePopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./PlayerData.ts"],(function(e){var t,n,o,r,a,i,p,s,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){o=e.cclegacy,r=e.Label,a=e._decorator,i=e.Component},function(e){p=e.OpenPopupManager},function(e){s=e.Constants},function(e){c=e.PlayerData}],execute:function(){var u,l,v,g,h;o._RF.push({},"7654eSeZ4hJCqShnSDBLjJM","EventInvitePopup",void 0);const{ccclass:m,property:d}=a;e("EventInvitePopup",(u=m("EventInvitePopup"),l=d(r),u((h=t((g=class extends i{constructor(){super(...arguments),n(this,"heroName",h,this)}show(){}onInviteBtn(){let e=c.instance.configObj.tgBot+"?startapp="+c.instance.userObj.code;const t="https://t.me/share/url?url="+encodeURIComponent(e)+"&text="+encodeURIComponent("BagWar battle time! Join BagWar now with my link for epic rewards! 🎁🔥");window.Telegram&&window.Telegram.WebApp.openTelegramLink(t)}onCloseBtn(){p.instance.hide(s.PopupUI.EventInvitePopup)}}).prototype,"heroName",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=g))||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/EventListener.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"10e50v0/Z9Cuq8TUTgBlAZ2","EventListener",void 0);class n{static on(t,e,n){this.handle[t]||(this.handle[t]=[]);const s={func:e,target:n};this.handle[t].push(s)}static off(t,e,n){const s=this.handle[t];if(s&&!(s.length<=0))for(let t=0;t<s.length;t++){const l=s[t];if(l.func===e&&(!n||n===l.target)){s.splice(t,1);break}}}static emit(t){const e=this.handle[t];if(!e||e.length<=0)return;let n=e.length;for(var s=arguments.length,l=new Array(s>1?s-1:0),c=1;c<s;c++)l[c-1]=arguments[c];for(let t=0;t<e.length;t++){const s=e[t];if(s){s.func.apply(s.target,l);let c=0;n>e.length&&(c=n-e.length,t-=c,n=e.length)}}}static clear(){this.handle={}}}t("EventListener",n),n.handle={},e._RF.pop()}}}));

System.register("chunks:///_virtual/EventLlamaPopup.ts",["cc","./OpenPopupManager.ts","./Constants.ts"],(function(t){var n,e,a,o,p;return{setters:[function(t){n=t.cclegacy,e=t.Component,a=t._decorator},function(t){o=t.OpenPopupManager},function(t){p=t.Constants}],execute:function(){var s;n._RF.push({},"fbfcaU6AONLm7uSJvTSe4Wu","EventLlamaPopup",void 0);const{ccclass:c,property:u}=a;t("EventLlamaPopup",c("EventLlamaPopup")(s=class extends e{show(){}onInviteBtn(){window.Telegram.WebApp.openTelegramLink("https://t.me/LlamaPaydayBot/game?startapp=zyf97jbt")}onCloseBtn(){o.instance.hide(p.PopupUI.EventLlamaPopup)}})||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/EventSigninItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventData.ts","./SpriteEx.ts"],(function(e){var i,t,r,a,n,s,o,l,c,u,h;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.initializerDefineProperty},function(e){r=e.cclegacy,a=e.Label,n=e.Sprite,s=e.Node,o=e._decorator,l=e.Component,c=e.Color},function(e){u=e.EventData},function(e){h=e.SpriteEx}],execute:function(){var b,p,d,f,g,y,m,k,v,w,L,z,B,O,x,_,E,j,C,N,S,F,I,M,D,R,H;r._RF.push({},"0ef52tpmRVNL6xZfJXi4TH/","EventSigninItem",void 0);const{ccclass:T,property:X}=o;e("EventSigninItem",(b=T("EventSigninItem"),p=X(a),d=X(a),f=X(a),g=X(n),y=X(h),m=X(s),k=X(s),v=X(s),w=X(s),L=X(s),z=X(s),B=X(s),b((_=i((x=class extends l{constructor(){super(...arguments),t(this,"dayText",_,this),t(this,"freeNumber",E,this),t(this,"adNumber",j,this),t(this,"progressBar",C,this),t(this,"dayBg",N,this),t(this,"freeLock",S,this),t(this,"adLock",F,this),t(this,"freeMask",I,this),t(this,"adMask",M,this),t(this,"freeCheck",D,this),t(this,"adCheck",R,this),t(this,"adIcon",H,this),this._eventObj=null}init(e,i){this._eventObj=e,this.dayText.string=`${e.day}`,this.adNumber.string=`${e.adRewards[0].count}`,this.freeNumber.string=`${e.signRewards[0].count}`,this.freeLock.active=e.isLock,this.adLock.active=e.isLock,this.freeMask.active=e.isLock,this.adMask.active=e.isLock,this.freeCheck.active=!e.states[0],this.adCheck.active=!e.states[1],this.adIcon.active=0!=e.states[1],e.day==i+1?this.dayBg.index=1:e.day<i+1?this.dayBg.index=0:this.dayBg.index=2,e.day<i+1?this.progressBar.color=(new c).fromHEX("#3BFFFF"):this.progressBar.color=(new c).fromHEX("#OOOOOO")}onFreeBtn(){0==this._eventObj.states[0]||this._eventObj.isLock||u.instance.signin()}onAdBtn(){0==this._eventObj.states[1]||this._eventObj.isLock||u.instance.signinWithdAd(this._eventObj.day)}}).prototype,"dayText",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=i(x.prototype,"freeNumber",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=i(x.prototype,"adNumber",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=i(x.prototype,"progressBar",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=i(x.prototype,"dayBg",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=i(x.prototype,"freeLock",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=i(x.prototype,"adLock",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=i(x.prototype,"freeMask",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=i(x.prototype,"adMask",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=i(x.prototype,"freeCheck",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=i(x.prototype,"adCheck",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=i(x.prototype,"adIcon",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=x))||O));r._RF.pop()}}}));

System.register("chunks:///_virtual/EventSigninPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./OpenPopupManager.ts","./EventData.ts","./EventListener.ts","./GameEvent.ts","./EventSigninItem.ts","./LanguageManager.ts"],(function(n){var t,e,i,a,o,s,r,c,p,u,l,g,v,E,f,h;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.initializerDefineProperty},function(n){i=n.cclegacy,a=n.Node,o=n.Prefab,s=n.Label,r=n._decorator,c=n.Component,p=n.instantiate},function(n){u=n.Constants},function(n){l=n.OpenPopupManager},function(n){g=n.EventData},function(n){v=n.EventListener},function(n){E=n.GameEvent},function(n){f=n.EventSigninItem},function(n){h=n.LanguageManager}],execute:function(){var P,y,d,b,m,S,I,C,D;i._RF.push({},"9fd4ct5A35Pn5upcEpAC5Rk","EventSigninPopup",void 0);const{ccclass:_,property:L}=r;n("EventSigninPopup",(P=_("EventSigninPopup"),y=L(a),d=L(o),b=L(s),P((I=t((S=class extends c{constructor(){super(...arguments),e(this,"content",I,this),e(this,"eventSigninItem",C,this),e(this,"dayText",D,this)}show(){g.instance.getEventHeroInfo()}setContent(){if(0==g.instance.signDays.length)return;this.dayText.string=h.instance.getLang("event.signinday",[g.instance.day]),this.content.removeAllChildren(),g.instance.signDays.forEach(((n,t)=>{let e=p(this.eventSigninItem);e.getComponent(f).init(n,g.instance.day),e.parent=this.content}))}onCloseBtn(){l.instance.hide(u.PopupUI.EventSigninePopup)}onEnable(){v.on(E.UPDATE_EVENT_SIGNIN_POPUP,this.setContent,this)}onDisable(){v.off(E.UPDATE_EVENT_SIGNIN_POPUP,this.setContent,this)}}).prototype,"content",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(S.prototype,"eventSigninItem",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(S.prototype,"dayText",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=S))||m));i._RF.pop()}}}));

System.register("chunks:///_virtual/FightEndEventModel.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"c5bfcReOhZGVqXIdP0H+4O4","FightEndEventModel",void 0);t("FightEndEventCfg",class{constructor(){this.ClassName="FightEndEvent",this.Id=void 0,this.chapter=void 0,this.wave=void 0,this.eType=void 0,this.hpUp=1,this.monsterNum=void 0,this.bossNum=void 0,this.monsterCoin=void 0,this.bossDiamond=void 0,this.monsterLevel=void 0,this.monsters=void 0}}),i._RF.pop()}}}));

System.register("chunks:///_virtual/FightEndPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./GameDefine.ts","./ChapterItem.ts","./ChapterData.ts","./PlayerData.ts","./DungeonData.ts","./GameData.ts","./Util.ts","./GameEvent.ts","./EventListener.ts","./ResourcesUtil.ts","./AdManager.ts"],(function(t){var e,n,i,a,o,r,s,h,l,u,c,d,m,g,p,b,f,E,y,T,D,N,_,w,I,C,A;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,a=t.Label,o=t.Node,r=t._decorator,s=t.Component,h=t.director,l=t.UITransform,u=t.v3,c=t.instantiate,d=t.tween},function(t){m=t.OpenPopupManager},function(t){g=t.Constants},function(t){p=t.GameDefine,b=t.GameMode},function(t){f=t.ChapterItem},function(t){E=t.ChapterData},function(t){y=t.PlayerData},function(t){T=t.DungeonData},function(t){D=t.GameData},function(t){N=t.Util},function(t){_=t.GameEvent},function(t){w=t.EventListener},function(t){I=t.ResourcesUtil},function(t){C=t.AdManager,A=t.AdType}],execute:function(){var P,v,G,S,F,O,R,z,B,M,x,U,j,L,k,H,W,Y,K,q,J,Q,V,X,Z,$,tt,et,nt,it,at;i._RF.push({},"4d4daoBjhBGF6Bns8RdWKn0","FightEndPopup",void 0);const{ccclass:ot,property:rt}=r;t("FightEndPopup",(P=ot("FightEndPopup"),v=rt(a),G=rt(a),S=rt(a),F=rt(a),O=rt(o),R=rt(o),z=rt(a),B=rt(o),M=rt(o),x=rt(a),U=rt(a),j=rt(a),L=rt(a),k=rt(o),P((Y=e((W=class extends s{constructor(){super(...arguments),n(this,"gold",Y,this),n(this,"diamond",K,this),n(this,"ticket",q,this),n(this,"energy",J,this),n(this,"battleEnergy",Q,this),n(this,"animNode",V,this),n(this,"fightEndTime",X,this),n(this,"watchAd",Z,this),n(this,"energyBtn",$,this),n(this,"maxMonster",tt,this),n(this,"maxGold",et,this),n(this,"maxDiamond",nt,this),n(this,"leftNumber",it,this),n(this,"chapterItem",at,this),this._battleTouchNumber=0,this._fightEndData=null}show(){this._battleTouchNumber=0,T.instance.getDungeonInfo();let t=y.instance.chapterObj.chapterId,e=E.instance.getChapterCfgById(t);this.chapterItem.getComponent(f).init(e),this.chapterItem.getComponent(f).show(),this.onUpdatePlayerInfo(),this.setContent()}setContent(){this._fightEndData=T.instance.fightEndInfo,this._fightEndData&&(this.leftNumber.string=Number(this._fightEndData.left+this._fightEndData.adLimit).toString()+"/3",this.maxMonster.string=Number(this._fightEndData.record.gold).toString(),this.maxGold.string=Number(this._fightEndData.record.monsterNum).toString(),this.maxDiamond.string=Number(this._fightEndData.record.diamond).toString(),0==this._fightEndData.left&&this._fightEndData.adLimit>0?(this.watchAd.active=!0,this.energyBtn.active=!1):(this.watchAd.active=!1,this.energyBtn.active=!0))}onStartTouch(){if(!T.instance.fightEndInfo)return void m.instance.showToast("data.loading");if(0!=this._battleTouchNumber)return;this._battleTouchNumber++;let t=y.instance.chapterObj.chapterId,e=T.instance.fightEndInfo.wave;T.instance.startBattle(t,e);let n=y.instance.energyObj;this._fightEndData.left>0?n.energy>=5?(y.instance.setEnergy(-5),w.emit(_.COST_ENERGY_FIGHTEND,5),this._startBattle(t,e,"")):(this._battleTouchNumber=0,m.instance.showToast("stamina.insufficient")):this._fightEndData.adLimit>0?C.instance.showAd(A.DUNGEON_FIGHTEND_BATTLE,0,((n,i)=>{0==n&&this._startBattle(t,e,i)})):m.instance.showToast("shop.tomorrow")}_startBattle(t,e,n){D.instance.startFightEnd(t,e,n,((e,i)=>{0==e?(p.gameMode=b.FIGHTEND,p.chapterId=t,p.gameWave=this._fightEndData.wave,this._battleTouchNumber++,(7==this._battleTouchNumber||n)&&h.loadScene("Game")):(this._battleTouchNumber=0,m.instance.showToast(i))}))}onUpdatePlayerInfo(t){let e=y.instance.assetObj;t&&"all"!=t&&"gold"!=t||N.numberAnimation(this.gold,e.gold),t&&"all"!=t&&"diamond"!=t||N.numberAnimation(this.diamond,e.diamond),t&&"all"!=t&&"ticket"!=t||N.numberAnimation(this.ticket,y.instance.chapterObj.ticket),t&&"all"!=t&&"energy"!=t||N.numberAnimation(this.energy,y.instance.energyObj.energy)}onTipBtn(){m.instance.show(g.PopupUI.FightEndTipPopup)}onCloseTouch(){m.instance.hide(g.PopupUI.FightEndPopup)}onFlyEnergy(t){let e=this.battleEnergy.getComponent(l).convertToWorldSpaceAR(u(0,0,0)),n=this.animNode.getComponent(l).convertToNodeSpaceAR(e),i=this.energy.getComponent(l).convertToWorldSpaceAR(u(0,0,0)),a=g.commonPreabPath+"energyItem",o=this.animNode.getComponent(l).convertToNodeSpaceAR(i);I.getPrefab(a).then((e=>{for(let i=0;i<t;i++){let a=c(e),r=2*(Math.random()-.5)*100+o.x,s=2*(Math.random()-.5)*50+o.y;a.parent=this.animNode,a.setPosition(o),this.scheduleOnce((()=>{d(a).to(.2,{position:u(r,s,0)},{easing:"sineIn"}).delay(.2).to(1,{position:n},{easing:"sineInOut"}).call((()=>{a.destroy(),this._battleTouchNumber++,this._battleTouchNumber==t+2&&h.loadScene("Game")})).start()}),.05+.05*i)}}))}onFlyCoin(t){let e=this.energy.getComponent(l).convertToWorldSpaceAR(u(0,0,0)),n=this.animNode.getComponent(l).convertToNodeSpaceAR(e);n.x+=2*(.5-Math.random())*5;let i=this.energy.getComponent(l).convertToWorldSpaceAR(u(0,0,0)),a=g.commonPreabPath+"goldNumberItem",o=this.animNode.getComponent(l).convertToNodeSpaceAR(i);I.getPrefab(a).then((t=>{let e=c(t),i=50*-Math.random()+o.x-50,a=10*Math.random()+o.y+20;e.parent=this.animNode,e.setPosition(o),e.setScale(0,0),this.scheduleOnce((()=>{d(e).to(.6,{position:u(i,a,0),scale:u(1,1,1)},{easing:"sineOut"}).delay(.2).to(1,{position:n,scale:u(0,0,0)},{easing:"sineInOut"}).call((()=>{e.destroy()})).start()}),.05)}))}updateTime(){this._fightEndData&&(this._fightEndData.countdown<=0&&(T.instance.getDungeonInfo(),this.unschedule(this.updateTime)),this._fightEndData.countdown--,this.fightEndTime.string=N.timeToString(this._fightEndData.countdown))}onEnable(){w.on(_.COST_ENERGY_FIGHTEND,this.onFlyEnergy,this),w.on(_.UPDATE_DUNGEON_DATA,this.setContent,this),this.unschedule(this.updateTime),this.schedule(this.updateTime,1)}onDisable(){w.off(_.COST_ENERGY_FIGHTEND,this.onFlyEnergy,this),w.off(_.UPDATE_DUNGEON_DATA,this.setContent,this),this.unschedule(this.updateTime)}}).prototype,"gold",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(W.prototype,"diamond",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(W.prototype,"ticket",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(W.prototype,"energy",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(W.prototype,"battleEnergy",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=e(W.prototype,"animNode",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(W.prototype,"fightEndTime",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=e(W.prototype,"watchAd",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=e(W.prototype,"energyBtn",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=e(W.prototype,"maxMonster",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),et=e(W.prototype,"maxGold",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nt=e(W.prototype,"maxDiamond",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),it=e(W.prototype,"leftNumber",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),at=e(W.prototype,"chapterItem",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=W))||H));i._RF.pop()}}}));

System.register("chunks:///_virtual/FightEndTipPopup.ts",["cc","./OpenPopupManager.ts","./Constants.ts"],(function(n){var t,p,o,e,c;return{setters:[function(n){t=n.cclegacy,p=n.Component,o=n._decorator},function(n){e=n.OpenPopupManager},function(n){c=n.Constants}],execute:function(){var s;t._RF.push({},"c303c4wfexE+qgtOAXSt1Qr","FightEndTipPopup",void 0);const{ccclass:i,property:u}=o;n("FightEndTipPopup",i("FightEndTipPopup")(s=class extends p{show(){}onCloseTouch(){e.instance.hide(c.PopupUI.FightEndTipPopup)}})||s);t._RF.pop()}}}));

System.register("chunks:///_virtual/FirstTopupModel.ts",["cc"],(function(t){var s;return{setters:[function(t){s=t.cclegacy}],execute:function(){s._RF.push({},"fbd71AIvK9HnL588xA9hG79","FirstTopupModel",void 0);t("FirstTopupCfg",class{constructor(){this.ClassName="FirstTopup",this.Id=void 0,this.token=void 0,this.price=void 0,this.rewards=void 0}}),s._RF.pop()}}}));

System.register("chunks:///_virtual/FirstTopupPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TopupData.ts","./OpenPopupManager.ts","./Constants.ts","./SpriteEx.ts","./RewardItem.ts","./EventListener.ts","./GameEvent.ts"],(function(t){var i,e,n,a,s,r,o,p,l,u,c,h,b,f;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){n=t.cclegacy,a=t.Label,s=t.Node,r=t._decorator,o=t.Component},function(t){p=t.TopupData},function(t){l=t.OpenPopupManager},function(t){u=t.Constants},function(t){c=t.SpriteEx},function(t){h=t.RewardItem},function(t){b=t.EventListener},function(t){f=t.GameEvent}],execute:function(){var d,T,m,y,g,F,P,_,x,w,D,v,B,I,z,C,E,L,O,U,R,S,k,A,G,M,j,N,H;n._RF.push({},"0cc16GpE+JDe4BtlonrjMjZ","FirstTopupPopup",void 0);const{ccclass:J,property:Z}=r;t("FirstTopupPopup",(d=J("FirstTopupPopup"),T=Z(a),m=Z(s),y=Z(c),g=Z(c),F=Z(c),P=Z(c),_=Z(c),x=Z(c),w=Z(s),D=Z(a),v=Z(s),B=Z(s),I=Z(s),d((E=i((C=class extends o{constructor(){super(...arguments),e(this,"priceLabel",E,this),e(this,"tabs",L,this),e(this,"tab1",O,this),e(this,"tab2",U,this),e(this,"tab3",R,this),e(this,"day1",S,this),e(this,"day2",k,this),e(this,"day3",A,this),e(this,"items",G,this),e(this,"packageLabel",M,this),e(this,"buyBtn",j,this),e(this,"claimBtn",N,this),e(this,"tips",H,this),this._index=0,this._firstId=0}show(){p.instance.getFirtTopupFromNetwork(),this.setFirtTopupContent()}setItems(){let t=p.instance.getFirstTopupItems(this._index);for(let i=0;i<t.length;i++)this.items[i].getComponent(h).init(t[i],!0)}onTabBtn(t,i){this.day1.index=i,this.day2.index=i,this.day3.index=i,this.tab1.index=0,this.tab2.index=0,this.tab3.index=0,0==i?this.tab1.index=1:1==i?this.tab2.index=1:this.tab3.index=1,this._index=i,this.setFirtTopupContent()}setFirtTopupContent(){this.buyBtn.active=!1,this.claimBtn.active=!1,this.tips.active=!1;let t=p.instance.firstTopupData;for(let i=0;i<t.length;i++)this.packageLabel[i].string="$"+t[i].price.toString();if(t[this._index]){let i=t[this._index];this._firstId=i.firstId,i.state?i.claimedDays.indexOf(i.availableDays)>=0?this.tips.active=!0:this.claimBtn.active=!0:(this.buyBtn.active=!0,this.priceLabel.string=i.price.toFixed(2))}this.setItems()}getFirtTopupData(){p.instance.getFirtTopupFromNetwork()}onBuyBtn(){p.instance.onBuyFirstTopup(this._firstId)}onClaimBtn(){p.instance.onClaimFirstTopup(this._firstId)}onCloseTouch(){l.instance.hide(u.PopupUI.FirstTopupPopup)}onEnable(){b.on(f.UPDATE_FIRST_TOPUP_POPUP,this.setFirtTopupContent,this),b.on(f.GET_FIRST_TOPUP_DATA,this.getFirtTopupData,this)}onDisable(){b.off(f.UPDATE_FIRST_TOPUP_POPUP,this.setFirtTopupContent,this),b.off(f.GET_FIRST_TOPUP_DATA,this.getFirtTopupData,this)}}).prototype,"priceLabel",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=i(C.prototype,"tabs",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=i(C.prototype,"tab1",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=i(C.prototype,"tab2",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=i(C.prototype,"tab3",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=i(C.prototype,"day1",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=i(C.prototype,"day2",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=i(C.prototype,"day3",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=i(C.prototype,"items",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=i(C.prototype,"packageLabel",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),j=i(C.prototype,"buyBtn",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=i(C.prototype,"claimBtn",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=i(C.prototype,"tips",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=C))||z));n._RF.pop()}}}));

System.register("chunks:///_virtual/FriendDiamondItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AvatarItem.ts","./OpenPopupManager.ts","./Constants.ts"],(function(t){var a,e,i,n,r,s,o,l,c,u;return{setters:[function(t){a=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){i=t.cclegacy,n=t.Node,r=t.Label,s=t._decorator,o=t.Component},function(t){l=t.AvatarItem},function(t){c=t.OpenPopupManager},function(t){u=t.Constants}],execute:function(){var d,p,h,v,m,b,f,F,g;i._RF.push({},"82810RYPoFNYboJOP2adIzB","FriendDiamondItem",void 0);const{ccclass:A,property:y}=s;t("FriendDiamondItem",(d=A("FriendDiamondItem"),p=y(n),h=y(r),v=y(n),d((f=a((b=class extends o{constructor(){super(...arguments),e(this,"userAvatar",f,this),e(this,"diamondText",F,this),e(this,"defaultAvatar",g,this),this.hasFriend=!1,this._callback=null}init(t,a){this._callback=a,this.diamondText.string="+"+t.reward.count.toString(),""==t.avatar?(this.hasFriend=!1,this.defaultAvatar.active=!0,this.userAvatar.active=!1):(this.defaultAvatar.active=!1,this.userAvatar.active=!0,this.hasFriend=!0,this.userAvatar.getComponent(l).init(t.avatar))}onTapBtn(){this.hasFriend?c.instance.show(u.PopupUI.FriendsPopup):this._callback&&this._callback()}}).prototype,"userAvatar",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=a(b.prototype,"diamondText",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=a(b.prototype,"defaultAvatar",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=b))||m));i._RF.pop()}}}));

System.register("chunks:///_virtual/FriendItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageManager.ts","./AvatarItem.ts"],(function(e){var t,r,i,a,n,l,o,s,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.initializerDefineProperty},function(e){i=e.cclegacy,a=e.Node,n=e.Label,l=e._decorator,o=e.Component},function(e){s=e.LanguageManager},function(e){u=e.AvatarItem}],execute:function(){var c,p,g,h,m,b,v,d,f,y,w,D,F;i._RF.push({},"0373dXNGKpDx6Rc4DnG88rJ","FriendItem",void 0);const{ccclass:z,property:I}=l;e("FriendItem",(c=z("FriendItem"),p=I(a),g=I(n),h=I(n),m=I(n),b=I(a),c((f=t((d=class extends o{constructor(){super(...arguments),r(this,"avatar",f,this),r(this,"username",y,this),r(this,"barrier",w,this),r(this,"tonValue",D,this),r(this,"clover",F,this),this.friendData=null}init(e){this.friendData=e,this.username.string=e.username,this.barrier.string=s.instance.getLang("game.chapter")+`:${e.chapter}`,this.tonValue.string=Number(e.amount/1e3).toFixed(2),this.avatar.getComponent(u).init(e.avatar),e.reward?(this.clover.active=!0,this.clover.getChildByName("value").getComponent(n).string=`${e.reward.count}`):this.clover.active=!1}}).prototype,"avatar",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=t(d.prototype,"username",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=t(d.prototype,"barrier",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(d.prototype,"tonValue",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(d.prototype,"clover",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=d))||v));i._RF.pop()}}}));

System.register("chunks:///_virtual/FriendsPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./FriendItem.ts","./InviteData.ts"],(function(e){var t,i,n,r,s,a,o,l,c,p,d,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,r=e.Prefab,s=e.Node,a=e._decorator,o=e.Component,l=e.instantiate},function(e){c=e.OpenPopupManager},function(e){p=e.Constants},function(e){d=e.FriendItem},function(e){u=e.InviteData}],execute:function(){var h,b,f,F,m,g,y,C,P,v,I,w,z,S,D;n._RF.push({},"919eedCLydA8Ke1ifiQUbLC","FriendsPopup",void 0);const{ccclass:_,property:E}=a;e("FriendsPopup",(h=_("FriendsPopup"),b=E(r),f=E(s),F=E(s),m=E(s),g=E(s),y=E(s),h((v=t((P=class extends o{constructor(){super(...arguments),i(this,"friendItem",v,this),i(this,"tabs",I,this),i(this,"directScroll",w,this),i(this,"spreadScroll",z,this),i(this,"directFrens",S,this),i(this,"spreadFrens",D,this)}show(){this.init()}init(){u.instance.directFrens.forEach(((e,t)=>{if(this.directFrens.children[t])this.directFrens.children[t].getComponent(d).init(e);else{let t=l(this.friendItem);t.getComponent(d).init(e),t.parent=this.directFrens}})),u.instance.spreadFrens.forEach(((e,t)=>{if(this.spreadFrens.children[t])this.spreadFrens.children[t].getComponent(d).init(e);else{let t=l(this.friendItem);t.getComponent(d).init(e),t.parent=this.spreadFrens}}))}onCloseTouch(){c.instance.hide(p.PopupUI.FriendsPopup)}switchTab(e,t){this.tabs.children.forEach(((e,i)=>{this.tabs.children[i].getChildByName("checked").active=i==t})),this.directScroll.active=0==t,this.spreadScroll.active=1==t}}).prototype,"friendItem",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=t(P.prototype,"tabs",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=t(P.prototype,"directScroll",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(P.prototype,"spreadScroll",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=t(P.prototype,"directFrens",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(P.prototype,"spreadFrens",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=P))||C));n._RF.pop()}}}));

System.register("chunks:///_virtual/FundItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FundRewardItem.ts"],(function(e){var t,r,i,s,n,a,l,o;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.initializerDefineProperty},function(e){i=e.cclegacy,s=e.Node,n=e.Label,a=e._decorator,l=e.Component},function(e){o=e.FundRewardItem}],execute:function(){var u,c,p,h,d,m,g,v,b,f,w;i._RF.push({},"ea057yAUuNDvYNU3cCh+BRb","FundItem",void 0);const{ccclass:y,property:F}=a;e("FundItem",(u=y("FundItem"),c=F(s),p=F(n),h=F(s),d=F(s),u((v=t((g=class extends l{constructor(){super(...arguments),r(this,"mask",v,this),r(this,"level",b,this),r(this,"progress",f,this),r(this,"rewards",w,this)}init(e,t){this.level.string=e.value.toString(),t?e.value>t.currentValue?(this.progress.active=!1,this.mask.active=!0):e.value==t.currentValue?this.progress.setScale(1,.5):(this.mask.active=!1,this.progress.active=!0):(this.mask.active=!1,this.progress.active=!0);for(let r=0;r<e.rewards.length;r++)this.rewards[r].getComponent(o).init(e,r,t)}}).prototype,"mask",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=t(g.prototype,"level",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=t(g.prototype,"progress",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=t(g.prototype,"rewards",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=g))||m));i._RF.pop()}}}));

System.register("chunks:///_virtual/FundPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./TopupData.ts","./FundItem.ts","./EventListener.ts","./GameEvent.ts","./SpriteEx.ts","./LanguageManager.ts"],(function(t){var e,n,i,a,s,r,u,l,o,c,h,p,b,d,g,y,f,F;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,a=t.Label,s=t.Node,r=t.Prefab,u=t._decorator,l=t.Component,o=t.instantiate,c=t.Sprite},function(t){h=t.OpenPopupManager},function(t){p=t.Constants},function(t){b=t.TopupData},function(t){d=t.FundItem},function(t){g=t.EventListener},function(t){y=t.GameEvent},function(t){f=t.SpriteEx},function(t){F=t.LanguageManager}],execute:function(){var v,m,_,L,w,B,P,D,T,C,z,E,G,x,I,O,U,A,N,H,R,M,S,W,k,j,J;i._RF.push({},"8b2b43YfspC7JJzw/LHf83L","FundPopup",void 0);const{ccclass:V,property:Y}=u;t("FundPopup",(v=V("FundPopup"),m=Y(a),_=Y(f),L=Y(s),w=Y(r),B=Y(s),P=Y(a),D=Y(a),T=Y(a),C=Y(s),z=Y(s),E=Y(s),G=Y(s),v((O=e((I=class extends l{constructor(){super(...arguments),n(this,"tip",O,this),n(this,"banner",U,this),n(this,"content",A,this),n(this,"fundItem",N,this),n(this,"tabs",H,this),n(this,"level",R,this),n(this,"price1",M,this),n(this,"price2",S,this),n(this,"buyLabel1",W,this),n(this,"buyLabel2",k,this),n(this,"buyBtn1",j,this),n(this,"buyBtn2",J,this),this._index=0,this._fundTypes=["chapter","blueprint"]}show(){b.instance.initFundCfg(),this.getFundData(),this.setFundContent()}setFundContent(){let t=b.instance.getFundIdByType(this._fundTypes[this._index]),e=b.instance.getGrowthFundCfg(t),n=b.instance.getGrowthFundLevelArrCfg(e.Id);this.tip.string=F.instance.getLang(e.desc),this.level.string="",this.price1.string=e.prices[1].toFixed(2),this.price2.string=e.prices[2].toFixed(2);let i=b.instance.getFundObjById(t);i?(i.states[1]?(this.buyBtn1.active=!1,this.buyLabel1.active=!0):(this.buyBtn1.active=!0,this.buyLabel1.active=!1),i.states[2]?(this.buyBtn2.active=!1,this.buyLabel2.active=!0):(this.buyBtn2.active=!0,this.buyLabel2.active=!1),this.level.string=i.currentValue.toString()):(this.buyBtn1.active=!0,this.buyLabel1.active=!1,this.buyBtn2.active=!0,this.buyLabel2.active=!1),n.forEach(((t,e)=>{let n=null;this.content.children[e]?(n=this.content.children[e],n.active=!0):(n=o(this.fundItem),n.parent=this.content),n.getComponent(d).init(t,i)}));for(let t=n.length;t<this.content.children.length;t++)this.content.children[t].active=!1}getFundData(){b.instance.getFundFromNetwork()}switchFund(t,e){this._index=e,this.tabs.children.forEach(((t,n)=>{t.getComponent(c).enabled=e==n})),this.setFundContent()}onBuyBtn(t,e){let n=b.instance.getFundIdByType(this._fundTypes[this._index]),i=b.instance.getGrowthFundCfg(n);b.instance.onBuyFund(n,Number(e),i.name)}onBackBtn(){h.instance.hide(p.PopupUI.FundPopup)}onEnable(){g.on(y.UPDATE_GROWTH_FUND_POPUP,this.setFundContent,this),g.on(y.GET_GROWTH_FUND_DATA,this.getFundData,this)}onDisable(){g.off(y.UPDATE_GROWTH_FUND_POPUP,this.setFundContent,this),g.off(y.GET_GROWTH_FUND_DATA,this.getFundData,this)}}).prototype,"tip",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=e(I.prototype,"banner",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=e(I.prototype,"content",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=e(I.prototype,"fundItem",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=e(I.prototype,"tabs",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=e(I.prototype,"level",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=e(I.prototype,"price1",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=e(I.prototype,"price2",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=e(I.prototype,"buyLabel1",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=e(I.prototype,"buyLabel2",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=e(I.prototype,"buyBtn1",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=e(I.prototype,"buyBtn2",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=I))||x));i._RF.pop()}}}));

System.register("chunks:///_virtual/FundRewardItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TopupData.ts","./ResourcesUtil.ts","./Constants.ts","./ShopData.ts"],(function(e){var t,i,n,a,r,l,o,s,c,u,p,h,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,a=e.Sprite,r=e.Label,l=e.Node,o=e._decorator,s=e.Component,c=e.UITransform},function(e){u=e.TopupData},function(e){p=e.ResourcesUtil},function(e){h=e.Constants},function(e){d=e.ShopData}],execute:function(){var m,f,b,g,v,y,w,I,R,C,F,_,x,z,k;n._RF.push({},"db662RrdIRBh4EpyxMXyp6Y","FundRewardItem",void 0);const{ccclass:B,property:D}=o;e("FundRewardItem",(m=B("FundRewardItem"),f=D(a),b=D(r),g=D(l),v=D(l),y=D(l),w=D(l),m((C=t((R=class extends s{constructor(){super(...arguments),i(this,"icon",C,this),i(this,"value",F,this),i(this,"lock",_,this),i(this,"redpoint",x,this),i(this,"mask",z,this),i(this,"claimBtn",k,this),this._index=0,this._fundLevelCfg=null}init(e,t,i){this._index=t,this._fundLevelCfg=e;let n=e.rewards[t],a=!i||!i.states[t],r=!!i&&i.claimedRewards.indexOf(e.Id+"-"+t)>=0,l=!!i&&(!a&&!r&&e.value<=i.currentValue),o=d.instance.getItemCfgById(n.itemId),s=h.itemsPath+o.icon+"/spriteFrame";p.geSpriteFrame(s).then((e=>{this.icon.spriteFrame=e;let t=this.icon.getComponent(c).contentSize,i=Math.min(80/t.width,80/t.height);this.icon.node.setScale(i,i)})),this.value.string=`x${n.count}`,this.lock.active=a,this.mask.active=r,this.redpoint.active=l,this.claimBtn.active=l}onClaimBtn(){u.instance.onClaimFund(this._fundLevelCfg.Id,this._index)}}).prototype,"icon",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(R.prototype,"value",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(R.prototype,"lock",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=t(R.prototype,"redpoint",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(R.prototype,"mask",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(R.prototype,"claimBtn",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=R))||I));n._RF.pop()}}}));

System.register("chunks:///_virtual/Game.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./EventListener.ts","./GameController.ts","./OpenPopupManager.ts","./PopupManager.ts","./GameEvent.ts","./BattleUIManager.ts","./BgManager.ts","./BoxManager.ts","./GridManager.ts","./GridMapManager.ts","./HeroManager.ts","./MonsterManager.ts","./SkillManager.ts","./WeaponManager.ts","./GameDefine.ts","./GameData.ts","./WeaponShopData.ts","./CoinMode.ts","./WeaponData.ts","./HeroData.ts","./SkillUpgradeData.ts","./ResourcesUtil.ts","./Constants.ts","./PlayerData.ts","./GuideData.ts"],(function(e){var t,n,a,i,o,r,s,l,h,u,c,g,p,M,m,f,T,E,b,S,_,d,v,w,G,C,A,O,L,I,H,U,y,P,R,D,B,W,N,k,z,V;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){a=e.cclegacy,i=e.Node,o=e._decorator,r=e.Component,s=e.tween,l=e.v3,h=e.Tween,u=e.director,c=e.Vec3,g=e.UITransform,p=e.resources,M=e.Input},function(e){m=e.AudioManager},function(e){f=e.EventListener},function(e){T=e.default},function(e){E=e.OpenPopupManager},function(e){b=e.PopupManager},function(e){S=e.GameEvent},function(e){_=e.BattleUIManager},function(e){d=e.BgManager},function(e){v=e.BoxManager},function(e){w=e.GridManager},function(e){G=e.GridMapManager},function(e){C=e.HeroManager},function(e){A=e.MonsterManager},function(e){O=e.SkillManager},function(e){L=e.WeaponManager},function(e){I=e.GameDefine,H=e.GameMode},function(e){U=e.GameData,y=e.GameState},function(e){P=e.WeaponShopData},function(e){R=e.CoinObj},function(e){D=e.WeaponData},function(e){B=e.HeroData},function(e){W=e.SkillUpgradeData},function(e){N=e.ResourcesUtil},function(e){k=e.Constants},function(e){z=e.PlayerData},function(e){V=e.GuideData}],execute:function(){var F,x,Y,j,K,q,J,Q,X,Z,$,ee,te,ne,ae,ie,oe,re,se,le,he,ue,ce,ge,pe,Me,me;a._RF.push({},"3b31dMje5NGcYFxxYgcs301","Game",void 0);const{ccclass:fe,property:Te}=o;e("Game",(F=fe("Game"),x=Te(i),Y=Te(i),j=Te(i),K=Te(d),q=Te(G),J=Te(w),Q=Te(L),X=Te(v),Z=Te(A),$=Te(_),ee=Te(C),te=Te(O),F((ie=t((ae=class extends r{constructor(){super(...arguments),n(this,"gameCtrl",ie,this),n(this,"battleMap",oe,this),n(this,"removeWeaponList",re,this),n(this,"bgManager",se,this),n(this,"gridMapManager",le,this),n(this,"gridManager",he,this),n(this,"weaponManager",ue,this),n(this,"boxManager",ce,this),n(this,"monsterManager",ge,this),n(this,"battleUIManager",pe,this),n(this,"heroManager",Me,this),n(this,"skillManager",me,this),this._battleMapUpPosY=1200,this._battleMapDownPosy=200}onLoad(){m.instance.playMusic(2,!0),I.gameTouch=!1,P.instance.init(),W.instance.init(),B.instance.init(),E.instance.showGamePopup(),this.init(),N.getPrefab(k.PopupUI.SkillSelectPopup),window.onerror=function(e,t,n,a,i){z.instance.reportError(e,t,n,a,i)},this.scheduleOnce((()=>{f.emit(S.HIDE_LOADING)}),2),this.scheduleOnce((()=>{this.preloadGameScene()}),5)}init(){I.gameMode==H.FIGHTEND&&W.instance.learnCarrayWeaponAllSkills(),D.instance.init(B.instance.getInitCarryWeapon()),this.gridManager.init(),this.battleUIManager.init(),this.bgManager.init(),this.gridMapManager.init(),this.weaponManager.init(),this.heroManager.init(),this.monsterManager.init(),this.skillManager.init(),this.onTapBtn()}onTapBtn(){I.gameTouch=!0,this.setTweenAnim(this.removeWeaponList,.3)}setTweenAnim(e,t){e.active=!0,e.setScale(.5,.5),s(e).to(t,{scale:l(1,1,1)},{easing:"backOut"}).call((()=>{})).start()}onGameStart(){I.gameTouch=!1,I.gameStart=!0,I.gameOver=!1}onGameOver(){I.gameTouch=!1,I.gameStart=!1,I.gameOver=!0,h.stopAll(),this.clear(),I.gameWave=1,b.instance.hideAll(),T.resume(),V.instance.battleMode=!1,u.loadScene("Main")}onBattleBtn(){s(this.battleMap).to(.5,{position:new c(0,this._battleMapDownPosy,0)},{easing:"sineInOut"}).call((()=>{this.heroManager.showHideHero(!0),f.emit(S.INIT_HERO_SKILL),this.monsterManager.setCurChapterEvent(),this.weaponManager.showHideRemoveList(!1),this.onGameStart()})).start(),U.instance.reportFight(y.Pending)}onResetSelectBg(){s(this.battleMap).to(.5,{position:l(0,this._battleMapUpPosY,0)},{easing:"sineInOut"}).call((()=>{f.emit(S.SHOW_HIDE_SKILL_LIST,!1),this.heroManager.showHideHero(!1),this.heroManager.clear(),this.skillManager.reset(),I.gameStart=!1,f.emit(S.WEAPON_REMOVE_REFRESH,!0,!1,!0),this.weaponManager.showHideRemoveList(!0),this.setTweenAnim(this.removeWeaponList,.3),this.weaponManager.showPurseFlyGoldAnim(),I.gameTouch=!0})).start(),U.instance.reportFight(y.Success)}onReviveSelectBg(){this.monsterManager.revive(),this.battleUIManager.revive(),s(this.battleMap).to(.5,{position:l(0,this._battleMapUpPosY,0)},{easing:"sineInOut"}).call((()=>{f.emit(S.SHOW_HIDE_SKILL_LIST,!1),this.heroManager.showHideHero(!1),this.heroManager.revive(),this.skillManager.reset(),I.gameStart=!1,f.emit(S.WEAPON_REMOVE_REFRESH,!0),this.weaponManager.showHideRemoveList(!0),this.setTweenAnim(this.removeWeaponList,.3),I.gameTouch=!0,this.weaponManager.showPurseFlyGoldAnim();let e=new R;e.pos=this.gameCtrl.getComponent(g).convertToWorldSpaceAR(l(0,0,0)),e.num=15,f.emit(S.GAME_CHANGE_COIN,e)})).start()}onTouchStart(e){if(e.preventSwallow=!0,I.gameTouch){let t=e.getUILocation();f.emit(S.GAME_TOUCH_START,t)}}onTouchMove(e){if(e.preventSwallow=!0,I.gameTouch){let t=e.getUILocation();f.emit(S.GAME_TOUCH_MOVE,t)}}onTouchEnd(e){if(e.preventSwallow=!0,I.gameTouch){let t=e.getUILocation();f.emit(S.GAME_TOUCH_END,t)}}onTouchCancle(e){if(e.preventSwallow=!0,I.gameTouch){let t=e.getUILocation();f.emit(S.GAME_TOUCH_CANCLE,t)}}onShowLoading(e){e&&"game"!=e||E.instance.showLoadingPopup()}preloadGameScene(){p.preload([k.PopupUI.GameWinPopup,k.PopupUI.GameFailPopup,k.PopupUI.GameRevivePopup,k.PopupUI.PausePopup],((e,t)=>{}),(()=>{}))}onEnable(){this.gameCtrl.on(M.EventType.TOUCH_START,this.onTouchStart,this),this.gameCtrl.on(M.EventType.TOUCH_MOVE,this.onTouchMove,this),this.gameCtrl.on(M.EventType.TOUCH_END,this.onTouchEnd,this),this.gameCtrl.on(M.EventType.TOUCH_CANCEL,this.onTouchCancle,this),f.on(S.GAME_OVER,this.onGameOver,this),f.on(S.GAME_TAP_BTN,this.onTapBtn,this),f.on(S.RESET_SELECT_BAG,this.onResetSelectBg,this),f.on(S.REVIVE_SELECT_BAG,this.onReviveSelectBg,this),f.on(S.GAME_BATTLE_START,this.onBattleBtn,this),f.on(S.SHOW_LOADING,this.onShowLoading,this)}onDisable(){this.gameCtrl.off(M.EventType.TOUCH_START,this.onTouchStart,this),this.gameCtrl.off(M.EventType.TOUCH_MOVE,this.onTouchMove,this),this.gameCtrl.off(M.EventType.TOUCH_END,this.onTouchEnd,this),this.gameCtrl.off(M.EventType.TOUCH_CANCEL,this.onTouchCancle,this),f.off(S.GAME_OVER,this.onGameOver,this),f.off(S.GAME_TAP_BTN,this.onTapBtn,this),f.off(S.RESET_SELECT_BAG,this.onResetSelectBg,this),f.off(S.REVIVE_SELECT_BAG,this.onReviveSelectBg,this),f.off(S.GAME_BATTLE_START,this.onBattleBtn,this),f.off(S.SHOW_LOADING,this.onShowLoading,this)}clear(){this.bgManager.clear(),this.heroManager.clear(),this.gridManager.clear(),this.weaponManager.clear(),this.monsterManager.clear(),this.boxManager.clear(),this.battleUIManager.clear(),this.skillManager.clear()}}).prototype,"gameCtrl",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=t(ae.prototype,"battleMap",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=t(ae.prototype,"removeWeaponList",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=t(ae.prototype,"bgManager",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=t(ae.prototype,"gridMapManager",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=t(ae.prototype,"gridManager",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=t(ae.prototype,"weaponManager",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=t(ae.prototype,"boxManager",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ge=t(ae.prototype,"monsterManager",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=t(ae.prototype,"battleUIManager",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Me=t(ae.prototype,"heroManager",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),me=t(ae.prototype,"skillManager",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=ae))||ne));a._RF.pop()}}}));

System.register("chunks:///_virtual/GameController.ts",["cc"],(function(e){var t,a,s,n,i,r,c,o,u;return{setters:[function(e){t=e.cclegacy,a=e.game,s=e.Game,n=e.director,i=e.AnimationManager,r=e.sp,c=e.TweenSystem,o=e.Animation,u=e.dragonBones}],execute:function(){let l;t._RF.push({},"c76e0fkdyBP5IBNGua/cGsR","GameController",void 0),function(e){let t=1,l=1;a._calculateDT=function(e){return e||(e=performance.now()),this._deltaTime=e>this._startTime?(e-this._startTime)/1e3:0,this._deltaTime>s.DEBUG_DT_THRESHOLD&&(this._deltaTime=this.frameTime/1e3),this._startTime=e,this._deltaTime=this._deltaTime*t,this._deltaTime},e.getGameTimeScale=function(){return l},e.setGameTimeScale=function(e){l=e},e.changeTimeScale=function(e){t=e};const m=e.pause_data=new class{constructor(){this.state_b=!1,this.physics_2d_b=void 0,this.physics_3d_b=void 0,this.scheduler_as=void 0,this.anim_as=[],this.tween_target_as=void 0,this.spine_as=void 0,this.spine_TimeScale=new Map}};function _(e,t){return void 0===t&&(t=[]),e?(t.push(e),e.children.forEach((e=>{t.push(e),_(e)})),t):t}function h(e){let t;t=Array.isArray(e)?e:[e],t.forEach((e=>{n.getScheduler().resumeTarget(e),e.getComponent(o)?.resume(),e.getComponent(u.ArmatureDisplay)&&(e.getComponent(u.ArmatureDisplay).timeScale=1),c.instance.ActionManager.resumeTarget(e)}))}e.pause_config=class{constructor(){this.exclude_as=void 0,this.recu_exclude_as=void 0}},e.quick=function(e){n.getScheduler().setTimeScale(e)},e.pause=function(e){if(!m.state_b){m.scheduler_as=n.getScheduler().pauseAllTargets();{let e=n.getSystem(i.ID);m.anim_as.splice(0,m.anim_as.length,...e._anims.array),m.anim_as.forEach((e=>{e.pause()}))}if(m.spine_as=n.getScene().getComponentsInChildren(r.Skeleton),m.spine_as.forEach((e=>{e.skeletonData&&(m.spine_TimeScale.set(e.skeletonData.name,e.timeScale),e.timeScale=0)})),m.tween_target_as=c.instance.ActionManager.pauseAllRunningActions(),e){let t=[];t.push(...e.exclude_as),e.recu_exclude_as?.forEach((e=>{t.push(..._(e))})),t.forEach((e=>{h(e)}))}m.state_b=!0}},e.resume=function(){n.getScheduler().resumeTargets(m.scheduler_as),m.anim_as.forEach((e=>{e.isPlaying&&e.isPaused&&e.play()})),m.spine_as&&m.spine_as.forEach((e=>{e.skeletonData&&(e.timeScale=m.spine_TimeScale.has(e.skeletonData.name)?m.spine_TimeScale.get(e.skeletonData.name):1)})),c.instance.ActionManager.resumeTargets(m.tween_target_as),m.state_b=!1},e.pause_node=function(e){let t;t=Array.isArray(e)?e:[e],t.forEach((e=>{n.getScheduler().pauseTarget(e),e.getComponent(o)?.pause(),e.getComponent(u.ArmatureDisplay)&&(e.getComponent(u.ArmatureDisplay).timeScale=0),c.instance.ActionManager.pauseTarget(e)}))},e.resume_node=h}(l||(l={}));e("default",l);t._RF.pop()}}}));

System.register("chunks:///_virtual/GameData.ts",["cc","./Constants.ts","./AdManager.ts","./Api.ts","./Configuration.ts","./HttpService.ts","./OpenPopupManager.ts","./GameDefine.ts","./ChestData.ts","./DungeonData.ts","./GridData.ts","./HeroData.ts","./MonsterData.ts","./PlayerData.ts","./SkillUpgradeData.ts","./WeaponShopData.ts"],(function(e){var t,a,i,n,s,r,l,o,c,h,d,u,p,m,g,_,f,C,I;return{setters:[function(e){t=e.cclegacy},function(e){a=e.Constants},function(e){i=e.AdManager,n=e.AdType,s=e.AdBattleType},function(e){r=e.Api},function(e){l=e.Configuration},function(e){o=e.HttpService},function(e){c=e.OpenPopupManager},function(e){h=e.GameDefine,d=e.GameMode},function(e){u=e.ChestData},function(e){p=e.DungeonData},function(e){m=e.GridData},function(e){g=e.HeroData},function(e){_=e.MonsterData},function(e){f=e.PlayerData},function(e){C=e.SkillUpgradeData},function(e){I=e.WeaponShopData}],execute:function(){t._RF.push({},"1d101mQYZlH5YgNDTHpHFON","GameData",void 0);class T{constructor(){this._adGetCoinNumber=3,this._isLoad=!1,this._maxSpeed=1,this._gameSpeed=1,this._gameTime=0,this._dataInited=!1,this._curExp=0,this._expLevel=0,this._battleId=0,this._chapterId=0,this._reviveNumber=0,this.winRewards=[],this.failRewards=[],this._refreshSkillCount=10,this._selectAllSkillCount=3,this._unlockItems=[]}set isLoad(e){this._isLoad=e}get isLoad(){return this._isLoad}set adGetCoinNumber(e){this._adGetCoinNumber-=e}get adGetCoinNumber(){return this._adGetCoinNumber}set gameSpeed(e){this._gameSpeed=e}get gameSpeed(){return this._gameSpeed}set maxSpeed(e){this._maxSpeed=e}get maxSpeed(){return this._maxSpeed}set gameTime(e){this._gameTime=e}get gameTime(){return this._gameTime}set curExp(e){this._curExp=e}get curExp(){return this._curExp}set expLevel(e){this._expLevel=e}get expLevel(){return this._expLevel}get unlockItems(){return this._unlockItems}set unlockItems(e){this._unlockItems=e}get refreshSkillCount(){return this._refreshSkillCount}set refreshSkillCount(e){this._refreshSkillCount-=e}get selectAllSkillCount(){return this._selectAllSkillCount}set selectAllSkillCount(e){this._selectAllSkillCount-=e}get reviveNumber(){return this._reviveNumber}init(){this.loadFromCache()}checkGameEventOver(){return!1}initBattle(e){this._curExp=0,this._expLevel=0,this._reviveNumber=0,this._refreshSkillCount=T.initRefreshSkillCount,this._selectAllSkillCount=T.initSelectAllSkillCount,this._adGetCoinNumber=T.initAdGetCoinNumber,this._adGetCoinNumber=e<=10?100:e>10&&e<=20?20:5,this._maxSpeed=f.instance.chapterObj.battleSpeedUp,this._gameSpeed=f.instance.chapterObj.battleSpeedUp}startBattle(e,t){this.initBattle(e),o.instance.post(r.CHAPTER_BATTLE_START,{chapterId:e}).then((a=>{0==a.code?(this._chapterId=e,this._battleId=a.data.battleId,h.gameWave=1,t(a.code)):t(a.code,a?a.msg:"error")}))}reportFight(e,t){if(h.gameMode==d.NORMAL){let a=e==v.Pending?h.gameWave:h.gameWave-1,i=this.getFightContent(),n={state:e,chapterId:this._chapterId,battleId:this._battleId,wave:a,waveInfo:i};o.instance.post(r.CHAPTER_BATTLE_REPORT,n).then((e=>{0==e.code?(e.data.rewards&&e.data.rewards.failure&&(this.failRewards=e.data.rewards.failure),e.data.rewards&&e.data.rewards.success&&(this.winRewards=e.data.rewards.success),t&&t(e.code)):t&&t(e.code,e.msg)})),this.saveGameDataToCache(JSON.stringify(i))}}reviveBattle(e,t){let a={battleId:this._battleId,sign:e};this._reviveNumber=1,o.instance.post(r.CHAPTER_BATTLE_REVIVE,a).then((e=>{0==e.code?t&&t(e.code):t&&t(e.code,e?e.msg:"error")}))}startFightEnd(e,t,a,i){this.initBattle(e),o.instance.post(r.DUNGEON_FIGHTEND_START,{type:"fightend",sign:a}).then((a=>{0==a.code?(this._chapterId=e,this._battleId=a.data.battleId,h.gameWave=t,i(a.code)):i(a.code,a?a.msg:"error")}))}getFightContent(){let e={};return m.instance.getGridItemMapData().forEach(((t,a)=>{e[a]=t})),{timestamp:(new Date).getTime(),gameTime:_.instance.gameTime,chapterTime:_.instance.chapterTime,waveId:h.gameWave,hero:{heroId:g.instance.heroId,hpPer:g.instance.hpPer,damagePer:g.instance.damagePer,hp:g.instance.curHp,maxHp:g.instance.maxHp},coin:I.instance.coin,weapons:e,gridMapData:m.instance.getGridMapData(),curExp:this.curExp,expLevel:this.expLevel,monster:{killNum:_.instance.killNum,killBossNum:_.instance.killBossNum,waveKillNum:_.instance.waveKillNum,waveKillBossNum:_.instance.waveKillBossNum},shop:{freeRefreshNumber:I.instance.freeRefreshNumber,weapon2Number:I.instance.weapon2Number},skills:C.instance.getLearnSkillUpgrades()}}settleBattle(e){h.gameMode==d.NORMAL?this._settleBattle(e):h.gameMode==d.FIGHTEND&&this._settleFightEnd(e)}_settleBattle(e){let t=h.gameWave,a=this.getFightContent(),i={state:e,chapterId:this._chapterId,battleId:this._battleId,wave:t,battleInfo:a};o.instance.post(r.CHAPTER_BATTLE_SETTLE,i).then((e=>{if(0==e.code){let t=[];if(e.data.unlockSlot){let a=new S;a.type=0,a.itemId=e.data.unlockSlot,t.push(a)}if(e.data.unlockWeapons)for(let a=0;a<e.data.unlockWeapons.length;a++){let i=new S;i.type=100,i.itemId=e.data.unlockWeapons[a],t.push(i)}this._unlockItems=t,f.instance.getPlayerInfo(),u.instance.getChestData()}}))}_settleFightEnd(e){let t={state:e,battleId:this._battleId,battleInfo:JSON.stringify({monsterNum:_.instance.killNum,bossNum:_.instance.killBossNum})};o.instance.post(r.DUNGEON_FIGHTEND_SETTLE,t).then((e=>{0==e.code&&(f.instance.getPlayerInfo(),p.instance.getDungeonInfo())}))}raid(e,t){o.instance.post(r.CHAPTER_BATTLE_RAID,{chapterId:e}).then((e=>{0==e.code?(f.instance.chapterObj=e.data.chapterInfo,f.instance.getPlayerInfo(),t(e.data.rewards,e.data.levelupRewards)):c.instance.showToast(e.msg)}))}spendTicket(e){return!(f.instance.chapterObj.ticket<=0)&&(f.instance.subTicket(1),o.instance.post(r.CHAPTER_BATTLE_TICKET,{battleId:this._battleId,type:e}).then((e=>{0==e.code&&e.data.chapterInfo?f.instance.chapterObj=e.data.chapterInfo:c.instance.showToast(e.msg)})),!0)}watchAd(e,t){i.instance.showGameAd(n.BATTLE,e,((a,i)=>{t(a,i),e!=s.REVIVE&&0==a&&o.instance.post(r.CHAPTER_BATTLE_AD,{battleId:this._battleId,type:e,sign:i}).then((e=>{}))}))}getRandEquipMaterialByWeight(e){let t=e.split(","),a=0,i=0,n=0,s=[],r=[];t.forEach((e=>{let t=e.split("|");s.push(Number(t[0])),r.push(Number(t[1])),n+=Number(t[1])}));let l=Math.floor(Math.random()*n),o=0;return r.some(((e,t)=>{if(i=a+e,l>=a&&l<i)return o=t,!0;a=i})),s[o]}clear(){this._gameTime=0,this._reviveNumber=0,this._curExp=0,this._expLevel=0,this._reviveNumber=0,this._refreshSkillCount=10,this._selectAllSkillCount=3,this._maxSpeed=1,this._gameSpeed=1}loadFromCache(){this._dataInited||(l.instance.clearConfigDataToVersion(),this._dataInited=!0)}savePlayerDataToCache(e){l.instance.setConfigData(a.playerConfigId,e)}savePlaceDataToCache(e){l.instance.setConfigData(a.placeConfigId,e)}saveGameDataToCache(e){l.instance.setConfigData(a.gameConfigId,e)}saveWeaponDataToCache(e){l.instance.setConfigData(a.weaponConfigId,e)}clearCacheData(){l.instance.clearConfigData()}static get instance(){return this._instance||(this._instance=new T),this._instance}}e("GameData",T),T.waveCoinAdd=10,T.adGetCoinAdd=30,T.initRefreshSkillCount=10,T.initSelectAllSkillCount=3,T.initAdGetCoinNumber=3,T._instance=null;let v=e("GameState",function(e){return e.Pending="pending",e.Success="success",e.Failure="failure",e}({}));class S{constructor(){this.type=void 0,this.itemId=void 0}}e("UnlockItemObj",S),t._RF.pop()}}}));

System.register("chunks:///_virtual/GameDebugPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./OpenPopupManager.ts","./MonsterModel.ts","./CfgMgr.ts","./ResourcesUtil.ts","./MonsterItem.ts"],(function(e){var t,n,r,o,s,i,a,u,l,p,c,g,h,m,f,P,M;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){r=e.cclegacy,o=e.PageView,s=e.Node,i=e.Prefab,a=e._decorator,u=e.Component,l=e.instantiate,p=e.Sprite},function(e){c=e.Constants},function(e){g=e.OpenPopupManager},function(e){h=e.MonsterCfg,m=e.MonsterObj},function(e){f=e.CfgMgr},function(e){P=e.ResourcesUtil},function(e){M=e.MonsterItem}],execute:function(){var b,d,_,C,w,y,D,x,I,R,V;r._RF.push({},"502fcK/KVVPZ6zdptdfKy3N","GameDebugPopup",void 0);const{ccclass:z,property:v}=a;e("GameDebugPopup",(b=z("GameDebugPopup"),d=v(o),_=v(s),C=v(i),w=v(s),b((x=t((D=class extends u{constructor(){super(...arguments),n(this,"monsterPageView",x,this),n(this,"monsterParent",I,this),n(this,"monsterPrefab",R,this),n(this,"monsterNode",V,this),this._curMonster=1,this._maxMonster=0}show(){this._curMonster=1;let e=f.getCfgDataArray(new h);this._maxMonster=e.length;for(let t=0;t<e.length;t++){let n=e[t],r=new m;r.addAtk=0,r.addHp=0,r.hpUp=0,r.id=n.Id,r.level=1,this.loadMonsterRes(r,n)}}loadMonsterRes(e,t,n){let r=l(this.monsterPrefab),o=c.monsterIconPath+t.icon+"/spriteFrame";P.geSpriteFrame(o).then((n=>{r.getChildByName("icon").getComponent(p).spriteFrame=n,r.parent=this.monsterParent,r.getComponent(M).init(t,e)}))}onLeftBtn(){this._curMonster>1&&(this._curMonster--,this.monsterPageView.setCurrentPageIndex(this._curMonster-1))}onRightBtn(){this._curMonster<this._maxMonster&&(this._curMonster++,this.monsterPageView.setCurrentPageIndex(this._curMonster-1))}onCloseBtn(){g.instance.hide(c.PopupUI.GameDebugPopup)}}).prototype,"monsterPageView",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(D.prototype,"monsterParent",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(D.prototype,"monsterPrefab",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(D.prototype,"monsterNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=D))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/GameDefine.ts",["cc"],(function(e){var a;return{setters:[function(e){a=e.cclegacy}],execute:function(){a._RF.push({},"fd476d/4/RPHLXXF2HDHdbK","GameDefine",void 0);var t=function(e){return e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARNING=2]="WARNING",e[e.ERROR=3]="ERROR",e}(t||{});let n=e("GameMode",function(e){return e[e.NORMAL=1]="NORMAL",e[e.FIGHTEND=2]="FIGHTEND",e}({}));class i{}e("GameDefine",i),i.version="1.2.1",i.isDebug=!1,i.gameStart=!1,i.gameOver=!1,i.gameTouch=!1,i.chapterId=1,i.gameWave=1,i.gameMode=n.NORMAL,i.accessToken="",i.unfinishedBattle=!1,i.frameTime=.016,i.defaultFrameTime=.016,i.viewWidth=750,i.viewHeight=1334,i.battleMapDownPosy=200,i.ScreenShakeLevel=1,i.ScreenShakeCount=1,i.ScreenShakeInteval=.0333,i.DebugLevel=t.DEBUG,a._RF.pop()}}}));

System.register("chunks:///_virtual/GameEvent.ts",["cc"],(function(E){var _;return{setters:[function(E){_=E.cclegacy}],execute:function(){_._RF.push({},"d5d0dY/89NEZKp7PTxaM7GN","GameEvent",void 0);class e{}E("GameEvent",e),e.SHOW_LOADING="showLoading",e.HIDE_LOADING="hideLoading",e.SAVE_GAME_DATA="saveGameData",e.SCREEN_VIBRATOR="screenVibrator",e.GAME_CACHE="gameCache",e.GAME_TOUCH_START="gameTouchStart",e.GAME_TOUCH_MOVE="gameTouchMove",e.GAME_TOUCH_END="gameTouchEnd",e.GAME_TOUCH_CANCLE="gameTouchCancle",e.GAME_TAP_BTN="gameTapBtn",e.GAME_WIN_FAIL="gameWinFail",e.GAME_OVER="gameOver",e.GAME_BATTLE_NEXT_WAVE="gameBattleWave",e.GAME_BATTLE_START="gameBattleStart",e.GAME_CHANGE_COIN="gameChangeCoin",e.GAME_CHANGE_BAG="gameChangeBag",e.SET_BATTLE_BTN_STATUS="setBattleBtnStatus",e.ATTACK_SKILL_EFFECT="attackSkillEffect",e.ARMOR_SKILL_EFFECT="armorSkillEffect",e.INIT_BUILD_GRID_LIST="initBuildGridList",e.INIT_BUILD_WEAPON_POS="initBuildWeaponPos",e.WEAPON_MOVE="weaponMove",e.WEAPON_ICON_STATUS_INIT="weaponIconStatusInit",e.WEAPON_ICON_STATUS="weaponIconStatus",e.WEAPON_UPGRADE="weaponGrade",e.WEAPON_SHAKE="weaponShake",e.WEAPON_UPARROW="weaponUp",e.WEAPON_BUFF="weaponBuff",e.WEAPON_ICON_MERGE="weaponIconMerge",e.WEAPON_PlACE="weaponPlace",e.WEAPON_PlACE_FINISH="weaponPlaceFinish",e.WEAPON_REMOVE="weaponRemove",e.WEAPON_PROGRESS_BAR="weaponProgressBar",e.ADD_REMOVE_WEAPON_LIST="addRemoveWeaponList",e.ADD_REMOVE_GRID_ITEM="addRemoveGridItem",e.ADD_PRE_WEAPON_LIST="addPreWeaponList",e.WEAPON_REMOVE_REFRESH="weaponRemoveRefresh",e.HERO_HURT="heroHurt",e.HERO_RESTORE_HP="heroRestoreHp",e.HERO_RESTORE_HPPER="heroRestoreHpper",e.HERO_RESTORE_SHIELD="heroRestoreShield",e.INIT_HERO_SKILL="initHeroSkill",e.UPDATE_HERO_HP="updateHeroHp",e.INSERT_HERO_CIRCLE_OBJ="insertHeroCircleObj",e.INSERT_SKILL_RELEASE_CIRCLE_OBJ="insertSkillReleaseCircleObj",e.INSERT_QUARD_TREE_RECT_CIRCLE="insertQuardTreeRectCircle",e.DELETE_QUARD_TREE_OBJ="deleteQuardTreeObj",e.CHECK_QUARD_TREE_OBJ="checkQuardTreeObj",e.REFRESH_BOSS_HP="refreshBossHp",e.CREATE_DAMAGER_NUM="createDamageNum",e.SHOW_MONSTER_DIE_EFFECT="showMonsterDieEffect",e.CREATE_MONSTER_DEBUFF="createMonsterDebuff",e.CREATE_HERO_DEBUFF="createHeroDebuff",e.SHOW_HERO_HP="showHeroHp",e.SHOW_MONSTER_HP="showMonsterHp",e.SHOW_MONSTER_SHADOW="showMonsterShadow",e.SHOW_MONSTER_BUFF="showMonsterBuff",e.SHOW_BOSS_COMING="showBossComing",e.HERO_ANIM="heroAnim",e.UPDATE_BATTLE_TICKET="updateBattleTicket",e.CREATE_DROP_BOX="createDropBox",e.RESET_SELECT_BAG="resetSelectBag",e.REVIVE_SELECT_BAG="reviveSelectBag",e.UPDATE_MONSTER_PROGRESS="updateMonsterProgress",e.SHOW_HIDE_SKILL_LIST="showHideSkillList",e.SHOW_HIDE_PLACE_LIST="showHidePlaceList",e.PLACE_GRID_START="placeGridStart",e.PLACE_GRID_MOVE="placeGridMove",e.PLACE_GRID_END="placeGridEnd",e.CLEAR_AREA_DATA="clearAreaData",e.PLACE_GRID_FINISH="placeGridFinish",e.SHOW_BOTTOM_INFO="showBottomInfo",e.UPDATE_PLAYER_DATA="updatePlayerData",e.REMOVE_POPUP_WEAPON="removePopupWeapon",e.WEAPON_DOWN_UP="weaponDownUp",e.init_POPUP_WEAPON_STATUS="initPopupWeaponStatus",e.UPDATE_POPUP_UPGRADE_INFO="updatePopupUpgradeInfo",e.UPDATE_BAG_POPUP="updateBagPopup",e.UPDATE_SHOP_POPUP=void 0,e.UPDATE_SHOP_POPUP_ITEMS="updateShopPopupItems",e.UPDATE_SHOP_DAILY="updateShopDaily",e.UPDATE_SHOP_BOX="updateShopBox",e.UPDATE_SHOP_GOLD="updateShopGold",e.UPDATE_SHOP_DIAMOND="updateShopDiamond",e.UPDATE_SHOP_HERO="updateShopHero",e.UPDATE_WALLET_INFO="updateWalletInfo",e.UPDATE_WITHDRAW_INFO="updateWithdrawInfo",e.UPDATE_WALLET_BILL="updateWalletBill",e.CLOSE_SHOP_ITEM_POPUP="closeShopItemPopup",e.GET_SHOP_DATA="getShopData",e.UPDATE_DAILY_QUEST_POPUP=void 0,e.UPDATE_DAILY_POINT_ANIMATION="updatePointAnimation",e.UPDATE_EVENT_SIGNIN_POPUP=void 0,e.UPDATE_EVENT_DAILY_POPUP=void 0,e.UPDATE_FIRST_TOPUP_POPUP="updateFirstTopupPopup",e.GET_FIRST_TOPUP_DATA="getFirstTopupData",e.UPDATE_MONTHLY_PASS_POPUP="updateMonthlyPassPopup",e.GET_MONTHLY_PASS_DATA="getMontlyPassData",e.UPDATE_GROWTH_FUND_POPUP="updateGrowthFundPopup",e.GET_GROWTH_FUND_DATA="getGrowthFundData",e.GET_GOLD_REWARD="getGoldReward",e.GET_DIAMOND_REWARD="getDiamondReward",e.GET_ENERGY_REWARD="getEnergyReward",e.GET_EXP_REWARD="getExpReward",e.GET_TICKET_REWARD="getTicketReward",e.COST_ENERGY_BATTLE="costEnergyBattle",e.COST_ENERGY_FIGHTEND="costEnergyFightEnd",e.GET_FOOD_REWARD="getFoodReward",e.GET_STAR_REWARD="getStarReward",e.GET_BAG_REWARD="getBagReward",e.GET_WEAPON_REWARD="getWeaponReward",e.CHAPTER_GET_GOLD_REWARD="getChapterGoldReward",e.UPDATE_CHAPTER_STOP_ANIM="updateChapterStopAnim",e.UPDATE_CHAPTER_PLAY_ANIM="updateChapterPlayAnim",e.UPDATE_CHAPTER_CHEST="updateChatperChest",e.GUIDE_HIDE_FINGER="guideHideFinger",e.GUIDE_ACTION="guideAction",e.GUIDE_BATTLE_ACTION="guideBattleAction",e.UPDATE_INVITE_INFO="updateInviteInfo",e.UPDATE_INVITE_FRIEND_INFO="updateInviteFrenInfo",e.UPDATE_WAREHOUSE_DATA="updateWarehouseData",e.INIT_AVATAR_LIST="initAvatarList",e.UPDATE_USER_NAME="updatUsername",e.UPDATE_USER_COUNTRY=void 0,e.CANCEL_ACTIVE_AVATAR="cancelActiveAvatar",e.UPDATE_ACHIEVEMENT="ipdateAchievement",e.UPDATE_HERO_INFO="updateHerosInfo",e.UPGRADE_HERO="upgradehero",e.UPDATE_HERO_TAB="updateHeroTab",e.UPDATE_HERO_EQUIP_INFO="updateHeroEquipInfo",e.CHANGE_HERO_EQUIP_TAB="changeHeroEquipTab",e.EQUIP_CLICK_SELECT="equipClickSelect",e.EQUIP_CONFIRM_SELECT="equipConfirmSelect",e.EQUIP_CLEAR_SELECT="equipClearSelect",e.EQUIP_FORBID_SELECT="equipForbidSelect",e.EQUIP_SWITCH_TAB="equipSwitchTab",e.SELECT_LANGUAGE="selectLanguage",e.UPDTAE_DAILYSPIN_DATA="refreshRotaryInfo",e.UPDTAE_MAILBOX_DATA="refreshMailbox",e.UPDTAE_AVATAR_INFO="refreshAvatar",e.UPDTAE_TASK_DATA="updateTaskData",e.UPDTAE_RANK_CHAPTER_DATA="updateRankUserData",e.UPDTAE_RANK_COUNTRY_DATA="updateRankCountryData",e.UPDATE_DUNGEON_DATA="updateDungeonData",e.UPDATE_CASHHERO_WEAPONS="updatCashheroWeapon",e.UPDATE_CASH_POPUP="updateCashPopup",e.UPDATE_CASH_REWARD="updateCashReward",e.UPDATE_CASH_BILL_POPUP="updateCashBillPopup",e.UPDATE_CASHHERO_DATA="updateBagTowerData",e.UPDATE_CASHHERO_USER_DATA="updateCashheroUserData",e.CASHHERO_COST_ENERGY_BATTLE="costEnergyTowerBattle",e.CASHHERO_GET_CROWN_REWARD="cashheroGetCrownReward",e.UPDATE_CASHHERO_ISSUE_LAST="updateCashheroIssueLast",e.UPDATE_CASHHERO_ISSUE_HISTORY="updateCashheroIssueHistory",e.UPDATE_EARN_DATA="updateEarnData",e.UPDATE_EARN_HISTORY_DATA="updateEarnHistoryData",_._RF.pop()}}}));

System.register("chunks:///_virtual/GameFailPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./EventListener.ts","./OpenPopupManager.ts","./GameEvent.ts","./RewardItem.ts","./GameData.ts"],(function(e){var t,n,i,a,o,r,s,l,u,c,p,f,m,h,P,d,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,a=e.Prefab,o=e.Node,r=e.AnimationComponent,s=e._decorator,l=e.Component,u=e.Vec3,c=e.instantiate},function(e){p=e.Constants},function(e){f=e.EventListener},function(e){m=e.OpenPopupManager},function(e){h=e.GameEvent},function(e){P=e.RewardItem},function(e){d=e.GameData,b=e.GameState}],execute:function(){var w,y,g,G,v,A,C,F,R;i._RF.push({},"e80eeoTD8JB1r1yeuX5LqAA","GameFailPopup",void 0);const{ccclass:D,property:E}=s;e("GameFailPopup",(w=D("GameFailPopup"),y=E(a),g=E(o),G=E(r),w((C=t((A=class extends l{constructor(){super(...arguments),n(this,"rewardPrefab",C,this),n(this,"content",F,this),n(this,"failAnim",R,this)}show(e){this.failAnim.play(),this.setContent(),d.instance.settleBattle(b.Failure)}async setContent(){let e=d.instance.failRewards;this.content.removeAllChildren();let t=new u(0,0,0),n=e.length,i=n>=4?4:n;t.x=120*-(i-1)/2;for(let n=0;n<e.length;n++)await new Promise((a=>{this.scheduleOnce((()=>{const o=e[n];let r=c(this.rewardPrefab),s=new u(0,0,0),l=Math.floor(n/i),p=n%i;s.x=t.x+120*p,s.y=-120*l,r.parent=this.content,r.getComponent(P).init(o),r.setPosition(s),a(0)}),.1)}))}onReturnBtn(){m.instance.hide(p.PopupUI.GameFailPopup),f.emit(h.GAME_OVER)}}).prototype,"rewardPrefab",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(A.prototype,"content",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(A.prototype,"failAnim",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=A))||v));i._RF.pop()}}}));

System.register("chunks:///_virtual/GamePopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./EventListener.ts","./OpenPopupManager.ts","./ResourcesUtil.ts","./Util.ts","./GridData.ts","./MonsterData.ts","./SkillUpgradeData.ts","./WeaponData.ts","./GameEvent.ts","./SkillTypeItem.ts","./WeaponModel.ts","./CoinMode.ts","./HeroData.ts","./WeaponShopData.ts","./LanguageManager.ts","./GameData.ts","./GuideData.ts","./SpriteEx.ts","./PlayerData.ts","./AdManager.ts","./DamageStatItem.ts","./GameDefine.ts","./AdModel.ts","./GoldNumberItem.ts","./DiamondNumberItem.ts","./DungeonData.ts","./ChapterData.ts","./SkillModel.ts"],(function(e){var t,i,n,a,s,o,l,r,p,h,c,u,d,g,m,S,b,E,f,_,P,G,B,L,I,y,v,T,w,A,k,R,C,D,N,M,x,O,U,W,H,z,F,j,$,K,V,Y,X;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,a=e.ProgressBar,s=e.Label,o=e.Node,l=e._decorator,r=e.Component,p=e.Sprite,h=e.tween,c=e.UITransform,u=e.instantiate,d=e.v3,g=e.Color,m=e.Button,S=e.view,b=e.Animation},function(e){E=e.Constants},function(e){f=e.EventListener},function(e){_=e.OpenPopupManager,P=e.LayerType},function(e){G=e.ResourcesUtil},function(e){B=e.Util},function(e){L=e.GridData},function(e){I=e.MonsterData},function(e){y=e.SkillUpgradeData},function(e){v=e.WeaponData},function(e){T=e.GameEvent},function(e){w=e.SkillTypeItem},function(e){A=e.WeaponType},function(e){k=e.CoinObj},function(e){R=e.HeroData},function(e){C=e.WeaponShopData},function(e){D=e.LanguageManager},function(e){N=e.GameData},function(e){M=e.GuideData,x=e.GuideStep},function(e){O=e.SpriteEx},function(e){U=e.PlayerData},function(e){W=e.AdBattleType},function(e){H=e.DamageStatItem},function(e){z=e.GameDefine,F=e.GameMode},function(e){j=e.AdGameType},function(e){$=e.GoldNumberItem},function(e){K=e.DiamondNumberItem},function(e){V=e.DungeonData},function(e){Y=e.ChapterData},function(e){X=e.ReleaseSkillObj}],execute:function(){var Q,q,J,Z,ee,te,ie,ne,ae,se,oe,le,re,pe,he,ce,ue,de,ge,me,Se,be,Ee,fe,_e,Pe,Ge,Be,Le,Ie,ye,ve,Te,we,Ae,ke,Re,Ce,De,Ne,Me,xe,Oe,Ue,We,He,ze,Fe,je,$e,Ke,Ve,Ye,Xe,Qe,qe,Je,Ze,et,tt,it,nt,at;n._RF.push({},"dbe14r+mn5EhrfiOzy+Ys8V","GamePopup",void 0);const{ccclass:st,property:ot}=l;e("GamePopup",(Q=st("GamePopup"),q=ot(a),J=ot(s),Z=ot(s),ee=ot(s),te=ot(o),ie=ot(s),ne=ot(s),ae=ot(o),se=ot(o),oe=ot(o),le=ot(o),re=ot(o),pe=ot(o),he=ot(o),ce=ot(o),ue=ot(O),de=ot(o),ge=ot(o),me=ot(o),Se=ot(o),be=ot(s),Ee=ot(s),fe=ot(o),_e=ot(o),Pe=ot(o),Ge=ot(s),Be=ot(s),Le=ot(s),Ie=ot(s),ye=ot(o),Q((we=t((Te=class extends r{constructor(){super(...arguments),i(this,"expProgerssBar",we,this),i(this,"expLevel",Ae,this),i(this,"kill",ke,this),i(this,"gold",Re,this),i(this,"goldIcon",Ce,this),i(this,"wave",De,this),i(this,"bag",Ne,this),i(this,"bagIcon",Me,this),i(this,"damageStatButton",xe,this),i(this,"damgeStat",Oe,this),i(this,"buttonList",Ue,this),i(this,"battleButton",We,this),i(this,"freeButton",He,this),i(this,"refreshButton",ze,this),i(this,"weapon2RefreshBtn",Fe,this),i(this,"weapon2RefreshSpriteEx",je,this),i(this,"placeList",$e,this),i(this,"placeBtn",Ke,this),i(this,"pauseBtn",Ve,this),i(this,"skillTypeList",Ye,this),i(this,"coinLab",Xe,this),i(this,"weapon2Lab",Qe,this),i(this,"bossComing",qe,this),i(this,"guide",Je,this),i(this,"speedBtn",Ze,this),i(this,"speedLabel",et,this),i(this,"monsterLabel",tt,this),i(this,"goldLabel",it,this),i(this,"diamondLabel",nt,this),i(this,"skillBtn",at,this),this.weaponSkill=[],this._totalGold=0,this._totalBag=0,this._maxExp=100,this._showRefreshStatus=!0,this._nextStep=0,this._killMonster=0,this._killBoss=0,this._preWaveBagAmount=0,this._skillEnergy=0,this._skillMaxEnergy=0}show(){this._totalGold=C.instance.coin,this._maxExp=y.instance.getBattleLevelByLevel(N.instance.expLevel+1),this.weaponSkill=[],this.gold.string=`${this._totalGold}`,this.kill.string="0";let e=B.adapterScale();this.buttonList.setScale(e,e),this.expProgerssBar.node.active=!1,this.expProgerssBar.progress=0,this.expProgerssBar.node.setScale(e,e),this.skillBtn.active=!1,z.gameMode==F.NORMAL?(this.gold.node.parent.active=!0,this.bag.node.parent.active=!0,this.wave.node.parent.active=!0,this.goldLabel.node.parent.parent.active=!1,this.kill.node.parent.active=!0,this._preWaveBagAmount=Y.instance.getChapterBag(z.chapterId)):(this.gold.node.parent.active=!0,this.bag.node.parent.active=!0,this.wave.node.parent.active=!1,this.kill.node.parent.active=!1,this.goldLabel.node.parent.parent.active=!1),this.speedBtn.active=!1,this.speedLabel.string="x"+N.instance.gameSpeed,this.onSetWaveInfo(1),this.updateLevelInfo(),this.clearSkill(),this.setRefreshBtnStatus(),this.setBattleBtnStatus(),this.buttonList.active=!0,this.expProgerssBar.node.active=!1,this.bag.string="0",this.onCreateDamageStat();let t=U.instance.chapterObj.ticket;this.weapon2RefreshSpriteEx.index=t>0?1:0,M.instance.battleMode?(this.pauseBtn.active=!1,M.instance.curStep==x.GUIDE_STEP1_BATTLE_FIRST&&_.instance.showGameGuidePopup(null,(()=>{M.instance.curStep=1,_.instance.hide(E.PopupUI.GuidePopup),_.instance.showGameGuidePopup(this.guide)}),(()=>{}))):this.pauseBtn.active=!0,this._skillEnergy=R.instance.heroUpgradeSkillObj.energy,this._skillMaxEnergy=R.instance.heroUpgradeSkillObj.maxEnergy,this.onSetSkillEnerg()}setSkillInfo(){R.instance.activeSkillId>0&&(this.skillBtn.active=!0)}onSkillEnergy(e){this._skillEnergy>=this._skillMaxEnergy||(this._skillEnergy+=R.instance.heroUpgradeSkillObj.exp*(100+R.instance.heroUpgradeSkillObj.expPer)/100,this._skillEnergy>=this._skillMaxEnergy&&(this._skillEnergy=this._skillMaxEnergy),this.onSetSkillEnerg())}onSetSkillEnerg(){let e=this.skillBtn.getChildByName("bg").getComponent(p);h(e).to(.5,{fillRange:-this._skillEnergy/this._skillMaxEnergy},{easing:"sineIn"}).call((()=>{this._skillEnergy>=this._skillMaxEnergy&&(this.skillBtn.getChildByName("active").active=!0)})).start();let t=this.skillBtn.getChildByName("mask").getComponent(p);h(t).to(.5,{fillRange:1-this._skillEnergy/this._skillMaxEnergy},{easing:"sineIn"}).call((()=>{})).start()}onGameCoin(e){let t=this.goldIcon.getPosition(),i=e.num,n=e.pos,a=E.battlePath+"sliverItem";C.instance.coin=e.num;let s=this.goldIcon.parent.getComponent(c).convertToNodeSpaceAR(n);G.getPrefab(a).then((e=>{for(let n=0;n<i;n++){let i=u(e),n=2*(Math.random()-.5)*100+s.x,a=2*(Math.random()-.5)*50+s.y;i.parent=this.goldIcon.parent,i.setPosition(s),h(i).to(.2,{position:d(n,a,0)},{easing:"sineIn"}).delay(.2).to(.5,{position:t},{easing:"sineInOut"}).call((()=>{this._totalGold++,this.gold.string=`${this._totalGold}`,this.setRefreshBtnStatus(),i.destroy()})).start()}}))}onGameBag(e){let t=this.bagIcon.getPosition(),i=e.num,n=e.pos,a=E.battlePath+"bagItem";this._totalBag+=this._preWaveBagAmount;let s=this.bagIcon.parent.getComponent(c).convertToNodeSpaceAR(n);G.getPrefab(a).then((e=>{for(let n=0;n<i;n++){let i=u(e),n=2*(Math.random()-.5)*100+s.x,a=2*(Math.random()-.5)*50+s.y;i.parent=this.bagIcon.parent,i.setPosition(s),h(i).to(.2,{position:d(n,a,0)},{easing:"sineIn"}).delay(.2).to(.5,{position:t},{easing:"sineInOut"}).call((()=>{this.bag.string=Number(this._totalBag).toFixed(0),i.destroy()})).start()}}))}onSetWaveInfo(e){this.wave.string=D.instance.getLang("game.wave",[`${e}/${I.instance.maxWave}`])}onUpdateMonsterProgress(e,t,i,n){this.onSkillEnergy(e),this.kill.string=`${e}`,N.instance.curExp=N.instance.curExp+t;(()=>{if(z.gameMode==F.NORMAL){if(this._maxExp=y.instance.getBattleLevelByLevel(N.instance.expLevel+1),N.instance.curExp>=this._maxExp){N.instance.curExp=N.instance.curExp-this._maxExp,N.instance.expLevel=N.instance.expLevel+1,this.updateLevelInfo();let e=y.instance.getSelectSkillListByWeight(z.gameWave);return void(e.length?_.instance.showSkillSelectPopup(e,z.gameWave,n):n&&n())}n&&n()}else z.gameMode==F.FIGHTEND&&(this._killMonster!=e&&(this._killMonster=e,this.onFlyGold(V.instance.gold)),this._killBoss!=i&&(this._killBoss=i,this.onFlyDiamond(V.instance.diamond)),this.monsterLabel.string=`${e}`,this.goldLabel.string=`${B.formatNumber(e*V.instance.gold)}`,this.diamondLabel.string=`${B.formatNumber(i*V.instance.diamond)}`,n&&n())})(),this.updateLevelInfo()}updateLevelInfo(){this.expLevel.string=`${N.instance.expLevel}`,this.expProgerssBar.progress=N.instance.curExp/this._maxExp}setRefreshBtnStatus(){if(C.instance.freeRefreshNumber>0)this.freeButton.active=!0,this.refreshButton.active=!1;else{let e=C.instance.price;this.coinLab.string=e.toFixed(0),e>C.instance.coin?this.coinLab.color=(new g).fromHEX("#ff0000"):this.coinLab.color=(new g).fromHEX("#ffffff"),this.freeButton.active=!1,this.refreshButton.active=!0}let e=C.instance.weapon2Number;e>0?(this.weapon2Lab.string=D.instance.getLang("game.refresh")+"("+e+"/"+C.instance.totalWeapon2Number+")",this._showRefreshStatus&&(this.weapon2RefreshBtn.active=!0)):this.weapon2RefreshBtn.active=!1}setBattleBtnStatus(){let e=L.instance.getGridItemData(),t=!1;for(let i=0;i<e.length;i++){let n=e[i],a=v.instance.getWeaponByWid(n.wid);if(a.type==A.ATTACK_PHYSICAL||a.type==A.ATTACK_MAGIC){t=!0;break}}z.isDebug&&(t=!0),t?(this.battleButton.getComponent(m).interactable=!0,this.battleButton.getComponent(p).grayscale=!1):(this.battleButton.getComponent(m).interactable=!1,this.battleButton.getComponent(p).grayscale=!0)}onWeapon2RerollBtn(){if(0==U.instance.chapterObj.ticket)N.instance.watchAd(W.REFRESH_WEAPON,(e=>{0==e&&(this.weapon2RefreshBtn.active=!1,this._showRefreshStatus=!1,f.emit(T.WEAPON_REMOVE_REFRESH,!1,!0))}));else{N.instance.spendTicket(W.REFRESH_WEAPON)&&(this.weapon2RefreshBtn.active=!1,this._showRefreshStatus=!1,f.emit(T.WEAPON_REMOVE_REFRESH,!1,!0),f.emit(T.UPDATE_BATTLE_TICKET))}}onFreeRerollBtn(){M.instance.curStep==x.GUIDE_STEP3_REFRESH_WEAPON&&(_.instance.hide(E.PopupUI.GuidePopup),M.instance.curStep=1,_.instance.showGameGuidePopup(this.guide)),C.instance.freeRefreshNumber=1,this.setRefreshBtnStatus(),f.emit(T.WEAPON_REMOVE_REFRESH,!1)}onRerollBtn(){let e=C.instance.price;e>C.instance.coin?N.instance.adGetCoinNumber>0?_.instance.showAdTipsPopup(j.GAME_TYPE_COIN,null,((e,t)=>{if(e){N.instance.adGetCoinNumber=1;let e=new k;e.pos=t,e.num=N.adGetCoinAdd,f.emit(T.GAME_CHANGE_COIN,e)}})):_.instance.showToast("silver.insufficient"):(C.instance.coin=-e,this._totalGold=C.instance.coin,this.gold.string=`${this._totalGold}`,this.setRefreshBtnStatus(),f.emit(T.WEAPON_REMOVE_REFRESH,!1),M.instance.curStep==x.GUIDE_STEP14_REFRESH_WEAPON&&(_.instance.hide(E.PopupUI.GuidePopup),this.scheduleOnce((()=>{f.emit(T.GUIDE_BATTLE_ACTION)}),.5)))}onBattleBtn(){M.instance.curStep==x.GUIDE_STEP8_BATTLE&&_.instance.hide(E.PopupUI.GuidePopup),this.buttonList.active=!1,z.gameMode==F.NORMAL?(this.expProgerssBar.node.active=!0,this.gold.node.parent.active=!0,this.bag.node.parent.active=!0,this.setSkillInfo()):(this.gold.node.parent.active=!1,this.bag.node.parent.active=!1,this.wave.node.parent.active=!1,this.goldLabel.node.parent.parent.active=!0,this.monsterLabel.string="0",this.goldLabel.string="0",this.diamondLabel.string="0"),this.speedLabel.string="x"+N.instance.gameSpeed,this.speedBtn.active=!0,f.emit(T.GAME_BATTLE_START)}onCreateDamageStat(){let e=E.battlePath+"damageStatItem";this.damgeStat.removeAllChildren(),G.getPrefab(e).then((e=>{let t=u(e);t.setPosition(this.damageStatButton.getPosition()),t.getComponent(H).init(),t.parent=this.damgeStat}))}onDamageStatBtn(){this.damgeStat.children&&this.damgeStat.children[0]&&this.damgeStat.children[0].getComponent(H).show()}onDebugBtn(){_.instance.show(E.PopupUI.GameDebugPopup,null,P.MID,!1)}onHeroSkillBtn(){if(this._skillEnergy<this._skillMaxEnergy)return;this._skillEnergy=0,this.onSetSkillEnerg(),this.skillBtn.getChildByName("active").active=!1,this.skillBtn.getChildByName("bg").getComponent(p).fillRange=0,this.skillBtn.getChildByName("mask").getComponent(p).fillRange=1;let e=R.instance.activeSkillObj;if(!e)return;let t="hero";I.instance.setNearMonster(t,R.instance.heroPoint,1e3);let i=new X;i.skillObj=B.clone(e),i.skillKey=t,i.releaseTimes=0,R.instance.addQueueSkill(i)}onPlaceFinishBtn(){f.emit(T.PLACE_GRID_FINISH),this.placeList.active=!1,M.instance.curStep==x.GUIDE_STEP12_PLACE_GRID_DONE&&(_.instance.hide(E.PopupUI.GuidePopup),M.instance.curStep=1,_.instance.showGameGuidePopup(this.guide))}onShowHidePlaceList(e){this.buttonList.active=!e,this.placeList.active=e}onShowHideSkillList(e){this.skillBtn.active=!1,this.skillTypeList.active=e,this.buttonList.active=!e,this.expProgerssBar.node.active=e,this.speedBtn.active=e,this._showRefreshStatus=!0,0==e&&M.instance.curStep==x.GUIDE_STEP10_WAVE1_DONE?(M.instance.curStep=1,C.instance.coin+=5,this.setRefreshBtnStatus(),_.instance.showGameGuidePopup(this.guide)):this.setRefreshBtnStatus()}clearSkill(){for(let e=0;e<this.skillTypeList.children.length;e++){const t=this.skillTypeList.children[e];t.active&&t.destroy()}}initHeroSkill(){this.clearSkill(),y.instance.initUpgradeWeaponBuff(),R.instance.initHp();let e=S.getVisibleSize(),t=e.width>z.viewWidth?z.viewWidth:e.width;this.skillTypeList.active=!0,this.skillTypeList.getComponent(c).width=t;let i=this.skillTypeList.children[0],n=10,a=100;this.weaponSkill=[];let s=Array.from(L.instance.getGridItemMapData().values()),o=0;for(let e=0;e<s.length;e++){let t=s[e].wid;v.instance.getWeaponByWid(t).type==A.ECONOMY&&o++}let l=s.length-o,r=l>8?8:l,p=Math.floor((t-(r+1)*n)/r)>a?a:Math.floor((t-(r+1)*n)/r),h=p<a?p/a:1;i.setScale(h,h);let d=r%2==0?-(5+(r/2-1)*n+r/2*p-p/2):-Math.floor(r/2)*(n+p),g=l>8?50:0,m=0;for(let e=0;e<s.length;e++){const t=s[e];let a=t.wid,o=t.id,l=v.instance.getWeaponByWid(a);if(l.type==A.ECONOMY)continue;let r="skillTypeItem"+l.id,h=null,c=m>=8?d+m%8*(p+n):d+m*(p+n),S=m>=8?g-p-n:g;h=u(i),h.parent=this.skillTypeList,h.active=!0,h.setPosition(c,S),h.name=r,h.getComponent(w).init(o,l),this.weaponSkill.push(a),m++}}onPauseBtn(){_.instance.showPausePopup()}onSpeedBtn(){1==N.instance.gameSpeed?1==N.instance.maxSpeed?_.instance.showAdTipsPopup(j.GAME_TYPE_SPEEDUP,null,(e=>{e&&(N.instance.maxSpeed=2,N.instance.gameSpeed=2,this.speedLabel.string="x"+N.instance.gameSpeed.toString())})):(N.instance.gameSpeed=2,this.speedLabel.string="x"+N.instance.gameSpeed.toString()):(N.instance.gameSpeed=1,this.speedLabel.string="x"+N.instance.gameSpeed.toString())}onFlyGold(e){let t=this.goldLabel.getComponent(c).convertToWorldSpaceAR(d(0,0,0)),i=this.goldLabel.node.getComponent(c).convertToNodeSpaceAR(t);i.x+=2*(.5-Math.random())*5;let n=this.goldLabel.getComponent(c).convertToWorldSpaceAR(d(0,0,0)),a=E.commonPreabPath+"goldNumberItem",s=this.goldLabel.node.getComponent(c).convertToNodeSpaceAR(n);G.getPrefab(a).then((t=>{let n=u(t);n.getComponent($).init(e);let a=50*-Math.random()+s.x-50,o=10*Math.random()+s.y+20;n.parent=this.goldLabel.node,n.setPosition(s),n.setScale(0,0),this.scheduleOnce((()=>{h(n).to(.6,{position:d(a,o,0),scale:d(1,1,1)},{easing:"sineOut"}).delay(.2).to(1,{position:i,scale:d(0,0,0)},{easing:"sineInOut"}).call((()=>{n.destroy()})).start()}),.05)}))}onFlyDiamond(e){let t=this.diamondLabel.getComponent(c).convertToWorldSpaceAR(d(0,0,0)),i=this.diamondLabel.node.getComponent(c).convertToNodeSpaceAR(t);i.x+=2*(.5-Math.random())*5;let n=this.diamondLabel.getComponent(c).convertToWorldSpaceAR(d(0,0,0)),a=E.commonPreabPath+"diamondNumberItem",s=this.diamondLabel.node.getComponent(c).convertToNodeSpaceAR(n);G.getPrefab(a).then((t=>{let n=u(t);n.getComponent(K).init(e);let a=50*-Math.random()+s.x-50,o=10*Math.random()+s.y+20;n.parent=this.diamondLabel.node,n.setPosition(s),n.setScale(0,0),this.scheduleOnce((()=>{h(n).to(.6,{position:d(a,o,0),scale:d(1,1,1)},{easing:"sineOut"}).delay(.2).to(1,{position:i,scale:d(0,0,0)},{easing:"sineInOut"}).call((()=>{n.destroy()})).start()}),.05)}))}onCreateBossComing(){this.bossComing.active=!0;let e=E.battlePath+"boss";G.getPrefab(e).then((e=>{let t=u(e);t.parent=this.bossComing.parent;let i=t.getComponent(b);i.play("bosscoming"),i.once(b.EventType.FINISHED,(()=>{t.destroy()}),this)}))}onGuideEvent(e){M.instance.curStep==x.GUIDE_STEP2_DRAG_WEAPON?(_.instance.hide(E.PopupUI.GuidePopup),M.instance.curStep=1,_.instance.showGameGuidePopup(this.freeButton)):M.instance.curStep==x.GUIDE_STEP4_MERGE_WEAPON?(_.instance.hide(E.PopupUI.GuidePopup),M.instance.curStep=1,_.instance.showGameGuidePopup(this.guide)):M.instance.curStep==x.GUIDE_STEP5_DRAG_WEAPON?(_.instance.hide(E.PopupUI.GuidePopup),M.instance.curStep=1,_.instance.showGameGuidePopup(e,(()=>{this._nextStep==x.GUIDE_STEP6_PURSE?(_.instance.hide(E.PopupUI.GuidePopup),M.instance.curStep=2,_.instance.showGameGuidePopup(this.battleButton)):(M.instance.curStep=1,_.instance.hide(E.PopupUI.GuidePopup),_.instance.showGameGuidePopup(this.guide))}))):M.instance.curStep==x.GUIDE_STEP7_DRAG_WEAPON?(_.instance.hide(E.PopupUI.GuidePopup),M.instance.curStep=1,_.instance.showGameGuidePopup(this.battleButton)):M.instance.curStep==x.GUIDE_STEP5_DRAG_WEAPON||M.instance.curStep==x.GUIDE_STEP6_PURSE?this._nextStep=x.GUIDE_STEP6_PURSE:M.instance.curStep==x.GUIDE_STEP11_PLACE_GRID?(_.instance.hide(E.PopupUI.GuidePopup),M.instance.curStep=1,_.instance.showGameGuidePopup(this.placeBtn)):M.instance.curStep==x.GUIDE_STEP9_SELECT_SKILL?(_.instance.hide(E.PopupUI.GuidePopup),M.instance.curStep=1,_.instance.showGameGuidePopup(null,(()=>{_.instance.hide(E.PopupUI.GuidePopup),f.emit(T.RESET_SELECT_BAG)}))):M.instance.curStep==x.GUIDE_STEP13_DRAG_WEAPON?(_.instance.hide(E.PopupUI.GuidePopup),M.instance.curStep=1,_.instance.showGameGuidePopup(this.refreshButton)):M.instance.curStep==x.GUIDE_STEP14_REFRESH_WEAPON&&(_.instance.hide(E.PopupUI.GuidePopup),M.instance.curStep=1,_.instance.showGameGuidePopup())}onEnable(){f.on(T.GAME_CHANGE_COIN,this.onGameCoin,this),f.on(T.GAME_CHANGE_BAG,this.onGameBag,this),f.on(T.GAME_BATTLE_NEXT_WAVE,this.onSetWaveInfo,this),f.on(T.UPDATE_MONSTER_PROGRESS,this.onUpdateMonsterProgress,this),f.on(T.SET_BATTLE_BTN_STATUS,this.setBattleBtnStatus,this),f.on(T.INIT_HERO_SKILL,this.initHeroSkill,this),f.on(T.SHOW_HIDE_SKILL_LIST,this.onShowHideSkillList,this),f.on(T.SHOW_HIDE_PLACE_LIST,this.onShowHidePlaceList,this),f.on(T.SHOW_BOSS_COMING,this.onCreateBossComing,this),f.on(T.GUIDE_BATTLE_ACTION,this.onGuideEvent,this)}onDisable(){f.off(T.GAME_CHANGE_COIN,this.onGameCoin,this),f.off(T.GAME_CHANGE_BAG,this.onGameBag,this),f.off(T.GAME_BATTLE_NEXT_WAVE,this.onSetWaveInfo,this),f.off(T.UPDATE_MONSTER_PROGRESS,this.onUpdateMonsterProgress,this),f.off(T.SET_BATTLE_BTN_STATUS,this.setBattleBtnStatus,this),f.off(T.INIT_HERO_SKILL,this.initHeroSkill,this),f.off(T.SHOW_HIDE_SKILL_LIST,this.onShowHideSkillList,this),f.off(T.SHOW_HIDE_PLACE_LIST,this.onShowHidePlaceList,this),f.off(T.SHOW_BOSS_COMING,this.onCreateBossComing,this),f.off(T.GUIDE_BATTLE_ACTION,this.onGuideEvent,this)}onTapBtn(){f.emit(T.GAME_TAP_BTN)}}).prototype,"expProgerssBar",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ae=t(Te.prototype,"expLevel",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ke=t(Te.prototype,"kill",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Re=t(Te.prototype,"gold",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ce=t(Te.prototype,"goldIcon",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),De=t(Te.prototype,"wave",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ne=t(Te.prototype,"bag",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Me=t(Te.prototype,"bagIcon",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xe=t(Te.prototype,"damageStatButton",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Oe=t(Te.prototype,"damgeStat",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ue=t(Te.prototype,"buttonList",[le],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),We=t(Te.prototype,"battleButton",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),He=t(Te.prototype,"freeButton",[pe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ze=t(Te.prototype,"refreshButton",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fe=t(Te.prototype,"weapon2RefreshBtn",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),je=t(Te.prototype,"weapon2RefreshSpriteEx",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$e=t(Te.prototype,"placeList",[de],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ke=t(Te.prototype,"placeBtn",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ve=t(Te.prototype,"pauseBtn",[me],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ye=t(Te.prototype,"skillTypeList",[Se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Xe=t(Te.prototype,"coinLab",[be],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Qe=t(Te.prototype,"weapon2Lab",[Ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),qe=t(Te.prototype,"bossComing",[fe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Je=t(Te.prototype,"guide",[_e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ze=t(Te.prototype,"speedBtn",[Pe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),et=t(Te.prototype,"speedLabel",[Ge],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=t(Te.prototype,"monsterLabel",[Be],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),it=t(Te.prototype,"goldLabel",[Le],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=t(Te.prototype,"diamondLabel",[Ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),at=t(Te.prototype,"skillBtn",[ye],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ve=Te))||ve));n._RF.pop()}}}));

System.register("chunks:///_virtual/GameRevivePopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./OpenPopupManager.ts","./EventListener.ts","./GameEvent.ts","./GameData.ts","./PlayerData.ts","./SpriteEx.ts","./AdManager.ts","./LanguageManager.ts"],(function(e){var t,i,n,s,a,o,r,l,c,u,p,h,m,v,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,s=e.Label,a=e._decorator,o=e.Component},function(e){r=e.Constants},function(e){l=e.OpenPopupManager},function(e){c=e.EventListener},function(e){u=e.GameEvent},function(e){p=e.GameData},function(e){h=e.PlayerData},function(e){m=e.SpriteEx},function(e){v=e.AdBattleType},function(e){g=e.LanguageManager}],execute:function(){var b,_,d,f,P,E,G,R,C;n._RF.push({},"d29e8LbbZNKj4WNeXlhIYxe","GameRevivePopup",void 0);const{ccclass:x,property:y}=a;e("GameRevivePopup",(b=x("GameRevivePopup"),_=y(s),d=y(m),f=y(s),b((G=t((E=class extends o{constructor(){super(...arguments),i(this,"time",G,this),i(this,"icon",R,this),i(this,"lbText",C,this),this._time=10}show(){let e=h.instance.chapterObj.revivalCoin;e>0?(this.icon.index=0,this.lbText.string="1/"+e):(this.icon.index=1,this.lbText.string=g.instance.getLang("game.revive")),this._time=10,this.time.string=`${this._time}`,this.schedule((()=>{this._time--,this._time<=0&&(this._time=0),this.time.string=`${this._time}`,this._time<=0&&this.onCloseBtn()}),1)}onReviveBtn(){this.unscheduleAllCallbacks(),h.instance.chapterObj.revivalCoin>0?(p.instance.reviveBattle(""),l.instance.hide(r.PopupUI.GameRevivePopup),c.emit(u.REVIVE_SELECT_BAG)):p.instance.watchAd(v.REVIVE,((e,t)=>{0==e?(p.instance.reviveBattle(t),l.instance.hide(r.PopupUI.GameRevivePopup),c.emit(u.REVIVE_SELECT_BAG)):this.schedule((()=>{this._time--,this._time<=0&&(this._time=0),this.time.string=`${this._time}`,this._time<=0&&this.onCloseBtn()}),1)}))}onCloseBtn(){this.unscheduleAllCallbacks(),l.instance.hide(r.PopupUI.GameRevivePopup),l.instance.showGameFailPopup()}}).prototype,"time",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(E.prototype,"icon",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(E.prototype,"lbText",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=E))||P));n._RF.pop()}}}));

System.register("chunks:///_virtual/GameWinPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./EventListener.ts","./OpenPopupManager.ts","./GameEvent.ts","./RewardItem.ts","./GameData.ts","./GameDefine.ts","./RewardModel.ts","./ItemModel.ts","./MonsterData.ts","./PlayerData.ts","./DungeonData.ts"],(function(e){var t,n,i,a,o,s,r,l,c,u,p,m,f,d,h,w,P,D,b,g,G,y,M;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,a=e.Prefab,o=e.Node,s=e.AnimationComponent,r=e._decorator,l=e.Component,c=e.Vec3,u=e.instantiate},function(e){p=e.Constants},function(e){m=e.EventListener},function(e){f=e.OpenPopupManager},function(e){d=e.GameEvent},function(e){h=e.RewardItem},function(e){w=e.GameData},function(e){P=e.GameDefine,D=e.GameMode},function(e){b=e.RewardObj},function(e){g=e.ItemIdType},function(e){G=e.MonsterData},function(e){y=e.PlayerData},function(e){M=e.DungeonData}],execute:function(){var R,v,I,A,C,k,E,N,W;i._RF.push({},"70d47ynHkRBkLURG7tAnrK+","GameWinPopup",void 0);const{ccclass:B,property:O}=r;e("GameWinPopup",(R=B("GameWinPopup"),v=O(a),I=O(o),A=O(s),R((E=t((k=class extends l{constructor(){super(...arguments),n(this,"rewardPrefab",E,this),n(this,"content",N,this),n(this,"winAnim",W,this)}show(e){w.instance.settleBattle(e),P.gameMode==D.NORMAL&&y.instance.battleWithWin(),this.winAnim.play(),this.setContent()}async setContent(){let e=[];if(P.gameMode==D.FIGHTEND){if(e=[],G.instance.killNum>0){let t=new b;t.itemId=g.Gold,t.count=Math.floor(G.instance.killNum*M.instance.gold),e.push(t)}if(G.instance.killBossNum>0){let t=new b;t.itemId=g.Diamond,t.count=G.instance.killBossNum*M.instance.diamond,e.push(t)}}else e=w.instance.winRewards;let t=e;this.content.removeAllChildren();let n=new c(0,0,0),i=t.length,a=i>=4?4:i;n.x=120*-(a-1)/2;for(let e=0;e<t.length;e++)await new Promise((i=>{this.scheduleOnce((()=>{const o=t[e];let s=u(this.rewardPrefab),r=new c(0,0,0),l=Math.floor(e/a),p=e%a;r.x=n.x+120*p,r.y=-120*l,s.parent=this.content,s.getComponent(h).init(o),s.setPosition(r),i(0)}),.1)}))}onReturnBtn(){f.instance.hide(p.PopupUI.GameWinPopup),m.emit(d.GAME_OVER)}}).prototype,"rewardPrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(k.prototype,"content",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(k.prototype,"winAnim",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=k))||C));i._RF.pop()}}}));

System.register("chunks:///_virtual/GoldNumberItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Util.ts"],(function(t){var e,r,o,n,i,c,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.initializerDefineProperty},function(t){o=t.cclegacy,n=t.Label,i=t._decorator,c=t.Component},function(t){u=t.Util}],execute:function(){var l,s,a,p,d;o._RF.push({},"96ddd1lONdJ5aKaWoK8ckaT","GoldNumberItem",void 0);const{ccclass:m,property:b}=i;t("GoldNumberItem",(l=m("GoldNumberItem"),s=b(n),l((d=e((p=class extends c{constructor(){super(...arguments),r(this,"count",d,this)}init(t){this.count.string="+"+u.formatNumber(t)}}).prototype,"count",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),a=p))||a));o._RF.pop()}}}));

System.register("chunks:///_virtual/GridBgItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GridData.ts"],(function(e){var t,i,r,n,s,o,a,c,d,l,p,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){r=e.cclegacy,n=e.Node,s=e._decorator,o=e.Component,a=e.UITransform,c=e.UIOpacity,d=e.Sprite,l=e.Color},function(e){p=e.GridObj,g=e.GridData}],execute:function(){var u,h,_,f,y;r._RF.push({},"9bfcbt9VBpJXrTYdzarVMdh","GridBgItem",void 0);const{ccclass:m,property:b}=s;e("GridBgItem",(u=m("GridBgItem"),h=b(n),u((y=t((f=class extends o{constructor(){super(...arguments),i(this,"tipsNode",y,this),this._gridObj=new p,this._gridValue="0",this._placeAreaKey=""}get placeAreaKey(){return this._placeAreaKey}set placeAreaKey(e){this._placeAreaKey=e}get gridObj(){return this._gridObj}get gridValue(){return this._gridValue}set gridValue(e){this._gridValue=e}init(e,t,i){this.node.getComponent(a).setContentSize(g.instance.gridWidth,g.instance.gridHeight),this.tipsNode.getComponent(a).setContentSize(g.instance.gridWidth,g.instance.gridHeight),this._gridObj.row=e,this._gridObj.col=t,this._gridValue=i,this.node.getComponent(c).opacity=i?255:0}setTipsGreen(){this.tipsNode.getComponent(d).color=l.GREEN}setTipsDefault(){this.tipsNode.getComponent(d).color=(new l).fromHEX("ffffff")}delPlaceAreaKey(e){this._placeAreaKey==e&&(this._placeAreaKey="",this._gridValue&&(this._gridValue="0"))}}).prototype,"tipsNode",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=f))||_));r._RF.pop()}}}));

System.register("chunks:///_virtual/GridData.ts",["cc","./Util.ts","./WeaponData.ts","./CfgMgr.ts","./BagModel.ts","./WeaponShopData.ts","./GameDefine.ts"],(function(t){var i,e,r,a,d,g,s,h,n,o;return{setters:[function(t){i=t.cclegacy,e=t.Size,r=t.Vec3,a=t.Rect},function(t){d=t.Util},function(t){g=t.WeaponData},function(t){s=t.CfgMgr},function(t){h=t.BagCfg},function(t){n=t.WeaponShopData},function(t){o=t.GameDefine}],execute:function(){i._RF.push({},"fe537oi94JPVo69/FDHGzhg","GridData",void 0);class l{constructor(){this._curGrid=0,this._gridMapData=[["0","0","0"],["0","0","0"],["0","0","0"]],this._nearbyGrid=[[-1,0],[1,0],[0,-1],[0,1]],this._bagCfg=null,this._gridRowLen=3,this._gridColLen=3,this._gridWidth=94,this._gredHeight=94,this._space=10,this._gridItemData=new Map,this._curWeaponTildeIndex=[],this._gridEditMode=!1}get gridEditMode(){return this._gridEditMode}set gridEditMode(t){this._gridEditMode=t}get iconScale(){return this._bagCfg.picture}get space(){return this._space}get bagCfg(){return this._bagCfg}get curWeaponTildeIndex(){return this._curWeaponTildeIndex}set curWeaponTildeIndex(t){this._curWeaponTildeIndex=t}get gridWidth(){return this._gridWidth}get gridHeight(){return this._gredHeight}init(){this._curGrid=o.gameMode,this.initGridMapData(),this.initCarryWeapons(),this.initGridItemData()}initGridMapData(){this._bagCfg=d.clone(s.getDataById(new h,this._curGrid));let t=this._bagCfg.private_gridLen.split("_");this._gridMapData=this._bagCfg.private_grid,this._gridWidth=this._bagCfg.private_gridWidth,this._gredHeight=this._bagCfg.private_gredHeight,this._space=this._bagCfg.private_space,this._gridColLen=Number(t[0]),this._gridRowLen=Number(t[1])}initCarryWeapons(){let t=n.instance.getInitCarryWeapon();for(let i=0;i<t.length;i++)this.addWeaponItem(t[i])}initGridItemData(){this._gridItemData.forEach(((t,i)=>{let e=t.data;for(let t=0;t<e.length;t++){const r=e[t];this._gridMapData[r.row][r.col]=i}}))}addWeaponItem(t){let i=g.instance.getWeaponByWid(t),e=new _;e.id=d.getUuid(10),e.gid=this._curGrid,e.wid=t,e.level=i.level;let r=i.points,a=[];for(let t=0;t<r.length;t++){const i=r[t];for(let e=0;e<i.length;e++){let i=new c;i.row=t,i.col=e,a.push(i)}}e.data=a,this._gridItemData.set(e.id,e)}setRebuildGridMapData(t){let i=t.length,e=t[0].length;this._gridMapData=t,this._bagCfg.private_gridLen=i+"_"+e,this._gridColLen=i,this._gridRowLen=e,this._gridItemData.forEach(((i,e)=>{let r=[];for(let i=0;i<t.length;i++){const a=t[i];for(let t=0;t<a.length;t++){if(a[t]==e){let e=new c;e.row=i,e.col=t,r.push(e)}}}i.data=r}))}getMaxGridMapSize(){let t=new e,i=this.bagCfg,r=i.private_gridWidth,a=i.private_gredHeight,d=i.private_space,g=i.max_gridLen.split("_"),s=Number(g[0]),h=Number(g[1]),n=h*r+(h-1)*d,o=s*a+(s-1)*d;return t.width=n,t.height=o,t}getGridMapSize(){let t=new e,i=this.bagCfg,r=i.private_gridWidth,a=i.private_gredHeight,d=i.private_space,g=i.private_gridLen.split("_"),s=Number(g[1]),h=Number(g[0]),n=s*r+(s-1)*d,o=h*a+(h-1)*d;return t.width=n,t.height=o,t}getGridSizeByRowCol(t,i){let r=new e,a=this.bagCfg,d=a.private_gridWidth,g=a.private_gredHeight,s=a.private_space,h=t*d+(t-1)*s,n=i*g+(i-1)*s;return r.width=h,r.height=n,r}getGridSize(){let t=new e,i=this.bagCfg.private_gridWidth,r=this.bagCfg.private_gredHeight;return t.width=i,t.height=r,t}getGridMapData(){return this._gridMapData}getGridItemData(){return Array.from(this._gridItemData.values())}getGridItemDataKeys(){return Array.from(this._gridItemData.keys())}getGridItemMapData(){return this._gridItemData}getGridItemWid(t){if(this._gridItemData.has(t)){return this._gridItemData.get(t).wid}return 0}getItemPosByTiledObj(t){let i=new c;i.row=100,i.col=100;let e=new c;e.row=0,e.col=0;for(let r in t)i.row=t[r].row<i.row?t[r].row:i.row,i.col=t[r].col<i.col?t[r].col:i.col,e.row=t[r].row>e.row?t[r].row:e.row,e.col=t[r].col>e.col?t[r].col:e.col;let a=this.getGridPosByTiled(i),d=this.getGridPosByTiled(e),g=new r(0,0,0);return g.x=(a.x+d.x)/2,g.y=(a.y+d.y)/2,g}getGridPosByTiled(t){let i=t.col*this._gridWidth+this._gridWidth/2+t.col*this._space,e=t.row*this._gredHeight+this._gredHeight/2+t.row*this._space;return new r(i,-e)}getNearbyGridIndexByTiled(t){let i=[],e=[];for(let i=0;i<t.length;i++)e.push(this.getGridIndexByTiled(t[i].row,t[i].col));for(let r=0;r<t.length;r++)this._nearbyGrid.forEach((a=>{let d=a[0]+t[r].row,g=a[1]+t[r].col;if(d>=0&&d<this._gridColLen&&g>=0&&g<this._gridRowLen){let t=this.getGridIndexByTiled(d,g);-1==i.indexOf(t)&&-1==e.indexOf(t)&&i.push(t)}}));return i}getGridIndexByTiled(t,i){return t*this._gridRowLen+i}getGridTiledByIndex(t){let i=Math.floor(t/this._gridRowLen),e=t%this._gridRowLen,r=new c;return r.row=i,r.col=e,r}deletGridDataByWeaponId(t){if(this._gridItemData.has(t)){let i=this._gridItemData.get(t).data;for(let t=0;t<i.length;t++){const e=i[t];this._gridMapData[e.row][e.col]="0"}this._gridItemData.delete(t)}}addGridDataByWeaponId(t,i,e,r){let a=new _;a.id=r,a.gid=this._curGrid,a.wid=i,a.level=e,a.data=t,this._gridItemData.set(a.id,a);for(let i=0;i<t.length;i++){const e=t[i];this._gridMapData[e.row][e.col]=a.id}}updateGridItemData(t,i){if(this._gridItemData.has(t)){this._gridItemData.get(t).wid=i}}getTiledByPos(t){let i=t.x>0?Math.floor((t.x-this._gridWidth/2)/(this._gridWidth+this._space)):3,e=t.y<0?Math.floor((Math.abs(t.y)-this._gredHeight/2)/(this._gredHeight+this._space)):3,r=new c;return r.row=e,r.col=i,r}getTiledIndexByPos(t){let i=this.getTiledByPos(t);return i.col<0||i.row<0||i.col>this._gridRowLen-1||i.row>this._gridColLen-1?-1:this.getGridIndexByTiled(i.row,i.col)}checkSameWeapoIdByKey(t,i){if(this._gridItemData.has(t)){if(i==this._gridItemData.get(t).wid)return!0}return!1}checkPointinGrid(t,i){let e=!1;for(let r=0;r<i.length;r++){const d=i[r];let g=this.getGridPosByTiled(d);if(new a(g.x-this._gridWidth/2,g.y-this.gridHeight/2,this.gridWidth,this.gridHeight).contains(t)){e=!0;break}}return e}getGridBgIndexByTiled(t,i){let e=this._bagCfg.max_gridLen.split("_");return t*Number(e[1])+i}clear(){this._gridItemData.clear(),this._curWeaponTildeIndex=[],this._bagCfg=null,this._gridEditMode=!1}static get instance(){return this._instance||(this._instance=new l),this._instance}}t("GridData",l),l._instance=null;class _{constructor(){this.id=void 0,this.wid=void 0,this.level=void 0,this.gid=void 0,this.data=void 0}}t("GridWeaponObj",_);class c{constructor(){this.row=void 0,this.col=void 0}}t("GridObj",c),i._RF.pop()}}}));

System.register("chunks:///_virtual/GridItem.ts",["cc","./GridData.ts"],(function(t){var e,o,r,n,i,s,d,c,a;return{setters:[function(t){e=t.cclegacy,o=t.Component,r=t.UITransform,n=t.UIOpacity,i=t.Sprite,s=t.Color,d=t._decorator},function(t){c=t.GridObj,a=t.GridData}],execute:function(){var g;e._RF.push({},"56899LXxFdFn6T5DajIIE2O","GridItem",void 0);const{ccclass:u,property:h}=d;t("GridItem",u("GridItem")(g=class extends o{constructor(){super(...arguments),this._gridObj=new c,this._gridValue="0"}get gridObj(){return this._gridObj}get gridValue(){return this._gridValue}init(t,e,o){this.node.getComponent(r).setContentSize(a.instance.gridWidth,a.instance.gridHeight),this._gridObj.row=t,this._gridObj.col=e,this._gridValue=o,this.node.getComponent(n).opacity=o?255:0}setDeafult(){this.node.getComponent(i).color=(new s).fromHEX("FFFFFF")}setGreen(){this.node.getComponent(i).color=(new s).fromHEX("7ed263")}setRed(){this.node.getComponent(i).color=(new s).fromHEX("dd6662")}setYellow(){this.node.getComponent(i).color=(new s).fromHEX("dbc464")}})||g);e._RF.pop()}}}));

System.register("chunks:///_virtual/GridManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GridData.ts","./EventListener.ts","./GameEvent.ts","./GridItem.ts","./WeaponData.ts","./GridBgItem.ts","./SkillUpgradeData.ts","./HeroData.ts","./WeaponModel.ts"],(function(e){var t,i,n,r,o,l,a,s,d,c,p,g,u,f,h,G,b,m,I,_,O;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,r=e.Node,o=e.Prefab,l=e._decorator,a=e.Component,s=e.instantiate,d=e.Rect,c=e.v2,p=e.UITransform},function(e){g=e.GridData,u=e.GridObj},function(e){f=e.EventListener},function(e){h=e.GameEvent},function(e){G=e.GridItem},function(e){b=e.WeaponData},function(e){m=e.GridBgItem},function(e){I=e.SkillUpgradeData},function(e){_=e.HeroData},function(e){O=e.WeaponType}],execute:function(){var y,P,W,w,A,D,E,L,S,T,N;n._RF.push({},"40e3bgPqJ9JEqCu6pQ/roWG","GridManager",void 0);const{ccclass:C,property:B}=l;e("GridManager",(y=C("GridManager"),P=B(r),W=B(r),w=B(o),A=B(o),y((L=t((E=class extends a{constructor(){super(...arguments),i(this,"allGridList",L,this),i(this,"gridList",S,this),i(this,"gridPrefab",T,this),i(this,"gridBgPrefab",N,this)}init(){g.instance.init(),this.initGridList(),this.initAllGridList()}initAllGridList(){let e=g.instance.bagCfg.max_grid;for(let t=0;t<e.length;t++){const i=e[t];for(let e=0;e<i.length;e++){const n=i[e];let r=s(this.gridBgPrefab);r.parent=this.allGridList,r.getComponent(m).init(t,e,n)}}}initGridList(){this.gridList.removeAllChildren();let e=g.instance.getGridMapData();for(let t=0;t<e.length;t++){const i=e[t];for(let e=0;e<i.length;e++){const n=i[e];let r=s(this.gridPrefab);r.parent=this.gridList,r.getComponent(G).init(t,e,n)}}}initGridStatus(){let e=this.gridList.children;for(let t=0;t<e.length;t++){e[t].getComponent(G).setDeafult()}}cherGridStatus(e,t){let i=t.weaponObj.id,n=[],r=this.gridList.children,o=g.instance.getGridMapData();for(let t=0;t<e.length;t++){const i=e[t];let o=-1;for(let e=0;e<r.length;e++){const t=r[e];let n=t.getComponent(G).gridObj,l=t.getComponent(G).gridValue,a=g.instance.getGridPosByTiled(n),s=g.instance.gridWidth,p=g.instance.gridHeight;if(new d(a.x-s/2,a.y-p/2,s,p).contains(c(i.x,i.y))&&l){o=e;break}}n.push(o)}g.instance.curWeaponTildeIndex=n;let l=[];if(n.includes(-1))for(let e=0;e<r.length;e++){const t=r[e];if(n.includes(e)){let i=g.instance.getGridTiledByIndex(e);if(o[i.row][i.col]){t.getComponent(G).setRed();let e=o[i.row][i.col];l.includes(e)||l.push(e)}else t.getComponent(G).setYellow()}else t.getComponent(G).setDeafult()}else{let e=0,a="";for(let t=0;t<r.length;t++){const s=r[t];if(n.includes(t)){s.getComponent(G).setGreen();let n=g.instance.getGridTiledByIndex(t);a=o[n.row][n.col],g.instance.checkSameWeapoIdByKey(a,i)&&e++,l.includes(a)||l.push(a)}else s.getComponent(G).setDeafult()}if(e==n.length){let e=t.weaponObj.level,i=t.weaponObj.weaponId;b.instance.checkWeaponByLevel(e+1,i)&&(l=[],t.setIconYellow(),f.emit(h.WEAPON_ICON_STATUS,a,!0))}}for(let e=0;e<l.length;e++){const t=l[e];f.emit(h.WEAPON_SHAKE,t)}if(t.weaponObj.type==O.ARMOR_HP||t.weaponObj.type==O.ARMOR_HPPER||t.weaponObj.type==O.ARMOR_SHIELD){let e=I.instance.getWeaponBuffSkillIds(t.weaponObj.weaponId);if(e.length>0){let t=[];if(!n.includes(-1)){let i=[];for(let e=0;e<n.length;e++)i.push(g.instance.getGridTiledByIndex(n[e]));let r=g.instance.getNearbyGridIndexByTiled(i),a="";for(let i=0;i<r.length;i++){let n=g.instance.getGridTiledByIndex(r[i]);a=o[n.row][n.col];let s=g.instance.getGridItemWid(a);0!=s&&e.indexOf(s)>=0&&(l.includes(a)||t.includes(a)||t.push(a))}}for(let e=0;e<t.length;e++){const i=t[e];f.emit(h.WEAPON_UPARROW,i)}}}}onWeaponMove(e){let t=e.weaponKey,i=e.weaponObj;_.instance.subHp(i.hp,t)&&f.emit(h.UPDATE_HERO_HP);let n=i.gridType.split("_"),r=Number(n[0]),o=Number(n[1]),l=[],a=i.points;g.instance.deletGridDataByWeaponId(t);for(let t=0;t<r;t++)for(let i=0;i<o;i++)if(a[t][i]){let n=new u;n.row=t,n.col=i;let r=g.instance.getGridPosByTiled(n),o=e.point.getComponent(p).convertToWorldSpaceAR(r),a=e.node.parent.getComponent(p).convertToNodeSpaceAR(o);l.push(a)}f.emit(h.WEAPON_ICON_STATUS_INIT),this.cherGridStatus(l,e),this.checkWeaponUpgrade(e)}checkWeaponUpgrade(e){let t=g.instance.getGridItemData();for(let i=0;i<t.length;i++){let n=t[i];e.weaponObj.id==n.wid&&f.emit(h.WEAPON_SHAKE,n.id)}}onEnable(){f.on(h.WEAPON_MOVE,this.onWeaponMove,this),f.on(h.WEAPON_PlACE_FINISH,this.initGridStatus,this),f.on(h.INIT_BUILD_GRID_LIST,this.initGridList,this)}onDisable(){f.off(h.WEAPON_MOVE,this.onWeaponMove,this),f.off(h.WEAPON_PlACE_FINISH,this.initGridStatus,this),f.off(h.INIT_BUILD_GRID_LIST,this.initGridList,this)}clear(){g.instance.clear()}}).prototype,"allGridList",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(E.prototype,"gridList",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(E.prototype,"gridPrefab",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(E.prototype,"gridBgPrefab",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=E))||D));n._RF.pop()}}}));

System.register("chunks:///_virtual/GridMapManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./EventListener.ts","./ResourcesUtil.ts","./Util.ts","./GridData.ts","./GameEvent.ts","./GridBgItem.ts","./WeaponItem.ts","./OpenPopupManager.ts","./GuideData.ts","./AdModel.ts"],(function(t){var e,i,n,s,o,a,r,l,h,d,c,g,p,u,_,A,m,G,f,P,L,C,w,T,b,y,S;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,s=t.Node,o=t._decorator,a=t.Component,r=t.Vec3,l=t.UITransform,h=t.Layout,d=t.Sprite,c=t.v3,g=t.UIOpacity,p=t.Rect,u=t.v2},function(t){_=t.Constants},function(t){A=t.EventListener},function(t){m=t.ResourcesUtil},function(t){G=t.Util},function(t){f=t.GridData,P=t.GridObj},function(t){L=t.GameEvent},function(t){C=t.GridBgItem},function(t){w=t.WeaponItem},function(t){T=t.OpenPopupManager},function(t){b=t.GuideData,y=t.GuideStep},function(t){S=t.AdGameType}],execute:function(){var E,D,R,M,v,I,N,O,B,x,W,K,H,U,k,z,V,j,F;n._RF.push({},"c4c63CTU+5Nc5yMg+A5m9eD","GridMapManager",void 0);const{ccclass:Y,property:Z}=o;t("GridMapManager",(E=Y("GridMapManager"),D=Z(s),R=Z(s),M=Z(s),v=Z(s),I=Z(s),N=Z(s),O=Z(s),B=Z(s),E((K=e((W=class extends a{constructor(){super(...arguments),i(this,"bgs",K,this),i(this,"bg",H,this),i(this,"gridList",U,this),i(this,"allGridList",k,this),i(this,"weaponList",z,this),i(this,"removeWeaponList",V,this),i(this,"preWeaponList",j,this),i(this,"preBg",F,this),this._gridRes=["bag1","bag2","bag3","bag4","bag4","bag"],this._padding=90,this.startPoint=null,this._isTouch=!1,this._offfSet=new r(0,0,0),this._startPos=new r(0,0,0),this._placeStatus=!1,this._temPos=new r(0,0,0),this._temPoint=null,this._temAddPoint=null,this._mainAreaKey="1",this._addPlaceAreaData=new Map}init(){this.initGridRes(),this.initStatPoint()}initStatPoint(){let t=f.instance.bagCfg.max_gridLen.split("_"),e=f.instance.bagCfg.private_gridLen.split("_"),i=Math.floor((Number(t[0])-Number(e[0]))/2),n=Math.floor((Number(t[1])-Number(e[1]))/2),s=new P;s.row=i,s.col=n,this.startPoint=s}initAllGridRes(){let t=f.instance.space,e=f.instance.getMaxGridMapSize(),i=f.instance.gridWidth;this.allGridList.getComponent(l).setContentSize(e),this.allGridList.getComponent(h).spacingX=t,this.allGridList.getComponent(h).spacingY=t,this.bg.getComponent(l).setContentSize(e.width+this._padding,e.height+this._padding),this.bg.getComponent(h).paddingTop=this._padding/2,this.bg.getComponent(h).paddingBottom=this._padding/2,this.bg.getComponent(h).paddingLeft=this._padding/2,this.bg.getComponent(h).paddingRight=this._padding/2,this.allGridList.getComponent(h).updateLayout(!0),this.bg.getComponent(h).updateLayout(!0),this.allGridList.setPosition(-e.width/2,e.height/2),this.removeWeaponList.setPosition(0,-e.height/2-100);for(let t=0;t<this._gridRes.length;t++){const n=this._gridRes[t];let s=this.bgs[t].getComponent(d),o=_.gridPath+n+"/spriteFrame";m.geSpriteFrame(o).then((n=>{s.spriteFrame=n;let o=this.resNodePos(t,e,this._padding,i);o.equals(r.ZERO)||this.bgs[t].setPosition(o)}))}}initGridRes(){let t=f.instance.space,e=f.instance.getGridMapSize(),i=f.instance.gridWidth,n=f.instance.bagCfg.private_gridLen.split("_");this.gridList.getComponent(l).setContentSize(e),this.gridList.getComponent(h).spacingX=t,this.gridList.getComponent(h).spacingY=t,this.bg.getComponent(l).setContentSize(e.width+this._padding,e.height+this._padding),this.bg.getComponent(h).paddingTop=this._padding/2,this.bg.getComponent(h).paddingBottom=this._padding/2,this.bg.getComponent(h).paddingLeft=this._padding/2,this.bg.getComponent(h).paddingRight=this._padding/2,this.gridList.getComponent(h).updateLayout(!0),this.bg.getComponent(h).updateLayout(!0),this.gridList.setPosition(-e.width/2,e.height/2),this.weaponList.setPosition(-e.width/2,e.height/2),this.preWeaponList.setPosition(-e.width/2,e.height/2),this.weaponList.getComponent(l).setContentSize(e.width,e.height),this.preWeaponList.getComponent(l).setContentSize(e.width,e.height);let s=Number(n[0])>5?100:200;this.removeWeaponList.setPosition(0,-e.height/2-s);for(let t=0;t<this._gridRes.length;t++){const n=this._gridRes[t];let s=this.bgs[t].getComponent(d),o=_.gridPath+n+"/spriteFrame";m.geSpriteFrame(o).then((n=>{s.spriteFrame=n;let o=this.resNodePos(t,e,this._padding,i);o.equals(r.ZERO)||this.bgs[t].setPosition(o)}))}}resNodePos(t,e,i,n){let s=r.ZERO;switch(t){case 0:s=c(-(e.width-100)/2,-e.height/2-n/2,0);break;case 1:s=c((e.width-100)/2,-e.height/2-n/2,0);break;case 2:s=c(0,e.height/2+i/2,0);break;case 3:s=c(-e.width/2-3*i/4,0,0);break;case 4:s=c(e.width/2+3*i/4,0,0)}return s}setNodeOpacity(t){this.weaponList.getComponent(g).opacity=t;for(let e=0;e<this.removeWeaponList.children.length;e++){const i=this.removeWeaponList.children[e];i.getComponent(w)&&(i.getComponent(g).opacity=t)}}setMainPlaceAreaKey(t){let e=this.getGridMapObjArr(),i=this.allGridList.children,n=[];for(let s=0;s<e.length;s++){const o=e[s];let a=f.instance.getGridMapData()[o.row][o.col],r=t.row+o.row,l=t.col+o.col,h=new P;h.row=r,h.col=l,n.push(h);let d=i[f.instance.getGridBgIndexByTiled(r,l)];d.getComponent(C).placeAreaKey=this._mainAreaKey,d.getComponent(C).gridValue=a}let s=new q;s.item=this.weaponList,s.data=n,this._addPlaceAreaData.set(this._mainAreaKey,s)}setAddPlaceAreaKey(t){let e=this._temAddPoint,i=this.getPointGridObjArr(t.gridCfg),n=this.allGridList.children,s=[];for(let o=0;o<i.length;o++){const a=i[o];let r=e.row+a.row,l=e.col+a.col,h=new P;h.row=r,h.col=l,s.push(h),n[f.instance.getGridBgIndexByTiled(r,l)].getComponent(C).placeAreaKey=t.weaponKey}let o=new q;o.item=t.node,o.data=s,this._addPlaceAreaData.set(t.weaponKey,o)}delPlaceAreaKey(t){let e=this.allGridList.children;for(let i=0;i<e.length;i++){e[i].getComponent(C).delPlaceAreaKey(t)}}getConnectStatus(t){let e=!1,i=f.instance.bagCfg.max_gridLen.split("_");if(t.row>=0&&t.col>=0&&t.row<=Number(i[0])-1&&t.col<=Number(i[1])-1){let i=f.instance.getGridBgIndexByTiled(t.row,t.col);this.allGridList.children[i].getComponent(C).placeAreaKey==this._mainAreaKey&&(e=!0)}return e}checkAddAreaGridData(t){let e=!0,i=[];if(this._addPlaceAreaData.forEach(((t,n)=>{if(n!=this._mainAreaKey){i.push(n);let s=t.data,o=!1;for(let t=0;t<s.length;t++){const e=s[t];let i=new P;i.row=e.row-1,i.col=e.col,o||(o=this.getConnectStatus(i));let n=new P;n.row=e.row+1,n.col=e.col,o||(o=this.getConnectStatus(n));let a=new P;a.row=e.row,a.col=e.col-1,o||(o=this.getConnectStatus(a));let r=new P;if(r.row=e.row,r.col=e.col+1,o||(o=this.getConnectStatus(r)),o)break}o||(e=!1)}})),t){if(!e)for(let t=0;t<i.length;t++){let e=i[t],n=this._addPlaceAreaData.get(e);A.emit(L.ADD_REMOVE_WEAPON_LIST,n.item),this._addPlaceAreaData.delete(e),this.delPlaceAreaKey(e)}e&&i.length>0&&A.emit(L.GUIDE_BATTLE_ACTION)}else if(e){if(i.length>0){for(let t=0;t<i.length;t++){let e=i[t];this._addPlaceAreaData.get(e).item.destroy()}this.rebuildGridData()}}else for(let t=0;t<i.length;t++){let e=i[t],n=this._addPlaceAreaData.get(e);A.emit(L.ADD_REMOVE_WEAPON_LIST,n.item),this._addPlaceAreaData.delete(e),this.delPlaceAreaKey(e)}}rebuildGridData(){let t=[];this._addPlaceAreaData.forEach(((e,i)=>{let n=e.data;t=t.concat(n),i!=this._mainAreaKey&&this._addPlaceAreaData.delete(i)}));let e=[],i=[];t.sort(((t,e)=>t.row-e.row)),e.push(t[0].row),e.push(t[t.length-1].row),t.sort(((t,e)=>t.col-e.col)),i.push(t[0].col),i.push(t[t.length-1].col);let n=[],s=this.allGridList.children;for(let t=e[0];t<=e[1];t++){let e=[];for(let n=i[0];n<=i[1];n++){let i=s[f.instance.getGridBgIndexByTiled(t,n)],o=i.getComponent(C).placeAreaKey?i.getComponent(C).gridValue:"";e.push(o)}n.push(e)}f.instance.setRebuildGridMapData(n),A.emit(L.INIT_BUILD_GRID_LIST),A.emit(L.INIT_BUILD_WEAPON_POS),this.startPoint.row=e[0],this.startPoint.col=i[0]}debugAllList(){let t=this.allGridList.children;for(let e=0;e<7;e++)for(let i=0;i<5;i++){t[f.instance.getGridBgIndexByTiled(e,i)].getComponent(C).placeAreaKey}}debugAllListValue(){let t=this.allGridList.children;for(let e=0;e<7;e++)for(let i=0;i<5;i++){t[f.instance.getGridBgIndexByTiled(e,i)].getComponent(C).gridValue}}debugAllListGridObj(){let t=this.allGridList.children;for(let e=0;e<7;e++)for(let i=0;i<5;i++){t[f.instance.getGridBgIndexByTiled(e,i)].getComponent(C).gridObj}}onPlaceGridStart(t,e){if(!this.allGridList.active){this.initAllGridListPlaceValue(),f.instance.gridEditMode=!0,this.gridList.parent=this.preBg,t.node.parent=this.node;let i=this.node.parent.getComponent(l).convertToNodeSpaceAR(new r(e.x,e.y,0));t.node.setPosition(i.x,i.y),this.allGridList.active=!0,this.setNodeOpacity(100),this.initAllGridRes(),this.node.parent.getComponent(l).height=this.allGridList.getComponent(l).height,A.emit(L.SHOW_HIDE_PLACE_LIST,!0);let n=f.instance.getGridPosByTiled(this.startPoint),s=this.allGridList.getComponent(l).convertToWorldSpaceAR(n),o=this.node.parent.getComponent(l).convertToNodeSpaceAR(s),a=f.instance.gridWidth,h=f.instance.gridHeight;this.gridList.setPosition(o.x-a/2,o.y+h/2),this.weaponList.setPosition(o.x-a/2,o.y+h/2),this.setMainPlaceAreaKey(this.startPoint)}this.delPlaceAreaKey(t.weaponKey)}onPlaceGridMove(t,e){t.node.parent=this.node;let i=this.node.parent.getComponent(l).convertToNodeSpaceAR(new r(e.x,e.y,0));t.node.setPosition(i.x,i.y),this.initAllGridListTips();let n=new P;n.row=0,n.col=0;let s=f.instance.getGridPosByTiled(n),o=t.point.getComponent(l).convertToWorldSpaceAR(s),a=this.allGridList.getComponent(l).convertToNodeSpaceAR(o),h=this.allGridList.children,d=f.instance.bagCfg.max_gridLen.split("_");this._placeStatus=!1;for(let e=0;e<h.length;e++){let i=h[e].getComponent(C).gridObj,n=f.instance.getGridPosByTiled(i),s=f.instance.gridWidth,o=f.instance.gridHeight;if(new p(n.x-s/2,n.y-o/2,s,o).contains(u(a.x,a.y))){let e=this.getPointGridObjArr(t.gridCfg),s=[];for(let t=0;t<e.length;t++){const n=e[t];let o=i.row+n.row,a=i.col+n.col;if(o<Number(d[0])&&a<Number(d[1])){let t=h[f.instance.getGridBgIndexByTiled(o,a)];t.getComponent(C).placeAreaKey?s.push(0):(t.getComponent(C).setTipsGreen(),s.push(1))}else s.push(0)}if(s.includes(0))this._placeStatus=!1;else{this._placeStatus=!0;let e=this.allGridList.getComponent(l).convertToWorldSpaceAR(n),s=this.node.parent.getComponent(l).convertToNodeSpaceAR(e),o=t.gridCfg.points,a=[];for(let t=0;t<o.length;t++){const e=o[t];for(let i=0;i<e.length;i++){let e=new P;e.row=t,e.col=i,a.push(e)}}const h=a[a.length-1];let d=new P;d.row=i.row+h.row,d.col=i.col+h.col;let c=f.instance.getGridPosByTiled(d),g=this.allGridList.getComponent(l).convertToWorldSpaceAR(c),p=this.node.parent.getComponent(l).convertToNodeSpaceAR(g),u=new r(0,0,0);u.x=(s.x+p.x)/2,u.y=(s.y+p.y)/2,this._temPos=u,this._temAddPoint=G.clone(i)}break}}}onPlaceGridEnd(t){let e=t.node;this._placeStatus?t.needAd?T.instance.showAdTipsPopup(S.GAME_TYPE_GRID,t.gridCfg,(i=>{i?(t.removeGridAdBubble(),this.initAllGridListTips(),e.setPosition(this._temPos),this.setAddPlaceAreaKey(t)):(this.initAllGridListTips(),A.emit(L.ADD_REMOVE_WEAPON_LIST,e),this._addPlaceAreaData.delete(t.weaponKey))})):(this.initAllGridListTips(),e.setPosition(this._temPos),this.setAddPlaceAreaKey(t),b.instance.battleMode&&b.instance.curStep==y.GUIDE_STEP11_PLACE_GRID&&this.checkAddAreaGridData(!0)):(this.initAllGridListTips(),A.emit(L.ADD_REMOVE_WEAPON_LIST,e),this._addPlaceAreaData.delete(t.weaponKey)),this._placeStatus=!1}onPlaceGridFinish(){this.allGridList.active&&(this.checkAddAreaGridData(),f.instance.gridEditMode=!1,this.allGridList.active=!1,this.gridList.parent=this.bg,this.setNodeOpacity(255),this.initGridRes(),A.emit(L.SHOW_HIDE_PLACE_LIST,!1))}getFirstGridObj(){let t=f.instance.getGridMapData(),e=null;for(let i=0;i<t.length;i++){const n=t[i];for(let t=0;t<n.length;t++){if(n[t]){e=new P,e.row=i,e.col=t;break}}if(e)break}return e}getGridMapObjArr(){let t=f.instance.getGridMapData(),e=[];for(let i=0;i<t.length;i++){const n=t[i];for(let t=0;t<n.length;t++){if(n[t]){let n=new P;n.row=i,n.col=t,e.push(n)}}}return e}getPointGridObjArr(t){let e=t.points,i=[];for(let t=0;t<e.length;t++){const n=e[t];for(let e=0;e<n.length;e++){if(n[e]){let n=new P;n.row=t,n.col=e,i.push(n)}}}return i}initAllGridListTips(){let t=this.allGridList.children;for(let e=0;e<t.length;e++){t[e].getComponent(C).setTipsDefault()}}initAllGridListPlaceValue(){let t=this.allGridList.children;for(let e=0;e<t.length;e++){t[e].getComponent(C).placeAreaKey=""}}checkAllGridListByPos(t){let e=this.allGridList.children,i=f.instance.bagCfg.max_gridLen.split("_");this._placeStatus=!1;for(let n=0;n<e.length;n++){let s=e[n].getComponent(C).gridObj,o=f.instance.getGridPosByTiled(s),a=f.instance.gridWidth,r=f.instance.gridHeight;if(new p(o.x-a/2,o.y-r/2,a,r).contains(u(t.x,t.y))){let t=this.getGridMapObjArr(),n=[];for(let o=0;o<t.length;o++){const a=t[o];let r=s.row+a.row,l=s.col+a.col;if(r<Number(i[0])&&l<Number(i[1])){let t=e[f.instance.getGridBgIndexByTiled(r,l)];t.getComponent(C).placeAreaKey?n.push(0):(t.getComponent(C).setTipsGreen(),n.push(1))}else n.push(0)}if(n.includes(0))this._placeStatus=!1;else{this._placeStatus=!0;let t=this.allGridList.getComponent(l).convertToWorldSpaceAR(o),e=this.node.parent.getComponent(l).convertToNodeSpaceAR(t),i=f.instance.gridWidth,n=f.instance.gridHeight;this._temPos.x=e.x-i/2,this._temPos.y=e.y+n/2,this._temPoint=G.clone(s)}break}}}setGridMoveTips(){this.initAllGridListTips();let t=new P;t.row=0,t.col=0;let e=f.instance.getGridPosByTiled(t),i=this.gridList.getComponent(l).convertToWorldSpaceAR(e),n=this.allGridList.getComponent(l).convertToNodeSpaceAR(i);this.checkAllGridListByPos(n)}onTouchStart(t){let e=this.node.parent.getComponent(l).convertToNodeSpaceAR(new r(t.x,t.y,0)),i=f.instance.getGridMapData(),n=!1;for(let t=0;t<i.length;t++){const s=i[t];for(let i=0;i<s.length;i++){if(s[i]){let s=new P;s.row=t,s.col=i;let o=f.instance.getGridPosByTiled(s),a=this.gridList.getComponent(l).convertToWorldSpaceAR(o),r=this.node.parent.getComponent(l).convertToNodeSpaceAR(a),h=f.instance.gridWidth,d=f.instance.gridHeight;if(new p(r.x-h/2,r.y-d/2,h,h).contains(u(e.x,e.y))){n=!0;break}}}if(n)break}f.instance.gridEditMode&&n&&(this._isTouch=!0,this._offfSet=this.weaponList.getComponent(l).convertToNodeSpaceAR(new r(t.x,t.y,0)),this._startPos=this.weaponList.getPosition(),this.delPlaceAreaKey(this._mainAreaKey))}onTouchMove(t){if(this._isTouch){let e=this.node.parent.getComponent(l).convertToNodeSpaceAR(new r(t.x,t.y,0)),i=new r(e.x-this._offfSet.x,e.y-this._offfSet.y);this.gridList.setPosition(i),this.weaponList.setPosition(i),this.setGridMoveTips()}}onTouchEnd(t){this._isTouch&&(this._isTouch=!1,this._placeStatus&&(this._startPos=this._temPos,this.startPoint=this._temPoint),this.gridList.setPosition(this._startPos),this.weaponList.setPosition(this._startPos),this._placeStatus=!1,this.initAllGridListTips(),this.setMainPlaceAreaKey(this.startPoint))}onTouchCancle(t){this._isTouch&&(this._isTouch=!1,this._placeStatus=!1,this.gridList.setPosition(this._startPos),this.weaponList.setPosition(this._startPos),this.initAllGridListTips())}onClearAreaData(){this._addPlaceAreaData.clear()}onEnable(){A.on(L.PLACE_GRID_START,this.onPlaceGridStart,this),A.on(L.PLACE_GRID_MOVE,this.onPlaceGridMove,this),A.on(L.PLACE_GRID_END,this.onPlaceGridEnd,this),A.on(L.GAME_TOUCH_START,this.onTouchStart,this),A.on(L.GAME_TOUCH_MOVE,this.onTouchMove,this),A.on(L.GAME_TOUCH_END,this.onTouchEnd,this),A.on(L.GAME_TOUCH_CANCLE,this.onTouchEnd,this),A.on(L.CLEAR_AREA_DATA,this.onClearAreaData,this),A.on(L.PLACE_GRID_FINISH,this.onPlaceGridFinish,this)}onDisable(){A.off(L.PLACE_GRID_START,this.onPlaceGridStart,this),A.off(L.PLACE_GRID_MOVE,this.onPlaceGridMove,this),A.off(L.PLACE_GRID_END,this.onPlaceGridEnd,this),A.off(L.GAME_TOUCH_START,this.onTouchStart,this),A.off(L.GAME_TOUCH_MOVE,this.onTouchMove,this),A.off(L.GAME_TOUCH_END,this.onTouchEnd,this),A.off(L.GAME_TOUCH_CANCLE,this.onTouchEnd,this),A.off(L.CLEAR_AREA_DATA,this.onClearAreaData,this),A.off(L.PLACE_GRID_FINISH,this.onPlaceGridFinish,this)}}).prototype,"bgs",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),H=e(W.prototype,"bg",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(W.prototype,"gridList",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(W.prototype,"allGridList",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(W.prototype,"weaponList",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(W.prototype,"removeWeaponList",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(W.prototype,"preWeaponList",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(W.prototype,"preBg",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=W))||x));class q{constructor(){this.data=void 0,this.item=void 0}}t("GridBgObj",q),n._RF.pop()}}}));

System.register("chunks:///_virtual/GridModel.ts",["cc"],(function(i){var t;return{setters:[function(i){t=i.cclegacy}],execute:function(){t._RF.push({},"d62f2KyXe1Jbp8SFkcb49TF","GridModel",void 0);i("GridCfg",class{constructor(){this.ClassName="Grid",this.Id=void 0,this.name=void 0,this.desc=void 0,this.res=void 0,this.type=void 0,this.gridType=void 0,this.grid=void 0,this.points=void 0,this.weight=void 0,this.ad=void 0}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/GrowthFundMode.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"982754S+ZtI7qvAlTGMU69y","GrowthFundMode",void 0);t("GrowthFundCfg",class{constructor(){this.ClassName="GrowthFund",this.Id=void 0,this.name=void 0,this.desc=void 0,this.type=void 0,this.icon=void 0,this.unlockType=void 0,this.prices=void 0,this.token=void 0}});t("GrowthFundLevelCfg",class{constructor(){this.ClassName="GrowthFundLevel",this.Id=void 0,this.fundId=void 0,this.level=void 0,this.value=void 0,this.rewards=void 0}}),i._RF.pop()}}}));

System.register("chunks:///_virtual/GuideData.ts",["cc","./CfgMgr.ts","./GuideModel.ts","./HttpService.ts","./Api.ts"],(function(_){var E,t,e,S,P;return{setters:[function(_){E=_.cclegacy},function(_){t=_.CfgMgr},function(_){e=_.GuideCfg},function(_){S=_.HttpService},function(_){P=_.Api}],execute:function(){E._RF.push({},"23746skf7ZPd6WF8x1UnIST","GuideData",void 0);class I{constructor(){this._loadStep=0,this._curStep=0,this._maxStep=1,this._guideMapData=new Map,this._guideMode=!1,this._target="",this._battleMode=!1}get target(){return this._target}set target(_){this._target=_}get guideMode(){return this._guideMode}set guideMode(_){this._guideMode=_}get battleMode(){return this._battleMode}set battleMode(_){this._battleMode=_}get curStep(){return this._curStep}set curStep(_){this._curStep+=_,this.battleMode?this.reportBattle(this._curStep):this.guideMode&&this.report(this._curStep)}set loadStep(_){this._loadStep+=_,this.reportLoad(this._loadStep)}get maxStep(){return this._maxStep}set initBattleStep(_){this._curStep=_}initCfg(){let _=t.getCfgDataArray(new e);for(let E=0;E<_.length;E++){const t=_[E];this._guideMapData.set(t.step,t)}this._maxStep=this._guideMapData.size}getCurGuideCfg(){return this.getGuideCfgByStepId(this._curStep)}getCurGuideData(){return this.getGuideCfgByStepId(this._curStep).data}getMaxGuideStep(){return this._guideMapData.size}checkGuide(){return!!this._guideMapData.has(this._curStep)}report(_){S.instance.post(P.USER_GUIDE_STEP,{step:_}).then((_=>{})).catch((_=>{}))}reportBattle(_){S.instance.post(P.USER_BATTLE_STEP,{step:_}).then((_=>{})).catch((_=>{}))}reportLoad(_){S.instance.post(P.USER_LOAD_STEP,{step:_}).then((_=>{})).catch((_=>{}))}getGuideCfgByStepId(_){return this._guideMapData.has(_)?this._guideMapData.get(_):null}clear(){this._curStep=1,this._guideMode=!1}static get instance(){return this._instance||(this._instance=new I),this._instance}}_("GuideData",I),I._instance=null;_("GuideStep",function(_){return _[_.GUIDE_STEP0_FIRST=0]="GUIDE_STEP0_FIRST",_[_.GUIDE_STEP1_AIRDROP_BTN=1]="GUIDE_STEP1_AIRDROP_BTN",_[_.GUIDE_STEP2_AIRDROP_PAGE=2]="GUIDE_STEP2_AIRDROP_PAGE",_[_.GUIDE_STEP3_AIRDROP_START_GAME=3]="GUIDE_STEP3_AIRDROP_START_GAME",_[_.GUIDE_STEP4_AIRDROP_END_GAME=4]="GUIDE_STEP4_AIRDROP_END_GAME",_[_.GUIDE_STEP5_SPIN_BTN=5]="GUIDE_STEP5_SPIN_BTN",_[_.GUIDE_STEP6_SPIN_PAGE=6]="GUIDE_STEP6_SPIN_PAGE",_[_.GUIDE_STEP7_SPIN_TAKEIT=7]="GUIDE_STEP7_SPIN_TAKEIT",_[_.GUIDE_STEP8_SPIN=8]="GUIDE_STEP8_SPIN",_[_.GUIDE_STEP9_DAILYSIGNIN_BTN=9]="GUIDE_STEP9_DAILYSIGNIN_BTN",_[_.GUIDE_STEP10_DAILYSIGNIN=10]="GUIDE_STEP10_DAILYSIGNIN",_[_.GUIDE_STEP11_DONE=11]="GUIDE_STEP11_DONE",_[_.GUIDE_STEP1_EARN_VIEW=1]="GUIDE_STEP1_EARN_VIEW",_[_.GUIDE_STEP2_EARN_PAGE=2]="GUIDE_STEP2_EARN_PAGE",_[_.GUIDE_STEP3_EARN_INVEST=3]="GUIDE_STEP3_EARN_INVEST",_[_.GUIDE_STEP4_EARN_INVEST_DONE=4]="GUIDE_STEP4_EARN_INVEST_DONE",_[_.GUIDE_STEP5_EARN_CASH_PAGE=5]="GUIDE_STEP5_EARN_CASH_PAGE",_[_.GUIDE_STEP6_CHAPTER_PAGE=6]="GUIDE_STEP6_CHAPTER_PAGE",_[_.GUIDE_STEP1_BATTLE_FIRST=101]="GUIDE_STEP1_BATTLE_FIRST",_[_.GUIDE_STEP2_DRAG_WEAPON=102]="GUIDE_STEP2_DRAG_WEAPON",_[_.GUIDE_STEP3_REFRESH_WEAPON=103]="GUIDE_STEP3_REFRESH_WEAPON",_[_.GUIDE_STEP4_MERGE_WEAPON=104]="GUIDE_STEP4_MERGE_WEAPON",_[_.GUIDE_STEP5_DRAG_WEAPON=105]="GUIDE_STEP5_DRAG_WEAPON",_[_.GUIDE_STEP6_PURSE=106]="GUIDE_STEP6_PURSE",_[_.GUIDE_STEP7_DRAG_WEAPON=107]="GUIDE_STEP7_DRAG_WEAPON",_[_.GUIDE_STEP8_BATTLE=108]="GUIDE_STEP8_BATTLE",_[_.GUIDE_STEP9_SELECT_SKILL=109]="GUIDE_STEP9_SELECT_SKILL",_[_.GUIDE_STEP10_WAVE1_DONE=110]="GUIDE_STEP10_WAVE1_DONE",_[_.GUIDE_STEP11_PLACE_GRID=111]="GUIDE_STEP11_PLACE_GRID",_[_.GUIDE_STEP12_PLACE_GRID_DONE=112]="GUIDE_STEP12_PLACE_GRID_DONE",_[_.GUIDE_STEP13_DRAG_WEAPON=113]="GUIDE_STEP13_DRAG_WEAPON",_[_.GUIDE_STEP14_REFRESH_WEAPON=114]="GUIDE_STEP14_REFRESH_WEAPON",_[_.GUIDE_STEP15_BATTLE_DONE=115]="GUIDE_STEP15_BATTLE_DONE",_}({}));E._RF.pop()}}}));

System.register("chunks:///_virtual/GuideModel.ts",["cc"],(function(i){var s;return{setters:[function(i){s=i.cclegacy}],execute:function(){s._RF.push({},"dad4ewTHzRJhIN704CS7sto","GuideModel",void 0);i("GuideCfg",class{constructor(){this.ClassName="Guide",this.Id=void 0,this.step=void 0,this.pos=void 0,this.touchType=void 0,this.size=void 0,this.target=void 0,this.desc=void 0,this.isShowTips=void 0,this.isShowMoveFinger=void 0,this.isShowClickFinger=void 0,this.fingerPos=void 0,this.anim=void 0,this.frame=void 0,this.data=void 0}}),s._RF.pop()}}}));

System.register("chunks:///_virtual/GuidePopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./OpenPopupManager.ts","./GuideData.ts","./EventListener.ts","./GameEvent.ts","./LanguageManager.ts","./ResourcesUtil.ts"],(function(e){var t,i,n,s,o,a,c,r,h,l,u,p,g,m,d,f,C,T,v,b,E,k,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,s=e.Node,o=e.Label,a=e.AnimationComponent,c=e._decorator,r=e.Component,h=e.Tween,l=e.Vec3,u=e.UITransform,p=e.Sprite,g=e.Size,m=e.tween,d=e.Mask,f=e.AnimationClip},function(e){C=e.Constants},function(e){T=e.OpenPopupManager},function(e){v=e.GuideData},function(e){b=e.EventListener},function(e){E=e.GameEvent},function(e){k=e.LanguageManager},function(e){y=e.ResourcesUtil}],execute:function(){var F,w,S,_,A,G,N,P,D,O,z,M,U,R,B,H,L,I,x;n._RF.push({},"b7f14GTQL1M1pIO0vUy8UcV","GuidePopup",void 0);const{ccclass:V,property:W}=c;var j=function(e){return e[e.START=0]="START",e[e.MOVE=1]="MOVE",e[e.END=2]="END",e[e.CANCLE=3]="CANCLE",e}(j||{});e("GuidePopup",(F=V("GuidePopup"),w=W(s),S=W(s),_=W(s),A=W(o),G=W(s),N=W(s),P=W(s),D=W(a),F((M=t((z=class extends r{constructor(){super(...arguments),i(this,"content",M,this),i(this,"mask",U,this),i(this,"maskBg",R,this),i(this,"desc",B,this),i(this,"moveFinger",H,this),i(this,"tips",L,this),i(this,"clickFinger",I,this),i(this,"animation",x,this),this._touchStatus=j.START,this._done=null}show(e,t,i){this._done=t,this.unscheduleAllCallbacks(),this._touchStatus=j.START,this.tips.active=!1,this.moveFinger.active=!1,this.clickFinger.active=!1,h.stopAllByTarget(this.clickFinger),this.setGuideInfo(e),i&&i()}setGuideInfo(e,t){let i=new l,n=new l,s=v.instance.getCurGuideCfg(),o=s.fingerPos?s.fingerPos.split("|"):[0,0];s.anim?(this.desc.node.getComponent(u).setContentSize(287.5,40),this.setGuideFrames(s.anim,s.frame)):(this.desc.node.getComponent(u).setContentSize(575,40),this.animation.node.getComponent(p).spriteFrame=null);let a=new l,c=s.pos.split("|");if(a.x=Number(c[0]),a.y=Number(c[1]),this.mask.getComponent(u).setContentSize(new g(0,0)),e){let t=e.getComponent(u).convertToWorldSpaceAR(new l(0,0,0));i=this.content.getComponent(u).convertToNodeSpaceAR(t);let s=new g;s.height=1.1*e.getComponent(u).contentSize.height,s.width=1.1*e.getComponent(u).contentSize.width,n.x=i.x+s.width/2+Number(o[0]),n.y=i.y-s.height/2+Number(o[1]);let a=new g;a.height=10*s.height,a.width=10*s.width,this.mask.getComponent(u).setContentSize(a);const c=this.mask.getComponent(u);m(c).to(.6,{contentSize:s},{easing:"sineIn"}).call((()=>{})).start(),this.mask.setPosition(i),this.moveFinger.setPosition(i),this.maskBg.setPosition(-i.x,-i.y,0);const r=this.mask.getComponent(u),{width:h,height:p,anchorX:f,anchorY:C}=r,T=this.mask.getComponent(d).subComp;T.clear();const v=-h*f,b=-p*C;T.roundRect(v,b,h,p,15),T.fill(),this.setEnable()}else n.x=Number(o[0]),n.y=Number(o[1]);1==s.isShowClickFinger?(this.clickFinger.setPosition(n),this.clickFinger.active=!0,m(this.clickFinger).sequence(m().delay(.5),m().call((()=>{this.clickFinger.children[0].active=!this.clickFinger.children[0].active,this.clickFinger.children[1].active=!this.clickFinger.children[0].active}))).repeatForever().start()):this.clickFinger.active=!1,s.desc&&(this.desc.string="",this.tips.active=!0,this.tips.setPosition(a),this.setDescAnim(k.instance.getLang(s.desc),s.touchType)),1==s.touchType?this.setEnable():this.setDisable(),this.moveFinger.active=!!s.isShowMoveFinger}setGuideFrames(e,t){let i=C.guidePath+e;y.getSpriteAtlas(i).then((e=>{let i=f.createWithSpriteFrames(e,t);i.name="effect",i.wrapMode=f.WrapMode.Loop,this.animation.addClip(i),this.scheduleOnce((()=>{this.animation.play("effect")}),.1)}))}async setDescAnim(e,t){let i=k.instance.language,n=.04;"en"==i&&(n=.01);let s="";for(let t=0;t<e.length;t++){const i=e[t];s+=i,await new Promise((e=>{this.scheduleOnce((()=>{this.desc.string=s,e(0)}),n)}))}0==t&&this.scheduleOnce((()=>{this._done&&this._done()}),.5)}onTouchStart(e){}onTouchMove(e){}onTouchEnd(){T.instance.hide(C.PopupUI.GuidePopup),this.unscheduleAllCallbacks(),this._done&&this._done()}onTouchCancle(){this._touchStatus=j.CANCLE}onHideFinger(){this.moveFinger.active=!1}setEnable(){this.maskBg.on(s.EventType.TOUCH_START,this.onTouchStart,this),this.maskBg.on(s.EventType.TOUCH_MOVE,this.onTouchMove,this),this.maskBg.on(s.EventType.TOUCH_END,this.onTouchEnd,this),this.maskBg.on(s.EventType.TOUCH_CANCEL,this.onTouchCancle,this)}setDisable(){this.maskBg.off(s.EventType.TOUCH_START,this.onTouchStart,this),this.maskBg.off(s.EventType.TOUCH_MOVE,this.onTouchMove,this),this.maskBg.off(s.EventType.TOUCH_END,this.onTouchEnd,this),this.maskBg.off(s.EventType.TOUCH_CANCEL,this.onTouchCancle,this)}onEnable(){b.on(E.GUIDE_HIDE_FINGER,this.onHideFinger,this)}onDisable(){b.off(E.GUIDE_HIDE_FINGER,this.onHideFinger,this),h.stopAllByTarget(this.clickFinger),this.animation.clips.length>0&&(this.animation.stop(),this.animation.removeClip(this.animation.clips[0]))}}).prototype,"content",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(z.prototype,"mask",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(z.prototype,"maskBg",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(z.prototype,"desc",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(z.prototype,"moveFinger",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(z.prototype,"tips",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(z.prototype,"clickFinger",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(z.prototype,"animation",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=z))||O));n._RF.pop()}}}));

System.register("chunks:///_virtual/HeroAwakenItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BagHeroData.ts","./HeroStarItem.ts","./Constants.ts","./ResourcesUtil.ts"],(function(e){var t,r,i,n,o,a,s,l,h,c,u,b,p,g,m,f,w,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.initializerDefineProperty},function(e){i=e.cclegacy,n=e.ScrollView,o=e.ProgressBar,a=e.Label,s=e.Node,l=e.Button,h=e.Sprite,c=e.Prefab,u=e._decorator,b=e.Component,p=e.instantiate,g=e.UITransform},function(e){m=e.BagHeroData},function(e){f=e.HeroStarItem},function(e){w=e.Constants},function(e){d=e.ResourcesUtil}],execute:function(){var I,k,H,_,B,y,j,O,C,S,v,z,V,A,D,L,F,P,R;i._RF.push({},"8bbadDwcsBNKrVVCd28+dtm","HeroAwakenItem",void 0);const{ccclass:U,property:T}=u;e("HeroAwakenItem",(I=U("HeroAwakenItem"),k=T(n),H=T(o),_=T(a),B=T(s),y=T(l),j=T(l),O=T(h),C=T(c),I((z=t((v=class extends b{constructor(){super(...arguments),r(this,"scrollView",z,this),r(this,"progress",V,this),r(this,"progressValue",A,this),r(this,"awakenCondition",D,this),r(this,"unLockBtn",L,this),r(this,"awakenBtn",F,this),r(this,"heroIcon",P,this),r(this,"heroStarItem",R,this),this._heroObj=null}init(e){this._heroObj=e;let t=this._heroObj.star+(0==this._heroObj.level?0:1),r=m.instance.getHeroSkillByHeroId(this._heroObj.heroId,t);r?(this.awakenCondition.active=!0,this.progressValue.string=`${this._heroObj.fragment}/${r.fragment}`,this.progress.progress=this._heroObj.fragment/r.fragment,this.awakenBtn.node.active=e.level>0,this.awakenBtn.interactable=this._heroObj.fragment>=r.fragment,this.unLockBtn.node.active=0==e.level,this.unLockBtn.interactable=this._heroObj.fragment>=r.fragment):this.awakenCondition.active=!1;let i=m.instance.getHeroSkillCfgByHeroId(this._heroObj.heroId);this.setHeroImg(),this.scrollView.content.removeAllChildren();for(let e=0;e<i.length;e++){let t=i[e];if(0==t.star)continue;let r=p(this.heroStarItem);r.getComponent(f).init(t,this._heroObj.star),r.parent=this.scrollView.content}}setHeroImg(){let e=m.instance.getHeroCfgById(this._heroObj.heroId),t=w.heroIconPath+e.res+"/spriteFrame";d.getSpriteFrame(t).then((e=>{this.heroIcon.spriteFrame=e;let t=this.heroIcon.getComponent(g).contentSize,r=Math.min(90/t.width,90/t.height);this.heroIcon.node.setScale(r,r)}))}onUnlockTouch(){m.instance.unlockHero(this._heroObj.heroId)}onAwakenTouch(){m.instance.awakeHero(this._heroObj.heroId)}}).prototype,"scrollView",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=t(v.prototype,"progress",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=t(v.prototype,"progressValue",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(v.prototype,"awakenCondition",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=t(v.prototype,"unLockBtn",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(v.prototype,"awakenBtn",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=t(v.prototype,"heroIcon",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(v.prototype,"heroStarItem",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=v))||S));i._RF.pop()}}}));

System.register("chunks:///_virtual/HeroBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./EventListener.ts","./GameEvent.ts","./HeroData.ts","./SkillData.ts","./MonsterData.ts","./AudioManager.ts","./SkillModel.ts","./SkillUpgradeData.ts","./Util.ts"],(function(e){var t,i,l,s,n,a,o,r,c,h,u,k,d,b,p,S,O,H,E,_,f,R,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){l=e.cclegacy,s=e.sp,n=e.Node,a=e.Prefab,o=e._decorator,r=e.Vec3,c=e.color,h=e.tween},function(e){u=e.default},function(e){k=e.EventListener},function(e){d=e.GameEvent},function(e){b=e.HeroData,p=e.HeroAnim},function(e){S=e.SkillData},function(e){O=e.MonsterData},function(e){H=e.AudioManager},function(e){E=e.TargetType,_=e.SkillBulletObj,f=e.SkillObj},function(e){R=e.SkillUpgradeData},function(e){y=e.Util}],execute:function(){var T,g,m,P,A,j,D,C,w;l._RF.push({},"52b720GqCpG9oe8aaI0Em0S","HeroBase",void 0);const{ccclass:v,property:I}=o;e("HeroBase",(T=v("HeroBase"),g=I(s.Skeleton),m=I(n),P=I(a),T((D=t((j=class extends u{constructor(){super(...arguments),i(this,"heroSpine",D,this),i(this,"skillTypeList",C,this),i(this,"skillTypePrefab",w,this),this._firePos=new r(0,70,0),this.isCollider=void 0,this.heroKey="",this.releaseSkillStatus=!0,this._atkNumber=0,this._showHitTotalTime=.15}initBorn(){this._atkNumber=0,this.heroKey=b.instance.heroKey,this.insertRectCircleObj()}getFirePos(){let e=this.node.getPosition();return new r(e.x+this._firePos.x,e.y+this._firePos.y,0)}updateSkillDamageInterval(){}insertRectCircleObj(){k.emit(d.INSERT_HERO_CIRCLE_OBJ,this.heroKey,this)}onAttacked(e){this.playHit(),b.instance.subCurHp(e),k.emit(d.UPDATE_HERO_HP)}onRestoredHp(e){b.instance.addCurHp(e),k.emit(d.UPDATE_HERO_HP)}onRestoredHpPer(e,t){b.instance.addCurHpPer(e,t),k.emit(d.UPDATE_HERO_HP)}onRestoredShield(e){b.instance.addCurShield(e),k.emit(d.UPDATE_HERO_HP)}playHit(){let e=this.heroSpine;e.color=c(255,255,255,1);let t=c(255,255,255,50);h(e).to(this._showHitTotalTime,{},{onUpdate(e,i){t=c(255,255,255,50*i),e.color=t}}).call((()=>{t=c(255,255,255,255),e.color=t})).start()}releaseSkill(){if(this.releaseSkillStatus){let e=b.instance.getQueueSkill();e&&(S.instance.isAttackType(e.skillObj.type)?(this.releaseSkillStatus=!1,H.instance.playSound(e.skillObj.soundId),this.unschedule(this.initHeroAnim),this.heroSpine.setAnimation(0,0==this._atkNumber?p.ATK1:p.ATK2,!1),this._atkNumber=0==this._atkNumber?1:0,this.scheduleOnce((()=>{let t=new _;t.releaseTimes=e.releaseTimes,t.skillKey=e.skillKey,t.skillObj=e.skillObj,t.pos=this.getFirePos(),t.targetPos=new r(0,-200,0);let i=t.skillObj.salvo;for(let e=0;e<i;e++){let i=O.instance.getNearMonster(t.skillKey);if(t.skillObj.targetType==E.TARGET_RANDOM&&(i=y.rand(i)),i.length){let l=t.skillObj.bulletCount;for(let s=0;s<l;s++)for(let l=0;l<1;l++){let n=t.skillObj.intervalAngle,a=S.instance.getSkillDirAngle(s,n);if(l<i.length){let s=y.clone(t),n=new r(i[l].x,i[l].y,i[l].z);k.emit(d.ATTACK_SKILL_EFFECT,s,n,a,.1*e)}}}}e.skillObj.subSkills.length>0&&this._releaseSubSkill(e),this.releaseSkillStatus=!0,e.callback&&e.callback(),this.scheduleOnce(this.initHeroAnim,1)}),e.animTime)):(this.releaseSkillStatus=!1,this.scheduleOnce((()=>{let t=new _;t.skillKey=e.skillKey,t.skillObj=e.skillObj,k.emit(d.ARMOR_SKILL_EFFECT,t),this.releaseSkillStatus=!0,e.callback&&e.callback()}),e.animTime)))}}_releaseSubSkill(e){let t=e.skillObj.subSkills;for(let i=0;i<t.length;i++){let l=t[i],s=S.instance.getSkillCfgById(l),n=new f;n.Id=s.Id;for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e)){const t=s[e];n.hasOwnProperty(e)&&(n[e]=t)}if(n.weaponId=e.skillObj.weaponId,n.level=e.skillObj.level,n.bulletScale=100,n.cd=e.skillObj.cd,n.range=e.skillObj.range,n.damage=e.skillObj.damage,n.type=e.skillObj.type,n.salvo=1,n.bulletCount=1,n=R.instance.getUpgradeSkillBySkillId(n),H.instance.playSound(n.soundId),n.probability>0&&!y.randomHit(n.probability))continue;let a=new _;a.releaseTimes=e.releaseTimes,a.skillKey=e.skillKey,a.skillObj=n,a.pos=this.getFirePos(),a.targetPos=new r(0,-200,0);let o=.1,c=a.skillObj.salvo,h=1;for(let e=0;e<c;e++){let t=O.instance.getNearMonster(a.skillKey);if(a.skillObj.targetType==E.TARGET_RANDOM&&(t=y.rand(t)),t.length){let i=a.skillObj.bulletCount;for(let l=0;l<i;l++)for(let i=0;i<h;i++){let s=a.skillObj.intervalAngle,n=S.instance.getSkillDirAngle(l,s);if(i<t.length){let l=y.clone(a),s=new r(t[i].x,t[i].y,t[i].z);k.emit(d.ATTACK_SKILL_EFFECT,l,s,n,o*e)}}}}}}revive(){this.unscheduleAllCallbacks(),this.releaseSkillStatus=!0,k.emit(d.SHOW_HERO_HP,this.node.getPosition())}clear(){this.unscheduleAllCallbacks(),this.releaseSkillStatus=!0,k.emit(d.UPDATE_HERO_HP)}initHeroAnim(){this.heroSpine.addAnimation(0,p.IDLE,!0)}onEnable(){this.heroSpine.setAnimation(0,p.IDLE,!0),k.on(d.HERO_HURT,this.onAttacked,this),k.on(d.HERO_RESTORE_HP,this.onRestoredHp,this),k.on(d.HERO_RESTORE_HPPER,this.onRestoredHpPer,this),k.on(d.HERO_RESTORE_SHIELD,this.onRestoredShield,this)}onDisable(){k.off(d.HERO_HURT,this.onAttacked,this),k.off(d.HERO_RESTORE_HP,this.onRestoredHp,this),k.off(d.HERO_RESTORE_HPPER,this.onRestoredHpPer,this),k.off(d.HERO_RESTORE_SHIELD,this.onRestoredShield,this)}childUpdate(e){}}).prototype,"heroSpine",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(j.prototype,"skillTypeList",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(j.prototype,"skillTypePrefab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=j))||A));l._RF.pop()}}}));

System.register("chunks:///_virtual/HeroData.ts",["cc","./SkillModel.ts","./HeroModel.ts","./CfgMgr.ts","./BagHeroData.ts","./SkillUpgradeData.ts","./WeaponShopData.ts","./SkillData.ts","./HeroEquipData.ts"],(function(t){var e,i,s,r,h,a,l,_,p,n,u,c;return{setters:[function(t){e=t.cclegacy,i=t.Vec3,s=t.Vec2},function(t){r=t.SkillObj},function(t){h=t.HeroCfg},function(t){a=t.CfgMgr},function(t){l=t.BagHeroData},function(t){_=t.SkillUpgradeData,p=t.SkillUpgradeType},function(t){n=t.WeaponShopData},function(t){u=t.SkillData},function(t){c=t.HeroEquipData}],execute:function(){e._RF.push({},"bb7bbazU8hHH7H+JeHxuMK9","HeroData",void 0);class H{constructor(){this._heroPoint=new i(0,-620,0),this._heroR=450,this._heroKey="1001",this._releaseSkillQueue=[],this._curHp=0,this._maxHp=100,this._lastMaxHp=100,this._remainHp=100,this._roleHp=100,this._curShield=0,this._maxShield=300,this._hpPer=0,this._heroId=0,this._damagePer=0,this._damage=0,this._elementDamages=[0,0,0,0,0,0,0],this._weaponKeys=new Map,this._restoreNumber=0,this._activeSkillObj=null,this._activeSkillId=0,this._heroUpgradeSkillObj=null}get heroPoint(){return this._heroPoint}get heroKey(){return this._heroKey}get heroR(){return this._heroR}get maxHp(){return this._maxHp}get curHp(){return this._curHp}get maxShield(){return this._maxShield}get curShield(){return this._curShield}get hpPer(){return this._hpPer}get heroId(){return this._heroId}get damagePer(){return this._damagePer}get damage(){return this._damage}get elementDamages(){return this._elementDamages}get activeSkillObj(){return this._activeSkillObj}get activeSkillId(){return this._activeSkillId}get heroUpgradeSkillObj(){return this._heroUpgradeSkillObj}init(){this._activeSkillId=0,this._activeSkillObj=null,this._heroUpgradeSkillObj=new o,this._heroUpgradeSkillObj.maxEnergy=100,this._heroUpgradeSkillObj.energy=0,this._heroUpgradeSkillObj.exp=2,this._heroUpgradeSkillObj.expPer=0;let t=l.instance.activeHeroId;if(this._heroId=0,this._hpPer=0,this._damagePer=0,t>0){this._heroId=t;let e=l.instance.getHeroObjById(t);this._hpPer+=e.addHp,this._damagePer+=e.addDamage;let i=c.instance.calEquipAtk(e.equips);this._damage=i.baseAtk,this._elementDamages=i.elements,this.initUpgradeSkill(),this.initActiveSkill()}this._curHp=100*(100+this._hpPer)/100,this._maxHp=100*(100+this._hpPer)/100,this._roleHp=100*this._hpPer/100,this._lastMaxHp=100*(100+this._hpPer)/100,this._remainHp=100*(100+this._hpPer)/100,this._curShield=0,this._maxShield=this._maxHp}revive(){this._releaseSkillQueue=[],this._curShield=0,this._curHp=this._maxHp,this._remainHp=this._curHp}initUpgradeSkill(){let t=l.instance.getSkillsByHeroId(this._heroId);for(let e=0;e<t.length;e++){let i=t[e],s=_.instance.getSkillUpgradeCfgById(i);switch(s.type){case p.SKILL_BATTLE:_.instance.upgradeBattleSkillObjAtt(s);break;case p.SKILL_HERO:_.instance.upgradeHeroObjAtt(s),this.upgradeBattleSkillObjAtt(s.attrs);break;case p.SHOP:_.instance.upgradeShopObjAtt(s),n.instance.upgradeSkill(s.attrs)}}}getDamage(t){let e=this._damage;return this._elementDamages[t]&&(e+=this._elementDamages[t]),e}upgradeBattleSkillObjAtt(t){for(let e=0;e<t.length;e++){let i=t[e];Array.isArray(this._heroUpgradeSkillObj[i.key])?this._heroUpgradeSkillObj[i.key].push(i.value):this._heroUpgradeSkillObj[i.key]+=i.value}}getInitCarryWeapon(){return n.instance.getInitCarryWeapon()}initActiveSkill(){let t=l.instance.getHeroSkillByHeroId(this._heroId,0);if(!t||!t.skillId)return;let e=t.skillId,i=u.instance.getSkillCfgById(e);if(!i)return;let s=new r;s.Id=i.Id;for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t)){const e=i[t];s.hasOwnProperty(t)&&(s[t]=e)}s.weaponId=t.Id,s.level=1;let h=l.instance.getHeroObjById(this._heroId);s.bulletScale=100,s.cd=0,s.range=0,s.damage=h.addDamage+h.addHp,s.type=2,s.salvo=1,this._activeSkillId=e,this._activeSkillObj=_.instance.getUpgradeSkillBySkillId(s)}getHeroCfgById(t){return a.getDataById(new h,t)}initHp(){this._remainHp=this._curHp,this._lastMaxHp=this._maxHp,this._restoreNumber=0}addHp(t,e){if(t=t*(100+this._hpPer)/100,this._weaponKeys.set(e,!0),this._maxHp+t<this._lastMaxHp)this._maxHp+=t,this._curHp+=t,this._curHp>this._remainHp&&(this._curHp=this._remainHp);else if(this._maxHp+t>=this._lastMaxHp&&this._maxHp<this._lastMaxHp){let e=this._maxHp+t-this._lastMaxHp;this._maxHp+=t,this._curHp=e+this._remainHp}else this._maxHp+=t,this._curHp+=t;this._maxShield=this._maxHp}subHp(t,e){return t=t*(100+this._hpPer)/100,!!this._weaponKeys.has(e)&&(this._weaponKeys.delete(e),this._maxHp-=t,this._curHp-=t,this._curHp<this._remainHp&&(this._curHp=this._remainHp),this._curHp>this._maxHp&&(this._curHp=this._maxHp),!0)}addHpPer(t){let e=100*(this.maxHp-this._roleHp)/(100+this._hpPer);this._hpPer+=t;let i=e*(100+this._hpPer)/100;this._curHp+=i-e,this._maxHp=this._roleHp+i,this._maxShield=this._maxHp,this._lastMaxHp=this._maxHp,this._curHp>this._lastMaxHp&&(this._curHp=this._lastMaxHp),this._remainHp=this._curHp}subCurHp(t){let e=t;this._curShield>=t?this._curShield-=t:(this._curShield<t&&this._curShield>=0&&(e=t-this._curShield,this._curShield=0),this._curHp-=e,this._curHp<=0&&(this._curHp=0),this._remainHp=this._curHp)}addCurHp(t){this._curHp+t>this._maxHp?this._curHp=this._maxHp:this._curHp+=t,this._remainHp=this._curHp}addCurHpPer(t,e){let i=0;3==e.length&&this._curHp<Math.floor(e[0]*this._maxHp/100)&&this._restoreNumber<e[2]?(this._restoreNumber++,i=Math.floor(e[1]*this._maxHp/100)):i=Math.floor(t*this._maxHp/100),this._curHp+i>this._maxHp?this._curHp=this._maxHp:this._curHp+=i,this._remainHp=this._curHp}addCurShield(t){this._curShield+t>this._maxHp?this._curShield=this._maxHp:this._curShield+=t}checkInHeroRange(t,e,r){if(s.squaredDistance(t,new s(this._heroPoint.x,this._heroPoint.y))<e*e)return!1;if(t.y-this.heroPoint.y<300){let e=new i,s=i.subtract(e,this._heroPoint.clone(),new i(t.x,t.y,0));r.dir=s.normalize()}return!0}addQueueSkill(t){this._releaseSkillQueue.push(t)}getQueueSkill(){return this._releaseSkillQueue.shift()}clear(){this._releaseSkillQueue=[],this._curShield=0}static get instance(){return this._instance||(this._instance=new H),this._instance}}t("HeroData",H),H._instance=null;t("HeroAnim",function(t){return t.IDLE="idle",t.ATK="attack",t.ATK1="attack1",t.ATK2="attack2",t.HIT="hit",t.DIE="die",t}({}));class o{constructor(){this.maxEnergy=void 0,this.energy=void 0,this.exp=void 0,this.expPer=void 0}}t("HeroUpgradeSkillObj",o),e._RF.pop()}}}));

System.register("chunks:///_virtual/HeroDetailPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./BagHeroData.ts","./ResourcesUtil.ts","./LanguageManager.ts","./HeroUpgradeItem.ts","./HeroAwakenItem.ts","./EventListener.ts","./GameEvent.ts","./HeroEquipItem.ts","./EquipItem.ts","./HeroEquipData.ts"],(function(e){var t,i,n,a,o,r,s,l,h,p,u,c,b,g,m,d,f,H,y,I,_,q,E,C,w;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,a=e.Label,o=e.sp,r=e.Node,s=e.RichText,l=e.Sprite,h=e.Prefab,p=e._decorator,u=e.Component,c=e.instantiate,b=e.Color},function(e){g=e.OpenPopupManager},function(e){m=e.Constants},function(e){d=e.BagHeroData},function(e){f=e.ResourcesUtil},function(e){H=e.LanguageManager},function(e){y=e.HeroUpgradeItem},function(e){I=e.HeroAwakenItem},function(e){_=e.EventListener},function(e){q=e.GameEvent},function(e){E=e.HeroEquipItem},function(e){C=e.EquipItem},function(e){w=e.HeroEquipData}],execute:function(){var k,O,T,v,P,B,D,A,U,j,z,L,R,N,S,F,x,G,M,Q,J,W,Y,$,K,V,X,Z,ee,te,ie,ne,ae,oe,re,se,le,he,pe,ue,ce;n._RF.push({},"cdb40fCSW9Jd4YgURbLQG49","HeroDetailPopup",void 0);const{ccclass:be,property:ge}=p;e("HeroDetailPopup",(k=be("HeroDetailPopup"),O=ge(a),T=ge(o.Skeleton),v=ge(r),P=ge(a),B=ge(a),D=ge(a),A=ge(r),U=ge(s),j=ge(l),z=ge(r),L=ge(r),R=ge(r),N=ge(r),S=ge(r),F=ge(r),x=ge(h),G=ge(o.Skeleton),M=ge(r),Q=ge(r),k((Y=t((W=class extends u{constructor(){super(...arguments),i(this,"heroName",Y,this),i(this,"icon",$,this),i(this,"used",K,this),i(this,"level",V,this),i(this,"addHp",X,this),i(this,"addDamage",Z,this),i(this,"starList",ee,this),i(this,"skill",te,this),i(this,"skillIcon",ie,this),i(this,"skillPopup",ne,this),i(this,"upgradeContent",ae,this),i(this,"awakenContent",oe,this),i(this,"equipContent",re,this),i(this,"equipBanner",se,this),i(this,"tabButtons",le,this),i(this,"starItem",he,this),i(this,"upgradeAnim",pe,this),i(this,"equipItems",ue,this),i(this,"enhanceEquipBtn",ce,this),this._heroObj=null,this._heroCfg=null,this.tabType="upgrade"}show(e){this._heroObj=e,d.instance.curHero=e,this._heroCfg=d.instance.getHeroCfgById(e.heroId),this.tabType="upgrade",this.setHeroInfo()}setHeroInfo(){this.upgradeContent.getComponent(y).init(this._heroObj),this.awakenContent.getComponent(I).init(this._heroObj),this.equipContent.getComponent(E).init(),this.setHeroAttr(),this.setTabInfo(),this.setHeroFrames(),this.setHeroEquipments()}setHeroAttr(){this.skillPopup.active=!1,this.heroName.string=H.instance.getLang(this._heroCfg.name),this.level.string=`${this._heroObj.level}`,this._heroObj.isUsed?this.used.active=!0:this.used.active=!1;let e=w.instance.calEquipAtk(this._heroObj.equips),t=e.baseAtk+e.extraAtk;this.addHp.string=Number(this._heroObj.addHp).toFixed(1)+"%",this.addDamage.string=Number(this._heroObj.addDamage).toFixed(1)+"%"+(t>0?"+"+t:"");for(let e=0;e<this._heroObj.star;e++)if(!this.starList.children[e]){c(this.starItem).parent=this.starList}for(let e=this.starList.children.length-1;e>this._heroObj.star-1;e--)this.starList.children[e].removeFromParent();let i=d.instance.getHeroSkillByHeroId(this._heroObj.heroId),n=m.skillIconPath+i.icon+"/spriteFrame";f.getSpriteFrame(n).then((e=>{this.skillIcon.spriteFrame=e}));let a=H.instance.getLang(i.desc);a=a.replace(/ffffff/g,"071e3e").replace(/59c535/g,"ea35c1"),a="<b>"+a+"</b>",this.skill.string=a}setHeroFrames(){let e=m.heroSpinePath+this._heroCfg.skeleton;f.getSkeletonData(e).then((e=>{this.icon.skeletonData=e,this.icon.node.setScale(this._heroCfg.scale,this._heroCfg.scale),this.icon.setAnimation(0,"idle",!0)}))}setHeroEquipments(){for(let e=0;e<this.equipItems.length;e++){let t=this.equipItems[e];if(this._heroObj.equips[e]&&0!=this._heroObj.equips[e].id){let i=this._heroObj.equips[e];t.getChildByName("equipItem").getComponent(C).init(i,this._heroObj.heroId),t.getChildByName("equipItem").active=!0}else t.getChildByName("equipItem").active=!1}}onEnhanceBtn(){g.instance.show(m.PopupUI.EquipActionPopup)}onUpdateHero(){let e=d.instance.getHeroObjById(this._heroObj.heroId);this._heroObj=e,this.setHeroInfo(),this.setHeroEquipments()}onShowSkill(e,t){this.skillPopup.active=!this.skillPopup.active}onTabTouch(e,t){this.tabType=t,this.setTabInfo()}setTabInfo(){this.upgradeContent.active="upgrade"==this.tabType,this.awakenContent.active="awaken"==this.tabType,this.equipContent.active="equip"==this.tabType,this.equipBanner.active="equip"==this.tabType,this.enhanceEquipBtn.active="equip"==this.tabType,this.tabButtons.children.forEach((e=>{e.getComponent(l).color=new b(41,40,61,255),e.getChildByName("Sprite").active=!1}));let e=0;"awaken"==this.tabType&&(e=1),"equip"==this.tabType&&(e=2),this.tabButtons.children[e].getComponent(l).color=new b(49,129,255,255),this.tabButtons.children[e].getChildByName("Sprite").active=!0}onUpgradeHero(){this.upgradeAnim.node.active=!0,this.upgradeAnim.setAnimation(0,"animation",!1)}onTab(e){this.tabType=e,this.setTabInfo()}onEquipBtn(e,t){this.tabType="equip",this.setTabInfo(),_.emit(q.CHANGE_HERO_EQUIP_TAB,e,t)}closeDialog(){g.instance.hide(m.PopupUI.HeroDetailPopup)}onEnable(){_.on(q.UPDATE_HERO_INFO,this.onUpdateHero,this),_.on(q.UPGRADE_HERO,this.onUpgradeHero,this),_.on(q.UPDATE_HERO_TAB,this.onTab,this)}onDisable(){_.off(q.UPDATE_HERO_INFO,this.onUpdateHero,this),_.off(q.UPGRADE_HERO,this.onUpgradeHero,this),_.off(q.UPDATE_HERO_TAB,this.onTab,this)}}).prototype,"heroName",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=t(W.prototype,"icon",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=t(W.prototype,"used",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=t(W.prototype,"level",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=t(W.prototype,"addHp",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z=t(W.prototype,"addDamage",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ee=t(W.prototype,"starList",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te=t(W.prototype,"skill",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ie=t(W.prototype,"skillIcon",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ne=t(W.prototype,"skillPopup",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ae=t(W.prototype,"upgradeContent",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oe=t(W.prototype,"awakenContent",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),re=t(W.prototype,"equipContent",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),se=t(W.prototype,"equipBanner",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),le=t(W.prototype,"tabButtons",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),he=t(W.prototype,"starItem",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pe=t(W.prototype,"upgradeAnim",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=t(W.prototype,"equipItems",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ce=t(W.prototype,"enhanceEquipBtn",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=W))||J));n._RF.pop()}}}));

System.register("chunks:///_virtual/HeroEquipData.ts",["cc","./CfgMgr.ts","./EquipModel.ts","./EquipLevelModel.ts","./HttpService.ts","./EventListener.ts","./GameEvent.ts","./Api.ts","./OpenPopupManager.ts","./Constants.ts","./BagHeroData.ts","./EquipAttrModel.ts"],(function(t){var e,i,s,n,a,r,u,o,p,l,c,h,g,E;return{setters:[function(t){e=t.cclegacy,i=t._decorator},function(t){s=t.CfgMgr},function(t){n=t.EquipCfg},function(t){a=t.EquipLevelCfg},function(t){r=t.HttpService},function(t){u=t.EventListener},function(t){o=t.GameEvent},function(t){p=t.Api},function(t){l=t.OpenPopupManager,c=t.LayerType},function(t){h=t.Constants},function(t){g=t.BagHeroData},function(t){E=t.EquipAttrCfg}],execute:function(){var d,q;e._RF.push({},"c3b28GL/kBBhZWe8LWxZWhP","HeroEquipData",void 0);const{ccclass:m}=i;t("HeroEquipData",m("HeroEquipData")(((q=class t{constructor(){this.equipTypes=["sword","shield","helmet","armor","gloves","shoes"],this._blueprintMap=new Map,this._equipItems=[]}get equipItems(){return this._equipItems}initCfg(){let t=s.getCfgDataArray(new n);for(let e=0;e<t.length;e++){let i=t[e];this._blueprintMap.set(i.itemId,i.blueprintId)}}getEquips(){r.instance.post(p.EQUIP_LIST,{}).then((t=>{if(0==t.code){let e=t.data.items;e.sort(((t,e)=>t.star>e.star||t.star==e.star&&t.quality>e.quality?-1:1)),this._equipItems=e,u.emit(o.UPDATE_HERO_INFO)}}))}getBlueprintId(t){return this._blueprintMap.get(t)}getEquipAttrs(t){let e=this.getEquipCfgByItemId(t.itemId,t.star,t.quality),i=[];for(let s=0;s<e.attrs.length;s++){let n=e.attrs[s],a=e.attrValue[s],r=new f,u=t.id+t.id*s+777;r.id=n[u%n.length],r.value=a[0]+u%(a[1]-a[0]+1);let o=this.getEquipAttrCfg(r.id);r.name=o.name,r.aimElements=o.aimElements,i.push(r)}return i}getEquipAttrCfg(t){return s.getDataById(new E,t)}getEquipCfgByItemId(t,e,i){let a=s.getCfgDataArray(new n);for(let s=0;s<a.length;s++){let n=a[s];if(n.itemId==t&&n.star==e&&n.quality==i)return n}return null}getEnhanceCfgByLevel(t){let e=s.getCfgDataArray(new a);for(let i=0;i<e.length;i++){let s=e[i];if(s.level==t)return s}return null}equipEquipment(t){let e=g.instance.curHero.heroId;r.instance.post(p.HERO_EQUIPMENT_EQUIP,{heroId:e,equipId:t}).then((t=>{0==t.code?(this.getEquips(),g.instance.getHeroDataFromNetwork(),l.instance.hide(h.PopupUI.EquipDetailPopup)):l.instance.showToast(t.msg)}))}removeEquipment(t,e){r.instance.post(p.HERO_EQUIPMENT_REMOVE,{heroId:e,equipId:t}).then((t=>{0==t.code?(this.getEquips(),g.instance.getHeroDataFromNetwork(),l.instance.hide(h.PopupUI.EquipDetailPopup)):l.instance.showToast(t.msg)}))}enhanceEquipment(t,e){r.instance.post(p.EQUIP_ENHANCE,{equipId:t}).then((t=>{0==t.code?(this.getEquips(),l.instance.showToast("Succcess"),e()):l.instance.showToast(t.msg)}))}forgingEquipment(t,e){r.instance.post(p.EQUIP_FORGING,{equipId:t}).then((t=>{0==t.code?(this.getEquips(),l.instance.showToast("success"),e()):l.instance.showToast(t.msg)}))}starupEquipment(t,e,i){r.instance.post(p.EQUIP_STARUP,{equipId1:t,equipId2:e,equipId3:i}).then((t=>{0==t.code?(this.getEquips(),l.instance.show(h.PopupUI.EquipOpenPopup,null,c.TOP,!1,t.data.item?[t.data.item]:[],t.data.rewards)):l.instance.showToast(t.msg)}))}calEquipAtk(t){let e=0,i=0,s=[0,0,0,0,0,0];for(let n=0;n<t.length;n++){let a=t[n];if(a&&a.itemId){let t=this.getEquipCfgByItemId(a.itemId,a.star,a.quality);if(e+=Math.floor(t.atk*(1+t.atkRate)),a.level>0){e+=this.getEnhanceCfgByLevel(a.level).atk}let n=this.getEquipAttrs(a);for(let e=0;e<n.length;e++){let a=n[e],r=t.attrRate[e];if(r>-1)for(let t=0;t<a.aimElements.length;t++)i+=Math.floor(a.value*(1+r)),s[a.aimElements[t]]+=Math.floor(a.value*(1+r))}}}return{baseAtk:e,extraAtk:i,elements:s}}static get instance(){return this._instance||(this._instance=new t),this._instance}})._instance=null,d=q))||d);t("EquipListResult",class{constructor(){this.items=void 0}});class f{constructor(){this.id=void 0,this.name=void 0,this.value=void 0,this.aimElements=void 0}}t("EquipAttrObj",f);t("EquipStarupResult",class{constructor(){this.item=void 0,this.rewards=void 0}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/HeroEquipItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventListener.ts","./GameEvent.ts","./EquipItem.ts","./HeroEquipData.ts"],(function(e){var t,i,n,o,s,a,r,p,l,c,h,u,_;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,o=e.ScrollView,s=e.Node,a=e.Prefab,r=e._decorator,p=e.Component,l=e.instantiate},function(e){c=e.EventListener},function(e){h=e.GameEvent},function(e){u=e.EquipItem},function(e){_=e.HeroEquipData}],execute:function(){var E,m,f,q,b,I,d,y,C;n._RF.push({},"cf8e1+YuE5DpIkzOZR7SmEr","HeroEquipItem",void 0);const{ccclass:T,property:H}=r;e("HeroEquipItem",(E=T("HeroEquipItem"),m=H(o),f=H(s),q=H(a),E((d=t((I=class extends p{constructor(){super(...arguments),i(this,"scrollView",d,this),i(this,"tabs",y,this),i(this,"equipItem",C,this),this._equipType=0,this._action="",this._showWear=!1}init(e,t,i){this._action=e,this._equipType=t||this._equipType,this._showWear=i||!1,this.onUpdateContent()}onChangeTab(e,t){this._equipType=t,this.onUpdateContent(),c.emit(h.EQUIP_SWITCH_TAB,"equipment",this._equipType)}onUpdateContent(){this.tabs.children.forEach(((e,t)=>{e.getChildByName("checked").active=!1})),this.tabs.children[this._equipType].getChildByName("checked").active=!0,this.scrollView.content.removeAllChildren();for(let e=0;e<_.instance.equipItems.length;e++){let t=_.instance.equipItems[e];if(t.type==this._equipType){let e=l(this.equipItem);e.getComponent(u).init(t,0,this._action),e.setScale(.84,.84),e.parent=this.scrollView.content}}}onEnable(){c.on(h.UPDATE_HERO_EQUIP_INFO,this.onUpdateContent,this),c.on(h.CHANGE_HERO_EQUIP_TAB,this.onChangeTab,this)}onDisable(){c.off(h.UPDATE_HERO_EQUIP_INFO,this.onUpdateContent,this),c.off(h.CHANGE_HERO_EQUIP_TAB,this.onChangeTab,this)}}).prototype,"scrollView",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=t(I.prototype,"tabs",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(I.prototype,"equipItem",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=I))||b));n._RF.pop()}}}));

System.register("chunks:///_virtual/HeroHpItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventListener.ts","./GameEvent.ts","./HeroData.ts","./GameDefine.ts","./OpenPopupManager.ts","./Util.ts","./GameData.ts"],(function(e){var t,i,n,r,a,o,s,l,h,p,c,u,m,d,g,f,H,b,B,M;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,r=e.Node,a=e.Label,o=e._decorator,s=e.Component,l=e.UITransform,h=e.ProgressBar,p=e.tween},function(e){c=e.EventListener},function(e){u=e.GameEvent},function(e){m=e.HeroData,d=e.HeroAnim},function(e){g=e.GameDefine,f=e.GameMode},function(e){H=e.OpenPopupManager},function(e){b=e.Util},function(e){B=e.GameData,M=e.GameState}],execute:function(){var w,v,y,D,x,A,G,P,C,E,T,N,I,S,_,z,O;n._RF.push({},"f84e2Gtlm9LUIZobBtPl4iy","HeroHpItem",void 0);const{ccclass:R,property:L}=o;e("HeroHpItem",(w=R("HeroHpItem"),v=L(r),y=L(r),D=L(a),x=L(r),A=L(r),G=L(a),P=L(r),w((T=t((E=class extends s{constructor(){super(...arguments),i(this,"hpBarAnim",T,this),i(this,"hpBar",N,this),i(this,"hpText",I,this),i(this,"shieldBarAnim",S,this),i(this,"shieldBar",_,this),i(this,"shieldText",z,this),i(this,"shieldNode",O,this)}init(){let e=b.adapterScale();this.hpBarAnim.getComponent(l).width=this.node.getComponent(l).width,this.hpText.string=`${Math.ceil(m.instance.curHp)}`;let t=Math.ceil(m.instance.curHp),i=Math.ceil(m.instance.maxHp);this.hpBar.getComponent(h).progress=t/i,this.shieldNode.active=!1,this.shieldBarAnim.getComponent(l).width=this.node.getComponent(l).width,this.shieldBar.getComponent(h).progress=0,this.shieldText.string=`${Math.ceil(m.instance.curShield)}`,this.node.setScale(e,e)}setHeroHp(){let e=Math.ceil(Math.round(100*m.instance.curHp)/100),t=Math.ceil(Math.round(100*m.instance.maxHp)/100);e<=0&&(e=0),this.hpText.string=`${e}`,this.hpBar.getComponent(h).progress=e/t;let i=Math.ceil(Math.round(100*m.instance.curShield)/100),n=Math.ceil(Math.round(100*m.instance.maxShield)/100);this.shieldText.string=`${i}`,i<=0&&(i=0),m.instance.curShield<=0?this.shieldNode.active=!1:this.shieldNode.active=!0,i>n&&(i=n),this.shieldBar.getComponent(h).progress=i/n;let r=this.hpBar.getComponent(l).width,a=this.hpBarAnim.getComponent(l).width-r;p(this.hpBarAnim.getComponent(l)).by(.2,{width:-a}).call((()=>{e<=0&&(g.gameOver=!0,g.gameStart=!1,c.emit(u.HERO_ANIM,d.DIE),g.gameMode==f.NORMAL?0==B.instance.reviveNumber?H.instance.showGameRevivePopup():H.instance.showGameFailPopup():g.gameMode==f.FIGHTEND&&H.instance.showGameWinPopup(M.Failure),this.node.destroy())})).start()}onEnable(){c.on(u.UPDATE_HERO_HP,this.setHeroHp,this)}onDisable(){c.off(u.UPDATE_HERO_HP,this.setHeroHp,this)}}).prototype,"hpBarAnim",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(E.prototype,"hpBar",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(E.prototype,"hpText",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(E.prototype,"shieldBarAnim",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(E.prototype,"shieldBar",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(E.prototype,"shieldText",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(E.prototype,"shieldNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=E))||C));n._RF.pop()}}}));

System.register("chunks:///_virtual/HeroItem.ts",["cc","./GameDefine.ts","./HeroBase.ts"],(function(e){var t,r,c,s;return{setters:[function(e){t=e.cclegacy,r=e._decorator},function(e){c=e.GameDefine},function(e){s=e.HeroBase}],execute:function(){var n;t._RF.push({},"2cadejCYdZBKrCfzup7CJ4/","HeroItem",void 0);const{ccclass:i,property:o}=r;e("HeroItem",i("HeroItem")(n=class extends s{init(){this.initBorn()}childUpdate(e){c.gameStart&&this.releaseSkill()}})||n);t._RF.pop()}}}));

System.register("chunks:///_virtual/HeroLevelItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageManager.ts"],(function(e){var t,r,l,i,a,o,n,c,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.initializerDefineProperty},function(e){l=e.cclegacy,i=e.Node,a=e.Label,o=e.RichText,n=e._decorator,c=e.Component},function(e){s=e.LanguageManager}],execute:function(){var u,p,d,g,b,h,v,f,m,L,y;l._RF.push({},"1bc6arDd9NArZUe5KeJrPvM","HeroLevelItem",void 0);const{ccclass:x,property:A}=n;e("HeroLevelItem",(u=x("HeroLevelItem"),p=A(i),d=A(a),g=A(a),b=A(o),u((f=t((v=class extends c{constructor(){super(...arguments),r(this,"lock",f,this),r(this,"level",m,this),r(this,"target",L,this),r(this,"desc",y,this)}init(e,t){this.lock.active=t<e.level,this.level.string="Lv."+e.level;let r=e.extraAddDamage>0?"hero.atkbonusAdd":"hero.hpbonusAdd",l=e.extraAddDamage>0?e.extraAddDamage:e.extraAddHp,i=s.instance.getLang(r,[l+"%"]);e.level,this.desc.string=`<color=#ffffff>${i}</color>`}}).prototype,"lock",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=t(v.prototype,"level",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=t(v.prototype,"target",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=t(v.prototype,"desc",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=v))||h));l._RF.pop()}}}));

System.register("chunks:///_virtual/HeroLevelModel.ts",["cc"],(function(e){var d;return{setters:[function(e){d=e.cclegacy}],execute:function(){d._RF.push({},"d012fcyLVdEu6sAgUO4qK2S","HeroLevelModel",void 0);e("HeroLevelCfg",class{constructor(){this.ClassName="HeroLevel",this.Id=void 0,this.heroId=void 0,this.level=void 0,this.food=void 0,this.addDamage=void 0,this.addHp=void 0,this.extraAddDamage=void 0,this.extraAddHp=void 0}}),d._RF.pop()}}}));

System.register("chunks:///_virtual/HeroManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./HeroItem.ts","./HeroData.ts","./Constants.ts","./ResourcesUtil.ts"],(function(e){var t,n,r,o,i,a,s,c,l,h,u,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){r=e.cclegacy,o=e.Node,i=e.Prefab,a=e._decorator,s=e.Component,c=e.instantiate},function(e){l=e.HeroItem},function(e){h=e.HeroData},function(e){u=e.Constants},function(e){p=e.ResourcesUtil}],execute:function(){var g,f,m,H,d,v,P;r._RF.push({},"05904hsJphIWZgNzrf1SUbi","HeroManager",void 0);const{ccclass:b,property:C}=a;e("HeroManager",(g=b("HeroManager"),f=C(o),m=C(i),g((v=t((d=class extends s{constructor(){super(...arguments),n(this,"heroParent",v,this),n(this,"heroItem",P,this)}init(){this.creatHero()}creatHero(){let e=h.instance.heroId;0==e&&(e=2001);let t=h.instance.getHeroCfgById(e),n=u.heroSpinePath+t.skill;p.getSkeletonData(n).then((e=>{let n=c(this.heroItem),r=h.instance.heroPoint;n.getComponent(l).heroSpine.skeletonData=e,n.getComponent(l).heroSpine.node.setScale(t.skillScale,t.skillScale),n.parent=this.heroParent,n.setPosition(r),n.getComponent(l).init(),n.active=!1}))}revive(){h.instance.revive(),this.heroParent.children[0].getComponent(l).revive()}showHideHero(e){this.heroParent.children[0].active=e}clear(){h.instance.clear(),this.heroParent.children[0].getComponent(l).clear()}}).prototype,"heroParent",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(d.prototype,"heroItem",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=d))||H));r._RF.pop()}}}));

System.register("chunks:///_virtual/HeroModel.ts",["cc"],(function(i){var s;return{setters:[function(i){s=i.cclegacy}],execute:function(){s._RF.push({},"eb88auszTVE3Jqk6DjzK4O6","HeroModel",void 0);i("HeroCfg",class{constructor(){this.ClassName="Hero",this.Id=void 0,this.name=void 0,this.desc=void 0,this.quality=void 0,this.res=void 0,this.scale=void 0,this.skeleton=void 0,this.skill=void 0,this.skillScale=void 0}});i("HeroModel",class{constructor(){this.heroId=void 0,this.level=void 0,this.fragment=void 0,this.isUsed=void 0,this.star=void 0,this.equips=void 0}});i("HeroObj",class{constructor(){this.heroId=void 0,this.level=void 0,this.fragment=void 0,this.isUsed=void 0,this.star=void 0,this.maxLevel=void 0,this.addHp=void 0,this.addDamage=void 0,this.equips=void 0}});i("HeroInfoModel",class{constructor(){this.food=void 0,this.heros=void 0}}),s._RF.pop()}}}));

System.register("chunks:///_virtual/HeroPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BagHeroData.ts","./BagHeroItem.ts","./EventListener.ts","./GameEvent.ts","./HeroEquipData.ts"],(function(e){var t,n,o,i,r,s,a,l,p,u,c,H,h,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){o=e.cclegacy,i=e.Prefab,r=e.Node,s=e._decorator,a=e.Component,l=e.Layout,p=e.instantiate},function(e){u=e.BagHeroData},function(e){c=e.BagHeroItem},function(e){H=e.EventListener},function(e){h=e.GameEvent},function(e){g=e.HeroEquipData}],execute:function(){var f,b,m,d,C,E,v,D,I;o._RF.push({},"b1d19jCtvNLGoEJqEGVHvMw","HeroPopup",void 0);const{ccclass:w,property:y}=s;e("HeroPopup",(f=w("HeroPopup"),b=y(i),m=y(r),d=y(r),f((v=t((E=class extends a{constructor(){super(...arguments),n(this,"bagHeroItem",v,this),n(this,"upContent",D,this),n(this,"downContent",I,this)}show(){u.instance.getHeroDataFromNetwork(),g.instance.getEquips(),this.setHeroInfos()}setHeroInfos(){this.upContent.getComponent(l).enabled=!0,this.upContent.removeAllChildren();let e=u.instance.getActiveHeros();for(let t=0;t<e.length;t++){let n=p(this.bagHeroItem);n.getComponent(c).init(e[t]),n.parent=this.upContent}this.downContent.removeAllChildren();let t=u.instance.getLockedHeros();for(let e=0;e<t.length;e++){let n=p(this.bagHeroItem);n.getComponent(c).init(t[e]),n.parent=this.downContent}}onUpdateHeros(){this.setHeroInfos()}onEnable(){H.on(h.UPDATE_HERO_INFO,this.onUpdateHeros,this)}onDisable(){H.off(h.UPDATE_HERO_INFO,this.onUpdateHeros,this)}}).prototype,"bagHeroItem",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(E.prototype,"upContent",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=t(E.prototype,"downContent",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=E))||C));o._RF.pop()}}}));

System.register("chunks:///_virtual/HeroSkillModel.ts",["cc"],(function(i){var s;return{setters:[function(i){s=i.cclegacy}],execute:function(){s._RF.push({},"9a090LHBrdH9Z3ZvGcX28D1","HeroSkillModel",void 0);i("HeroSkillCfg",class{constructor(){this.ClassName="HeroSkill",this.Id=void 0,this.heroId=void 0,this.star=void 0,this.desc=void 0,this.icon=void 0,this.maxLevel=void 0,this.type=void 0,this.addDamage=void 0,this.addHp=void 0,this.fragment=void 0,this.skillId=void 0,this.upgradeSkills=void 0}}),s._RF.pop()}}}));

System.register("chunks:///_virtual/HeroStarItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageManager.ts"],(function(t){var e,i,r,s,n,a,o,l,c,u,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){r=t.cclegacy,s=t.Node,n=t.RichText,a=t.Prefab,o=t._decorator,l=t.Component,c=t.instantiate,u=t.Color},function(t){h=t.LanguageManager}],execute:function(){var p,g,d,b,m,f,y,L,w,v,C;r._RF.push({},"b7e3aho6FtNB7u44JoSCp+X","HeroStarItem",void 0);const{ccclass:I,property:S}=o;t("HeroStarItem",(p=I("HeroStarItem"),g=S(s),d=S(s),b=S(n),m=S(a),p((L=e((y=class extends l{constructor(){super(...arguments),i(this,"lock",L,this),i(this,"starList",w,this),i(this,"desc",v,this),i(this,"startItem",C,this)}init(t,e){this.lock.active=t.star>e,this.starList.removeAllChildren();for(let i=0;i<t.star;i++){let i=null;t.star>e?(i=c(this.node.getChildByName("star")),i.active=!0,this.desc.string=`<outline color=#000000 width=2>${h.instance.getLang(t.desc)}</outline>`,this.desc.fontColor=new u(167,167,167,255)):(i=c(this.startItem),this.desc.string=`<outline color=#000000 width=2>${h.instance.getLang(t.desc)}</outline>`,this.desc.fontColor=new u(255,255,255,255)),i.parent=this.starList}}}).prototype,"lock",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=e(y.prototype,"starList",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=e(y.prototype,"desc",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=e(y.prototype,"startItem",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=y))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/HeroUpgradeItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BagHeroData.ts","./HeroLevelItem.ts","./EventListener.ts","./GameEvent.ts","./Constants.ts","./ResourcesUtil.ts"],(function(e){var t,i,r,o,n,l,s,a,h,c,u,p,b,g,d,m,f,v,_,I;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){r=e.cclegacy,o=e.ScrollView,n=e.Label,l=e.Node,s=e.ProgressBar,a=e.Button,h=e.Prefab,c=e.Sprite,u=e._decorator,p=e.Component,b=e.instantiate,g=e.UITransform},function(e){d=e.BagHeroData},function(e){m=e.HeroLevelItem},function(e){f=e.EventListener},function(e){v=e.GameEvent},function(e){_=e.Constants},function(e){I=e.ResourcesUtil}],execute:function(){var O,j,w,B,y,H,z,L,C,U,k,E,F,V,R,A,D,P,S,x,G,M,T,$,J,N,Q,X,q;r._RF.push({},"580acQ6aEVJBLlMiX28uFiR","HeroUpgradeItem",void 0);const{ccclass:K,property:W}=u;e("HeroUpgradeItem",(O=K("HeroUpgradeItem"),j=W(o),w=W(n),B=W(l),y=W(l),H=W(s),z=W(n),L=W(l),C=W(l),U=W(a),k=W(a),E=W(a),F=W(h),V=W(c),O((D=t((A=class extends p{constructor(){super(...arguments),i(this,"scrollView",D,this),i(this,"upgradeFood",P,this),i(this,"upgradeCondition",S,this),i(this,"unlockCondition",x,this),i(this,"progress",G,this),i(this,"progressValue",M,this),i(this,"food",T,this),i(this,"tip",$,this),i(this,"upgradeBtn",J,this),i(this,"useBtn",N,this),i(this,"toAwakenBtn",Q,this),i(this,"heroLevelItem",X,this),i(this,"heroIcon",q,this),this._heroObj=null}start(){}init(e){this._heroObj=e,this.upgradeCondition.active=this._heroObj.level>0,this.unlockCondition.active=0==this._heroObj.level;let t=this._heroObj.star+(0==this._heroObj.level?0:1),i=d.instance.getHeroSkillByHeroId(this._heroObj.heroId,t);i&&(this.progressValue.string=`${this._heroObj.fragment}/${i.fragment}`,this.progress.progress=this._heroObj.fragment/i.fragment);let r=d.instance.getUpgradeFood(this._heroObj.heroId,this._heroObj.level);this.upgradeFood.string=d.instance.food+"/"+r,this.tip.active=this._heroObj.maxLevel==this._heroObj.level,this.food.active=this._heroObj.maxLevel>this._heroObj.level,this.toAwakenBtn.node.active=this._heroObj.level==this._heroObj.maxLevel,this.upgradeBtn.node.active=this._heroObj.maxLevel>this._heroObj.level,this.upgradeBtn.interactable=d.instance.food>=r,this.useBtn.node.active=!e.isUsed,this.setHeroImg();let o=d.instance.getHeroLevelCfgByHeroId(this._heroObj.heroId);if(0==this.scrollView.content.children.length)for(let e=0;e<o.length;e++){let t=b(this.heroLevelItem);t.getComponent(m).init(o[e],this._heroObj.level),t.parent=this.scrollView.content}else this.scrollView.content.children.forEach(((e,t)=>{e.getComponent(m).init(o[t],this._heroObj.level)}))}setHeroImg(){let e=d.instance.getHeroCfgById(this._heroObj.heroId),t=_.heroIconPath+e.res+"/spriteFrame";I.getSpriteFrame(t).then((e=>{this.heroIcon.spriteFrame=e;let t=this.heroIcon.getComponent(g).contentSize,i=Math.min(90/t.width,90/t.height);this.heroIcon.node.setScale(i,i)}))}onUpgradeBtn(){d.instance.upgradeHero(this._heroObj.heroId,(()=>{f.emit(v.UPGRADE_HERO)}))}onUsedBtn(){d.instance.useHero(this._heroObj.heroId)}goAwakenBtn(){f.emit(v.UPDATE_HERO_TAB,"awaken")}onUnlockBtn(){d.instance.unlockHero(this._heroObj.heroId)}}).prototype,"scrollView",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=t(A.prototype,"upgradeFood",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=t(A.prototype,"upgradeCondition",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=t(A.prototype,"unlockCondition",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=t(A.prototype,"progress",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=t(A.prototype,"progressValue",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=t(A.prototype,"food",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=t(A.prototype,"tip",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=t(A.prototype,"upgradeBtn",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=t(A.prototype,"useBtn",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=t(A.prototype,"toAwakenBtn",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=t(A.prototype,"heroLevelItem",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=t(A.prototype,"heroIcon",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=A))||R));r._RF.pop()}}}));

System.register("chunks:///_virtual/HttpService.ts",["cc","./axios.mjs_cjs=&original=.js","./Storage.ts","./Util.ts","./GameDefine.ts","./ComTipsPopup.ts","./OpenPopupManager.ts","./LanguageManager.ts","./axios.js"],(function(e){var t,n,r,s,i,o,a,c;return{setters:[function(e){t=e.cclegacy},null,function(e){n=e.Storage},function(e){r=e.Util},function(e){s=e.GameDefine},function(e){i=e.ComTipsObj},function(e){o=e.OpenPopupManager},function(e){a=e.LanguageManager},function(e){c=e.default}],execute:function(){t._RF.push({},"a0f36QIiXZCj7AJORAtKZuU","HttpService",void 0);const u="https://api.bagwar.io/";class g{constructor(e){this.instance=void 0,this.baseConfig={baseURL:u,timeout:5e3},this.instance=c.create(Object.assign(this.baseConfig,e)),this.instance.interceptors.request.use((e=>{const t=s.accessToken;return{...e,headers:{"Content-Type":"text/plain",timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,Authorization:t}}}),(e=>Promise.reject(e))),this.instance.interceptors.response.use(void 0,(e=>{const{config:t}=e;if(!t||!t.retry)return Promise.reject(e);if(t.__retryCount=t.__retryCount||0,t.__retryCount>=t.retry)return Promise.reject(e);t.__retryCount+=1;return new Promise((e=>{setTimeout((()=>{e()}),t.retryDelay||1)})).then((()=>this.instance(t)))}))}getRequestIdentify(e,t){void 0===t&&(t=!1);let n=e.url;return t&&(n=n.startsWith("/")?u+n:u+"/"+n),"get"===e.method?encodeURI(n+JSON.stringify(e.params)):encodeURI(n+("string"==typeof e.data?e.data:JSON.stringify(e.data)))}post(e,t,c){let u="",g=n.getItem("logid");g&&(u=e.indexOf("?")>=0?`&logid=${g}`:`?logid=${g}`),c||(c={}),c.retry=10,c.retryDelay=500;let l=r.encrypt(JSON.stringify(t?{...t,version:s.version}:{version:s.version}));return new Promise(((n,g)=>{this.instance.post(e+u,l,c).then((c=>{c&&201!=c.status&&console.log("error",c.data);try{let u=JSON.parse(r.decrypt(c.data.toString()));if(u||(u={code:1,msg:"network.error"}),s.isDebug&&console.log("url",e,"param",t,"response",u),401==u.code){let e=new i;e.hideClose=!0,e.title=a.instance.getLang("tips");let t=a.instance.getLang("login.other");t||(t=""),e.desc=t,o.instance.showComTipsPopup(e,(e=>{e&&window.Telegram.WebApp.close()}))}return n(u)}catch(e){return n({code:1,msg:"network.error"})}})).catch((t=>(console.log("post error url:",e,t),n({code:500,msg:"network.error"}))))}))}get(e,t){return this.instance.get(e,t)}static get instance(){return this._instance||(this._instance=new g({})),this._instance}}e("HttpService",g),g._instance=null,t._RF.pop()}}}));

System.register("chunks:///_virtual/InviteData.ts",["cc","./Api.ts","./HttpService.ts","./EventListener.ts","./GameEvent.ts"],(function(t){var i,s,e,n,a;return{setters:[function(t){i=t.cclegacy},function(t){s=t.Api},function(t){e=t.HttpService},function(t){n=t.EventListener},function(t){a=t.GameEvent}],execute:function(){i._RF.push({},"0fb820all9IJYdLNXC31lTn","InviteData",void 0);class r{constructor(){this.inviteCode=void 0,this.usdtBalance=void 0,this.frens=void 0,this.directFrens=[],this.spreadFrens=[],this.inviteRewards=[]}getInviteInfo(){this.inviteCode?n.emit(a.UPDATE_INVITE_INFO):(e.instance.post(s.FRENS_INFO).then((t=>{if(0==t.code){this.inviteCode=t.data.code,this.frens=t.data.frens,this.inviteRewards=t.data.rewards;for(let i=0;i<t.data.balances.length;i++){const s=t.data.balances[i];"usdt"==s.token&&(this.usdtBalance=s)}n.emit(a.UPDATE_INVITE_INFO)}})),this.getFriends())}getFriends(){e.instance.post(s.FRENS_INVITEES).then((t=>{0==t.code&&(this.directFrens=t.data.direct,this.spreadFrens=t.data.spread,n.emit(a.UPDATE_INVITE_FRIEND_INFO))}))}claim(){}static get instance(){return this._instance||(this._instance=new r),this._instance}}t("InviteData",r),r._instance=null;t("InviteInfoResult",class{constructor(){this.code=void 0,this.balances=void 0,this.frens=void 0,this.rewards=void 0}});t("InviteReward",class{constructor(){this.avatar=void 0,this.reward=void 0}});t("InviteBalanceInfo",class{constructor(){this.token=void 0,this.current=void 0,this.total=void 0,this.withdrawn=void 0}});t("InviteFrenInfo",class{constructor(){this.direct=void 0,this.spread=void 0,this.valid=0}});t("FriendData",class{constructor(){this.direct=void 0,this.spread=void 0}});t("FriendModel",class{constructor(){this.amount=void 0,this.avatar=void 0,this.chapter=void 0,this.username=void 0,this.reward=void 0,this.state=void 0,this.inviteeId=void 0}}),i._RF.pop()}}}));

System.register("chunks:///_virtual/InvitePopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./InviteData.ts","./EventListener.ts","./GameEvent.ts","./PlayerData.ts","./FriendDiamondItem.ts"],(function(e){var t,n,i,o,a,s,r,l,c,p,u,d,h,m,b,I;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,o=e.Label,a=e.Node,s=e.Prefab,r=e._decorator,l=e.Component,c=e.instantiate},function(e){p=e.OpenPopupManager},function(e){u=e.Constants},function(e){d=e.InviteData},function(e){h=e.EventListener},function(e){m=e.GameEvent},function(e){b=e.PlayerData},function(e){I=e.FriendDiamondItem}],execute:function(){var g,f,v,w,P,y,T,D,C,B,E,F,O,U,j,z,N;i._RF.push({},"4624aY0TyNNrZMSEQiTJAjq","InvitePopup",void 0);const{ccclass:_,property:R}=r;e("InvitePopup",(g=_("InvitePopup"),f=R(o),v=R(o),w=R(o),P=R(o),y=R(o),T=R(a),D=R(s),g((E=t((B=class extends l{constructor(){super(...arguments),n(this,"balance",E,this),n(this,"code",F,this),n(this,"direct",O,this),n(this,"vaild",U,this),n(this,"super",j,this),n(this,"diamondItems",z,this),n(this,"diamondItem",N,this)}show(){d.instance.getInviteInfo(),this.code.string=b.instance.userObj.code}init(){this.code.string=b.instance.userObj.code,this.direct.string=`${d.instance.frens.direct}`,this.vaild.string=`${d.instance.frens.valid}`,this.super.string=d.instance.frens.spread.toString(),this.balance.string=Number(d.instance.usdtBalance.total).toFixed(3)+"USDT",this.diamondItems.removeAllChildren();for(let t=0;t<d.instance.inviteRewards.length;t++){let n=d.instance.inviteRewards[t];var e=c(this.diamondItem);e.getComponent(I).init(n,this.onInviteBtn.bind(this)),e.parent=this.diamondItems}}onCloseBtn(){p.instance.hide(u.PopupUI.InvitePopup)}onInfoBtn(){p.instance.show(u.PopupUI.InviteTipsPopup)}onInviteBtn(){let e=b.instance.configObj.tgBot+"?startapp="+b.instance.userObj.code;const t="https://t.me/share/url?url="+encodeURIComponent(e)+"&text="+encodeURIComponent("BagWar battle time! Join BagWar now with my link for epic rewards! 🎁🔥");window.Telegram&&window.Telegram.WebApp.openTelegramLink(t)}onCopyTouch(){const e=document.createElement("textarea");let t=b.instance.configObj.tgBot+"?startapp="+b.instance.userObj.code;e.value=t,document.body.appendChild(e),e.select(),e.setSelectionRange(0,e.value.length);try{document.execCommand("copy"),p.instance.showToast("Success")}catch(e){p.instance.showToast("Fail")}document.body.removeChild(e)}onWithdrawBtn(){p.instance.show(u.PopupUI.WithdrawPopup)}showFriendsPopup(){p.instance.show(u.PopupUI.FriendsPopup)}onEnable(){h.on(m.UPDATE_INVITE_INFO,this.init,this)}onDisable(){h.off(m.UPDATE_INVITE_INFO,this.init,this)}}).prototype,"balance",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(B.prototype,"code",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=t(B.prototype,"direct",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=t(B.prototype,"vaild",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=t(B.prototype,"super",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(B.prototype,"diamondItems",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=t(B.prototype,"diamondItem",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=B))||C));i._RF.pop()}}}));

System.register("chunks:///_virtual/InviteTipsPopup.ts",["cc","./OpenPopupManager.ts","./Constants.ts"],(function(n){var t,p,e,o,s;return{setters:[function(n){t=n.cclegacy,p=n.Component,e=n._decorator},function(n){o=n.OpenPopupManager},function(n){s=n.Constants}],execute:function(){var c;t._RF.push({},"e39d9uqMgJI7r7WUj25mTUT","InviteTipsPopup",void 0);const{ccclass:i,property:u}=e;n("InviteTipsPopup",i("InviteTipsPopup")(c=class extends p{show(){}onCloseTouch(){o.instance.hide(s.PopupUI.InviteTipsPopup)}})||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/ItemModel.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"92039JPcShC4KexWHVx0wDu","ItemModel",void 0);e("ItemCfg",class{constructor(){this.ClassName="Item",this.Id=void 0,this.name=void 0,this.desc=void 0,this.icon=void 0,this.quality=void 0,this.dataId=void 0,this.type=void 0}});e("ItemType",function(e){return e.WeaponFragment="weaponfragment",e.HeroFragment="herofragment",e.FragmentWeaponCard="fragmentcardweapon",e.Gold="gold",e.Diamond="diamond",e.Energy="energy",e.Ticket="ticket",e.TicketBox="ticketbox",e.Food="food",e}({})),e("ItemIdType",function(e){return e[e.Gold=101]="Gold",e[e.Diamond=102]="Diamond",e[e.Energy=103]="Energy",e[e.Ticket=104]="Ticket",e[e.Food=105]="Food",e[e.Exp=107]="Exp",e[e.USDT=108]="USDT",e[e.TicketBox=110]="TicketBox",e[e.Cash=111]="Cash",e[e.Star=112]="Star",e[e.Crown=117]="Crown",e[e.Bag=119]="Bag",e[e.CashChestCommon=113]="CashChestCommon",e[e.CashChestUncommon=114]="CashChestUncommon",e[e.CashChestRare=115]="CashChestRare",e[e.CashChestEqic=116]="CashChestEqic",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SpriteEx.ts","./GameEvent.ts","./EventListener.ts","./LanguageManager.ts"],(function(e){var t,n,i,a,o,c,s,l,r,h,u,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,a=e.Node,o=e._decorator,c=e.Component,s=e.Sprite,l=e.Color},function(e){r=e.SpriteEx},function(e){h=e.GameEvent},function(e){u=e.EventListener},function(e){g=e.LanguageManager}],execute:function(){var d,p,L,f,m,_,b,E,v;i._RF.push({},"f5a62mxorBIooJ3L2n3odXQ","LanguageItem",void 0);const{ccclass:x,property:k}=o;e("LanguageItem",(d=x("LanguageItem"),p=k(r),L=k(r),f=k(a),d((b=t((_=class extends c{constructor(){super(...arguments),n(this,"flag",b,this),n(this,"lang",E,this),n(this,"checked",v,this),this._callback=void 0,this._index=void 0}init(e,t,n){this._index=e,this.flag.index=e,this.lang.index=e,this._callback=n,t?(this.checked.active=!0,this.node.getComponent(s).color=new l(255,255,255,255)):(this.checked.active=!1,this.node.getComponent(s).color=new l(54,54,78,255))}selectLanuage(e){e==this._index?(this.checked.active=!0,this.node.getComponent(s).color=new l(255,255,255,255)):(this.checked.active=!1,this.node.getComponent(s).color=new l(54,54,78,255))}onClickBtn(){this._callback?this._callback(this._index):(g.instance.setLanguage(this._index),g.instance.updateSceneRenderers(),u.emit(h.SELECT_LANGUAGE,this._index))}onEnable(){u.on(h.SELECT_LANGUAGE,this.selectLanuage,this)}onDisable(){u.off(h.SELECT_LANGUAGE,this.selectLanuage,this)}}).prototype,"flag",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=t(_.prototype,"lang",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=t(_.prototype,"checked",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=_))||m));i._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageLabel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageManager.ts"],(function(e){var t,a,n,r,i,o,l,s,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.initializerDefineProperty},function(e){n=e.cclegacy,r=e.CCString,i=e._decorator,o=e.Component,l=e.Label,s=e.RichText},function(e){c=e.LanguageManager}],execute:function(){var u,g,p,L,b;n._RF.push({},"b50cel4OHxGVqeXNkma5pHX","LanguageLabel",void 0);const{ccclass:h,property:y}=i;e("LanguageLabel",(u=h("LanguageLabel"),g=y(r),u((b=t((L=class extends o{constructor(){super(...arguments),a(this,"key",b,this)}onLoad(){this.updateLabel()}updateLabel(){let e=this.getComponent(l)||this.getComponent(s);if(!e)return;let t=c.instance.getLang(this.key);e.string=t}}).prototype,"key",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=L))||p));n._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageManager.ts",["cc","./LanguageMode.ts","./CfgMgr.ts","./Constants.ts"],(function(e){var t,a,n,g,s,i;return{setters:[function(e){t=e.cclegacy,a=e.sys,n=e.director},function(e){g=e.LanguageCfg},function(e){s=e.CfgMgr},function(e){i=e.Constants}],execute:function(){t._RF.push({},"b59041AwXREjarFb2zZqXRO","LanguageManager",void 0);class l{constructor(){this._languageMap=new Map,this._englishMap=new Map,this._language="en",this._langList=["en","ja","ko","zh","tw","ru","de","th"]}get language(){return this._language}get index(){return this._langList.indexOf(this._language)}get langList(){return this._langList}init(){let e=a.localStorage.getItem(i.Language);if(!e){let t=a.languageCode?a.languageCode.toLowerCase():a.language.toLowerCase();e=0==t.indexOf("zh")?"zh-cn"==t||"zh"==t?"zh":"tw":this._langList.indexOf(t)>=0?t:"en"}this._langList.indexOf(e)>=0&&(this._language=e);let t=s.getCfgDataArray(new g);for(let e=0;e<t.length;e++)this._languageMap.set(t[e].key,t[e])}setLanguage(e){this._language=this._langList[e],a.localStorage.setItem(i.Language,this._language)}getLang(e,t){if(!this._languageMap.has(e))return"";let a=this._languageMap.get(e),n=a[this._language];if(n||(n=a.en),t&&t.length>0)for(let e=0;e<t.length;e++)n=n.replace("{"+e+"}",t[e]);return n}updateSceneRenderers(){let e=n.getScene().children,t=[];for(let a=0;a<e.length;++a){let n=e[a].getComponentsInChildren("LanguageLabel");Array.prototype.push.apply(t,n)}for(let e=0;e<t.length;++e){let a=t[e];a.node.active&&a.updateLabel()}}static get instance(){return this._instance||(this._instance=new l),this._instance}}e("LanguageManager",l),l._instance=void 0,t._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageMode.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"8eeb8t65PdPRazkQpRKEx16","LanguageMode",void 0);t("LanguageCfg",class{constructor(){this.ClassName="Language",this.Id=void 0,this.key=void 0,this.zh=void 0,this.tw=void 0,this.en=void 0,this.jp=void 0,this.kr=void 0}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/LanguagePopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./LanguageManager.ts","./LanguageItem.ts"],(function(n){var e,t,a,o,i,u,r,s,c,p,g,l;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.initializerDefineProperty},function(n){a=n.cclegacy,o=n.Node,i=n.Prefab,u=n._decorator,r=n.Component,s=n.instantiate},function(n){c=n.OpenPopupManager},function(n){p=n.Constants},function(n){g=n.LanguageManager},function(n){l=n.LanguageItem}],execute:function(){var h,f,L,P,b,m,d;a._RF.push({},"5b2f54zq/5Fcb7RcGizRFUL","LanguagePopup",void 0);const{ccclass:y,property:I}=u;n("LanguagePopup",(h=y("LanguagePopup"),f=I(o),L=I(i),h((m=e((b=class extends r{constructor(){super(...arguments),t(this,"content",m,this),t(this,"langItem",d,this)}show(){let n=g.instance.language;0==this.content.children.length&&g.instance.langList.forEach(((e,t)=>{let a=s(this.langItem);a.getComponent(l).init(t,n==e),a.parent=this.content}))}onCloseTouch(){c.instance.hide(p.PopupUI.LanguagePopup)}}).prototype,"content",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=e(b.prototype,"langItem",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=b))||P));a._RF.pop()}}}));

System.register("chunks:///_virtual/LearnSkillItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourcesUtil.ts","./SpriteEx.ts","./Constants.ts","./SkillTipsItem.ts"],(function(t){var e,i,n,o,r,s,l,a,c,p,u,m,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,o=t.Sprite,r=t.Prefab,s=t._decorator,l=t.Component,a=t.instantiate,c=t.UITransform},function(t){p=t.ResourcesUtil},function(t){u=t.SpriteEx},function(t){m=t.Constants},function(t){h=t.SkillTipsItem}],execute:function(){var d,f,x,S,g,b,k,I,y;n._RF.push({},"18f44+CXBxHp7WMKdGx4ajK","LearnSkillItem",void 0);const{ccclass:C,property:T}=s;t("LearnSkillItem",(d=C("LearnSkillItem"),f=T(u),x=T(o),S=T(r),d((k=e((b=class extends l{constructor(){super(...arguments),i(this,"iconFrame",k,this),i(this,"icon",I,this),this._eid=0,i(this,"skillTipsItem",y,this),this._desc=null}init(t){this._desc=t.desc;let e=m.skillIconPath+t.icon+"/spriteFrame";p.geSpriteFrame(e).then((t=>{this.icon.spriteFrame=t})),this.iconFrame.index=t.quality-1}onTapBtn(){let t=a(this.skillTipsItem);t.parent=this.node.parent.parent.parent;let e=this.node.getPosition();e.y+=this.node.getComponent(c).width/2;let i=this.node.parent.getComponent(c).contentSize.width,n=0;e.x<0?(n=-(i/2+e.x>150?0:150-(i/2+e.x)),e.x-=n):(n=i/2-e.x>150?0:150-(i/2-e.x),e.x-=n);let o=this.node.parent.getComponent(c).convertToWorldSpaceAR(e),r=this.node.parent.parent.parent.getComponent(c).convertToNodeSpaceAR(o);t.setPosition(r),t.getComponent(h).init(this._desc,n)}}).prototype,"iconFrame",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(b.prototype,"icon",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=e(b.prototype,"skillTipsItem",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=b))||g));n._RF.pop()}}}));

System.register("chunks:///_virtual/LevelupPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./RewardItem.ts","./LanguageManager.ts","./PlayerData.ts"],(function(e){var t,n,r,i,a,o,l,s,u,c,p,h,f,g,P;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){r=e.cclegacy,i=e.Label,a=e.Node,o=e.Prefab,l=e._decorator,s=e.Component,u=e.Vec3,c=e.instantiate},function(e){p=e.OpenPopupManager},function(e){h=e.Constants},function(e){f=e.RewardItem},function(e){g=e.LanguageManager},function(e){P=e.PlayerData}],execute:function(){var b,d,w,v,y,m,L,C,x;r._RF.push({},"62e2cHz6BlIVb6ZWih/Z/x7","LevelupPopup",void 0);const{ccclass:M,property:z}=l;e("LevelupPopup",(b=M("LevelupPopup"),d=z(i),w=z(a),v=z(o),b((L=t((m=class extends s{constructor(){super(...arguments),n(this,"title",L,this),n(this,"content",C,this),n(this,"rewardPrefab",x,this)}show(e){this.title.string=g.instance.getLang("game.reachLv",[P.instance.chapterObj.level]),this.setContent(e)}async setContent(e){this.content.removeAllChildren();let t=new u(0,0,0),n=e.length,r=n>=4?4:n;t.x=120*-(r-1)/2;for(let n=0;n<e.length;n++)await new Promise((i=>{this.scheduleOnce((()=>{const a=e[n];let o=c(this.rewardPrefab),l=new u(0,0,0),s=Math.floor(n/r),p=n%r;l.x=t.x+120*p,l.y=-120*s,o.parent=this.content,o.getComponent(f).init(a,!0),o.setPosition(l),i(0)}),.1)}))}onCloseBtn(){p.instance.hide(h.PopupUI.LevelupPopup)}}).prototype,"title",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(m.prototype,"content",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(m.prototype,"rewardPrefab",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=m))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/Load.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./AudioManager.ts","./CfgMgr.ts","./OpenPopupManager.ts","./SystemConstantModel.ts","./BagData.ts","./HttpService.ts","./Storage.ts","./Api.ts","./ShopData.ts","./PlayerData.ts","./ChapterData.ts","./LanguageManager.ts","./BagHeroData.ts","./GuideData.ts","./Configuration.ts","./SysOpenData.ts","./GameDefine.ts","./Util.ts","./DailySpinData.ts","./ChestData.ts","./EarnData.ts"],(function(t){var e,n,s,a,i,o,r,p,c,l,g,u,h,d,f,P,m,D,y,C,B,b,L,S,w,I,_,T,U,M,N,G,E,R;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){s=t.cclegacy,a=t.ProgressBar,i=t.Label,o=t.Node,r=t._decorator,p=t.Component,c=t.tween,l=t.v3,g=t.director,u=t.resources},function(t){h=t.Constants},function(t){d=t.AudioManager},function(t){f=t.CfgMgr},function(t){P=t.OpenPopupManager},function(t){m=t.SystemConstantCfg},function(t){D=t.BagData},function(t){y=t.HttpService},function(t){C=t.Storage},function(t){B=t.Api},function(t){b=t.ShopData},function(t){L=t.PlayerData},function(t){S=t.ChapterData},function(t){w=t.LanguageManager},function(t){I=t.BagHeroData},function(t){_=t.GuideData},function(t){T=t.Configuration},function(t){U=t.SysOpenData},function(t){M=t.GameDefine},function(t){N=t.Util},function(t){G=t.DailySpinData},function(t){E=t.ChestData},function(t){R=t.EarnData}],execute:function(){var v,A,O,x,k,F,H,z,W,j,q;s._RF.push({},"47e05tFPodPoaFGg/ApUzzN","Load",void 0);const{ccclass:$,property:J}=r;t("Load",(v=$("Load"),A=J(a),O=J(i),x=J(o),k=J(o),v((z=e((H=class extends p{constructor(){super(...arguments),n(this,"progressBar",z,this),n(this,"lbText",W,this),n(this,"PersistRoot",j,this),this._progress=20,n(this,"loading",q,this),this.loadElement=null}onLoad(){this.loadElement=document.getElementById("loadBar"),this.initPopupLayer(),this.loginGame(),this.initLoading()}initLoading(){let t=this.loading.children.length;for(let e=0;e<this.loading.children.length;e++){let n=this.loading.children[e];c(n).sequence(c().delay(.2*e),c().to(.2,{position:l(n.position.x,20,0)},{easing:"circInOut"}),c().to(.2,{position:l(n.position.x,0,0)},{easing:"circInOut"}),c().delay(.2*(t-e))).repeatForever().start()}}loginGame(){this.schedule(this.setLoginProgressBar,.01);let t=C.getItem("access-token");t&&0==t.indexOf("@")?(M.accessToken=N.decrypt(t.slice(1)),L.instance.getUserInfo((t=>{0==t?this.loadLocalGameConfg():this._login()}))):this._login()}setLoginProgressBar(){this._progress<50&&(this._progress+=Math.random()/10,this.setProgressBar())}_login(){let t=new URLSearchParams(window.location.search).get("tgWebAppStartParam"),e=window.Telegram&&window.Telegram.WebApp&&window.Telegram.WebApp.initData?window.Telegram.WebApp.initData:"test";y.instance.post(B.AUTH_LOGIN,{code:e,inviteInfo:t}).then((t=>{0==t.code&&("test"==e&&C.setItem("access-token","@"+N.encrypt(t.data.accessToken)),M.accessToken=t.data.accessToken,L.instance.getUserInfo((()=>{this.loadLocalGameConfg()})))})).catch((t=>{console.log("AUTH_LOGIN",t)}))}initPopupLayer(){g.addPersistRootNode(this.PersistRoot),P.instance.TopLayer=this.PersistRoot.getChildByName("Top"),P.instance.MidLayer=this.PersistRoot.getChildByName("Middle"),P.instance.BottomLayer=this.PersistRoot.getChildByName("Bottom"),P.instance.ToastLayer=this.PersistRoot.getChildByName("Toast")}loadLocalGameConfg(){this.unschedule(this.setLoginProgressBar),this._progress=50,this.setProgressBar(),u.loadDir(h.ConfigPath,((t,e,n)=>{let s=30/e;this._progress+=s,this.setProgressBar()}),((t,e)=>{for(let t=0;t<e.length;t++){const n=e[t];f.setCfgData(n.name,n.json)}0==L.instance.userObj.step&&(_.instance.loadStep=1),T.instance.init(),d.instance.init(),this.initData()}))}initData(){this.convertConstantData(),w.instance.init(),U.instance.init(),S.instance.init(),R.instance.getEarnInfo(),D.instance.initCfg(),b.instance.initCfg(),I.instance.initCfg(),D.instance.getBagDataFromNetwork(),E.instance.getChestData(),I.instance.getHeroDataFromNetwork(),b.instance.getShopInfo(),G.instance.getDailySpinInfo(),_.instance.initCfg(),0==L.instance.userObj.step&&(_.instance.loadStep=1),this.preloadScene()}convertConstantData(){f.getCfgDataArray(new m).forEach((t=>{h.SysConstant[t.ConstantName]=t}))}setProgressBar(){this._progress>=100?(this.lbText.string="100%",this.progressBar.progress=1):(this.lbText.string=`${Number(this._progress).toFixed(2)}%`,this.progressBar.progress=this._progress/100);let t=this._progress;this._progress>=100&&(t=100),this.loadElement&&(this.loadElement.style.width=t+"%",this.loadElement.innerHTML=Number(t).toFixed(2)+"%")}preloadScene(){let t="Main";g.preloadScene(t,((t,e)=>{let n=t/e*10;this._progress<80+n&&(this._progress=80+n),this.setProgressBar()}),(()=>{let e=[];M.isDebug||(e=[h.PopupUI.ChapterPopup,h.PopupUI.TapGame,h.PopupUI.TapWinPopup,h.PopupUI.NewerRewardPopup,h.PopupUI.EarnPopup,h.PopupUI.EarnCashPopup,h.PopupUI.WithdrawPopup,h.PopupUI.DailySpinPopup,h.PopupUI.GuidePopup,h.PopupUI.ComRewardPopup]),u.preload(e,((t,e)=>{let n=t/e*10;this._progress<90+n&&(this._progress=90+n,this.setProgressBar())}),(()=>{0==L.instance.userObj.step&&(_.instance.loadStep=1),this._progress=100,this.setProgressBar(),g.loadScene(t);try{document.getElementById("preload").remove()}catch(t){}}))}))}}).prototype,"progressBar",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(H.prototype,"lbText",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(H.prototype,"PersistRoot",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(H.prototype,"loading",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=H))||F));s._RF.pop()}}}));

System.register("chunks:///_virtual/MailBoxData.ts",["cc","./HttpService.ts","./Api.ts","./EventListener.ts","./GameEvent.ts","./OpenPopupManager.ts"],(function(t){var i,s,e,a,n,c,o;return{setters:[function(t){i=t.cclegacy,s=t._decorator},function(t){e=t.HttpService},function(t){a=t.Api},function(t){n=t.EventListener},function(t){c=t.GameEvent},function(t){o=t.OpenPopupManager}],execute:function(){var r,l;i._RF.push({},"ababb/MIzVCdbz2VEO0oRss","MailBoxData",void 0);const{ccclass:p,property:u}=s;t("MailBoxData",p("MailBoxData")(((l=class t{constructor(){this.mailList=[]}getMailList(){e.instance.post(a.MAIL_LIST).then((t=>{t&&0==t.code&&(this.mailList=t.data.mails,n.emit(c.UPDTAE_MAILBOX_DATA))}))}claim(t){e.instance.post(a.MAIL_READ,{mailId:t}).then((t=>{t&&0==t.code?(o.instance.showRewardPopup(t.data.rewards),this.getMailList()):o.instance.showToast("Network Error")}))}static get instance(){return this._instance||(this._instance=new t),this._instance}})._instance=null,r=l))||r);t("MailModel",class{constructor(){this.id=void 0,this.rewards=void 0,this.title=void 0,this.expireStamp=void 0,this.isRead=void 0}}),i._RF.pop()}}}));

System.register("chunks:///_virtual/MailBoxPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MailBoxData.ts","./MailItem.ts","./OpenPopupManager.ts","./Constants.ts","./EventListener.ts","./GameEvent.ts"],(function(t){var e,i,n,o,l,a,s,r,c,p,u,h,m,f,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,o=t.ScrollView,l=t.Prefab,a=t.Node,s=t._decorator,r=t.Component,c=t.instantiate},function(t){p=t.MailBoxData},function(t){u=t.MailItem},function(t){h=t.OpenPopupManager},function(t){m=t.Constants},function(t){f=t.EventListener},function(t){b=t.GameEvent}],execute:function(){var M,P,d,g,v,y,D,B,C;n._RF.push({},"bf15710WKFK/6WORvLbQQ4Q","MailBoxPopup",void 0);const{ccclass:w,property:x}=s;t("MailBoxPopup",(M=w("MailBoxPopup"),P=x(o),d=x(l),g=x(a),M((D=e((y=class extends r{constructor(){super(...arguments),i(this,"scrollView",D,this),i(this,"mailItem",B,this),i(this,"emptyNode",C,this)}show(){p.instance.getMailList()}setContent(){this.scrollView.content.removeAllChildren(),this.emptyNode.active=0==p.instance.mailList.length,p.instance.mailList.forEach(((t,e)=>{let i=c(this.mailItem);i.getComponent(u).init(t),i.parent=this.scrollView.content}))}onDeleteTouch(){}onClaimTouch(){}onCloseTouch(){h.instance.hide(m.PopupUI.MailBoxPopup)}onEnable(){f.on(b.UPDTAE_MAILBOX_DATA,this.setContent,this)}onDisable(){f.off(b.UPDTAE_MAILBOX_DATA,this.setContent,this)}}).prototype,"scrollView",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=e(y.prototype,"mailItem",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=e(y.prototype,"emptyNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=y))||v));n._RF.pop()}}}));

System.register("chunks:///_virtual/MailItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MailBoxData.ts","./Util.ts","./Constants.ts","./CfgMgr.ts","./ItemModel.ts","./ResourcesUtil.ts","./LanguageManager.ts"],(function(e){var t,i,a,r,n,s,l,o,c,u,m,d,h,p,g,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){a=e.cclegacy,r=e.Sprite,n=e.Label,s=e.Node,l=e._decorator,o=e.Component,c=e.UITransform},function(e){u=e.MailBoxData},function(e){m=e.Util},function(e){d=e.Constants},function(e){h=e.CfgMgr},function(e){p=e.ItemCfg},function(e){g=e.ResourcesUtil},function(e){b=e.LanguageManager}],execute:function(){var f,w,y,I,M,z,v,C,N,B,D,R,_,x,F,S,L;a._RF.push({},"b9390QcanZPXZep01xVrNOy","MailItem",void 0);const{ccclass:P,property:U}=l;e("MailItem",(f=P("MailItem"),w=U(r),y=U(n),I=U(n),M=U(n),z=U(s),v=U(s),C=U(s),f((D=t((B=class extends o{constructor(){super(...arguments),i(this,"rewardIcon",D,this),i(this,"rewardNum",R,this),i(this,"desc",_,this),i(this,"time",x,this),i(this,"claimBtn",F,this),i(this,"readNode",S,this),i(this,"mask",L,this),this._mailObj=void 0}init(e){this._mailObj=e;let t=h.getDataById(new p,e.rewards[0].itemId),i=d.itemsPath+t.icon+"/spriteFrame";t.type&&(i=d.heroIconPath+t.dataId+"/spriteFrame"),g.geSpriteFrame(i).then((e=>{this.rewardIcon.spriteFrame=e;let t=this.rewardIcon.getComponent(c).contentSize,i=Math.min(100/t.width,100/t.height);this.rewardIcon.node.setScale(i,i)})),this.rewardNum.string=`${e.rewards[0].count}`,this.desc.string=b.instance.getLang(e.title),this.claimBtn.active=!e.isRead,this.readNode.active=e.isRead,this.time.string=`${m.getDays(e.expireStamp)} left`,this.mask.active=e.isRead}onClaimTouch(){u.instance.claim(this._mailObj.id)}}).prototype,"rewardIcon",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(B.prototype,"rewardNum",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(B.prototype,"desc",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=t(B.prototype,"time",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(B.prototype,"claimBtn",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=t(B.prototype,"readNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=t(B.prototype,"mask",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=B))||N));a._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./Constants.ts","./AdManager.ts","./AnimationUI.ts","./Api.ts","./AudioManager.ts","./BackgroundAdapter.ts","./BaseComponent.ts","./CfgMgr.ts","./Configuration.ts","./ContentAdapter.ts","./ContentScale.ts","./ContentWidthAdapter.ts","./ContentWidthScaleAdapter.ts","./Debug.ts","./EventListener.ts","./GameController.ts","./HttpService.ts","./LanguageLabel.ts","./LanguageManager.ts","./NoClickMore.ts","./OpenPopupManager.ts","./PoolManager.ts","./PopupManager.ts","./ResourcesUtil.ts","./ScrollViewHelper.ts","./SpriteEx.ts","./Storage.ts","./Util.ts","./WalletManager.ts","./BlastItem.ts","./DamageItem.ts","./DamageStatItem.ts","./DamageStatSubItem.ts","./HeroHpItem.ts","./MonsterBuffItem.ts","./MonsterHpItem.ts","./Shadow.ts","./ChapterMapData.ts","./GameData.ts","./GridData.ts","./HeroData.ts","./MonsterBuffData.ts","./MonsterData.ts","./PlayerData.ts","./SkillData.ts","./SkillUpgradeData.ts","./WeaponData.ts","./WeaponShopData.ts","./GameEvent.ts","./GridBgItem.ts","./GridItem.ts","./HeroBase.ts","./HeroItem.ts","./BattleUIManager.ts","./BgManager.ts","./BoxManager.ts","./GridManager.ts","./GridMapManager.ts","./HeroManager.ts","./MonsterManager.ts","./SkillManager.ts","./WeaponManager.ts","./BuffObj.ts","./MonsterBulletBase.ts","./MonsterBulletItem.ts","./MonsterEvent.ts","./MonsterBase.ts","./MonsterItem.ts","./SkillBulletBase.ts","./SkillBulletItem.ts","./SkillTypeItem.ts","./WeaponBgItem.ts","./WeaponBuffItem.ts","./WeaponItem.ts","./WeaponMergeItem.ts","./GameDefine.ts","./SysOpenData.ts","./MainEvent.ts","./AdModel.ts","./AvatarsModel.ts","./BagModel.ts","./BagWeaponModel.ts","./BattleLevelModel.ts","./BuffModel.ts","./CashExchangeModel.ts","./ChapterEventModel.ts","./ChapterModel.ts","./ChestModel.ts","./CoinMode.ts","./ConfigModel.ts","./CountryModel.ts","./DailySpinModel.ts","./EnergyModel.ts","./EquipAttrModel.ts","./EquipLevelModel.ts","./EquipModel.ts","./FightEndEventModel.ts","./FirstTopupModel.ts","./GridModel.ts","./GrowthFundMode.ts","./GuideModel.ts","./HeroLevelModel.ts","./HeroModel.ts","./HeroSkillModel.ts","./ItemModel.ts","./LanguageMode.ts","./MonsterEventModel.ts","./MonsterModel.ts","./MonthlyPassModel.ts","./RewardModel.ts","./ShopModel.ts","./SkillModel.ts","./SkillTargetModel.ts","./SkillUpgradeModel.ts","./SniperModel.ts","./SoundModel.ts","./SysOpenModel.ts","./SystemConstantModel.ts","./TapMonsterModel.ts","./TopupModel.ts","./TowerBuffModel.ts","./TowerEventModel.ts","./TowerGuardEventModel.ts","./TowerMonsterModel.ts","./TowerSkillModel.ts","./UserModel.ts","./WeaponLevelModel.ts","./WeaponModel.ts","./WeaponShopModel.ts","./axios.mjs_cjs=&original=.js","./BagDetailPopup.ts","./BagPopup.ts","./BagWeaponItem.ts","./BagData.ts","./SlotItem.ts","./WeaponDoubleSkillItem.ts","./WeaponSkillItem.ts","./WeaponStylePopup.ts","./CashBillItem.ts","./CashBillPopup.ts","./CashItemPopup.ts","./CashPopup.ts","./CashSubItem.ts","./CashData.ts","./StarPopup.ts","./ActiveItem.ts","./BagTokenPopup.ts","./ChapterChestItem.ts","./ChapterItem.ts","./ChapterPopup.ts","./ChapterData.ts","./LevelupPopup.ts","./NewerRewardPopup.ts","./UnlockItemPopup.ts","./ChestDetailPopup.ts","./ChestItem.ts","./ChestOpenPopup.ts","./ChestUnlockPopup.ts","./ChestData.ts","./AniBg.ts","./ComLoadingPopup.ts","./ComRewardAnimPopup.ts","./ComRewardPopup.ts","./ComTipsPopup.ts","./DiamondNumberItem.ts","./GoldNumberItem.ts","./RewardItem.ts","./RewardTipItem.ts","./Toast.ts","./TopBarItem.ts","./WeaponElementItem.ts","./AchievementItem.ts","./AchievementSubItem.ts","./DailyItem.ts","./DailyQuestPopup.ts","./DailySubItem.ts","./QuestData.ts","./RewardChestItem.ts","./SignInItem.ts","./SignInSubItem.ts","./WeeklyItem.ts","./DungeonData.ts","./DungeonPopup.ts","./FightEndPopup.ts","./FightEndTipPopup.ts","./EarnData.ts","./EarnCashPopup.ts","./EarnInvestPopup.ts","./EarnItem.ts","./EarnPopup.ts","./EarnRecordPopup.ts","./EarnRulePopup.ts","./EarnSuccessPopup.ts","./EventData.ts","./EventDailyItem.ts","./EventDailyPopup.ts","./EventInvitePopup.ts","./EventLlamaPopup.ts","./EventSigninItem.ts","./EventSigninPopup.ts","./AdTipsPopup.ts","./GameDebugPopup.ts","./GameFailPopup.ts","./GamePopup.ts","./GameRevivePopup.ts","./GameWinPopup.ts","./PausePopup.ts","./GuideData.ts","./GuidePopup.ts","./BagHeroItem.ts","./BagHeroData.ts","./HeroEquipData.ts","./EquipActionPopup.ts","./EquipDetailPopup.ts","./EquipEnhanceItem.ts","./EquipForgingItem.ts","./EquipItem.ts","./EquipStarupItem.ts","./HeroAwakenItem.ts","./HeroDetailPopup.ts","./HeroEquipItem.ts","./HeroLevelItem.ts","./HeroPopup.ts","./HeroStarItem.ts","./HeroUpgradeItem.ts","./InviteData.ts","./FriendDiamondItem.ts","./FriendItem.ts","./FriendsPopup.ts","./InvitePopup.ts","./InviteTipsPopup.ts","./MailBoxData.ts","./MailBoxPopup.ts","./MailItem.ts","./AreaItem.ts","./CountryRankItem.ts","./RankData.ts","./PersonalItem.ts","./RankPopup.ts","./UserRankItem.ts","./LanguageItem.ts","./LanguagePopup.ts","./RedeemCodePopup.ts","./SettingPopup.ts","./ShopBillData.ts","./ShopData.ts","./ShopBoxDetailPopup.ts","./ShopBoxItem.ts","./ShopBoxLevelupPopup.ts","./ShopBoxOpenPopup.ts","./ShopBoxRewardItem.ts","./ShopBoxRewardPopup.ts","./ShopBoxSubItem.ts","./ShopBoxWeaponDetailPopup.ts","./ShopChestItem.ts","./ShopChestSubItem.ts","./ShopDayItem.ts","./ShopDaySubItem.ts","./ShopDiamondItem.ts","./ShopDiamondSubItem.ts","./ShopEnergyPopup.ts","./ShopGoldItem.ts","./ShopGoldSubItem.ts","./ShopHeroItem.ts","./ShopHeroSubItem.ts","./ShopItemPopup.ts","./ShopPopup.ts","./ShopSuccessPopup.ts","./LearnSkillItem.ts","./SkillSelectPopup.ts","./SkillSelectItem.ts","./DailySpinPopup.ts","./DailySpinData.ts","./SpinTipsPopup.ts","./TaskData.ts","./TaskItem.ts","./TaskPopup.ts","./TopupData.ts","./FirstTopupPopup.ts","./FundItem.ts","./FundPopup.ts","./FundRewardItem.ts","./MonthlyPassItem.ts","./MonthlyPassPopup.ts","./BagTowerPopup.ts","./BagTowerRecordPopup.ts","./BagTowerRulePopup.ts","./BagTowerTicketPopup.ts","./BagTowerWeaponItem.ts","./BagTowerWeaponPopup.ts","./CountryItem.ts","./CountryTipsItem.ts","./BagTowerData.ts","./RecordItem.ts","./UserItem.ts","./UserRankItem2.ts","./UserTipsItem.ts","./AvatarItem.ts","./AvatarPopup.ts","./AvatarSubItem.ts","./UserData.ts","./EditNamePopup.ts","./SetCountryPopup.ts","./BillItem.ts","./WalletData.ts","./WalletPopup.ts","./WithdrawBillPopup.ts","./WithdrawPopup.ts","./WarehouseData.ts","./EquipBoxDetailPopup.ts","./EquipOpenPopup.ts","./WarehourseItem.ts","./WarehousePopup.ts","./SkillGetItem.ts","./SkillTipsItem.ts","./WeaponAdvancedItem.ts","./WeaponDetailPopup.ts","./WeaponSelectPopup.ts","./WeaponSkillInfoPopup.ts","./Game.ts","./Load.ts","./Main.ts","./SniperBullet.ts","./SniperData.ts","./SniperLevelData.ts","./SniperEnemy.ts","./SniperEvent.ts","./SniperGame.ts","./SniperHero.ts","./SniperLevel.ts","./SniperLevelItem.ts","./SniperOverPopup.ts","./SniperPopup.ts","./SniperWinPopup.ts","./TapDamageNumItem.ts","./TapMonsterHpItem.ts","./TapShadow.ts","./TapTouch.ts","./TapData.ts","./TapSkillData.ts","./TapEvent.ts","./TapTicketPopup.ts","./TapWinPopup.ts","./TapHeroBase.ts","./TapHeroItem.ts","./TapBattleUIManager.ts","./TapBgManager.ts","./TapHeroManager.ts","./TapMonsterManager.ts","./TapSkillManager.ts","./TapMonsterBase.ts","./TapMonsterItem.ts","./TapGame.ts","./BlastItem2.ts","./TowerDamageNumItem.ts","./TowerDoorItem.ts","./TowerHpItem.ts","./TowerMonsterHpItem.ts","./TowerShadow.ts","./TowerWallItem.ts","./TowerData.ts","./TowerEventData.ts","./TowerHeroData.ts","./TowerSkillData.ts","./TowerEvent.ts","./TowerFailPopup.ts","./TowerWinPopup.ts","./TowerHeroBase.ts","./TowerHeroItem.ts","./TowerBattleUIManager.ts","./TowerBgManager.ts","./TowerHeroManager.ts","./TowerMonsterManager.ts","./TowerSkillManager.ts","./TowerMonsterBase.ts","./TowerMonsterItem.ts","./TowerGame.ts","./TowerWeaponItem.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Main.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./EventListener.ts","./OpenPopupManager.ts","./PopupManager.ts","./PlayerData.ts","./GameEvent.ts","./SysOpenData.ts","./ResourcesUtil.ts","./AudioManager.ts","./WalletManager.ts","./AdManager.ts","./LanguageManager.ts","./Util.ts","./GameData.ts","./GameDefine.ts","./GuideData.ts"],(function(e){var t,n,o,i,a,s,r,p,l,h,u,c,d,g,m,f,b,P,y,I,A,D,G,O,w,E,S,_,L,T,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){o=e.cclegacy,i=e.Label,a=e.Node,s=e._decorator,r=e.Component,p=e.UITransform,l=e.Sprite,h=e.director,u=e.resources,c=e.instantiate,d=e.tween,g=e.v3},function(e){m=e.Constants},function(e){f=e.EventListener},function(e){b=e.OpenPopupManager},function(e){P=e.PopupManager},function(e){y=e.PlayerData},function(e){I=e.GameEvent},function(e){A=e.SysOpenData},function(e){D=e.ResourcesUtil},function(e){G=e.AudioManager},function(e){O=e.WalletManager},function(e){w=e.AdManager},function(e){E=e.LanguageManager},function(e){S=e.Util},function(e){_=e.GameData},function(e){L=e.GameDefine},function(e){T=e.GuideData,C=e.GuideStep}],execute:function(){var M,N,U,B,v,R,k,W,z,H,x,j,F,Y,Q,q,J,K,V,X,Z,$,ee,te,ne,oe,ie,ae,se,re,pe,le,he;o._RF.push({},"bf968APxkBEU60Qv2LE/OB7","Main",void 0);const{ccclass:ue,property:ce}=s;e("Main",(M=ue("Main"),N=ce(i),U=ce(i),B=ce(i),v=ce(i),R=ce(a),k=ce(a),W=ce(a),z=ce(a),H=ce(a),x=ce(a),j=ce(a),F=ce(a),Y=ce(a),Q=ce(a),q=ce(a),M((V=t((K=class extends r{constructor(){super(...arguments),n(this,"gold",V,this),n(this,"diamond",X,this),n(this,"star",Z,this),n(this,"bag",$,this),n(this,"bottomLayer",ee,this),n(this,"middleLayer",te,this),n(this,"topLayer",ne,this),n(this,"bgNode",oe,this),n(this,"toggleGroup",ie,this),n(this,"topInfo",ae,this),n(this,"bottomInfo",se,this),n(this,"popupNode",re,this),n(this,"bagBtn",pe,this),n(this,"battleBtn",le,this),n(this,"earnRedPoint",he,this),this._prevSid=-1}onLoad(){0==y.instance.userObj.step&&(T.instance.loadStep=1),b.instance.MainTopLayer=this.topLayer,b.instance.PopupLayer=this.popupNode,b.instance.Canvas=this.node,this.bgNode.active=!0,this.onShowHideTopInfo(!1),this.onUpdatePlayerInfo(),G.instance.playMusic(1,!0),this.scheduleOnce((()=>{w.instance.init(y.instance.configObj.adTypes,y.instance.configObj.adId)}),.5),this.scheduleOnce((()=>{this.preloadGameScene()}),5),D.getPrefab(m.PopupUI.ComLoadingPopup),L.isDebug||(window.onerror=function(e,t,n,o,i){y.instance.reportError(e,t,n,o,i)})}start(){this.initMenu(),this.scheduleOnce((()=>{O.instance.init(y.instance.configObj)}),5)}onShowHideTopInfo(e){this.topInfo.active=e}onShowHideBottomInfo(e){this.bottomInfo.active=e}initMenu(){this.scheduleOnce((()=>{let e=this.toggleGroup.parent.getComponent(p).contentSize,t=this.toggleGroup.children;for(let n=0;n<t.length;n++){const o=t[n];if(o.getComponent(p).width=e.width/5,2==n){let e={};e.target=o,this.onClickBtn(e,n.toString())}}}),.1)}resetMenu(e){let t=this.toggleGroup.children;for(let n=0;n<t.length;n++){const o=t[n];n!=e&&(o.getChildByName("noCheck").active=!0,o.getChildByName("Check").active=!1,o.getChildByName("noCheck").getComponent(l).grayscale=!A.instance.checkSysOpen(n)),o.getChildByName("line")&&(o.getChildByName("line").active=n!=e-1)}}preloadGameScene(){if(_.instance.isLoad)return;_.instance.isLoad=!0;h.preloadScene("Game",((e,t)=>{}),(()=>{})),u.preload([m.PopupUI.GamePopup,m.PopupUI.SkillSelectPopup,m.PopupUI.WeaponDetailPopup,m.weaponPath,m.weaponBgPath],((e,t)=>{}),(()=>{}))}preloadBag(){u.preload([m.PopupUI.BagPopup,m.PopupUI.BagDetailPopup],((e,t)=>{}),(()=>{}))}onClickBtn(e,t){let n=this.toggleGroup.children[Number(t)],o=Number(t);if(A.instance.checkSysOpen(o)){if(P.instance.hideAll(),this.onShowHideTopInfo(!0),this._prevSid!=o)switch(this._prevSid){case 0:b.instance.hide(m.PopupUI.ShopPopup);break;case 1:b.instance.hide(m.PopupUI.HeroPopup);break;case 2:b.instance.hide(m.PopupUI.ChapterPopup);break;case 3:b.instance.hide(m.PopupUI.BagPopup);break;case 4:b.instance.hide(m.PopupUI.EarnPopup)}switch(this._prevSid=o,o){case 0:b.instance.show(m.PopupUI.ShopPopup,this.bottomLayer);break;case 1:b.instance.show(m.PopupUI.HeroPopup,this.bottomLayer);break;case 2:this.onShowHideTopInfo(!1),b.instance.show(m.PopupUI.ChapterPopup,this.bottomLayer);break;case 3:b.instance.show(m.PopupUI.BagPopup,this.bottomLayer);break;case 4:this.onShowHideTopInfo(!1),b.instance.show(m.PopupUI.BagTowerPopup,this.bottomLayer)}n.getChildByName("noCheck").active=!1,n.getChildByName("Check").active=!0,this.resetMenu(o)}else{let e=A.instance.getSysOpenCfgById(o);b.instance.showToast(E.instance.getLang(e.desc,[e.unlock]))}}onUpdatePlayerInfo(e){let t=y.instance.assetObj,n=y.instance.starObj;e&&"all"!=e&&"gold"!=e||S.numberAnimation(this.gold,t.gold),e&&"all"!=e&&"diamond"!=e||S.numberAnimation(this.diamond,t.diamond),e&&"all"!=e&&"star"!=e||(this.star.string=n.balance+""),e&&"all"!=e&&"bag"!=e||(this.bag.string=Number(t.bag).toFixed(0)+"")}onGameCoin(e){let t=this.gold.node.parent.getChildByName("icon").getPosition(),n=Math.min(10,e.num),o=e.pos,i=m.commonPreabPath+"goldItem",a=this.gold.node.parent.getComponent(p).convertToNodeSpaceAR(o);D.getPrefab(i).then((e=>{for(let o=0;o<n;o++){let i=c(e),s=2*(Math.random()-.5)*100+a.x,r=2*(Math.random()-.5)*50+a.y;i.parent=this.gold.node.parent,i.setPosition(a),this.scheduleOnce((()=>{d(i).to(.2,{position:g(s,r,0)},{easing:"sineIn"}).delay(.2).to(1,{position:t},{easing:"sineInOut"}).call((()=>{i.destroy(),1!=n&&1!=o||f.emit(I.UPDATE_PLAYER_DATA,"gold")})).start()}),.05+.05*o)}}))}onGameDiamond(e){let t=this.diamond.node.parent.getChildByName("icon").getPosition(),n=Math.min(e.num,10),o=e.pos,i=m.commonPreabPath+"diamondItem",a=this.diamond.node.parent.getComponent(p).convertToNodeSpaceAR(o);D.getPrefab(i).then((e=>{for(let o=0;o<n;o++){let i=c(e),s=2*(Math.random()-.5)*100+a.x,r=2*(Math.random()-.5)*50+a.y;i.parent=this.diamond.node.parent,i.setPosition(a),this.scheduleOnce((()=>{d(i).to(.2,{position:g(s,r,0)},{easing:"sineIn"}).delay(.2).to(1,{position:t},{easing:"sineInOut"}).call((()=>{i.destroy(),1!=n&&1!=o||f.emit(I.UPDATE_PLAYER_DATA,"diamond")})).start()}),.05+.05*o)}}))}onGameTicket(e){let t=this.star.node.parent.getChildByName("icon").getPosition(),n=Math.min(e.num,10),o=e.pos,i=m.commonPreabPath+"ticketItem",a=this.star.node.parent.getComponent(p).convertToNodeSpaceAR(o);D.getPrefab(i).then((e=>{for(let o=0;o<n;o++){let i=c(e),s=2*(Math.random()-.5)*100+a.x,r=2*(Math.random()-.5)*50+a.y;i.parent=this.star.node.parent,i.setPosition(a),this.scheduleOnce((()=>{d(i).to(.2,{position:g(s,r,0)},{easing:"sineIn"}).delay(.2).to(1,{position:t},{easing:"sineInOut"}).call((()=>{i.destroy(),1!=n&&1!=o||f.emit(I.UPDATE_PLAYER_DATA,"ticket")})).start()}),.05+.05*o)}}))}onGameFood(e){let t=this.bag.node.parent.getChildByName("icon").getPosition(),n=Math.min(e.num,10),o=e.pos,i=m.commonPreabPath+"foodItem",a=this.bag.node.parent.getComponent(p).convertToNodeSpaceAR(o);D.getPrefab(i).then((e=>{for(let o=0;o<n;o++){let i=c(e),s=2*(Math.random()-.5)*100+a.x,r=2*(Math.random()-.5)*50+a.y;i.parent=this.bag.node.parent,i.setPosition(a),this.scheduleOnce((()=>{d(i).to(.2,{position:g(s,r,0)},{easing:"sineIn"}).delay(.2).to(1,{position:t},{easing:"sineInOut"}).call((()=>{i.destroy(),1!=n&&1!=o||f.emit(I.UPDATE_PLAYER_DATA,"food")})).start()}),.05+.05*o)}}))}onGameWeapon(e){}onGuideEvent(){T.instance.curStep==C.GUIDE_STEP5_EARN_CASH_PAGE&&b.instance.showGameGuidePopup(this.battleBtn)}onShowLoading(e){e&&"main"!=e||b.instance.showLoadingPopup()}onEnable(){f.on(I.SHOW_BOTTOM_INFO,this.onShowHideBottomInfo,this),f.on(I.UPDATE_PLAYER_DATA,this.onUpdatePlayerInfo,this),f.on(I.GET_GOLD_REWARD,this.onGameCoin,this),f.on(I.GET_DIAMOND_REWARD,this.onGameDiamond,this),f.on(I.GET_WEAPON_REWARD,this.onGameWeapon,this),f.on(I.GUIDE_ACTION,this.onGuideEvent,this),f.on(I.SHOW_LOADING,this.onShowLoading,this)}onDisable(){f.off(I.SHOW_BOTTOM_INFO,this.onShowHideBottomInfo,this),f.off(I.UPDATE_PLAYER_DATA,this.onUpdatePlayerInfo,this),f.off(I.GET_GOLD_REWARD,this.onGameCoin,this),f.off(I.GET_DIAMOND_REWARD,this.onGameDiamond,this),f.off(I.GET_WEAPON_REWARD,this.onGameWeapon,this),f.off(I.GUIDE_ACTION,this.onGuideEvent,this),f.off(I.SHOW_LOADING,this.onShowLoading,this)}}).prototype,"gold",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(K.prototype,"diamond",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(K.prototype,"star",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(K.prototype,"bag",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(K.prototype,"bottomLayer",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t(K.prototype,"middleLayer",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=t(K.prototype,"topLayer",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=t(K.prototype,"bgNode",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=t(K.prototype,"toggleGroup",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=t(K.prototype,"topInfo",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=t(K.prototype,"bottomInfo",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=t(K.prototype,"popupNode",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pe=t(K.prototype,"bagBtn",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=t(K.prototype,"battleBtn",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=t(K.prototype,"earnRedPoint",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=K))||J));o._RF.pop()}}}));

System.register("chunks:///_virtual/MainEvent.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"8648axqgfJL17PIoUJZQZGU","MainEvent",void 0);class e{}t("MainEvent",e),e.SHOW_TOAST="showToast",n._RF.pop()}}}));

System.register("chunks:///_virtual/MonsterBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./PoolManager.ts","./EventListener.ts","./GameEvent.ts","./MonsterEvent.ts","./MonsterModel.ts","./MonsterData.ts","./HeroData.ts","./GameDefine.ts","./SkillModel.ts","./BuffModel.ts","./MonsterBuffData.ts","./Util.ts","./BuffObj.ts","./SkillUpgradeData.ts","./MonsterEventModel.ts"],(function(t){var e,s,i,n,o,r,h,a,l,m,c,d,u,f,g,p,M,C,E,H,y,v,S,A,_,B,b,k,P,T,R,D,O,w,I;return{setters:[function(t){e=t.applyDecoratedDescriptor,s=t.initializerDefineProperty},function(t){i=t.cclegacy,n=t.AnimationComponent,o=t._decorator,r=t.v3,h=t.Vec3,a=t.Sprite,l=t.Color,m=t.UITransform,c=t.Animation,d=t.CircleCollider2D,u=t.Vec2,f=t.color,g=t.tween},function(t){p=t.default},function(t){M=t.PoolManager},function(t){C=t.EventListener},function(t){E=t.GameEvent},function(t){H=t.MonsterEvent},function(t){y=t.MonsterAmin,v=t.MonsterFeatureType,S=t.MonsterObj,A=t.MonsterBulletObj},function(t){_=t.MonsterData},function(t){B=t.HeroData},function(t){b=t.GameDefine,k=t.GameMode},function(t){P=t.DamageType},function(t){T=t.BuffType},function(t){R=t.MonsterBuffData},function(t){D=t.Util},function(t){O=t.BuffObj},function(t){w=t.SkillUpgradeData},function(t){I=t.MonsterType}],execute:function(){var N,x,F,K,U;i._RF.push({},"1634eQBtIVM3bFh1eHG/Url","MonsterBase",void 0);const{ccclass:j,property:z}=o;t("MonsterBase",(N=j("MonsterBase"),x=z(n),N((U=e((K=class extends p{constructor(){super(...arguments),s(this,"monsterAnim",U,this),this.monsterHpItem=null,this.monsterShadow=null,this.initStatus=!1,this.monsterCfg=null,this.monsterObj=null,this.moveSpeed=80,this.monsterId=101,this.monsterHp=10,this.curHp=10,this.shieldHp=0,this.atk=5,this.atkTime=0,this.dir=r(0,-1,0),this.scale=1,this.width=100,this.height=100,this.atkNumber=0,this.isMove=!0,this.curAnim="",this.curPos=new h,this.colliderPos=new h,this.boundBox=null,this.monsterKey="",this.isDie=!1,this.isCollider=void 0,this.isHurt=!1,this.isRepulse=!1,this._moveEffect=null,this._bossComing=!1,this._during=0,this._showHitTotalTime=.15}setMonsterBorn(){this.moveSpeed=_.instance.getMonsterSpeed(this.monsterCfg.speed),this.monsterId=this.monsterCfg.Id,this.atkNumber=0,this.monsterHp=this.monsterObj.addHp,this.atk=this.monsterObj.addAtk,this.curHp=this.monsterHp,this.dir=r(0,-1,0),this.curPos=this.node.getPosition(),2==this.monsterCfg.moveType&&(this.curPos.x<0?(this.dir.x=1,this.dir.y=-1,this.dir.normalize()):(this.dir.x=-1,this.dir.y=-1,this.dir.normalize())),this.isMove=!0,this.atkTime=0,this.monsterAnim.getComponent(a).color=new l(255,255,255),this.setMonsterSize();let t=this.monsterCfg.mType==I.BOSS?"boss":"monster";this.monsterKey=t+this.monsterId+Math.random().toString().substring(2,6)+Math.random().toString().substring(2,12),this.setMonsterBoundBox(),_.instance.addMonsterNodeByKey(this),this.isDie=!1,this.isHurt=!1,this.isRepulse=!1,C.emit(E.SHOW_MONSTER_HP,this),C.emit(E.SHOW_MONSTER_SHADOW,this),this.trigerBornMonsterFeature(),this._during=0,this.initStatus=!0}setMonsterSize(){this.scale=this.monsterCfg.iconScale,this.node.setScale(r(this.scale,this.scale,this.scale)),this.width=this.node.getChildByName("icon").getComponent(m).contentSize.width,this.height=this.node.getChildByName("icon").getComponent(m).contentSize.height}setMonsterAnim(t,e){this.curAnim!=t&&this.monsterCfg&&(this.monsterAnim.play(t),this.curAnim=t)}setMonsterAnimEvent(t){this.monsterAnim.once(c.EventType.FINISHED,(e=>{let s=R.instance.calAttackPer(this.monsterKey);t&&this.attackHero(this.atk*(100+s)/100),this.setMonsterAnim(y.Move)}))}trigerBornMonsterFeature(){for(let t=0;t<this.monsterCfg.features.length;t++){let e=this.monsterCfg.features[t];if(e.buffId){let t=e.buffId,s=R.instance.getBuffCfgById(t);s.type==T.BUFF_SHIELD&&(this.shieldHp=Math.ceil(this.monsterHp*e.hpPer/100));let i=new O;i.init(this.monsterKey,0,0,s),C.emit(E.SHOW_MONSTER_BUFF,this,i)}}}trigerDieMonsterFeature(){}trigerAttackMonsterFeature(){this.atkNumber++;for(let t=0;t<this.monsterCfg.features.length;t++){let e=this.monsterCfg.features[t];if(e.type==v.FEATURE_SPLIT_UNDERATTAK&&1==this.atkNumber){let t=this.curPos.x+30*Math.random(),s=this.curPos.y+50*Math.random(),i=new h(t,s,0),n=new S;n.id=e.monsterId,n.addHp=e.hpPer*this.monsterHp,n.addAtk=e.atkPer*this.atk,this.scheduleOnce((()=>{C.emit(H.CREATE_REBIRTH_MONSTER,n,i,e.count)}),.1)}}}attackHero(t){C.emit(E.HERO_HURT,t)}getColliderPos(){let t=this.curPos.clone(),e=this.boundBox.offset;return t.x+=e.x,t.y+=e.y,t}setMonsterBoundBox(){this.boundBox=this.node.getComponent(d),this.boundBox.radius=this.monsterCfg.colliderRadius;let t=this.monsterCfg.colliderOffset?this.monsterCfg.colliderOffset.split("|"):["0","0"];this.boundBox.offset=new u(Number(t[0]),Number(t[1]))}getBoundBoxCircle(){return this.boundBox instanceof d?this.boundBox.radius:20}monsterMoveFrame(t){if(!this.isRepulse){if(R.instance.isFreezed(this.monsterKey))return;if(this.isMove){let e=R.instance.calMoveSpeed(this.monsterKey),s=this.moveSpeed*(e>80?20:100-e)/100;this.setMonsterAnim(y.Move);let i=this.node.getPosition(),n=this.dir.clone();2==this.monsterCfg.moveType&&(this.curPos.x<-b.viewWidth/2+this.width*this.scale?(n.x=1,n.y=-1,this.dir=n.normalize()):this.curPos.x>b.viewWidth/2-this.width*this.scale&&(n.x=-1,n.y=-1,this.dir=n.normalize()));let o=n.multiply(r(s*t,s*t,0)),h=i.add(o);this.node.setPosition(h),this.curPos=h,this.monsterCfg.mType==I.BOSS&&!this._bossComing&&h.y<b.viewHeight/2-b.battleMapDownPosy&&(this._bossComing=!0,C.emit(E.SHOW_BOSS_COMING)),this.isMove=B.instance.checkInHeroRange(new u(h.x,h.y),this.monsterCfg.range,this)}else this.atkTime-=t,this.atkTime<=0&&(this.onAttackSkillEffect(),this.atkTime=this.monsterCfg.attackInterval)}}onAttackSkillEffect(){if(this.initStatus)return this.monsterCfg.bulletId?(this.setMonsterAnim(y.Atk,!1),this.setMonsterAnimEvent(!1),void this.scheduleOnce((()=>{if(!this.initStatus||!this.monsterCfg)return;let t=new A;t.monsterObj=D.clone(this.monsterObj),t.monsterCfg=D.clone(this.monsterCfg),t.pos=this.getFirePos(),t.targetPos=B.instance.heroPoint;let e=R.instance.calAttackPer(this.monsterKey),s=this.atk*(100+e)/100;t.damage=s,C.emit(H.MONSTER_CREATE_BULLET,t)}),.01)):(this.setMonsterAnim(y.Atk,!1),void this.setMonsterAnimEvent(!0))}getFirePos(){let t=this.node.getPosition();return new h(t.x,t.y+this.height/4*this.scale,0)}insertRectCircleObj(t){this.initStatus&&C.emit(E.INSERT_QUARD_TREE_RECT_CIRCLE,this.monsterKey,this,this.boundBox)}onAttacked(t){if(!this.initStatus)return;let e=0,s=P.NORMAL,i=t.skillObj;if(i.critNum>0&&t.releaseTimes%i.critNum==0)e=i.critDamagePer,s=P.CRIT;else{let t=i.critPer+R.instance.calCritPer(this.monsterKey,i.Id);D.randomHit(t)&&(e=i.critDamagePer,s=P.CRIT)}let n=R.instance.calDamagePer(this.monsterKey,i.Id),o=this.monsterCfg.mType==I.BOSS?i.bossDamagePer:0,r=i.damage*(100+i.damagePer+i.damageAddPer+e+n+o+B.instance.damagePer)/100+B.instance.getDamage(i.element);this.trigerAttackMonsterFeature(),this.attacked(r,s,i.weaponId,i.level),this.isDie||R.instance.createDebuffs(this.monsterKey,t,this)}attacked(t,e,s,i){if(void 0===e&&(e=0),t>0&&!this.isDie){let n=Math.ceil(t);if(this.shieldHp>0&&(this.shieldHp>=n?(this.shieldHp-=n,C.emit(E.CREATE_DAMAGER_NUM,this.getColliderPos(),n,e,s,i),n=0):(n-=this.shieldHp,this.shieldHp=0),0==n))return;this.curHp-=n,this.monsterHpItem&&this.monsterHpItem.setMonsterHp(this.curHp,this.monsterHp),C.emit(E.CREATE_DAMAGER_NUM,this.getColliderPos(),n,e,s,i),this.curHp<=0?(this.curHp=0,this.isDie=!0,this.nextClear()):(this.setMonsterHurtEffect(),this.playHit())}}playHit(){let t=this.monsterAnim.getComponent(a);t.color=f(255,255,255,1);let e=f(255,255,255,50);g(t).to(this._showHitTotalTime,{},{onUpdate(t,s){e=f(255,255,255,50*s),t.color=e}}).call((()=>{e=f(255,255,255,255),t.color=e})).start()}setMonsterHurtEffect(t){if(void 0===t&&(t=.3),!this.isDie&&!this.isHurt){this.isHurt=!0;let e=this.monsterAnim.getComponent(a);e.color=(new l).fromHEX("FF4B4B"),this.scheduleOnce((()=>{this.isHurt=!1,e.color=new l(255,255,255)}),t)}}setMonsterHurtMoveEffect(t,e,s){if(t.length){let i=t[0],n=Number(i[0]),o=Number(i[1]),r=Number(i[2]),a=new L;switch(a.speed=o,a.time=r,n){case 1:a.dir=e;break;case 2:let t=new h;h.subtract(t,this.getColliderPos(),s),a.dir=t.normalize();break;case 3:a.dir=e}this._moveEffect=a,this.isRepulse=!0}}moveRepulseEffectFrame(t){if(this.isRepulse&&this._moveEffect)if(this._moveEffect.time-=t,this._moveEffect.time<=0){this.isRepulse=!1,this._moveEffect=null;let t=this.node.getPosition();this.isMove=B.instance.checkInHeroRange(new u(t.x,t.y),this.monsterCfg.range,this)}else{let e=this.node.getPosition();if(e.y>b.viewHeight/2+this.monsterAnim.node.getComponent(m).height/2){this.isRepulse=!1,this._moveEffect=null;let t=this.node.getPosition();return void(this.isMove=B.instance.checkInHeroRange(new u(t.x,t.y),this.monsterCfg.range,this))}let s=this._moveEffect.dir,i=this._moveEffect.speed,n=s.multiply(r(i*t,i*t,0)),o=e.add(n);if(Math.abs(o.x)>b.viewWidth/2-this.monsterAnim.node.getComponent(m).width/2){n=new h(0,1,0).multiply(r(i*t,i*t,0)),o=e.add(n)}this.node.setPosition(o),this.curPos=o}}checkColliderCount(){}updateSkillDamageAttackInterval(){}triggleClearByDuring(t){if(this._during<0){let t=1;if(b.gameMode==k.NORMAL){b.chapterId<50&&(t=1.4)}let e=this.monsterCfg.exp*t;e=e*(100+w.instance.getExpUpgradeSkill())/100;let s=D.clone(this.monsterCfg);return this.clear(),R.instance.onMonsterDie(this.monsterKey),C.emit(H.MONSTER_DIE,s,this.curPos,e,this.monsterHp,this.atk),!1}return!0}nextClear(){this._during=-1}clear(){this.unscheduleAllCallbacks(),C.emit(E.SHOW_MONSTER_DIE_EFFECT,this.node.getPosition()),this.monsterShadow&&this.monsterShadow.clear(),this.monsterCfg&&this.monsterCfg.mType==I.BOSS&&(_.instance.killBossNum=1),this.initStatus=!1,this.monsterCfg=null,this.monsterObj=null,this.monsterHpItem=null,this.monsterShadow=null,this.isMove=!0,this.isHurt=!1,this.isRepulse=!1,_.instance.killNum=1,C.emit(E.DELETE_QUARD_TREE_OBJ,this.monsterKey),_.instance.deleteNearMonster(this.monsterKey),M.instance.putNodeByKey(this.node,this.monsterId.toString()),_.instance.deleteMonsterNodeByKey(this.monsterKey)}childUpdate(t){}}).prototype,"monsterAnim",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=K))||F));class L{constructor(){this.speed=void 0,this.time=void 0,this.dir=void 0}}t("MoveEffect",L),i._RF.pop()}}}));

System.register("chunks:///_virtual/MonsterBuffData.ts",["cc","./CfgMgr.ts","./EventListener.ts","./Util.ts","./BuffModel.ts","./GameEvent.ts","./BuffObj.ts","./SkillUpgradeData.ts"],(function(e){var t,f,s,i,a,u,b,n,r,h;return{setters:[function(e){t=e.cclegacy},function(e){f=e.CfgMgr},function(e){s=e.EventListener},function(e){i=e.Util},function(e){a=e.BuffCfg,u=e.BuffSkillType,b=e.BuffType},function(e){n=e.GameEvent},function(e){r=e.BuffObj},function(e){h=e.SkillUpgradeData}],execute:function(){t._RF.push({},"ba55fiXIBhI+oJaZyBsiEiB","MonsterBuffData",void 0);class l{constructor(){this._debuffObjs=new Map,this._debuffItems=new Map,this._buffObjs=new Map}getBuffCfgById(e){return f.getDataById(new a,e)}createDebuffs(e,t,f){let a=new Map,b=new Map;this._debuffObjs.has(e)&&(a=this._debuffObjs.get(e),a.forEach(((e,t)=>{e.isClear&&a.delete(t)})),this._debuffObjs.set(e,a)),this._debuffItems.has(e)&&(b=this._debuffItems.get(e)),a=new Map,this._debuffObjs.has(e)&&(a=this._debuffObjs.get(e));let h=t.skillObj,l=new Map;for(let e=0;e<h.bulletBuffs.length;e++){let t=h.bulletBuffs[e],f=this.getBuffCfgById(t);if(f.skillType==u.DEBUFF_MONSTER_UP_TYPE){let e=new Array;l.has(f.type)&&(e=l.get(f.type)),e.push(f),l.set(f.type,e)}}for(let t=0;t<h.bulletBuffs.length;t++){let u=h.bulletBuffs[t],d=h.Id+"|"+u,c=i.clone(this.getBuffCfgById(u));if(0==c.skillType)continue;let g=c.probability;if(l.has(c.type)){l.get(c.type).forEach((e=>{g+=e.probability}))}if(!(g>0)||i.randomHit(g))if(a.has(d)){let e=a.get(d);if(e.reset(c,h.damage),e.isFullLayer()||e.layer++,b.has(d)){l.has(c.type)&&e.append(l.get(c.type)),b.get(d).reset(e)}}else{let t=i.clone(this.getBuffCfgById(u)),b=new r;b.init(e,h.weaponId,h.Id,t,h.damage),a.set(d,b),b.buffCfg.res&&(l.has(t.type)&&b.append(l.get(t.type)),s.emit(n.CREATE_MONSTER_DEBUFF,f,b))}}this._debuffObjs.set(e,a)}addBuffItem(e,t){let f=new Map;if(this._debuffItems.has(e.monsterKey)){f=this._debuffItems.get(e.monsterKey);let s=e.skillId+"|"+e.buffCfg.Id;f.set(s,t)}else{let s=e.skillId+"|"+e.buffCfg.Id;f.set(s,t)}if(this._debuffItems.set(e.monsterKey,f),e.buffCfg.type==b.BUFF_INSPIRE_SELF||e.buffCfg.type==b.BUFF_SPEED_UP){let t=[];this._buffObjs.has(e.monsterKey)&&(t=this._buffObjs.get(e.monsterKey)),t.push(e),this._buffObjs.set(e.monsterKey,t)}}createBuff(e,t){}calAttackPer(e){let t=0;if(this._buffObjs.has(e)){let f=this._buffObjs.get(e);for(let e=0;e<f.length;e++)t+=f[e].getAttackPer()}return t}calMoveSpeed(e){let t=0;if(this._debuffObjs.has(e)){this._debuffObjs.get(e).forEach((e=>{t+=e.getSpeedDec()}))}if(t+=h.instance.getMonsterSpeedUpgradeSkill(),this._buffObjs.has(e)){this._buffObjs.get(e).forEach((e=>{t-=e.getSpeedDec()}))}return t}calDamagePer(e,t){let f=0;if(this._debuffObjs.has(e)){this._debuffObjs.get(e).forEach((e=>{f+=e.getDamagePer(t)}))}return f}calCritPer(e,t){let f=0;if(this._debuffObjs.has(e)){let s=this._debuffObjs.get(e),i=!1;s.forEach((e=>{e.isCritInjured()&&(i=!0)})),i&&s.forEach((e=>{f+=e.getCritPer(t)}))}return f}isFreezed(e){let t=!1;if(this._debuffObjs.has(e)){this._debuffObjs.get(e).forEach((e=>{e.isFreeze()&&(t=!0)}))}return t}onMonsterDie(e){this._debuffItems.has(e)&&(this._debuffItems.get(e).forEach((e=>{e.clear()})),this._debuffItems.delete(e)),this._debuffObjs.has(e)&&this._debuffObjs.delete(e),this._buffObjs.has(e)&&this._buffObjs.delete(e)}clear(){this._debuffItems.forEach((e=>{e.forEach((e=>{e.clear()}))})),this._debuffObjs.clear(),this._buffObjs.clear()}static get instance(){return this._instance||(this._instance=new l),this._instance}}e("MonsterBuffData",l),l._instance=null,t._RF.pop()}}}));

System.register("chunks:///_virtual/MonsterBuffItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./PoolManager.ts","./GameDefine.ts","./BuffModel.ts","./SkillModel.ts","./BuffObj.ts","./MonsterData.ts","./EventListener.ts","./GameEvent.ts","./MonsterBuffData.ts"],(function(t){var i,e,s,f,n,a,u,h,r,o,_,g,c,b,l,d,m;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){s=t.cclegacy,f=t.AnimationComponent,n=t._decorator,a=t.Animation,u=t.v3},function(t){h=t.default},function(t){r=t.PoolManager},function(t){o=t.GameDefine},function(t){_=t.BuffType},function(t){g=t.DamageType},function(t){c=t.BuffObj},function(t){b=t.MonsterData},function(t){l=t.EventListener},function(t){d=t.GameEvent},function(t){m=t.MonsterBuffData}],execute:function(){var p,C,y,B,M;s._RF.push({},"e4fbbontQZJQKqOdVEUPix9","MonsterBuffItem",void 0);const{ccclass:S,property:O}=n;t("MonsterBuffItem",(p=S("MonsterBuffItem"),C=O(f),p((M=i((B=class extends h{constructor(){super(...arguments),e(this,"buffAnim",M,this),this.buffKey="",this.initStatus=!1,this._cd=0,this._initCd=0,this._initRelease=!0,this._com=null,this._buffObj=null,this._damagePer=0,this._buffCfg=null,this._during=0,this._inspireMonsterData=new Map,this._waveId=0}init(t,i){this._com=t,this.buffKey=i.buffCfg.Id+Math.random().toString().substring(2,6)+Math.random().toString().substring(2,12),this._buffCfg=i.buffCfg,this._buffObj=i,this._cd=this._buffCfg.cd,this._initCd=this._buffCfg.cd,this._during=this._buffCfg.during,this._damagePer=this._buffCfg.damagePer,this._inspireMonsterData.set(this._buffObj.monsterKey,1),this.setBuffSize();let e=this.buffAnim.getComponent(a);e.clips.length>0&&e.play("effect"),this._waveId=o.gameWave,this.initStatus=!0}setBuffSize(){let t=this._buffObj.buffCfg.scale;if(0==t){let i=this._com.width,e=this._com.height;t=Math.max(i,e)/100*this._com.scale}this.node.setScale(u(t,t,t))}reset(t){this._buffCfg=t.buffCfg,this._buffObj=t,this._damagePer=this._buffCfg.damagePer,this._initCd=this._buffCfg.cd,this._during=this._buffCfg.during}updateMonsterBuff(t){if(o.gameStart&&this.initStatus&&this._buffCfg)if(this._buffCfg.type==_.DEBUFF_DAMAGE_ADD)this._initRelease&&(this._cd-=t,this._cd<0&&(this._com.attacked(this._damagePer*this._buffObj.damage/100,g.DEBUFF,this._buffObj.weaponId,0),this._cd=this._initCd));else if(this._buffCfg.type==_.BUFF_SHIELD)this._com.shieldHp<=0&&this.clear();else if(this._buffCfg.type==_.BUFF_INSPIRE_OTHER){let t=b.instance.getNearMonsterArr(this._buffObj.monsterKey,this._buffCfg.range,Array.from(this._inspireMonsterData.keys()));for(let i=0;i<t.length;i++){let e=t[i];if(!this._inspireMonsterData.has(e.monsterKey)){this._inspireMonsterData.set(e.monsterKey,1);let t=this._buffCfg.subBuffId,i=m.instance.getBuffCfgById(t),s=new c;s.init(e.monsterKey,0,0,i,0,this._buffObj.monsterKey),l.emit(d.SHOW_MONSTER_BUFF,e,s)}}}else if(this._buffCfg.type==_.BUFF_INSPIRE_SELF){b.instance.checkWithRangeMonster(this._buffObj.monsterKey,this._buffObj.targetMonsterKey,this._buffCfg.range)||this.clear()}o.gameStart&&this.initStatus&&this._buffCfg&&this._buffCfg.during>0&&this.duringTriggleClearByType(t)}updateHeroBuff(t){if(o.gameStart&&this.initStatus&&this._buffCfg){if(this._buffCfg.type==_.BUFF_HERO_FIRE&&(this._cd-=t,this._cd<0)){let t=this._damagePer*this._buffObj.damage/100;l.emit(d.HERO_HURT,t),this._cd=this._initCd}this._buffCfg.during>0&&this.duringTriggleClearByType(t),this._waveId!=o.gameWave&&this.clear()}}setBuffMove(){if(this.initStatus&&this._buffCfg.type!=_.BUFF_HERO_FIRE){let t=this._com.getColliderPos(),i=this._com.height*this._com.scale;this.node.setPosition(t.x,t.y+i/4,0)}}duringTriggleClearByType(t){this._during-=t,this._during<=0&&this.clear()}clear(){this.initStatus&&(this.initStatus=!1,this._buffObj&&this._buffObj.clear(),this._inspireMonsterData.clear(),this._buffCfg=null,r.instance.putNode(this.node))}childUpdate(t){o.gameStart&&(this._com?(this.updateMonsterBuff(t),this.setBuffMove()):this.updateHeroBuff(t))}}).prototype,"buffAnim",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=B))||y));s._RF.pop()}}}));

System.register("chunks:///_virtual/MonsterBulletBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PoolManager.ts","./BaseComponent.ts","./EventListener.ts","./GameEvent.ts","./Util.ts","./GameDefine.ts","./SkillModel.ts"],(function(t){var e,i,s,n,l,o,r,a,h,u,d,c,g,p,B,m,S,v,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){s=t.cclegacy,n=t.Node,l=t._decorator,o=t.Vec3,r=t.v2,a=t.v3,h=t.tween,u=t.Vec2,d=t.misc,c=t.Rect},function(t){g=t.PoolManager},function(t){p=t.default},function(t){B=t.EventListener},function(t){m=t.GameEvent},function(t){S=t.Util},function(t){v=t.GameDefine},function(t){b=t.AtkObj}],execute:function(){var y,_,f,k,x;s._RF.push({},"b4314RWAahP+bxxeivFUqgQ","MonsterBulletBase",void 0);const{ccclass:E,property:w}=l;t("MonsterBulletBase",(y=E("MonsterBulletBase"),_=w(n),y((x=e((k=class extends p{constructor(){super(...arguments),i(this,"icon",x,this),this.monsterBulletObj=null,this.initStatus=!1,this.bulletId=101,this.during=10,this.damageR=30,this.damageInterval=void 0,this.damageTimes=void 0,this.isCollider=void 0,this.LoopCount=0,this.moveSpeed=1500,this.initSpeed=1500,this.isEasing=!1,this.scale=1,this._dir=new o,this.curPos=new o,this.targetPos=new o,this.quadBoundBox=null,this.boundBox=null,this._skillBulletKey="",this.type=0}get atkObj(){let t=new b;return t.atk=Math.floor(S.getRandomInt(5,15)),t}initMonsterBullet(t,e){void 0===e&&(e=0);let i=this.node.getPosition(),s=new o;this.targetPos=t.clone(),o.subtract(s,t,i);let n=S.vector_to_angle(r(s.x,s.y)),l=S.angle_to_vector(n+e);s.set(l.x,l.y),this._dir=s.normalize(),this.isEasing=!1,this.curPos=this.node.getPosition(),this.scale=1,this.setSkillSize(),this.during=10,this.moveSpeed=this.getSkillMoveSpeedByType(),this.initSpeed=this.moveSpeed,this.damageTimes=1,this.damageInterval=0,this.isCollider=!0,this.LoopCount=0,this._skillBulletKey="monsterBullet"+this.bulletId+Math.random().toString().substring(2,6)+Math.random().toString().substring(2,12),this.setSkillBulletAnim(),this.initStatus=!0}setSkillSize(){this.node.setScale(a(this.scale,this.scale,this.scale))}setSkillBulletAnim(){}easingSpeed(t,e){if(this.isEasing){class e{constructor(){this.t=void 0}}let i=new e;i.t=0,h(i).to(t,{t:1},{onUpdate:(t,e)=>{const i=r(0,0),s=r(0,.4),n=r(.2,1),l=r(1,1),o=(i.x,s.x,n.x,l.x,i.y*(1-e)*(1-e)*(1-e)+3*s.y*e*(1-e)*(1-e)+3*n.y*e*e*(1-e)+l.y*e*e*e);this.moveSpeed=this.initSpeed+500*o}}).start()}}setBulletMove(t){if(this.monsterBulletObj.monsterCfg.bulletSpeed>0){let e=this.node.getPosition(),i=a(this._dir.x,this._dir.y,0).multiply(a(this.moveSpeed*t,this.moveSpeed*t,0)),s=e.add(i);this.node.setPosition(s),this.curPos=s,this.setBulletAngle()}}setBulletAngle(){let t=new u(this._dir.x,this._dir.y).signAngle(new u(0,1)),e=d.radiansToDegrees(t);this.node.angle=-e}updateSkillBulletScreen(t){let e=new c(-v.viewWidth/2,-v.viewHeight/2,v.viewWidth,v.viewHeight),i=this.curPos;e.contains(r(i.x,i.y))||this.clear()}insertRectCircleObj(){this.initStatus&&B.emit(m.INSERT_QUARD_TREE_RECT_CIRCLE,this._skillBulletKey,this,this.quadBoundBox,1)}onAttacked(){}triggleClearByDuring(){return!(this.during<0)||(this.clear(),!1)}getSkillMoveSpeedByType(){return this.monsterBulletObj.monsterCfg.bulletSpeed}onEnable(){}onDisable(){}nextClear(){this.during=-1}clear(){this.initStatus=!1,this.boundBox=null,this.quadBoundBox=null,this.monsterBulletObj.callback&&this.monsterBulletObj.callback(),B.emit(m.DELETE_QUARD_TREE_OBJ,this._skillBulletKey),g.instance.putNode(this.node)}childUpdate(t){}}).prototype,"icon",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=k))||f));s._RF.pop()}}}));

System.register("chunks:///_virtual/MonsterBulletItem.ts",["cc","./MonsterBulletBase.ts","./GameDefine.ts","./HeroBase.ts","./Util.ts","./MonsterBuffData.ts","./BuffObj.ts","./GameEvent.ts","./EventListener.ts"],(function(t){var e,n,s,i,o,l,u,r,a,c,f,B,m;return{setters:[function(t){e=t.cclegacy,n=t.Collider2D,s=t.Contact2DType,i=t.Vec3,o=t._decorator},function(t){l=t.MonsterBulletBase},function(t){u=t.GameDefine},function(t){r=t.HeroBase},function(t){a=t.Util},function(t){c=t.MonsterBuffData},function(t){f=t.BuffObj},function(t){B=t.GameEvent},function(t){m=t.EventListener}],execute:function(){var h;e._RF.push({},"1608dgTtjdKY5HYxesbur1o","MonsterBulletItem",void 0);const{ccclass:d,property:g}=o;t("MonsterBulletItem",d("MonsterBulletItem")(h=class extends l{init(t,e){this.initStatus=!1,this.monsterBulletObj=t,this.initMonsterBullet(e)}start(){let t=this.getComponent(n);t&&t.on(s.BEGIN_CONTACT,this.onBeginContact,this)}onBeginContact(t,e,n){e.node.getComponent(r).onAttacked(this.monsterBulletObj.damage);let s=e.node.getComponent(r).node.position;this.onAttack(new i(s.x,s.y+100,s.z)),this.nextClear()}onAttack(t){let e=this.monsterBulletObj.monsterCfg;if(e&&e.bulletBuffs)for(let n=0;n<e.bulletBuffs.length;n++){let s=e.bulletBuffs[n],i=(e.Id,a.clone(c.instance.getBuffCfgById(s)));if(0==i.skillType)continue;let o=i.probability;if(o>0&&!a.randomHit(o))continue;let l=new f;l.init("monsterKey",0,0,i,this.monsterBulletObj.damage),m.emit(B.CREATE_HERO_DEBUFF,l,t)}}childUpdate(t){u.gameStart&&this.initStatus&&this.triggleClearByDuring()&&(this.updateSkillBulletScreen(t),this.setBulletMove(t))}})||h);e._RF.pop()}}}));

System.register("chunks:///_virtual/MonsterData.ts",["cc","./ChapterEventModel.ts","./CfgMgr.ts","./Util.ts","./MonsterModel.ts","./GameDefine.ts","./MonsterEventModel.ts","./FightEndEventModel.ts"],(function(e){var t,s,r,n,a,i,o,h,l,u,m,M,_;return{setters:[function(e){t=e.cclegacy,s=e.Vec2,r=e.v3,n=e.view,a=e.Vec3},function(e){i=e.ChapterEventCfg},function(e){o=e.CfgMgr},function(e){h=e.Util},function(e){l=e.MonsterCfg},function(e){u=e.GameDefine,m=e.GameMode},function(e){M=e.MonsterEventCfg},function(e){_=e.FightEndEventCfg}],execute:function(){t._RF.push({},"43feaU49+ZAJb6zeIrQqFaT","MonsterData",void 0);class v{constructor(){this._nearMonsterData=new Map,this._monsterNodeMap=new Map,this._maxCheckCont=3,this._brushMonsterPoint=new Map,this._killNum=0,this._killBossNum=0,this._waveKillNum=0,this._waveKillBossNum=0,this._brushMonsterEventData=[],this._wave=0,this._maxWave=10,this._gameTime=0,this._chapterTime=0,this._chapterId=1}set gameTime(e){this._gameTime+=e}get gameTime(){return this._gameTime}set chapterTime(e){this._chapterTime+=e}get chapterTime(){return this._chapterTime}set wave(e){this._wave=e,this._waveKillNum=0,this._waveKillBossNum=0,this._chapterTime=0}get wave(){return this._wave}set maxWave(e){this._maxWave=e}get maxWave(){return this._maxWave}get killBossNum(){return this._killBossNum}get waveKillBossNum(){return this._waveKillBossNum}set killBossNum(e){this._killBossNum+=e,this._waveKillBossNum+=e}get killNum(){return this._killNum}set killNum(e){this._killNum+=e,this._waveKillNum+=e}get waveKillNum(){return this._waveKillNum}get brushMonsterEventData(){return this._brushMonsterEventData}init(e){this._chapterId=e,u.gameMode==m.FIGHTEND?this.setFightEndEvents(e):this.setChapterMonsterEvents(e)}setChapterMonsterEvents(e){let t=o.getCfgDataArray(new i);for(let s=0;s<t.length;s++)if(t[s].chapter==e){let e=t[s],r=new M;r.box=e.box,r.hpUp=e.hpUp,r.monsterLevel=e.monsterLevel,r.monsters=e.monsters,r.wave=e.wave,this._brushMonsterEventData.push(r)}this.maxWave=this._brushMonsterEventData[this._brushMonsterEventData.length-1].wave}setFightEndEvents(e){let t=o.getCfgDataArray(new _);for(let s=0;s<t.length;s++)if(t[s].chapter==e&&t[s].wave==u.gameWave){let e=t[s],r=new M;r.hpUp=e.hpUp,r.monsterLevel=e.monsterLevel,r.monsters=e.monsters,r.wave=e.wave,this._brushMonsterEventData.push(r);break}this.maxWave=this._brushMonsterEventData[this._brushMonsterEventData.length-1].wave}setNearMonster(e,t,s){let r=new Map;this._nearMonsterData.has(e)?(r=this._nearMonsterData.get(e),r.size<this._maxCheckCont&&this.addSkillRangeMonster(t,s,r)):(this._nearMonsterData.set(e,r),this.addSkillRangeMonster(t,s,r))}addSkillRangeMonster(e,t,r){let n=Array.from(this._monsterNodeMap.values());for(let a=0;a<n.length;a++){const i=n[a];let o=i.curPos,h=i.monsterKey;s.squaredDistance(e,o)<=t*t&&r.size<this._maxCheckCont&&r.set(h,i)}}getNearMonster(e,t){let s=[];if(this._nearMonsterData.has(e)){let r=Array.from(this._nearMonsterData.get(e).values());for(let e=0;e<r.length;e++){const n=r[e];n&&n.monsterKey!=t&&s.push(n.curPos)}}return s}deleteNearMonster(e){this._nearMonsterData.forEach(((t,s)=>{t.has(e)&&t.delete(e)}))}clearNearMonster(){this._nearMonsterData.clear()}getNearMonsterTarget(e){let t=new Map;return this._nearMonsterData.has(e)&&(t=this._nearMonsterData.get(e)),t}checkNearMonsterBySkill(e){if(this._nearMonsterData.has(e)){return!!this._nearMonsterData.get(e).size}return!1}addMonsterNodeByKey(e){e&&this._monsterNodeMap.set(e.monsterKey,e)}deleteMonsterNodeByKey(e){this._monsterNodeMap.delete(e)}checkSkillNearMonster(e,t){let r=!1;if(this._monsterNodeMap.size){let n=Array.from(this._monsterNodeMap.values());for(let a=0;a<n.length;a++){const i=n[a];if(i&&i.initStatus){let n=i.curPos;if(s.squaredDistance(e,n)<=t*t){r=!0;break}}}}return r}checkWithRangeMonster(e,t,r){if(this._monsterNodeMap.size&&this._monsterNodeMap.has(t)&&this._monsterNodeMap.has(e)){const n=this._monsterNodeMap.get(e),a=this._monsterNodeMap.get(t);if(n&&n.initStatus&&a&&a.initStatus){if(s.squaredDistance(n.curPos,a.curPos)<r*r)return!0}}return!1}getNearMonsterArr(e,t,r){let n=[];if(this._monsterNodeMap.size&&this._monsterNodeMap.has(e)){let a=this._monsterNodeMap.get(e).curPos,i=Array.from(this._monsterNodeMap.values());for(let o=0;o<i.length;o++){const h=i[o];if(!(r.indexOf(h.monsterKey)>=0||e==h.monsterKey)&&(h&&h.initStatus)){let e=h.curPos,r=e.x-a.x,i=e.y-a.y;if(!(r>t||r<-t)||!(i>t||i<-t)){s.squaredDistance(a,e)<t*t&&n.push(h)}}}}return n}setBrushMonsterPoint(e,t){this._brushMonsterPoint.set(e,t)}setBossBrushPoint(e,t){}getAppointMonsterPoint(e){void 0===e&&(e=new s(0,100));let t=this._brushMonsterPoint.size,r=Math.floor(Math.random()*t),n=this._brushMonsterPoint.get(r),a=h.getRectRandPos(n);return a.x+=e.x,a.y+=e.y,a}getMonsterBrushPoint(e,t){void 0===t&&(t=new s(60,50));let n=e.x+Math.random()*t.x,a=e.y+Math.random()*t.y;return r(n,a,0)}getBossBrushPoint(e,t,n){void 0===e&&(e=1),void 0===t&&(t=0),void 0===n&&(n=new s(100,100));let a=(u.viewWidth-100)/2/e,i=(t%2+Math.floor(t/2))*a/2*(t%2?1:-1)-(e-1)%2*a/2,o=u.viewHeight/2+Math.random()*n.x-u.battleMapDownPosy;return r(i,o,0)}getScreenUpRandPos(e){void 0===e&&(e=new s(100,50));let t=(u.viewWidth>n.getVisibleSize().width?n.getVisibleSize().width:u.viewWidth)-e.x,r=new a;return r.x=(Math.random()-.5)*t,r.y=u.viewHeight/2+Math.random()*e.y-u.battleMapDownPosy-200,r}getMonsterCfgById(e){return o.getDataById(new l,e)}getMonsterAtk(e){return 10}getMonsterHp(e){return e}getMonsterSpeed(e){return e}revive(){let e=o.getCfgDataArray(new i);for(let t=0;t<e.length;t++)if(e[t].chapter==this._chapterId&&e[t].wave==this._wave){let s=e[t],r=new M;r.box=s.box,r.hpUp=s.hpUp,r.monsterLevel=s.monsterLevel,r.monsters=s.monsters,r.wave=s.wave,this._brushMonsterEventData.unshift(r)}this.clearNearMonster(),this._monsterNodeMap.clear()}clear(){this._nearMonsterData.clear(),this._monsterNodeMap.clear(),this._brushMonsterPoint.clear(),this._killNum=0,this._gameTime=0,this._killBossNum=0,this._waveKillNum=0,this._waveKillBossNum=0,this._wave=0,this._maxWave=10,this._brushMonsterEventData=[]}static get instance(){return this._instance||(this._instance=new v),this._instance}}e("MonsterData",v),v._instance=null,t._RF.pop()}}}));

System.register("chunks:///_virtual/MonsterEvent.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"57d4aClDBhKubGr6xXTpywI","MonsterEvent",void 0);class r{}e("MonsterEvent",r),r.CREATE_MONSTER="createMonster",r.CREATE_REBIRTH_MONSTER="createRebirthMonster",r.MONSTER_DIE="monsterDie",r.ADD_NEAR_MONSTER="addNearMonster",r.MONSTER_CREATE_BULLET="monsterCreateBullet",t._RF.pop()}}}));

System.register("chunks:///_virtual/MonsterEventModel.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"f11322V7wBKw5zptwaPabRR","MonsterEventModel",void 0);t("MonsterEventCfg",class{constructor(){this.wave=void 0,this.hpUp=void 0,this.box=void 0,this.monsterLevel=void 0,this.monsters=void 0}});t("BrushMonsterType",function(t){return t[t.NORMAL=1]="NORMAL",t[t.BOSS=2]="BOSS",t}({})),t("MonsterType",function(t){return t[t.LITTLE=1]="LITTLE",t[t.ELITE=2]="ELITE",t[t.BOSS=3]="BOSS",t}({}));e._RF.pop()}}}));

System.register("chunks:///_virtual/MonsterHpItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./PoolManager.ts","./GameDefine.ts"],(function(t){var e,n,o,i,s,r,a,c,p,h,l,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){o=t.cclegacy,i=t.Node,s=t._decorator,r=t.UITransform,a=t.ProgressBar,c=t.UIOpacity,p=t.tween},function(t){h=t.default},function(t){l=t.PoolManager},function(t){m=t.GameDefine}],execute:function(){var u,d,g,f,b,C,y;o._RF.push({},"237f5e5BC5FArB67QHuARAX","MonsterHpItem",void 0);const{ccclass:M,property:H}=s;t("MonsterHpItem",(u=M("MonsterHpItem"),d=H(i),g=H(i),u((C=e((b=class extends h{constructor(){super(...arguments),n(this,"barAnim",C,this),n(this,"bar",y,this),this._com=null}init(t){this.barAnim.getComponent(r).width=this.node.getComponent(r).width,this.getComponent(a).progress=1,this.getComponent(c).opacity=0,this._com=t}setMonsterHp(t,e){t<=0&&(t=0),this.unschedule(this.setMonsterHide),this.getComponent(c).opacity=255,this.getComponent(a).progress=t/e;let n=this.bar.getComponent(r).width,o=this.barAnim.getComponent(r).width-n;this.scheduleOnce(this.setMonsterHide,.5),p(this.barAnim.getComponent(r)).by(.2,{width:-o}).call((()=>{t<=0&&this.clear()})).start()}setMonsterHide(){this.getComponent(c).opacity=0}setMonsterHpPos(){let t=this._com.getColliderPos(),e=this._com.node.getComponent(r).height;this.node.setPosition(t.x,t.y+2*e/3,0)}clear(){l.instance.putNode(this.node)}childUpdate(t){m.gameStart&&this._com&&this.setMonsterHpPos()}}).prototype,"barAnim",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=e(b.prototype,"bar",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=b))||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/MonsterItem.ts",["cc","./MonsterBase.ts","./GameDefine.ts"],(function(t){var e,s,i,n;return{setters:[function(t){e=t.cclegacy,s=t._decorator},function(t){i=t.MonsterBase},function(t){n=t.GameDefine}],execute:function(){var r;e._RF.push({},"15d32i74JZKNYfV93JUtcSJ","MonsterItem",void 0);const{ccclass:o,property:c}=s;t("MonsterItem",o("MonsterItem")(r=class extends i{init(t,e){this.monsterCfg=t,this.monsterObj=e,this.initStatus=!1,this.isDie=!1,this.setMonsterBorn()}childUpdate(t){n.gameStart&&this.initStatus&&this.triggleClearByDuring(t)&&(this.monsterMoveFrame(t),this.moveRepulseEffectFrame(t))}})||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/MonsterManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PoolManager.ts","./MonsterItem.ts","./ResourcesUtil.ts","./EventListener.ts","./MonsterEvent.ts","./BaseComponent.ts","./GameEvent.ts","./MonsterModel.ts","./MonsterData.ts","./Constants.ts","./GameDefine.ts","./OpenPopupManager.ts","./SkillUpgradeData.ts","./GameData.ts","./GuideData.ts","./MonsterBuffData.ts","./MonsterEventModel.ts"],(function(e){var t,n,s,r,i,o,a,l,h,u,c,m,M,d,E,_,f,p,g,T,P,b,A,S,v,N,R,C,B;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){s=e.cclegacy,r=e.Node,i=e._decorator,o=e.Vec3,a=e.instantiate,l=e.Sprite},function(e){h=e.PoolManager},function(e){u=e.MonsterItem},function(e){c=e.ResourcesUtil},function(e){m=e.EventListener},function(e){M=e.MonsterEvent},function(e){d=e.default},function(e){E=e.GameEvent},function(e){_=e.MonsterFeatureType,f=e.MonsterEventObj,p=e.MonsterObj},function(e){g=e.MonsterData},function(e){T=e.Constants},function(e){P=e.GameDefine},function(e){b=e.OpenPopupManager},function(e){A=e.SkillUpgradeData},function(e){S=e.GameState,v=e.GameData},function(e){N=e.GuideData,R=e.GuideStep},function(e){C=e.MonsterBuffData},function(e){B=e.MonsterType}],execute:function(){var I,D,O,y,G,U,L;s._RF.push({},"bc381bL0FRA+qOjTTLMP7lu","MonsterManager",void 0);const{ccclass:k,property:w}=i;e("MonsterManager",(I=k("MonsterManager"),D=w(r),O=w(r),I((U=t((G=class extends d{constructor(){super(...arguments),n(this,"monsterParent",U,this),n(this,"bulletParent",L,this),this._monsterPrefabMap=new Map,this._brushMonsterEventArr=[],this._queueMonsterArr=[],this._curMonsterEvent=null,this._curTotalNum=0,this._curKillNum=0,this._screenMonsterCount=0,this._schduleTime=1,this._bulletPrefabItemMap=new Map}init(){this._schduleTime=1,g.instance.init(P.chapterId)}setCurChapterEvent(){g.instance.brushMonsterEventData.length&&(this._curMonsterEvent=g.instance.brushMonsterEventData.shift(),g.instance.wave=this._curMonsterEvent.wave,this.setBrushMonsterEvent())}setBrushMonsterEvent(){this._curTotalNum=0,this._curKillNum=0;let e=this._curMonsterEvent.monsters,t=0;for(let n=0;n<e.length;n++){const s=e[n];let r=s[0],i=s[1],o=s[2],a=s[3],l=s[4],h=Math.floor(l*i),u=0==h?0:Math.floor(i/h);u=u>i?i:u;let c=i-h*u;c=c>=1?c:0;let m=new f;m.hpUp=this._curMonsterEvent.hpUp,m.monsterId=r,m.addHp=o,m.addAtk=a,m.cd=l,m.level=this._curMonsterEvent.monsterLevel,m.startTime=t,m.secNum=u,m.diffNum=c,m.curNum=0,m.totalNum=i,this._brushMonsterEventArr.push(m),this._curTotalNum+=i,t+=h+1}}getBossEventByWeight(e){let t=0,n=0,s=0,r=[];for(let t=0;t<e.length;t++){let n=e[t].split("|"),i=Number(n[4]);r.push(i),s+=i}let i=Math.floor(Math.random()*s),o=0;return r.some(((e,s)=>{if(n=t+e,i>=t&&i<n)return o=s,!0;t=n})),e[o]}onCreateMonster(e){for(let t=0;t<e;t++)if(this._queueMonsterArr.length){let n=this._queueMonsterArr.shift(),s=n.id,r=null,i=new o,a=g.instance.getMonsterCfgById(s);if(this._monsterPrefabMap.has(s))i=a.mType!=B.BOSS?g.instance.getScreenUpRandPos():g.instance.getBossBrushPoint(e,t),r=h.instance.getNodeItemById(this._monsterPrefabMap.get(s),s.toString()),this.monsterParent.addChild(r),r.setPosition(i),r.getComponent(u).init(a,n);else{let e=T.monsterPath;c.getPrefab(e).then((e=>{this.loadMonsterRes(n,a,e)}))}}}loadMonsterRes(e,t,n,s){void 0===s&&(s=null);let r=a(n),i=T.monsterIconPath+t.icon+"/spriteFrame";c.geSpriteFrame(i).then((n=>{r.getChildByName("icon").getComponent(l).spriteFrame=n,null==s&&(s=t.mType!=B.BOSS?g.instance.getScreenUpRandPos():g.instance.getBossBrushPoint()),this.monsterParent.addChild(r),r.setPosition(s),r.getComponent(u).init(t,e),this._monsterPrefabMap.set(t.Id,r)}))}onMonsterDie(e,t,n,s,r){this._curKillNum++;let i=!1;if(e.features.forEach((e=>{if(e.type==_.FEATURE_SPLIT_DIE){i=!0;let n=new p;n.id=e.monsterId,n.addHp=e.hpPer*s,n.addAtk=e.atkPer*r,this.scheduleOnce((()=>{m.emit(M.CREATE_REBIRTH_MONSTER,n,t,e.count)}),.1)}})),i||this.monsterParent.children.length||0!=this._brushMonsterEventArr.length)n>0&&m.emit(E.UPDATE_MONSTER_PROGRESS,g.instance.killNum,n,g.instance.killBossNum);else if(g.instance.clearNearMonster(),this._curMonsterEvent.wave>=g.instance.maxWave)n>0&&m.emit(E.UPDATE_MONSTER_PROGRESS,g.instance.killNum,0,g.instance.killBossNum),P.gameOver=!0,P.gameStart=!1,b.instance.showGameWinPopup(S.Success);else{let e=this._curMonsterEvent.wave+1;if(this._curMonsterEvent.box){P.gameWave=e;let s=v.waveCoinAdd+A.instance.getGoldUpgradeSkill();n>0?m.emit(E.UPDATE_MONSTER_PROGRESS,g.instance.killNum,n,g.instance.killBossNum,(()=>{this.scheduleOnce((()=>{m.emit(E.GAME_BATTLE_NEXT_WAVE,e),m.emit(E.CREATE_DROP_BOX,t,s),N.instance.curStep==R.GUIDE_STEP9_SELECT_SKILL&&m.emit(E.GUIDE_BATTLE_ACTION)}),1)})):this.scheduleOnce((()=>{m.emit(E.GAME_BATTLE_NEXT_WAVE,e),m.emit(E.CREATE_DROP_BOX,t,s),N.instance.curStep==R.GUIDE_STEP9_SELECT_SKILL&&m.emit(E.GUIDE_BATTLE_ACTION)}),1)}else n>0&&m.emit(E.UPDATE_MONSTER_PROGRESS,g.instance.killNum,n,g.instance.killBossNum),this.setCurChapterEvent(),P.gameWave=e,m.emit(E.GAME_BATTLE_NEXT_WAVE,this._curMonsterEvent.wave)}}triggleBrushMonsterEvent(e){if(g.instance.gameTime=e,g.instance.chapterTime=e,this._schduleTime-=e,this._schduleTime<=0)for(let e=0,t=this._brushMonsterEventArr.length;e<t;e++){const n=this._brushMonsterEventArr[e];if(n.curNum<n.totalNum){if(g.instance.chapterTime>=n.startTime){this._schduleTime=1;let e=n.secNum;n.diffNum&&(n.diffNum--,e+=1);for(let t=0;t<e;t++){let e=new p;e.id=n.monsterId,e.hpUp=n.hpUp,e.addAtk=n.addAtk,e.addHp=n.addHp,e.level=n.level,this._queueMonsterArr.push(e)}n.curNum+=e}}else this._brushMonsterEventArr.splice(e,1),e--,t--}}onAddNearMonster(e,t){}onCreateRebirthMonster(e,t,n){for(let s=0;s<n;s++){let n=e.id,s=null,r=g.instance.getMonsterBrushPoint(t),i=g.instance.getMonsterCfgById(n);if(this._monsterPrefabMap.has(n))s=h.instance.getNodeItemById(this._monsterPrefabMap.get(n),n.toString()),this.monsterParent.addChild(s),s.setPosition(r),s.getComponent(u).init(i,e);else{let t=T.monsterPath;c.getPrefab(t).then((t=>{this.loadMonsterRes(e,i,t,r)}))}}}onCreateBullet(e){let t=null,n=null,s=e.monsterCfg.bulletId,r=e.monsterCfg.Id+"|"+s;if(this._bulletPrefabItemMap.has(r))t=h.instance.getNodeItemById(this._bulletPrefabItemMap.get(r),r.toString()),this.bulletParent.addChild(t),t.setPosition(e.pos),n=t.components[1],n.init(e,e.targetPos);else{let s=T.monsterBulletPath;c.getPrefab(s).then((s=>{let i=T.bulletPath+e.monsterCfg.bulletId+"/spriteFrame";c.getSpriteFrame(i).then((i=>{t=a(s);let o=t.getChildByName("icon").getComponent(l);o.spriteFrame=i,o.node.setScale(e.monsterCfg.bulletScale,e.monsterCfg.bulletScale),this.bulletParent.addChild(t),t.setPosition(e.pos),n=t.components[1],n.init(e,e.targetPos),this._bulletPrefabItemMap.set(r,t)}))}))}}onEnable(){m.on(M.CREATE_MONSTER,this.onCreateMonster,this),m.on(M.MONSTER_DIE,this.onMonsterDie,this),m.on(M.ADD_NEAR_MONSTER,this.onAddNearMonster,this),m.on(M.CREATE_REBIRTH_MONSTER,this.onCreateRebirthMonster,this),m.on(M.MONSTER_CREATE_BULLET,this.onCreateBullet,this)}onDisable(){m.off(M.CREATE_MONSTER,this.onCreateMonster,this),m.off(M.MONSTER_DIE,this.onMonsterDie,this),m.off(M.ADD_NEAR_MONSTER,this.onAddNearMonster,this),m.off(M.CREATE_REBIRTH_MONSTER,this.onCreateRebirthMonster,this),m.off(M.MONSTER_CREATE_BULLET,this.onCreateBullet,this)}setMonsterSort(){let e=this.monsterParent.children;e.sort(((e,t)=>Math.round(t.position.y)-Math.round(e.position.y)));for(let t=0;t<e.length;t++)e[t].setSiblingIndex(t);this.monsterParent._updateSiblingIndex()}revive(){this._queueMonsterArr=[],this._brushMonsterEventArr=[],this._schduleTime=1,this._monsterPrefabMap.clear(),this._bulletPrefabItemMap.clear(),this.monsterParent.destroyAllChildren(),this.bulletParent.destroyAllChildren(),g.instance.revive(),C.instance.clear()}clear(){this._monsterPrefabMap.clear(),this._bulletPrefabItemMap.clear(),g.instance.clear(),C.instance.clear(),this._schduleTime=1,this._brushMonsterEventArr=[],this._queueMonsterArr=[],this._curMonsterEvent=null,this.monsterParent.destroyAllChildren(),this.bulletParent.destroyAllChildren()}childUpdate(e){if(P.gameStart&&(this.triggleBrushMonsterEvent(e),this.setMonsterSort(),this._queueMonsterArr.length)){let e=this._queueMonsterArr.length>60?Math.ceil(this._queueMonsterArr.length/60):1;this.onCreateMonster(e)}}}).prototype,"monsterParent",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(G.prototype,"bulletParent",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=G))||y));s._RF.pop()}}}));

System.register("chunks:///_virtual/MonsterModel.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"c3918UZqVtApaVupxixI5Ut","MonsterModel",void 0);t("MonsterFeature",class{constructor(){this.type=void 0,this.monsterId=void 0,this.count=void 0,this.damagePer=void 0,this.hpPer=void 0,this.atkPer=void 0,this.speedPer=void 0,this.buffId=void 0}});t("MonsterCfg",class{constructor(){this.ClassName="Monster",this.Id=void 0,this.mType=void 0,this.icon=void 0,this.iconScale=void 0,this.shadeScale=void 0,this.shadeOffsetY=void 0,this.colliderRadius=void 0,this.colliderOffset=void 0,this.speed=void 0,this.atk=void 0,this.hp=void 0,this.range=void 0,this.moveType=void 0,this.attackInterval=void 0,this.bulletId=void 0,this.bulletSpeed=void 0,this.bulletScale=void 0,this.bulletBuffs=void 0,this.exp=void 0,this.hurts=void 0,this.features=void 0}});t("MonsterAmin",function(t){return t.Move="Move",t.Atk="Skill",t}({}));t("MonsterObj",class{constructor(){this.id=void 0,this.level=void 0,this.addHp=void 0,this.addAtk=void 0,this.hpUp=1}});t("MonsterEventObj",class{constructor(){this.monsterId=void 0,this.addHp=void 0,this.addAtk=void 0,this.level=void 0,this.cd=void 0,this.hpUp=void 0,this.startTime=void 0,this.secNum=void 0,this.diffNum=void 0,this.curNum=0,this.totalNum=1}});t("MonsterBulletObj",class{constructor(){this.bulletKey=void 0,this.monsterCfg=void 0,this.monsterObj=void 0,this.layer=1,this.pos=void 0,this.callback=void 0,this.targetPos=void 0,this.damage=void 0,this.param=void 0,this.scale=1}});t("MonsterFeatureType",function(t){return t[t.FEATURE_BUFF=1]="FEATURE_BUFF",t[t.FEATURE_MOVE_ADDSPEED=11]="FEATURE_MOVE_ADDSPEED",t[t.FEATURE_MOVE_Z=12]="FEATURE_MOVE_Z",t[t.FEATURE_MOVE_FLASH=13]="FEATURE_MOVE_FLASH",t[t.FEATURE_SPLIT_DIE=21]="FEATURE_SPLIT_DIE",t[t.FEATURE_SPLIT_UNDERATTAK=22]="FEATURE_SPLIT_UNDERATTAK",t[t.FEATURE_ATTACK_FIRE=31]="FEATURE_ATTACK_FIRE",t[t.FEATURE_UNDERATTAK_FLASH=41]="FEATURE_UNDERATTAK_FLASH",t[t.FEATURE_UNDERATTAK_REKNOCKBACK=42]="FEATURE_UNDERATTAK_REKNOCKBACK",t}({}));i._RF.pop()}}}));

System.register("chunks:///_virtual/MonthlyPassItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TopupData.ts","./SpriteEx.ts","./LanguageManager.ts","./Util.ts","./RewardItem.ts"],(function(t){var i,e,s,n,a,l,r,o,h,c,p,g,u,b,m;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){s=t.cclegacy,n=t.Label,a=t.Node,l=t.Button,r=t._decorator,o=t.Component,h=t.Sprite,c=t.instantiate},function(t){p=t.TopupData},function(t){g=t.SpriteEx},function(t){u=t.LanguageManager},function(t){b=t.Util},function(t){m=t.RewardItem}],execute:function(){var d,f,y,w,C,B,_,I,L,z,R,j,v,P,M,O,x,S,A,D,N,T,E,k,F,H,U,K,Y;s._RF.push({},"37383bHv15AwKA2Z6ulAkYn","MonthlyPassItem",void 0);const{ccclass:Z,property:q}=r;t("MonthlyPassItem",(d=Z("MonthlyPassItem"),f=q(g),y=q(g),w=q(n),C=q(n),B=q(n),_=q(a),I=q(a),L=q(a),z=q(a),R=q(a),j=q(n),v=q(l),P=q(a),d((x=i((O=class extends o{constructor(){super(...arguments),e(this,"bg",x,this),e(this,"icon",S,this),e(this,"title",A,this),e(this,"desc",D,this),e(this,"status",N,this),e(this,"rightList",T,this),e(this,"rightItem",E,this),e(this,"rewardList",k,this),e(this,"dailyRewardItem",F,this),e(this,"buyBtn",H,this),e(this,"price",U,this),e(this,"claimBtn",K,this),e(this,"claimBtns",Y,this),this._passObj=null,this._passCfg=null}init(t){this._passObj=t,this._passCfg=p.instance.getMonthlyPassCfg(this._passObj.passId),this.setPassInfo(),this.setRewardsInfo(),this.setRightInfo()}setPassInfo(){this.bg.index=this._passCfg.icon,this.icon.index=this._passCfg.icon,this.title.string=u.instance.getLang(this._passCfg.name),this.desc.string=u.instance.getLang(this._passCfg.desc),this.price.string=this._passObj.price.toString(),this.status.string=this._passObj.state?b.timeToString(this._passObj.countdown):u.instance.getLang("shop.noteffective"),this._passObj.state?(this.buyBtn.active=!1,this.claimBtns.active=!0):(this.buyBtn.active=!0,this.claimBtns.active=!1),this._passObj.draw?(this.claimBtn.interactable=!1,this.claimBtn.getComponent(h).grayscale=!0,this.claimBtn.node.getChildByName("lbText").getComponent(n).string=u.instance.getLang("claimed")):(this.claimBtn.interactable=!0,this.claimBtn.getComponent(h).grayscale=!1,this.claimBtn.node.getChildByName("lbText").getComponent(n).string=u.instance.getLang("claim"))}setRewardsInfo(){this.rewardList.removeAllChildren();for(let t=0;t<this._passCfg.dailyRewards.length;t++){const i=this._passCfg.dailyRewards[t];let e=c(this.dailyRewardItem);e.getChildByName("rewardItem").getComponent(m).init(i),e.parent=this.rewardList}}setRightInfo(){this.rightList.removeAllChildren();for(let t=0;t<this._passCfg.rights.length;t++){const i=this._passCfg.rights[t];let e=c(this.rightItem);e.getComponent(n).string=u.instance.getLang(i),e.getChildByName("icon").getComponent(g).index=this._passCfg.icon,e.parent=this.rightList}}onClaimBtn(){p.instance.onClaimMonthlyPass(this._passObj.passId)}onBuyBtn(){p.instance.onBuyMonthlyPass(this._passObj.passId,this._passCfg.name)}onExtendBtn(){p.instance.onBuyMonthlyPass(this._passObj.passId,this._passCfg.name)}}).prototype,"bg",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=i(O.prototype,"icon",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=i(O.prototype,"title",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=i(O.prototype,"desc",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=i(O.prototype,"status",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=i(O.prototype,"rightList",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=i(O.prototype,"rightItem",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=i(O.prototype,"rewardList",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=i(O.prototype,"dailyRewardItem",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=i(O.prototype,"buyBtn",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=i(O.prototype,"price",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=i(O.prototype,"claimBtn",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=i(O.prototype,"claimBtns",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=O))||M));s._RF.pop()}}}));

System.register("chunks:///_virtual/MonthlyPassModel.ts",["cc"],(function(s){var t;return{setters:[function(s){t=s.cclegacy}],execute:function(){t._RF.push({},"6c290BF3YtK6J1V3xoGJSrf","MonthlyPassModel",void 0);s("MonthlyPassCfg",class{constructor(){this.ClassName="MonthlyPass",this.Id=void 0,this.name=void 0,this.desc=void 0,this.icon=void 0,this.rights=void 0,this.dailyRewards=void 0}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/MonthlyPassPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./TopupData.ts","./EventListener.ts","./GameEvent.ts","./MonthlyPassItem.ts"],(function(t){var n,e,s,o,i,a,l,c,r,p,h,P,u,f;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){s=t.cclegacy,o=t.Node,i=t.Prefab,a=t._decorator,l=t.Component,c=t.instantiate},function(t){r=t.OpenPopupManager},function(t){p=t.Constants},function(t){h=t.TopupData},function(t){P=t.EventListener},function(t){u=t.GameEvent},function(t){f=t.MonthlyPassItem}],execute:function(){var y,M,g,m,_,D,d;s._RF.push({},"562261GEyBO5I7qkssRaZRF","MonthlyPassPopup",void 0);const{ccclass:T,property:b}=a;t("MonthlyPassPopup",(y=T("MonthlyPassPopup"),M=b(o),g=b(i),y((D=n((_=class extends l{constructor(){super(...arguments),e(this,"content",D,this),e(this,"passItem",d,this)}show(){h.instance.getMonthlyPassFromNetwork()}setPassList(){let t=h.instance.monthlyPassData,n=0;for(let e=0;e<t.length;e++){let s=t[e];if(null!=h.instance.getMonthlyPassCfg(s.passId)){if(this.content.children[n])this.content.children[n].getComponent(f).init(s),this.content.children[n].active=!0;else{let t=c(this.passItem);t.getComponent(f).init(s),t.parent=this.content}n++}}for(;n<this.content.children.length;n++)this.content.children[n].active=!1}getMontlyPassData(){h.instance.getMonthlyPassFromNetwork()}onBackTouch(){r.instance.hide(p.PopupUI.MonthlyPassPopup)}onEnable(){P.on(u.UPDATE_MONTHLY_PASS_POPUP,this.setPassList,this),P.on(u.GET_MONTHLY_PASS_DATA,this.getMontlyPassData,this)}onDisable(){P.off(u.UPDATE_MONTHLY_PASS_POPUP,this.setPassList,this),P.off(u.GET_MONTHLY_PASS_DATA,this.getMontlyPassData,this)}}).prototype,"content",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=n(_.prototype,"passItem",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=_))||m));s._RF.pop()}}}));

System.register("chunks:///_virtual/NewerRewardPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./OpenPopupManager.ts","./PlayerData.ts","./EventListener.ts","./GameEvent.ts","./CoinMode.ts","./GuideData.ts"],(function(e){var t,i,n,r,a,l,c,o,s,u,p,h,d,m,w,b,g,f,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,r=e.ParticleSystem2D,a=e.Label,l=e.Node,c=e._decorator,o=e.Component,s=e.Tween,u=e.tween,p=e.Vec3,h=e.UITransform},function(e){d=e.Constants},function(e){m=e.OpenPopupManager},function(e){w=e.PlayerData},function(e){b=e.EventListener},function(e){g=e.GameEvent},function(e){f=e.CoinObj},function(e){y=e.GuideData}],execute:function(){var v,R,k,A,P,F,B,D,z,C,S,E,G,T,_;n._RF.push({},"d15de3A7alDtIX5zyjCKriz","NewerRewardPopup",void 0);const{ccclass:O,property:N}=c;e("NewerRewardPopup",(v=O("NewerRewardPopup"),R=N(r),k=N(a),A=N(l),P=N(l),F=N(l),B=N(l),v((C=t((z=class extends o{constructor(){super(...arguments),i(this,"rewardAnim",C,this),i(this,"username",S,this),i(this,"clickFinger",E,this),i(this,"top",G,this),i(this,"middle",T,this),i(this,"claimBtn",_,this),this.callback=null}show(e){0==w.instance.userObj.step&&(y.instance.loadStep=1),this.middle.active=!0,this.top.active=!1,this.callback=e,this.username.string=w.instance.userObj.name,this.showRewardAnim(),this.scheduleOnce(this.showRewardAnim,1),s.stopAllByTarget(this.clickFinger),u(this.clickFinger).sequence(u().delay(.5),u().call((()=>{this.clickFinger.children[0].active=!this.clickFinger.children[0].active,this.clickFinger.children[1].active=!this.clickFinger.children[0].active}))).repeatForever().start()}showRewardAnim(){this.rewardAnim.resetSystem()}onStartBtn(){this.middle.active=!0,this.top.active=!1;let e=new p;e.x=this.claimBtn.position.x+100,e.y=this.claimBtn.position.y-50,this.clickFinger.setPosition(e),y.instance.loadStep=1}onCloseBtn(){y.instance.loadStep=1,s.stopAllByTarget(this.clickFinger),this.callback&&this.callback();let e=new f;e.pos=this.claimBtn.getComponent(h).convertToWorldSpaceAR(new p(0,0,0)),e.num=10,b.emit(g.GET_BAG_REWARD,e);let t=new f;t.pos=this.claimBtn.getComponent(h).convertToWorldSpaceAR(new p(0,0,0)),t.num=10,b.emit(g.GET_GOLD_REWARD,t),m.instance.hide(d.PopupUI.NewerRewardPopup)}}).prototype,"rewardAnim",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(z.prototype,"username",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(z.prototype,"clickFinger",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(z.prototype,"top",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(z.prototype,"middle",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(z.prototype,"claimBtn",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=z))||D));n._RF.pop()}}}));

System.register("chunks:///_virtual/NoClickMore.ts",["cc"],(function(t){var c,e,s,i;return{setters:[function(t){c=t.cclegacy,e=t.Component,s=t.Button,i=t._decorator}],execute:function(){var o;c._RF.push({},"015f6bdFqVIW6PhMJVk+oxv","NoClickMore",void 0);const{ccclass:n,property:r}=i;t("NoClickMore",n("NoClickMore")(o=class extends e{constructor(){super(...arguments),this.safeTime=1,this.clickEvents=null}start(){let t=this.getComponent(s);t&&(this.clickEvents=t.clickEvents,this.node.on("click",(()=>{t.clickEvents=[],this.scheduleOnce((c=>{t.clickEvents=this.clickEvents}),this.safeTime)}),this))}})||o);c._RF.pop()}}}));

System.register("chunks:///_virtual/OpenPopupManager.ts",["cc","./Constants.ts","./Toast.ts","./GameController.ts","./PopupManager.ts","./ResourcesUtil.ts"],(function(e){var p,t,o,a,n,s,i,u;return{setters:[function(e){p=e.cclegacy,t=e.instantiate},function(e){o=e.Constants},function(e){a=e.Toast},function(e){n=e.default},function(e){s=e.PopupManager,i=e.PopupOptions},function(e){u=e.ResourcesUtil}],execute:function(){p._RF.push({},"2e999vijwZOkpi2Rl4QGn2h","OpenPopupManager",void 0);let h=e("LayerType",function(e){return e[e.BOTTOM=0]="BOTTOM",e[e.MID=1]="MID",e[e.TOP=2]="TOP",e}({}));class r{constructor(){this.TopLayer=null,this.MidLayer=null,this.BottomLayer=null,this.ToastLayer=null,this.Canvas=null,this.MainTopLayer=null,this.PopupLayer=null}showSeqPopup(e,p,t,o){let a=new i;a.path=e,a.parent=this.TopLayer,s.instance.pushToPopupSeq(a,t,o)}hideSeqPopup(e,p){s.instance.shiftFromPopupSeq(e,p)}addHidePopup(e){s.instance.addHidePopup(e)}showChapterPopup(e){let p=new i;p.path=o.PopupUI.ChapterPopup,p.parent=e,s.instance.show(p)}showGamePopup(){let e=new i;e.path=o.PopupUI.GamePopup,e.parent=this.BottomLayer,e.closeCur=!0,s.instance.show(e)}showGameFailPopup(){let e=new i;e.path=o.PopupUI.GameFailPopup,e.parent=this.TopLayer,s.instance.show(e,[])}showGameWinPopup(e){let p=new i;p.path=o.PopupUI.GameWinPopup,p.parent=this.TopLayer,s.instance.show(p,[e])}showGameRevivePopup(){let e=new i;e.path=o.PopupUI.GameRevivePopup,e.parent=this.TopLayer,s.instance.show(e,[])}showWeaponDetailPopup(e){let p=new i;p.path=o.PopupUI.WeaponDetailPopup,p.parent=this.MidLayer,s.instance.show(p,[e])}showAdTipsPopup(e,p,t){let a=new i;a.path=o.PopupUI.AdTipsPopup,a.parent=this.MidLayer,n.pause(),s.instance.show(a,[e,p,t])}showWeaponSelectPopup(e,p,t){let a=new i;a.path=o.PopupUI.WeaponSelectPopup,a.parent=this.MidLayer,n.pause(),s.instance.show(a,[e,p,t])}showComTipsPopup(e,p){let t=new i;t.path=o.PopupUI.ComTipsPopup,t.parent=this.MidLayer,s.instance.show(t,[e,p])}showLoadingPopup(){let e=new i;e.path=o.PopupUI.ComLoadingPopup,e.parent=this.MidLayer,s.instance.show(e,[])}showPausePopup(){let e=new i;e.path=o.PopupUI.PausePopup,e.parent=this.MidLayer,n.pause(),s.instance.show(e)}showSkillSelectPopup(e,p,t){let a=new i;a.path=o.PopupUI.SkillSelectPopup,a.parent=this.MidLayer,n.pause(),s.instance.show(a,[e,p,t])}showToast(e,p,n){void 0===p&&(p=0);let s=o.toastPath;u.getPrefab(s).then((o=>{let s=t(o);s.parent=this.ToastLayer,s.setPosition(0,p),s.getComponent(a).init(e,n)}))}showDailyQuestPopup(){let e=new i;e.path=o.PopupUI.DailyQuestPopup,e.parent=this.PopupLayer,s.instance.show(e)}showInvitePopup(){let e=new i;e.path=o.PopupUI.InvitePopup,e.parent=this.PopupLayer,s.instance.show(e)}showSettingPopup(e){let p=new i;p.path=o.PopupUI.SettingPopup,p.parent="game"==e?this.MidLayer:this.PopupLayer,s.instance.show(p,e)}showRankPopup(){let e=new i;e.path=o.PopupUI.RankPopup,e.parent=this.PopupLayer,s.instance.show(e)}showRewardPopup(e,p,t){let a=new i;a.path=o.PopupUI.ComRewardPopup,a.parent=this.PopupLayer,s.instance.show(a,[e,p,t])}showRewardAnimPopup(e,p){let t=new i;t.path=o.PopupUI.ComRewardAnimPopup,t.parent=this.PopupLayer,s.instance.show(t,[e,p])}showEnergyPopup(){let e=new i;e.path=o.PopupUI.ShopEnergyPopup,e.parent=this.PopupLayer,s.instance.show(e)}showGameGuidePopup(e,p,t){let a=new i;a.path=o.PopupUI.GuidePopup,a.parent=this.MidLayer,s.instance.show(a,[e,p,t])}showGuidePopup(e,p,t,a){void 0===a&&(a=h.TOP);let n=new i;n.path=o.PopupUI.GuidePopup,n.parent=this.getLayerByType(a),s.instance.show(n,[e,p,t])}show(e,p,t,o){void 0===t&&(t=h.TOP),void 0===o&&(o=!1);let a=new i;a.path=e,a.parent=p||this.getLayerByType(t),o&&n.pause();for(var u=arguments.length,r=new Array(u>4?u-4:0),P=4;P<u;P++)r[P-4]=arguments[P];s.instance.show(a,r)}hide(e,p){s.instance.hide(e,p)}getLayerByType(e){let p=this.TopLayer;switch(e){case 0:p=this.BottomLayer;break;case 1:p=this.MidLayer;break;case 2:p=this.PopupLayer}return p}static get instance(){return this._instance||(this._instance=new r),this._instance}}e("OpenPopupManager",r),r._instance=null,p._RF.pop()}}}));

System.register("chunks:///_virtual/PausePopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./EventListener.ts","./GameController.ts","./GameEvent.ts","./OpenPopupManager.ts","./SkillUpgradeData.ts","./LearnSkillItem.ts","./ComTipsPopup.ts","./LanguageManager.ts"],(function(e){var n,t,i,l,o,a,r,s,u,p,c,g,f,m,h,P,b,k;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.initializerDefineProperty},function(e){i=e.cclegacy,l=e.Prefab,o=e.Node,a=e.ScrollView,r=e._decorator,s=e.Component,u=e.instantiate},function(e){p=e.Constants},function(e){c=e.EventListener},function(e){g=e.default},function(e){f=e.GameEvent},function(e){m=e.OpenPopupManager},function(e){h=e.SkillUpgradeData},function(e){P=e.LearnSkillItem},function(e){b=e.ComTipsObj},function(e){k=e.LanguageManager}],execute:function(){var S,d,w,C,v,y,L,T,z,D,E;i._RF.push({},"b2536DTNS1Ii5OAmWoVKrzx","PausePopup",void 0);const{ccclass:I,property:M}=r;e("PausePopup",(S=I("PausePopup"),d=M(l),w=M(o),C=M(a),v=M(o),S((T=n((L=class extends s{constructor(){super(...arguments),t(this,"skillPrefab",T,this),t(this,"weaponSkills",z,this),t(this,"scrollView",D,this),t(this,"normalSkills",E,this)}show(){this.weaponSkills.removeAllChildren(),this.normalSkills.removeAllChildren();let e=h.instance.getLearnSkillUpgrades();for(let n=0;n<e.length;n++){let t=e[n],i=h.instance.getSkillUpgradeCfgById(t),l=u(this.skillPrefab);l.getComponent(P).init(i),i.weaponId>0?l.parent=this.weaponSkills:l.parent=this.normalSkills}this.scrollView.scrollToTop()}onReturnBtn(){let e=new b;e.title=k.instance.getLang("tips"),e.desc=k.instance.getLang("game.backHomeTips"),m.instance.showComTipsPopup(e,(e=>{e&&c.emit(f.GAME_OVER)}))}onContinueBtn(){m.instance.hide(p.PopupUI.PausePopup),g.resume()}onSettingBtn(){m.instance.showSettingPopup("game")}}).prototype,"skillPrefab",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=n(L.prototype,"weaponSkills",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=n(L.prototype,"scrollView",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=n(L.prototype,"normalSkills",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=L))||y));i._RF.pop()}}}));

System.register("chunks:///_virtual/PersonalItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,t,n,i,a,s,o;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.initializerDefineProperty},function(e){n=e.cclegacy,i=e.Label,a=e.Sprite,s=e._decorator,o=e.Component}],execute:function(){var l,u,c,p,b,m,h,g,f,y,d;n._RF.push({},"c4497hCROdA3qLpNCb3ORkq","PersonalItem",void 0);const{ccclass:k,property:v}=s;e("PersonalItem",(l=k("PersonalItem"),u=v(i),c=v(a),p=v(i),b=v(i),l((g=r((h=class extends o{constructor(){super(...arguments),t(this,"rank",g,this),t(this,"avatar",f,this),t(this,"username",y,this),t(this,"number",d,this)}init(e){this.rank.string=e.rank.toString(),this.username.string=e.userInfo.username,e.number?this.number.string=e.number.toString():this.number.string=e.process.toString()}}).prototype,"rank",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=r(h.prototype,"avatar",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=r(h.prototype,"username",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=r(h.prototype,"number",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=h))||m));n._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerData.ts",["cc","./Api.ts","./EventListener.ts","./HttpService.ts","./OpenPopupManager.ts","./GameDefine.ts","./ChapterData.ts","./GameEvent.ts"],(function(t){var e,s,i,a,r,h,n,o;return{setters:[function(t){e=t.cclegacy},function(t){s=t.Api},function(t){i=t.EventListener},function(t){a=t.HttpService},function(t){r=t.OpenPopupManager},function(t){h=t.GameDefine},function(t){n=t.ChapterData},function(t){o=t.GameEvent}],execute:function(){e._RF.push({},"2cf576ioxpCAaOFMsTCq3pg","PlayerData",void 0);class c{constructor(){this._userObj=void 0,this._chapterObj=void 0,this._assetObj=void 0,this._starObj=void 0,this._energyObj=void 0,this._configObj=void 0,this._heroObj=void 0,this._curChapter=0,this._errorData=new Map}get userObj(){return this._userObj}set userObj(t){this._userObj=t}get chapterObj(){return this._chapterObj}set chapterObj(t){this._chapterObj=t,i.emit(o.UPDATE_PLAYER_DATA)}get assetObj(){return this._assetObj}set assetObj(t){this._assetObj=t}get starObj(){return this._starObj}get energyObj(){return this._energyObj}set energyObj(t){this._energyObj=t,i.emit(o.UPDATE_PLAYER_DATA)}get configObj(){return this._configObj}get heroObj(){return this._heroObj}get curChapter(){return this._curChapter}set curChapter(t){this._curChapter=t}getUserInfo(t){a.instance.post(s.USER_INFO).then((e=>{0==e.code?(this._userObj=e.data.userInfo,this._chapterObj=e.data.chapterInfo,this._assetObj=e.data.assetInfo,this._starObj=e.data.starInfo,this._energyObj=e.data.energyInfo,this._configObj=e.data.config,this._heroObj=e.data.heroInfo,e.data.userInfo.isDebug?h.isDebug=!0:h.isDebug=!1,0==this._curChapter&&(this._curChapter=this._chapterObj.chapterId),i.emit(o.UPDATE_PLAYER_DATA),t(0)):t(1)}))}getPlayerInfo(t){void 0===t&&(t=!0),a.instance.post(s.USER_PLAYER_INFO).then((e=>{0==e.code&&(this._chapterObj=e.data.chapterInfo,this._assetObj=e.data.assetInfo,this._starObj=e.data.starInfo,this._energyObj=e.data.energyInfo,this._heroObj=e.data.heroInfo,0==this._curChapter&&(this._curChapter=this._chapterObj.chapterId),t&&i.emit(o.UPDATE_PLAYER_DATA))}))}battleWithWin(){this._curChapter<n.instance.maxChapterId&&this._curChapter==this._chapterObj.chapterId&&(this._curChapter+=1,this._chapterObj.chapterId+=1)}getBalance(){a.instance.post(s.ASSET_BALANCE).then((t=>{0==t.code?this._assetObj=t.data:r.instance.showToast(t.msg)}))}initPlayerData(t){t||this.savePlayerDataToCache()}subCoin(t){this._assetObj.gold-=t}addCoin(t){this._assetObj.gold+=t}setCoin(t){this._assetObj.gold=t}subTicket(t){this._chapterObj.ticket-=t}setEnergy(t){this._energyObj.energy+=t,i.emit(o.UPDATE_PLAYER_DATA)}removeRewardId(t){let e=this._chapterObj.unclaimRewards.indexOf(t);-1!==e&&this._chapterObj.unclaimRewards.splice(e,1),i.emit(o.UPDATE_PLAYER_DATA)}savePlayerDataToCache(){}reportError(t,e,i,r,h){let n=e+"_"+i+"_"+r;this._errorData.has(n)||(this._errorData.set(n,!0),a.instance.post(s.SYSTEM_WARN,{type:"error",message:JSON.stringify({message:t,source:e,lineno:i,colno:r,stack:h&&h.stack})}).then((t=>{})).catch((t=>{})))}static get instance(){return this._instance||(this._instance=new c),this._instance}}t("PlayerData",c),c._instance=null;t("UserResult",class{constructor(){this.userInfo=void 0,this.chapterInfo=void 0,this.assetInfo=void 0,this.starInfo=void 0,this.energyInfo=void 0,this.config=void 0,this.heroInfo=void 0}});t("AssetModel",class{constructor(){this.ticket=0,this.gold=0,this.bag=0,this.diamond=0,this.usdt=0,this.address="",this.cash=0,this.cashToUsdt=.001}});t("StarModel",class{constructor(){this.balance=void 0,this.account=void 0,this.battle=void 0,this.purchase=void 0,this.invite=void 0,this.other=void 0,this.premium=void 0,this.task=void 0,this.spin=void 0}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/PoolManager.ts",["cc"],(function(t){var e,o,i,s;return{setters:[function(t){e=t.cclegacy,o=t.Component,i=t.instantiate,s=t.NodePool}],execute:function(){e._RF.push({},"fcd3aoftHFN/Iw6BfOJPxdN","PoolManager",void 0);class n extends o{constructor(){super(...arguments),this._dictPool={}}static get instance(){return this._instance||(this._instance=new n),this._instance}getNode(t,e){let o=t.name;t.position||(o=t.data.name);let n=null;if(this._dictPool.hasOwnProperty(o)){let e=this._dictPool[o];n=e.size()>0?e.get():i(t)}else{let e=new s;this._dictPool[o]=e,n=i(t)}return n.parent=e,n.setPosition(1e4,1e5),n.active=!0,n}getNodeItem(t){let e=t.name;t.position||(e=t.data.name);let o=null;if(this._dictPool.hasOwnProperty(e)){let s=this._dictPool[e];o=s.size()>0?s.get():i(t)}else{let n=new s;this._dictPool[e]=n,o=i(t)}return o.setPosition(1e4,1e5),o.active=!0,o}getNodeItemById(t,e){let o=null;if(this._dictPool.hasOwnProperty(e)){let s=this._dictPool[e];o=s.size()>0?s.get():i(t)}else{let n=new s;this._dictPool[e]=n,o=i(t)}return o.setPosition(1e4,1e5),o.active=!0,o}putNodeByKey(t,e){let o=new s;this._dictPool.hasOwnProperty(e)?o=this._dictPool[e]:this._dictPool[e]=o,t.active=!1,o.put(t)}getPoolSizeByPrefab(t){let e=0,o=t.name;if(t.position||(o=t.data.name),this._dictPool.hasOwnProperty(o)){e=this._dictPool[o].size()}return e}putPool(t){if(!t)return;let e=t.name,o=null;this._dictPool.hasOwnProperty(e)?o=this._dictPool[e]:(o=new s,this._dictPool[e]=o),t.active=!1,o.put(t)}putNode(t){if(!t)return;let e=t.name,o=new s;this._dictPool.hasOwnProperty(e)?o=this._dictPool[e]:this._dictPool[e]=o,t.active=!1,o.put(t)}clearPool(t){if(this._dictPool.hasOwnProperty(t)){this._dictPool[t].clear()}}clear(){for(let t in this._dictPool)if(this._dictPool.hasOwnProperty(t)){this._dictPool[t].clear()}}prePool(t,e){const o=t.data.name;let n=new s;this._dictPool[o]=n;for(let o=0;o<e;o++){const e=i(t);n.put(e)}}}t("PoolManager",n),n._instance=void 0,e._RF.pop()}}}));

System.register("chunks:///_virtual/PopupManager.ts",["cc","./ResourcesUtil.ts"],(function(i){var t,e,o,s,p,h;return{setters:[function(i){t=i.cclegacy,e=i._decorator,o=i.isValid,s=i.find,p=i.Vec3},function(i){h=i.ResourcesUtil}],execute:function(){var a,n;t._RF.push({},"eb72adhUm1IXpHlO5jdi3i9","PopupManager",void 0);const{ccclass:r,property:l}=e;i("PopupManager",r("PopupManager")(((n=class i{constructor(){this._dictSharedPanel={},this._dictLoading={},this._arrPopupDialog=[],this._hidePopupArr=[],this._showTipsTime=0}static get instance(){return this._instance||(this._instance=new i),this._instance}isDialogVisible(i){if(!this._dictSharedPanel.hasOwnProperty(i))return!1;let t=this._dictSharedPanel[i];return o(t)&&t.active&&o(t.parent)}show(i,t,e){let p=i.path;if(this._dictLoading[p])return;i.closeCur&&this.hideJoinPopup(p);let a=p.lastIndexOf("/"),n=p.slice(a+1);if(t||(t=[]),this._dictSharedPanel.hasOwnProperty(p)){let h=this._dictSharedPanel[p];if(o(h)){h.parent=i.parent??s("Canvas"),h.active=!0;let o=h.getComponent(n),p=h.getComponent(n.charAt(0).toUpperCase()+n.slice(1)),a=h.getComponent("AnimationUI");if(o&&o.show)o.show.apply(o,t),a?a.open((()=>{e&&e(o)})):e&&e(o);else{if(!p||!p.show)throw`Script file not found ${n}`;p.show.apply(p,t),a?a.open((()=>{e&&e(p)})):e&&e(p)}return}}this._dictLoading[p]=!0,h.createUI(p,i.parent).then((i=>{let o=!1;this._dictLoading[p]||(o=!0),this._dictLoading[p]=!1,this._dictSharedPanel[p]=i;let s=i.getComponent("AnimationUI"),h=i.getComponent(n.charAt(0).toUpperCase()+n.slice(1));if(!h||!h.show)throw`Not Found ${n} or please define show`;h.show.apply(h,t),s?s.open((()=>{e&&e(h)})):e&&e(h),o&&this.hide(p)}))}hide(i,t){if(this._dictSharedPanel.hasOwnProperty(i)){let e=this._dictSharedPanel[i];if(e&&o(e)){let i=e.getComponent("AnimationUI");i?i.close((()=>{e.parent=null,t&&"function"==typeof t&&t()})):(e.parent=null,t&&"function"==typeof t&&t())}else t&&"function"==typeof t&&t()}this._dictLoading[i]=!1}hideAll(){for(const i in this._dictSharedPanel)if(Object.prototype.hasOwnProperty.call(this._dictSharedPanel,i)){this._dictSharedPanel[i].parent=null}}addHidePopup(i){this._hidePopupArr.includes(i)||this._hidePopupArr.push(i)}hideJoinPopup(i){if(this._hidePopupArr.length)for(let t=0,e=this._hidePopupArr.length;t<e;t++){let o=this._hidePopupArr[t];o!=i&&(this.hide(o),this._hidePopupArr.splice(t,1),t--,e--)}}pushToPopupSeq(i,t,e){let o={options:i,callBack:e,param:t,isShow:!1};this._arrPopupDialog.push(o),this._checkPopupSeq()}insertToPopupSeq(i,t,e,o){let s={options:t,callBack:o,param:e,isShow:!1};this._arrPopupDialog.splice(i,0,s)}shiftFromPopupSeq(i,t){this._arrPopupDialog[0]&&this._arrPopupDialog[0].options.path===i?this.hide(i,(()=>{this._arrPopupDialog.shift(),this._checkPopupSeq()})):this.hide(i,t)}_checkPopupSeq(){if(this._arrPopupDialog.length>0){let i=this._arrPopupDialog[0];i.isShow||(this.show(i.options,i.param,i.callBack),this._arrPopupDialog[0].isShow=!0)}}showTips(i,t,e,o,s){void 0===t&&(t="txt"),void 0===e&&(e=new p),void 0===o&&(o=1),void 0===s&&(s=()=>{});let h=String(i),a=()=>{this._showTipsAni(h,t,e,o,s)},n=Date.now();if(n-this._showTipsTime<800&&"gold"!==t&&"heart"!==t){let i=800-(n-this._showTipsTime);setTimeout((()=>{a()}),i),this._showTipsTime=n+i}else a(),this._showTipsTime=n}_showTipsAni(i,t,e,o,s){}})._instance=void 0,a=n))||a);i("PopupOptions",class{constructor(){this.path=void 0,this.parent=void 0,this.closeCur=!1}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/QuestData.ts",["cc","./Api.ts","./EventListener.ts","./HttpService.ts","./GameEvent.ts"],(function(t){var i,s,e,n,o;return{setters:[function(t){i=t.cclegacy},function(t){s=t.Api},function(t){e=t.EventListener},function(t){n=t.HttpService},function(t){o=t.GameEvent}],execute:function(){i._RF.push({},"6c264lT2lREhaW6e7u7o/rZ","QuestData",void 0);class a{constructor(){this._signInfo=null,this._dailyQuest=null,this._achievements=[]}get signInfo(){return this._signInfo}set signInfo(t){this._signInfo=t}get dailyQuest(){return this._dailyQuest}set dailyQuest(t){this._dailyQuest=t,e.emit(o.UPDATE_DAILY_QUEST_POPUP)}get achievements(){return this._achievements}getEventInfo(){n.instance.post(s.EVENT_INFO,{}).then((t=>{0==t.code&&(this._signInfo=t.data.signInfo,this._dailyQuest=t.data.questInfo,this._achievements=t.data.achievements,e.emit(o.UPDATE_DAILY_QUEST_POPUP))}))}getNewerInfo(){n.instance.post(s.EVENT_NEWER,{}).then((t=>{0==t.code&&(this._signInfo=t.data.signInfo,e.emit(o.UPDATE_DAILY_QUEST_POPUP))}))}static get instance(){return this._instance||(this._instance=new a),this._instance}}t("QuestData",a),a._instance=null;t("EventInfo",class{constructor(){this.signInfo=void 0,this.questInfo=void 0,this.achievements=void 0}});t("AchievementsModel",class{constructor(){this.desc=void 0,this.groupId=void 0,this.num=void 0,this.rewards=void 0,this.target=void 0}});t("QuestInfo",class{constructor(){this.daily=void 0,this.dailyPoint=void 0,this.dailyPointsRewards=void 0,this.weekly=void 0,this.weeklyPoint=void 0,this.weeklyPointsRewards=void 0}});t("DailyModel",class{constructor(){this.desc=void 0,this.draw=void 0,this.id=void 0,this.num=void 0,this.point=void 0,this.target=void 0}});t("DailyRewardModel",class{constructor(){this.id=void 0,this.draw=void 0,this.points=void 0,this.rewards=void 0}});t("SignInfo",class{constructor(){this.cumulativeDays=void 0,this.cumulativeRewards=void 0,this.signDay=void 0,this.isSign=void 0,this.signRewards=void 0,this.week=void 0}});t("SignClaimInfo",class{constructor(){this.rewards=void 0,this.signInfo=void 0}});t("SignRewardModel",class{constructor(){this.draw=void 0,this.day=void 0,this.rewards=void 0}}),i._RF.pop()}}}));

System.register("chunks:///_virtual/RankData.ts",["cc","./Api.ts","./EventListener.ts","./HttpService.ts","./GameEvent.ts"],(function(t){var s,n,i,e,a;return{setters:[function(t){s=t.cclegacy},function(t){n=t.Api},function(t){i=t.EventListener},function(t){e=t.HttpService},function(t){a=t.GameEvent}],execute:function(){s._RF.push({},"74330MFOlFBDZEA5l5NFkIz","RankData",void 0);class c{constructor(){this.userList=[],this.userRank=void 0,this.countryList=[]}getRankList(){e.instance.post(n.CHAPTER_RANK).then((t=>{t&&0==t.code&&(this.userList=t.data.ranks,this.userRank=t.data.userRank,i.emit(a.UPDTAE_RANK_CHAPTER_DATA))})),e.instance.post(n.CASHHERO_COUNTRY_RANK).then((t=>{t&&0==t.code&&(this.countryList=t.data.countries,i.emit(a.UPDTAE_RANK_COUNTRY_DATA))}))}static get instance(){return this._instance||(this._instance=new c),this._instance}}t("RankData",c),c._instance=null;t("RankResult",class{constructor(){this.ranks=void 0,this.userRank=void 0}});t("RankModel",class{constructor(){this.rank=void 0,this.chapter=void 0,this.waves=void 0,this.username=void 0,this.avatar=void 0}});t("CountryRankResult",class{constructor(){this.countries=void 0}});t("CountryRankModel",class{constructor(){this.rank=void 0,this.pass=void 0,this.country=void 0}}),s._RF.pop()}}}));

System.register("chunks:///_virtual/RankPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./RankData.ts","./EventListener.ts","./GameEvent.ts","./UserRankItem.ts","./CountryRankItem.ts"],(function(t){var e,n,i,o,r,s,a,u,l,c,p,h,b,y,m,C,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,o=t.Node,r=t.Prefab,s=t._decorator,a=t.Component,u=t.instantiate,l=t.Sprite,c=t.Color},function(t){p=t.OpenPopupManager},function(t){h=t.Constants},function(t){b=t.RankData},function(t){y=t.EventListener},function(t){m=t.GameEvent},function(t){C=t.UserRankItem},function(t){f=t.CountryRankItem}],execute:function(){var R,T,g,k,v,d,A,P,N,_,D,E,L,w,U,z,I,K,O,H,M,S,j;i._RF.push({},"5b51fS5nkVNrKce5ZZ0KbCj","RankPopup",void 0);const{ccclass:x,property:B}=s;t("RankPopup",(R=x("RankPopup"),T=B(o),g=B(o),k=B(o),v=B(o),d=B(o),A=B(o),P=B(o),N=B(o),_=B(r),D=B(r),R((w=e((L=class extends a{constructor(){super(...arguments),n(this,"userTop",w,this),n(this,"userList",U,this),n(this,"myRank",z,this),n(this,"userNode",I,this),n(this,"countryTop",K,this),n(this,"countryList",O,this),n(this,"countryNode",H,this),n(this,"tabs",M,this),n(this,"userRankItem",S,this),n(this,"countryRankItem",j,this)}show(t){void 0===t&&(t="chapter"),b.instance.getRankList(),"chapter"==t?this.setTabContent(0):this.setTabContent(1)}setUserContent(){let t=b.instance.userList;if(0!=t.length){this.userTop.children.forEach(((e,n)=>{0==n&&e.getComponent(C).init(t[1]),1==n&&e.getComponent(C).init(t[0]),2==n&&e.getComponent(C).init(t[2])})),this.userList.removeAllChildren();for(let e=3;e<t.length;e++){let n=u(this.userRankItem);n.getComponent(C).init(t[e]),n.parent=this.userList}this.myRank.getComponent(C).init(b.instance.userRank)}}setCountryContent(){let t=b.instance.countryList;if(t&&0!=t.length){this.countryTop.children.forEach(((e,n)=>{0==n&&(t[1]?(e.getComponent(f).init(t[1]),e.active=!0):e.active=!1),1==n&&e.getComponent(f).init(t[0]),2==n&&(t[2]?(e.getComponent(f).init(t[2]),e.active=!0):e.active=!1)})),this.countryList.removeAllChildren();for(let e=3;e<t.length;e++){let n=u(this.countryRankItem);n.getComponent(f).init(t[e]),n.parent=this.countryList}}}onTabTouch(t,e){this.setTabContent(e)}setTabContent(t){this.tabs.children.forEach(((e,n)=>{e.getComponent(l).color=t==n?new c(49,129,255,255):new c(41,40,61,255),e.getChildByName("checked").active=t==n})),0==t&&this.onChapterTab(),1==t&&this.onCountryTab()}onChapterTab(){this.myRank.active=!0,this.userNode.active=!0,this.userTop.active=!0,this.countryNode.active=!1,this.countryTop.active=!1}onCountryTab(){this.myRank.active=!1,this.userNode.active=!1,this.userTop.active=!1,this.countryNode.active=!0,this.countryTop.active=!0}hidePopup(){p.instance.hide(h.PopupUI.RankPopup)}onEnable(){y.on(m.UPDTAE_RANK_CHAPTER_DATA,this.setUserContent,this),y.on(m.UPDTAE_RANK_COUNTRY_DATA,this.setCountryContent,this)}onDisable(){y.off(m.UPDTAE_RANK_CHAPTER_DATA,this.setUserContent,this),y.off(m.UPDTAE_RANK_COUNTRY_DATA,this.setCountryContent,this)}}).prototype,"userTop",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=e(L.prototype,"userList",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=e(L.prototype,"myRank",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=e(L.prototype,"userNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=e(L.prototype,"countryTop",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=e(L.prototype,"countryList",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=e(L.prototype,"countryNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=e(L.prototype,"tabs",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=e(L.prototype,"userRankItem",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=e(L.prototype,"countryRankItem",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=L))||E));i._RF.pop()}}}));

System.register("chunks:///_virtual/RecordItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BagTowerData.ts","./SpriteEx.ts"],(function(e){var t,i,r,n,o,a,c,s,l,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){r=e.cclegacy,n=e.Label,o=e.Button,a=e.Node,c=e._decorator,s=e.Component},function(e){l=e.BagTowerData},function(e){u=e.SpriteEx}],execute:function(){var h,p,d,m,b,f,g,w,y,v,B,R,k;r._RF.push({},"0d734w24gFOfp24hQt0JW2L","RecordItem",void 0);const{ccclass:_,property:z}=c;e("RecordItem",(h=_("RecordItem"),p=z(n),d=z(u),m=z(n),b=z(o),f=z(a),h((y=t((w=class extends s{constructor(){super(...arguments),i(this,"issue",y,this),i(this,"token",v,this),i(this,"amount",B,this),i(this,"claimBtn",R,this),i(this,"checked",k,this),this._recordObj=null}init(e){this._recordObj=e,this.issue.string="S"+e.issue,this.amount.string=Number(e.amount).toFixed(2),e.draw?(this.claimBtn.node.active=!1,this.checked.active=!0):(this.claimBtn.node.active=!0,this.checked.active=!1)}claimReward(){l.instance.claimReward(this._recordObj.issue)}}).prototype,"issue",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=t(w.prototype,"token",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=t(w.prototype,"amount",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(w.prototype,"claimBtn",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(w.prototype,"checked",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=w))||g));r._RF.pop()}}}));

System.register("chunks:///_virtual/RedeemCodePopup.ts",["cc","./OpenPopupManager.ts","./Constants.ts"],(function(e){var o,n,t,c,s;return{setters:[function(e){o=e.cclegacy,n=e.Component,t=e._decorator},function(e){c=e.OpenPopupManager},function(e){s=e.Constants}],execute:function(){var p;o._RF.push({},"48c1bzwjRZMna2jiRmqfIX4","RedeemCodePopup",void 0);const{ccclass:u,property:a}=t;e("RedeemCodePopup",u("RedeemCodePopup")(p=class extends n{constructor(){super(...arguments),this.code=""}show(){}onClaimTouch(){}codeChange(e){this.code=e}onCloseTouch(){c.instance.hide(s.PopupUI.RedeemCodePopup)}})||p);o._RF.pop()}}}));

System.register("chunks:///_virtual/ResourcesUtil.ts",["cc"],(function(e){var t,r,i,a,o,s,n,l,d,c,f,u,m,p,g,R;return{setters:[function(e){t=e.cclegacy,r=e.Component,i=e.resources,a=e.Prefab,o=e.Material,s=e.error,n=e.assetManager,l=e.instantiate,d=e.find,c=e.SpriteFrame,f=e.SpriteAtlas,u=e.sp,m=e.TiledMapAsset,p=e.isValid,g=e.Sprite,R=e.Texture2D}],execute:function(){t._RF.push({},"85b9dh82G1BfaMK6OYv6K+u","ResourcesUtil",void 0);e("ResourcesUtil",class extends r{constructor(){super(...arguments),this.cache={}}static loadRes(e,t,r){void 0===r&&(r=()=>{}),i.load(e,((e,t)=>{e?r(e,t):r&&r(null,t)}))}static loadEffectRes(e){return new Promise(((t,r)=>{this.loadRes(`prefab/effect/${e}`,a,((i,a)=>{if(i)return console.info("effect load failed",e),void(r&&r());t&&t(a)}))}))}static loadModelRes(e){return new Promise(((t,r)=>{this.loadRes(`${e}`,a,((i,a)=>{if(i)return console.info("model load failed",e),void(r&&r());t&&t(a)}))}))}static loadMatRes(e){return new Promise(((t,r)=>{this.loadRes(`${e}`,o,((i,a)=>{if(i)return console.info("mat load failed",e),void(r&&r());t&&t(a)}))}))}static loadModelResArr(e,t,r,o){let s=t.map((t=>`${e}/${t}`));i.load(s,a,r,o)}static getMapObj(e,t,r,o){let s=[];for(let r=0;r<t.length;r++)s.push(`map/${e}/${t[r]}`);i.load(s,a,r,o)}static async getJsonData(e,t){this.loadRes("ConfigData/"+e,null,(function(e,r){e?s(e.message||e):r.json?t(e,r.json):t("failed!!!")}))}static getTextData(e,t){this.loadRes("datas/"+e,null,(function(e,r){if(e)return void s(e.message||e);let i=r.text;t(e,i)}))}static loadFile(e,t){return new Promise(((r,a)=>{if(!e)return void r([]);let o=i.get(e);o?r([e,o]):i.load(e,t,((t,i)=>{null==t?r([e,i]):console.info("Load error:"+t)}))}))}static loadDir(e){return new Promise(((t,r)=>{e?i.loadDir(e,((e,r)=>{null==e?t(r):console.info("Load dir error"+e)})):t([])}))}static loadRemote(e,t){return new Promise(((t,r)=>{if(!e)return t([]),void console.info("The path error:"+e);n.loadRemote(e,(function(e,r){null==e?t(r):console.info("Load Remote Error:"+e)}))}))}static loadResNew(e,t){return new Promise(((r,a)=>{i.load(e,t,((e,t)=>{if(e)return s(e.message||e),void(a&&a(e));r&&r(t)}))}))}static getUIPrefabRes(e){return this.loadResNew(e,a)}static async createUI(e,t){let r=await this.getUIPrefabRes(e),i=l(r);return i.setPosition(0,0,0),t||(t=d("Canvas")),t.addChild(i),i}static setSpriteFrame(e,t,r,a){void 0===r&&(r=!0),void 0===a&&(a=null),t?(r&&(t.spriteFrame=null),i.load(e,c,(function(r,i){if(r)return console.info("set sprite frame failed! err:",e,r),void(a&&a());t&&t&&(t.spriteFrame=i),a&&a()}))):a&&a()}static geSpriteFrame(e){return new Promise(((t,r)=>{i.load(e,c,(function(r,i){if(r)return console.info("set sprite frame failed! err:",e),void t(null);t(i)}))}))}static setSpriteAtlasSpriteFrame(e,t,r){r&&i.load(e,f,((i,a)=>{if(i)return void console.info("set spriteAtlas frame failed! err:",e,i);const o=a.getSpriteFrame(t);r.spriteFrame=o}))}static getSpriteAtlasSpriteFrame(e,t){return new Promise((r=>{i.load(e,f,((i,a)=>{if(i)return console.info("get SpriteAtlasSprite failed! err:",e),void r(null);const o=a.getSpriteFrame(t);r(o)}))}))}static getSpriteAtlas(e){return new Promise((t=>{i.load(e,f,((r,i)=>{if(r)return console.info("get SpriteAtlasSprite failed! err:",e),void t(null);const a=i.getSpriteFrames();t(a)}))}))}static getSpriteFrame(e){return new Promise((t=>{i.load(e,c,(function(e,r){t(r)}))}))}static getSkeletonData(e){return new Promise((t=>{i.load(e,u.SkeletonData,(function(r,i){r?console.info("get SkeletonData failed! err:",e):t(i)}))}))}static getPrefab(e){return new Promise(((t,r)=>{i.load(e,a,(function(i,a){i&&(console.info("get Prefab failed! err:",e),r(null)),t(a)}))}))}static releaseRes(e){let t=e.spriteFrame;e.spriteFrame=null,t.decRef()}static getTiledMap(e){return new Promise((t=>{i.load(e,m,(function(r,i){r?console.info("get Prefab failed! err:",e):t(i)}))}))}releaseSprite(e){if(!p(e))return;const t=e.getComponent(g);t&&t.spriteFrame&&(t.spriteFrame.decRef(),t.spriteFrame=null)}loadRemoteImg(e){n.loadRemote(e,((e,t)=>{if(!e&&t){let e=this.cache[t._uuid];if(!e){const r=new R;r.image=t,e=new c,e.texture=r,t.addRef(),this.cache[t._uuid]=e}e.addRef()}}))}releaseRemoteSprite(e){if(!p(e))return;const t=e.getComponent(g);if(t&&t.spriteFrame){const e=t.spriteFrame;if(t.spriteFrame.decRef(!1),t.spriteFrame=null,e.refCount<=0){let t=e.texture;e.packable&&(t=e.original?._texture),t&&(delete this.cache[t.image._uuid],t.image?.decRef(),t.destroy()),e.destroy()}}}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/RewardChestItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./QuestData.ts","./HttpService.ts","./Api.ts","./OpenPopupManager.ts","./ChestModel.ts","./Constants.ts","./ResourcesUtil.ts","./RewardTipItem.ts","./PlayerData.ts"],(function(t){var e,s,n,i,o,a,r,c,p,h,d,l,u,w,_,m,b,f,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,s=t.initializerDefineProperty},function(t){n=t.cclegacy,i=t.Label,o=t.sp,a=t._decorator,r=t.Component,c=t.instantiate,p=t.UITransform,h=t.Vec3},function(t){d=t.QuestData},function(t){l=t.HttpService},function(t){u=t.Api},function(t){w=t.OpenPopupManager},function(t){_=t.ChestAnim},function(t){m=t.Constants},function(t){b=t.ResourcesUtil},function(t){f=t.RewardTipItem},function(t){g=t.PlayerData}],execute:function(){var R,v,I,y,C,P,A;n._RF.push({},"82994r4U7pNXZa0iFiJswBk","RewardChestItem",void 0);const{ccclass:T,property:S}=a;t("RewardChestItem",(R=T("RewardChestItem"),v=S(i),I=S(o.Skeleton),R((P=e((C=class extends r{constructor(){super(...arguments),s(this,"desc",P,this),s(this,"box",A,this),this._type="sign",this._value=void 0,this._status=void 0,this._rewards=[],this._pointId=0,this._boxStatus=!1}init(t,e,s,n,i){this._type=n,this._rewards=t,this._value=e,this._status=s,this.desc.string=e+"",this._pointId=i,this._boxStatus&&this.box.setAnimation(0,this._status,!0)}onOpenBox(){if(this._status==_.Unavailable){let t=m.commonPreabPath+"rewardTipItem";b.getPrefab(t).then((t=>{let e=c(t);e.parent=this.node.parent.parent;let s=this.node.getPosition();s.y+=this.node.getComponent(p).width/2;let n=this.node.parent.getComponent(p).convertToWorldSpaceAR(s),i=this.node.parent.parent.getComponent(p).convertToNodeSpaceAR(n);e.setPosition(i),e.getComponent(f).init(this._rewards)}))}else this._status==_.Received?w.instance.showToast("claimed"):this._status==_.Available&&("sign"==this._type?l.instance.post(u.EVENT_SIGN_CLAIM,{day:this._value}).then((t=>{0==t.code?(w.instance.showRewardPopup(t.data.rewards,null,(e=>{if(e){let e=this.node.getComponent(p).convertToWorldSpaceAR(new h(0,0,0));w.instance.showRewardAnimPopup(e,t.data.rewards)}})),this.box.setAnimation(0,_.Received,!0),g.instance.getPlayerInfo(!1)):w.instance.showToast(t.msg)})).catch((()=>{w.instance.showToast("network.error")})):l.instance.post(u.EVENT_QUEST_CLAIM,{pointId:this._pointId}).then((t=>{0==t.code?(w.instance.showRewardPopup(t.data.rewards,null,(e=>{if(e){let e=this.node.getComponent(p).convertToWorldSpaceAR(new h(0,0,0));w.instance.showRewardAnimPopup(e,t.data.rewards)}})),g.instance.getPlayerInfo(!1),d.instance.dailyQuest=t.data.questInfo,this.box.setAnimation(0,_.Received,!0)):w.instance.showToast(t.msg)})).catch((()=>{w.instance.showToast("network.error")})))}onEnable(){this.scheduleOnce((()=>{this._boxStatus=!0,this.box.setAnimation(0,this._status,!0)}),.1)}onDisable(){this._boxStatus=!1}}).prototype,"desc",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=e(C.prototype,"box",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=C))||y));n._RF.pop()}}}));

System.register("chunks:///_virtual/RewardItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./ResourcesUtil.ts","./SpriteEx.ts","./CfgMgr.ts","./ItemModel.ts","./BagData.ts","./BagHeroData.ts"],(function(t){var e,i,n,r,a,o,s,c,l,u,p,g,h,f,m,d,y,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,r=t.Label,a=t.Node,o=t.Sprite,s=t._decorator,c=t.Component,l=t.UITransform,u=t.Vec3},function(t){p=t.Constants},function(t){g=t.ResourcesUtil},function(t){h=t.SpriteEx},function(t){f=t.CfgMgr},function(t){m=t.ItemCfg,d=t.ItemType},function(t){y=t.BagData},function(t){b=t.BagHeroData}],execute:function(){var I,w,F,C,x,D,R,B,S,_,q;n._RF.push({},"349f58lb1hBbb52EUxOkch9","RewardItem",void 0);const{ccclass:v,property:z}=s;t("RewardItem",(I=v("RewardItem"),w=z(r),F=z(a),C=z(o),x=z(h),I((B=e((R=class extends c{constructor(){super(...arguments),i(this,"count",B,this),i(this,"flag",S,this),i(this,"icon",_,this),i(this,"quality",q,this),this._itemCfg=null}init(t,e){let i=this._itemCfg=f.getDataById(new m,t.itemId);if(!i)return void(this.count.string=`x${t.count}`);let n="";n=i.type==d.WeaponFragment?p.weaponIconPath+y.instance.getWeaponIcon(i.dataId)+"/spriteFrame":i.type==d.HeroFragment?p.heroIconPath+b.instance.getHeroIcon(this._itemCfg.dataId)+"/spriteFrame":p.itemsPath+i.icon+"/spriteFrame",g.geSpriteFrame(n).then((t=>{this.icon.spriteFrame=t;let e=this.icon.getComponent(l).contentSize,i=Math.min(80/e.width,80/e.height);this.icon.node.setScale(i,i)})),this.count.string=`x${t.count}`,this.quality.index=i.quality?i.quality:0,this.flag.active=i.type==d.WeaponFragment||i.type==d.HeroFragment,e&&this.setAnim()}setAnim(){this.quality.node.scale=new u(1,1,1)}}).prototype,"count",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(R.prototype,"flag",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(R.prototype,"icon",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(R.prototype,"quality",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=R))||D));n._RF.pop()}}}));

System.register("chunks:///_virtual/RewardModel.ts",["cc"],(function(e){var c;return{setters:[function(e){c=e.cclegacy}],execute:function(){c._RF.push({},"560c2JG8shKebqO+U16scxE","RewardModel",void 0);e("RewardCfg",class{});e("RewardObj",class{constructor(){this.itemId=void 0,this.count=void 0}}),c._RF.pop()}}}));

System.register("chunks:///_virtual/RewardTipItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RewardItem.ts"],(function(e){var t,n,i,r,o,a,l,s,c,u,p,h,w;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,r=e.Prefab,o=e.Node,a=e.Sprite,l=e._decorator,s=e.Component,c=e.instantiate,u=e.UITransform,p=e.Vec3,h=e.tween},function(e){w=e.RewardItem}],execute:function(){var d,f,b,m,g,y,R,z,C,I,P;i._RF.push({},"ca968CgVJpKkL7CHyyjX27Q","RewardTipItem",void 0);const{ccclass:S,property:v}=l;e("RewardTipItem",(d=S("RewardTipItem"),f=v(r),b=v(o),m=v(a),g=v(o),d((z=t((R=class extends s{constructor(){super(...arguments),n(this,"rewardPrefab",z,this),n(this,"bg",C,this),n(this,"arrow",I,this),n(this,"content",P,this)}init(e){for(let t=0;t<e.length;t++){let n=c(this.rewardPrefab),i=n.getComponent(u).contentSize,r=Math.min(80/i.width,80/i.height);n.parent=this.content,n.setScale(r,r),n.setPosition(0,this.node.getComponent(u).contentSize.height/2,0),n.getComponent(w).init(e[t])}this.setAnim()}onCloseBtn(e){e.preventSwallow=!0,this.node.parent=null}setAnim(){this.node.scale=new p(0,0,0),h(this.node).to(.2,{scale:new p(1.1,1.1,1.1)}).to(.2,{scale:new p(1,1,1)}).start()}}).prototype,"rewardPrefab",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(R.prototype,"bg",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(R.prototype,"arrow",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(R.prototype,"content",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=R))||y));i._RF.pop()}}}));

System.register("chunks:///_virtual/ScrollViewHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e,s,n,o,h,l,a,c,r,d,p,g,m,u,w,C;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){s=t.cclegacy,n=t.Prefab,o=t.CCInteger,h=t.CCBoolean,l=t.CCFloat,a=t._decorator,c=t.Component,r=t.Vec3,d=t.instantiate,p=t.UITransform,g=t.ScrollView,m=t.Node,u=t.Layout,w=t.Size,C=t.v2}],execute:function(){var f,S,V,I,v,b,P,y,H,z,T,F,U,_,x,W,E,M,O,D,A,Y,Z,B,N,R,X;s._RF.push({},"70560D8yYtHxa50BEfaQ43H","ScrollViewHelper",void 0);const{ccclass:L,property:j}=a;t("ScrollViewHelper",(f=L("ScrollViewHelper"),S=j(n),V=j(o),I=j(o),v=j(o),b=j(o),P=j(o),y=j(o),H=j(o),z=j(h),T=j({displayName:"Threshold",type:l,min:.1}),F=j({displayName:"need Select Item"}),U=j({displayName:"direction"}),f((W=i((x=class extends c{constructor(){super(...arguments),e(this,"itemTemplate",W,this),e(this,"rowSpacing",E,this),e(this,"colSpacing",M,this),e(this,"paddingStart",O,this),e(this,"paddingEnd",D,this),e(this,"rowCount",A,this),e(this,"colCount",Y,this),e(this,"bufferCount",Z,this),e(this,"isChild",B,this),e(this,"threshold_n",N,this),e(this,"needSelectItem",R,this),e(this,"direction",X,this),this.scrollView=null,this.content=null,this.items=[],this.itemHeight=0,this.itemWidth=0,this.cacheCount=0,this.spawnCount=0,this.bufferZone=0,this.parentScroll=null,this.isInit=!1,this.canUpdateFrame=!0,this.data=null,this.itemUpdateFunc=null,this.lastContentPosX=null,this.lastContentPosY=null,this.lastPos=new r,this._listenScroll=!1,this._selectItemData=void 0}get listenScroll(){return this._listenScroll}set listenScroll(t){this._listenScroll=t,this._listenScroll?this.node.on("scrolling",this.onScrolling,this):this.node.off("scrolling",this.onScrolling,this)}get selectItemData(){return this._selectItemData}set selectItemData(t){this._selectItemData=t}onLoad(){const t=d(this.itemTemplate);this.itemHeight=t.getComponent(p).height,this.itemWidth=t.getComponent(p).width,this.scrollView=this.node.getComponent(g),this.content=this.scrollView.content,this.scrollView.horizontal?(this.rowCount=1,this.cacheCount=this.colCount+this.bufferCount,this.spawnCount=this.cacheCount*this.rowCount,this.bufferZone=this.cacheCount*(this.itemWidth+this.colSpacing)/2,this.content.on("transform-changed",this._updateHContentView.bind(this))):this.scrollView.vertical&&(this.cacheCount=this.rowCount+this.bufferCount,this.spawnCount=this.cacheCount*this.colCount,this.bufferZone=this.cacheCount*(this.itemHeight+this.rowSpacing)/2,this.content.on("transform-changed",this._updateVContentView.bind(this))),this.needSelectItem&&(this.scrollView.node.on("scroll-ended",this.onScrollEnded.bind(this)),this.node.on(m.EventType.TOUCH_START,this._touchStart,this))}resetData(t,i,e,s){if(s&&(this.parentScroll=s),this.isChild){this.node.getComponent("ScrollView_Inner");this.parentScroll&&this.parentScroll.getComponent("ScrollView_Outer")}this.isInit=!1,this.canUpdateFrame=!0,this.isInit=this.initialize(t,i),this.isInit&&e&&(this.scrollView.horizontal?this.scrollView.scrollToLeft():this.direction?this.content.setPosition(0,-this.scrollView.view.height/2):this.scrollView.scrollToTop())}initialize(t,i){if(!(i&&t&&this.itemTemplate&&this.scrollView))return!1;if(0===t.length)return this.content.removeAllChildren(),!0;this.data=t,this.itemUpdateFunc=i;let e=0;this.scrollView.horizontal?(this.content.getComponent(p).height=this.rowCount*(this.itemHeight+this.rowSpacing)-this.rowSpacing,this.content.getComponent(p).width=Math.ceil(t.length/this.rowCount)*(this.itemWidth+this.colSpacing)+this.paddingStart+this.paddingEnd,e=this.rowCount):this.scrollView.vertical&&(this.content.getComponent(p).height=Math.ceil(t.length/this.colCount)*(this.itemHeight+this.rowSpacing)+this.paddingStart+this.paddingEnd,this.content.getComponent(p).width=this.colCount*(this.itemWidth+this.colSpacing)-this.colSpacing,e=this.colCount),this.lastContentPosX=0,this.lastContentPosY=0,this.content.removeAllChildren(),this.content.getComponent(u)&&this.content.getComponent(u).destroy();let s=0;s=t.length>this.spawnCount?this.spawnCount:t.length;let n=0,o=0,h=0;for(let t=0;t<s;t+=e){this.scrollView.horizontal?o=(n+.5)*this.itemWidth+this.colSpacing*n+this.paddingStart:this.scrollView.vertical&&(h=this.direction?(n+.5)*this.itemHeight+this.rowSpacing*n+this.paddingStart:-(n+.5)*this.itemHeight-this.rowSpacing*n-this.paddingStart);let i=s-t;i>e&&(i=e);for(let e=0;e<i;e++){const i=t+e;let s=null;i>=this.items.length?(s=d(this.itemTemplate),this.items.push(s)):s=this.items[i],this.scrollView.horizontal?h=-(e+.5)*this.itemHeight-this.rowSpacing*e:this.scrollView.vertical&&(o=(e+.5)*this.itemWidth+this.colSpacing*e),s.setPosition(o,h),s.itemId=i,i>=this.data.length?s.active=!1:(s.active=!0,this.itemUpdateFunc(i,s,this.data[i])),this.content.addChild(s)}n++}return!0}refreshList(){if(!(this.data&&this.itemUpdateFunc&&this.itemTemplate&&this.scrollView))return!1;let t=0;this.scrollView.horizontal?(this.content.getComponent(p).height=this.rowCount*(this.itemHeight+this.rowSpacing)-this.rowSpacing,this.content.getComponent(p).width=Math.ceil(this.data.length/this.rowCount)*(this.itemWidth+this.colSpacing)+this.paddingStart+this.paddingEnd,t=this.rowCount):this.scrollView.vertical&&(this.content.getComponent(p).height=Math.ceil(this.data.length/this.colCount)*(this.itemHeight+this.rowSpacing)+this.paddingStart+this.paddingEnd,this.content.getComponent(p).width=this.colCount*(this.itemWidth+this.colSpacing)-this.colSpacing,t=this.colCount);this.lastContentPosX,this.lastContentPosY;this.lastContentPosX=0,this.lastContentPosY=0,this.content.removeAllChildren(),this.content.getComponent(u)&&this.content.getComponent(u).destroy();let i=0;i=this.data.length>this.spawnCount?this.spawnCount:this.data.length;let e=0,s=0,n=0;for(let o=0;o<i;o+=t){this.scrollView.horizontal?s=(e+.5)*this.itemWidth+this.colSpacing*e+this.paddingStart:this.scrollView.vertical&&(n=-(e+.5)*this.itemHeight-this.rowSpacing*e-this.paddingStart);let h=i-o;h>t&&(h=t);for(let t=0;t<h;t++){const i=o+t;let e=null;i>=this.items.length?(e=d(this.itemTemplate),this.items.push(e)):e=this.items[i],this.content.addChild(e),this.scrollView.horizontal?n=-(t+.5)*this.itemHeight-this.rowSpacing*t:this.scrollView.vertical&&(s=(t+.5)*this.itemWidth+this.colSpacing*t),e.setPosition(s,n),e.itemId=i,i>=this.data.length?e.active=!1:(e.active=!0,this.itemUpdateFunc(i,e,this.data[i]))}e++}return this.scrollView.horizontal?this._updateHContentView(m.TransformBit.POSITION):this._updateVContentView(m.TransformBit.POSITION),!0}updateContent(){if(!this.scrollView)return;const t=this.items;let i=this.data.length>=this.spawnCount?this.spawnCount:this.data.length;if(t.length<i){let e=0,s=0,n=0,o=this.scrollView.horizontal?this.rowCount:this.colCount;for(let h=0;h<i;h+=o){let l=i-h;l>o&&(l=o),this.scrollView.horizontal?s=(e+.5)*this.itemWidth+this.colSpacing*e+this.paddingStart:this.scrollView.vertical&&(n=this.direction?(e+.5)*this.itemHeight+this.rowSpacing*e+this.paddingStart:-(e+.5)*this.itemHeight-this.rowSpacing*e-this.paddingStart);for(let i=0;i<l;i++){const e=h+i;if(e<t.length)continue;let o=null;e>=this.items.length?(o=d(this.itemTemplate),this.items.push(o)):o=this.items[e],this.scrollView.horizontal?n=-(i+.5)*this.itemHeight-this.rowSpacing*i:this.scrollView.vertical&&(s=(i+.5)*this.itemWidth+this.colSpacing*i),o.setPosition(s,n),o.itemId=e,this.content.addChild(o)}e+=1}}for(let i=0;i<t.length;i++){let e=t[i];e.itemId<this.data.length?e.itemId<0?e.active=!1:(e.active=!0,this.itemUpdateFunc(e.itemId,e,this.data[e.itemId])):e.active=!1}}getPositionInView(t){const i=t.parent.getComponent(p).convertToWorldSpaceAR(t.position);return this.scrollView.node.getComponent(p).convertToNodeSpaceAR(i)}_updateHContentView(t){if(!this.isInit||!this.canUpdateFrame||this.data&&this.data.length<this.spawnCount)return;this.canUpdateFrame=!1;const i=this.items,e=this.scrollView.content.position.x<this.lastContentPosX,s=(this.itemWidth+this.colSpacing)*this.cacheCount;let n=0;for(let t=0;t<i.length;t++){const o=this.getPositionInView(i[t]);if(e){if(n=i[t].position.x+s,o.x<-this.bufferZone&&n<this.content.getComponent(p).width){const e=t;i[e].setPosition(n,i[e].getPosition().y);const s=i[e].itemId+this.spawnCount;i[e].itemId=s,s<this.data.length?(i[e].active=!0,this.itemUpdateFunc(s,i[e],this.data[s])):i[e].active=!1}}else if(n=i[t].position.x-s,o.x>this.bufferZone&&n>0){const e=t;i[e].setPosition(n,i[e].getPosition().y);const s=i[e].itemId-this.spawnCount;i[e].itemId=s,s>=0?(i[e].active=!0,this.itemUpdateFunc(s,i[e],this.data[s])):i[e].active=!1}}this.lastContentPosX=this.scrollView.content.position.x,this.canUpdateFrame=!0}_updateVContentView(t){if(!this.isInit||!this.canUpdateFrame||this.data&&this.data.length<this.spawnCount)return;this.canUpdateFrame=!1;const i=this.items,e=this.direction?this.scrollView.content.position.y<this.lastContentPosY:this.scrollView.content.position.y>this.lastContentPosY,s=(this.itemHeight+this.rowSpacing)*this.cacheCount;Math.floor(this.scrollView.content.position.y/s);let n=0;for(let t=0;t<i.length;t++){const o=this.getPositionInView(i[t]);if(e){if(this.direction){if(n=i[t].position.y+s,o.y<-this.bufferZone&&n<this.content.getComponent(p).height){const e=t;i[e].setPosition(i[e].getPosition().x,n);const s=i[e].itemId+this.spawnCount;i[e].itemId=s,s>=0&&s<this.data.length?(i[e].active=!0,this.itemUpdateFunc(s,i[e],this.data[s]),i[e].setSiblingIndex(i.length-1)):i[e].active=!1}}else if(n=i[t].position.y-s,o.y>this.bufferZone&&n>-this.content.getComponent(p).height){const e=t;i[e].setPosition(i[e].getPosition().x,n);const s=i[e].itemId+this.spawnCount;i[e].itemId=s,s>=0&&s<this.data.length?(i[e].active=!0,this.itemUpdateFunc(s,i[e],this.data[s])):i[e].active=!1}}else if(this.direction){if(n=i[t].position.y-s,o.y>this.bufferZone&&n>0){const e=t;i[e].setPosition(i[e].getPosition().x,n);const s=i[e].itemId-this.spawnCount;i[e].itemId=s,s>=0&&s<this.data.length?(i[e].active=!0,this.itemUpdateFunc(s,i[e],this.data[s]),i[e].setSiblingIndex(0)):i[e].active=!1}}else if(n=i[t].position.y+s,o.y<-this.bufferZone&&n<0){const e=t;i[e].setPosition(i[e].getPosition().x,n);const s=i[e].itemId-this.spawnCount;i[e].itemId=s,s>=0&&s<this.data.length?(i[e].active=!0,this.itemUpdateFunc(s,i[e],this.data[s])):i[e].active=!1}}this.lastContentPosY=this.scrollView.content.position.y,this.canUpdateFrame=!0}_jump_to_item(t){let i=new w(this.node.getComponent(p).width,this.content.getComponent(p).height-this.content.parent.getComponent(p).height),e=((this.itemHeight+this.rowSpacing)*t+this.content.getComponent(p).height*this.content.getComponent(p).anchorY-.5*this.content.parent.getComponent(p).height)/i.height;return e>1||e<0||(this.scrollView.stopAutoScroll(),this.scrollView.scrollTo(C(0,e),this.threshold_n)),e}_touchStart(){this.listenScroll||(this.listenScroll=!0)}onScrolling(){let t=new r;r.subtract(t,this.content.position,this.lastPos),this.lastPos.x=this.content.position.x,this.lastPos.y=this.content.position.y,t.length(),this.threshold_n}onScrollEnded(){this.listenScroll||(this.listenScroll=!0);let t=this.content.position.y-94.2,i=Math.floor(t/(this.itemHeight+this.rowSpacing));t-(this.itemHeight+this.rowSpacing)*i>this.itemHeight/2&&(i+=1);let e=new r;r.subtract(e,this.content.position,this.lastPos),this.lastPos.x=this.content.position.x,this.lastPos.y=this.content.position.y,e.length()>this.threshold_n||(this.listenScroll=!1,this.scrollView.stopAutoScroll(),this.scrollView.scrollToOffset(C(this.content.position.x,(this.itemHeight+this.rowSpacing)*i),1),this.selectItemData=this.data[i+2])}getItems(){return this.items}setData(t){this.data=t,this.canUpdateFrame=!1,this.scrollView.horizontal?this.content.getComponent(p).width=Math.ceil(this.data.length/this.rowCount)*(this.itemWidth+this.colSpacing)+this.paddingStart+this.paddingEnd:this.scrollView.vertical&&(this.content.getComponent(p).height=Math.ceil(this.data.length/this.colCount)*(this.itemHeight+this.rowSpacing)+this.paddingStart+this.paddingEnd),this.canUpdateFrame=!0}getData(){return this.data}removeItem(t){if(this.data.splice(t,1),this.data.length>=this.spawnCount)for(let i=0;i<this.items.length;i++){const e=this.items[i].itemId;e>=t&&this.itemUpdateFunc(e,this.items[i],this.data[e])}else{for(let i=t;i<this.data.length;i++)this.itemUpdateFunc(i,this.items[i],this.data[i]);this.scrollView.content.removeChild(this.items[this.items.length-1]),this.items.splice(this.items.length-1,1),this.resetContentSize()}}resetContentSize(){this.scrollView.horizontal?this.content.getComponent(p).width=Math.ceil(this.data.length/this.rowCount)*(this.itemWidth+this.colSpacing)+this.paddingStart+this.paddingEnd:this.scrollView.vertical&&(this.content.getComponent(p).height=Math.ceil(this.data.length/this.colCount)*(this.itemHeight+this.rowSpacing)+this.paddingStart+this.paddingEnd)}getItem(t){if(!(this.data.length>this.spawnCount))return this.items[t];for(let i=0;i<this.spawnCount;i++){if(this.items[i].itemId==t)return this.items[i]}}getItemPos(t){let i=0,e=0;if(this.data.length>this.spawnCount)for(let t=0;t<this.spawnCount;t++){let s=this.items[t];(0==e||e<s.position.y)&&(e=s.position.y,i=s.itemId)}return i>=t}resetScrollViewSizePos(t,i,e,s){this.canUpdateFrame=!1;let n=0,o=0;n=e||this.scrollView.view.width,o=s||this.scrollView.view.height,this.node.setPosition(t,i),this.getComponent(p).setContentSize(n,o),this.scrollView.view.setContentSize(n,o),this.canUpdateFrame=!0}scrollToTop(){this.scrollView.stopAutoScroll(),this.canUpdateFrame=!1,this.content.setPosition(this.content.getPosition().x,this.getComponent(p).height/2),this.canUpdateFrame=!0;let t=this.data.length>=this.spawnCount?this.spawnCount:this.data.length;if(this.items.length<t){let i=0,e=0,s=0,n=this.scrollView.horizontal?this.rowCount:this.colCount;for(let o=0;o<t;o+=n){let h=t-o;h>n&&(h=n),this.scrollView.horizontal?e=(i+.5)*this.itemWidth+this.colSpacing*i+this.paddingStart:this.scrollView.vertical&&(s=this.direction?(i+.5)*this.itemHeight+this.rowSpacing*i+this.paddingStart:-(i+.5)*this.itemHeight-this.rowSpacing*i-this.paddingStart);for(let t=0;t<h;t++){const i=o+t;if(i<this.items.length)continue;let n=null;i>=this.items.length?(n=d(this.itemTemplate),this.items.push(n)):n=this.items[i],this.scrollView.horizontal?s=-(t+.5)*this.itemHeight-this.rowSpacing*t:this.scrollView.vertical&&(e=(t+.5)*this.itemWidth+this.colSpacing*t),n.setPosition(e,s),n.itemId=i,this.content.addChild(n)}i+=1}}for(let t=0;t<this.items.length;t++){let i=this.items[t];if(i.itemId=t,i.itemId<this.data.length)if(i.itemId<0)i.active=!1;else{i.active=!0;let e=-(t+.5)*this.itemHeight-this.rowSpacing*t-this.paddingStart;i.setPosition(i.getPosition().x,e),this.itemUpdateFunc(i.itemId,i,this.data[i.itemId])}else i.active=!1}}scrollToIndex(t){if(this.scrollView.horizontal)if(t>this.cacheCount){let i=Math.floor(t/this.cacheCount);for(let t=1;t<=i;t++)this.scrollView.scrollToOffset(C(this.cacheCount*t*(this.itemWidth+this.colSpacing),0));t%this.cacheCount>0&&this.scrollView.scrollToOffset(C(t*(this.itemWidth+this.colSpacing),0))}else this.scrollView.scrollToOffset(C(t*(this.itemWidth+this.colSpacing),0));else if(this.scrollView.vertical)if(this.direction){let i=this.scrollView.getMaxScrollOffset().y;this.scrollView.scrollToOffset(C(0,i-t*(this.itemHeight+this.rowSpacing)),.5)}else this.scrollView.scrollToOffset(C(0,t*(this.itemHeight+this.rowSpacing)),.5)}resetPosByIndex(t){if(this.direction){this.canUpdateFrame=!1,this.content.setPosition(this.content.getPosition().x,-this.scrollView.view.height/2-t*(this.itemHeight+this.rowSpacing)),this.canUpdateFrame=!0,t-1+this.cacheCount>this.data.length&&(t=this.data.length+1-this.cacheCount);for(let i=0;i<this.items.length;i++){let e=this.items[i];if(e.itemId=t-1+i,e.itemId<this.data.length)if(e.itemId<0)e.active=!1;else{e.active=!0;let s=(t-1+i+.5)*this.itemHeight+this.rowSpacing*(t-1+i)+this.paddingStart;e.setPosition(e.getPosition().x,s),this.itemUpdateFunc(e.itemId,e,this.data[e.itemId])}else e.active=!1}}}scrollToRight(t){if(t>this.cacheCount){let i=Math.floor(t/this.cacheCount);for(let t=1;t<=i;t++)this.scrollView.scrollToOffset(C(this.cacheCount*t*(this.itemWidth+this.colSpacing),0))}this.scrollView.scrollToRight()}scrollToBottom(){this.scrollView.scrollToBottom(.5)}setItemWH(t,i){this.itemHeight=i,this.itemWidth=t}removeAllItem(){this.items=[],this.content.removeAllChildren()}}).prototype,"itemTemplate",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=i(x.prototype,"rowSpacing",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),M=i(x.prototype,"colSpacing",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),O=i(x.prototype,"paddingStart",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=i(x.prototype,"paddingEnd",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),A=i(x.prototype,"rowCount",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),Y=i(x.prototype,"colCount",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),Z=i(x.prototype,"bufferCount",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),B=i(x.prototype,"isChild",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),N=i(x.prototype,"threshold_n",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),R=i(x.prototype,"needSelectItem",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),X=i(x.prototype,"direction",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_=x))||_));s._RF.pop()}}}));

System.register("chunks:///_virtual/SetCountryPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./CfgMgr.ts","./CountryModel.ts","./EventListener.ts","./GameEvent.ts","./ResourcesUtil.ts","./UserData.ts"],(function(t){var e,n,o,i,r,s,c,a,u,l,p,h,y,C,g,d,f,m,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){o=t.cclegacy,i=t.ScrollView,r=t.Node,s=t._decorator,c=t.Component,a=t.instantiate,u=t.Label,l=t.Sprite,p=t.Color},function(t){h=t.OpenPopupManager},function(t){y=t.Constants},function(t){C=t.CfgMgr},function(t){g=t.CountryCfg},function(t){d=t.EventListener},function(t){f=t.GameEvent},function(t){m=t.ResourcesUtil},function(t){v=t.UserData}],execute:function(){var P,b,S,I,D,L,w,B,E;o._RF.push({},"1547dp4SMFLBZCfm9sYDAoW","SetCountryPopup",void 0);const{ccclass:U,property:M}=s;t("SetCountryPopup",(P=U("SetCountryPopup"),b=M(i),S=M(r),I=M(r),P((w=e((L=class extends c{constructor(){super(...arguments),n(this,"countryList",w,this),n(this,"cityItem",B,this),n(this,"tabs",E,this),this.countryData=C.getCfgDataArray(new g),this.countryId=void 0,this.countryCode=void 0}show(){this.init("Asia")}init(t){this.countryList.content.removeAllChildren(),this.countryData.forEach(((e,n)=>{if(e.continent==t){let n=a(this.cityItem);n.getChildByPath("country/name").getComponent(u).string=e.native;let o=y.flagsPath+e.code.toLowerCase()+"/spriteFrame";m.geSpriteFrame(o).then((t=>{n.getChildByPath("country/flag").getComponent(l).spriteFrame=t,n.getChildByPath("country/flag").setScale(.4,.4)})),n.parent=this.countryList.content,n.getChildByName("checked").active=e.Id==this.countryId,n.on("click",(()=>{this.countryId=e.Id,this.countryCode=e.code,this.init(t)}))}}))}onCloseTouch(){h.instance.hide(y.PopupUI.SetCountryPopup)}changeCountry(t,e){this.tabs.children.forEach((t=>{t.getChildByName("Sprite").active=!1,t.getComponent(l).color=new p(41,40,61,255)})),t.target.getChildByName("Sprite").active=!0,t.target.getComponent(l).color=new p(49,129,255,255),this.init(e)}onConfirmBtn(){this.countryId&&(v.instance.setCountry(this.countryCode),d.emit(f.UPDATE_USER_COUNTRY,this.countryId),this.onCloseTouch())}}).prototype,"countryList",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=e(L.prototype,"cityItem",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=e(L.prototype,"tabs",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=L))||D));o._RF.pop()}}}));

System.register("chunks:///_virtual/SettingPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./GameController.ts","./AudioManager.ts","./SpriteEx.ts","./GameEvent.ts","./EventListener.ts","./LanguageManager.ts"],(function(e){var t,n,i,o,s,a,r,u,l,p,d,c,g,h,m,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,o=e.Slider,s=e.Node,a=e._decorator,r=e.Component,u=e.UITransform},function(e){l=e.OpenPopupManager},function(e){p=e.Constants},function(e){d=e.default},function(e){c=e.AudioManager},function(e){g=e.SpriteEx},function(e){h=e.GameEvent},function(e){m=e.EventListener},function(e){b=e.LanguageManager}],execute:function(){var f,S,C,L,w,E,y,P,v,x,M,G,N;i._RF.push({},"1bba2nxlvZExKfutJRNi7Gy","SettingPopup",void 0);const{ccclass:z,property:A}=a;e("SettingPopup",(f=z("SettingPopup"),S=A(o),C=A(o),L=A(s),w=A(g),E=A(g),f((v=t((P=class extends r{constructor(){super(...arguments),n(this,"musicSlider",v,this),n(this,"soundSlider",x,this),n(this,"buttonList",M,this),n(this,"flag",G,this),n(this,"lang",N,this)}show(e){this.buttonList.active="game"!=e;let t=c.instance.musicVolume,n=c.instance.soundVolume;this.musicSlider.progress=t,this.soundSlider.progress=n,this.musicSlider.node.getChildByName("bar").getComponent(u).width=t*this.musicSlider.node.getComponent(u).width,this.soundSlider.node.getChildByName("bar").getComponent(u).width=n*this.soundSlider.node.getComponent(u).width,this.setLanuage()}onMusicEvent(e){let t=e.progress,n=e.node.getComponent(u).width;e.node.getChildByName("bar").getComponent(u).width=t*n,c.instance.setMusic(t)}onSoundEvent(e){let t=e.progress,n=e.node.getComponent(u).width;e.node.getChildByName("bar").getComponent(u).width=t*n,c.instance.setSound(t),this.setLanuage()}hidePopup(){d.resume(),l.instance.hide(p.PopupUI.SettingPopup)}onFeedbackTouch(){}onCodeTouch(){l.instance.show(p.PopupUI.RedeemCodePopup)}onLangTouch(){l.instance.show(p.PopupUI.LanguagePopup)}setLanuage(){let e=b.instance.index;this.lang.index=e,this.flag.index=e}onEnable(){m.on(h.SELECT_LANGUAGE,this.setLanuage,this)}onDisable(){m.off(h.SELECT_LANGUAGE,this.setLanuage,this)}}).prototype,"musicSlider",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=t(P.prototype,"soundSlider",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=t(P.prototype,"buttonList",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=t(P.prototype,"flag",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=t(P.prototype,"lang",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=P))||y));i._RF.pop()}}}));

System.register("chunks:///_virtual/Shadow.ts",["cc","./BaseComponent.ts","./PoolManager.ts","./GameDefine.ts"],(function(t){var e,o,s,n,a;return{setters:[function(t){e=t.cclegacy,o=t._decorator},function(t){s=t.default},function(t){n=t.PoolManager},function(t){a=t.GameDefine}],execute:function(){var c;e._RF.push({},"12edahXWHVEuIb79B8twMAT","Shadow",void 0);const{ccclass:i,property:r}=o;t("Shadow",i("Shadow")(c=class extends s{constructor(){super(...arguments),this._com=null}init(t){this._com=t;let e=t.monsterCfg.shadeScale;this.node.setScale(e,e,e)}setMonsterShadownPos(){let t=this._com.node.getPosition();this.node.setPosition(t.x,t.y+0,0)}clear(){n.instance.putNode(this.node)}childUpdate(t){a.gameStart&&this._com&&this.setMonsterShadownPos()}})||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/ShopBillData.ts",["cc","./Constants.ts","./Api.ts","./EventListener.ts","./HttpService.ts","./OpenPopupManager.ts"],(function(t){var s,i,e,n,a,o,l;return{setters:[function(t){s=t.cclegacy},function(t){i=t.Constants},function(t){e=t.Api},function(t){n=t.EventListener},function(t){a=t.HttpService},function(t){o=t.OpenPopupManager,l=t.LayerType}],execute:function(){s._RF.push({},"926f85ZnndDzIhJKxwXtf42","ShopBillData",void 0);class h{constructor(){this._billData=new Map,this._interval=0,this._types=["shop.diamond1","shop.diamond2","shop.diamond3","shop.diamond4","shop.diamond5","shop.diamond6","chapterfund","blueprintfund","shop.monthlypassName1","shop.monthlypassName2","shop.monthlypassName3","firsttop","hero20020"],this._names=["diamond","diamond","diamond","diamond","diamond","diamond","shop.stageFund","shop.blueprintFund","shop.monthlypassName1","shop.monthlypassName2","shop.monthlypassName3","shop.firsttopup","hero.2002"]}addBill(t,s,i,e){let n=this._types.indexOf(s),a=new p;a.billId=t,a.type=s,a.name=this._names[n],a.status=!1,a.count=i,a.event=e,a.icon=n,a.request=0,this._billData.set(t,a),clearInterval(this._interval),setInterval(this.getBillsFromNetwork.bind(this),2e3)}getBillsFromNetwork(){let t=0;this._billData.forEach((s=>{t++,s.request>30?this._billData.delete(s.billId):this.getBillFromNetwork(s)})),0==t&&clearInterval(this._interval)}getBillFromNetwork(t){a.instance.post(e.PYAMENT_BILL_INFO,{billId:t.billId}).then((s=>{0==s.code&&s.data.state?this._billData.has(t.billId)&&(n.emit(t.event),this._billData.delete(t.billId),o.instance.show(i.PopupUI.ShopSuccessPopup,null,l.TOP,!1,t)):(t.request+=1,this._billData.set(t.billId,t))}))}clear(){}static get instance(){return this._instance||(this._instance=new h),this._instance}}t("ShopBillData",h),h._instance=null;class p{constructor(){this.billId=void 0,this.type=void 0,this.name=void 0,this.event=void 0,this.icon=void 0,this.item=void 0,this.count=void 0,this.status=void 0,this.request=void 0}}t("ShopBillObj",p),s._RF.pop()}}}));

System.register("chunks:///_virtual/ShopBoxDetailPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ShopData.ts","./OpenPopupManager.ts","./Constants.ts","./SpriteEx.ts","./ShopBoxRewardItem.ts","./LanguageManager.ts"],(function(e){var t,i,n,o,r,a,l,s,p,u,c,h,b,d,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,o=e.Label,r=e.Node,a=e.Prefab,l=e._decorator,s=e.Component,p=e.instantiate},function(e){u=e.ShopData},function(e){c=e.OpenPopupManager},function(e){h=e.Constants},function(e){b=e.SpriteEx},function(e){d=e.ShopBoxRewardItem},function(e){f=e.LanguageManager}],execute:function(){var y,g,m,x,w,B,I,S,D,P,v,z,L,C,_,R,M,k,E,F,O;n._RF.push({},"e1572C/WrRDY5BhkDrdPKnn","ShopBoxDetailPopup",void 0);const{ccclass:j,property:A}=l;e("ShopBoxDetailPopup",(y=j("ShopBoxDetailPopup"),g=A(o),m=A(b),x=A(b),w=A(o),B=A(r),I=A(a),S=A(b),D=A(r),P=A(r),y((L=t((z=class extends s{constructor(){super(...arguments),i(this,"title",L,this),i(this,"banner",C,this),i(this,"icon",_,this),i(this,"fee",R,this),i(this,"rewardList",M,this),i(this,"rewardItem",k,this),i(this,"buyIcon",E,this),i(this,"adBtn",F,this),i(this,"buyBtn",O,this),this._boxItem=void 0}show(e){this._boxItem=e;let t=u.instance.boxShop.level;this.title.string=f.instance.getLang("shop.chest"+e.type),"rare"==e.type?(this.banner.index=1,this.icon.index=1):(this.banner.index=0,this.icon.index=0),e.key>0?(this.buyIcon.index="common"==e.type?2:3,this.fee.node.active=!1):(this.buyIcon.index=1,this.fee.node.active=!0,this.fee.string=`${e.price}`),e.adLimit>0?this.adBtn.active=!0:this.adBtn.active=!1,this.rewardList.removeAllChildren(),u.instance.getShopChestRewardItems(t,e.type).forEach(((e,t)=>{let i=p(this.rewardItem);i.getComponent(d).init(e),i.parent=this.rewardList}))}onBuyBoxBtn(){u.instance.buyBox(this._boxItem)}onCloseTouch(){c.instance.hide(h.PopupUI.ShopBoxDetailPopup)}}).prototype,"title",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(z.prototype,"banner",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(z.prototype,"icon",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(z.prototype,"fee",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=t(z.prototype,"rewardList",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(z.prototype,"rewardItem",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=t(z.prototype,"buyIcon",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(z.prototype,"adBtn",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(z.prototype,"buyBtn",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=z))||v));n._RF.pop()}}}));

System.register("chunks:///_virtual/ShopBoxItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./OpenPopupManager.ts","./ShopData.ts","./ShopBoxSubItem.ts","./EventListener.ts","./GameEvent.ts"],(function(e){var t,n,o,i,r,s,a,p,l,u,h,c,b,f,g,x;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){o=e.cclegacy,i=e.Node,r=e.Prefab,s=e.Label,a=e.ProgressBar,p=e._decorator,l=e.Component,u=e.instantiate},function(e){h=e.Constants},function(e){c=e.OpenPopupManager},function(e){b=e.ShopData},function(e){f=e.ShopBoxSubItem},function(e){g=e.EventListener},function(e){x=e.GameEvent}],execute:function(){var B,S,m,P,v,d,y,E,w,D,_,z,C;o._RF.push({},"3a779k/GFNEza7fj0ApUTv9","ShopBoxItem",void 0);const{ccclass:I,property:M}=p;e("ShopBoxItem",(B=I("ShopBoxItem"),S=M(i),m=M(r),P=M(s),v=M(a),d=M(s),B((w=t((E=class extends l{constructor(){super(...arguments),n(this,"content",w,this),n(this,"shopBoxSubPrefab",D,this),n(this,"level",_,this),n(this,"progressBar",z,this),n(this,"progressValue",C,this)}init(){let e=b.instance.boxShop;e&&e.expMax&&(this.level.string="Lv."+e.level,this.progressValue.string=`${e.exp}/${e.expMax}`,this.progressBar.progress=e.exp/e.expMax),this.setShopBoxContent()}setShopBoxContent(){let e=b.instance.boxShop.shopBoxes;if(e&&0!=e.length)if(this.content.children.length)this.content.children.forEach(((t,n)=>{const o=e[n];t.getComponent(f).init(o)}));else for(let t=0;t<e.length;t++){const n=e[t];let o=u(this.shopBoxSubPrefab);o.parent=this.content,o.getComponent(f).init(n)}}onRewardBtn(){c.instance.show(h.PopupUI.ShopBoxRewardPopup)}onEnable(){g.on(x.UPDATE_SHOP_BOX,this.init,this)}onDisable(){g.off(x.UPDATE_SHOP_BOX,this.init,this)}}).prototype,"content",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(E.prototype,"shopBoxSubPrefab",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(E.prototype,"level",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(E.prototype,"progressBar",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(E.prototype,"progressValue",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=E))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/ShopBoxLevelupPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ShopData.ts","./ResourcesUtil.ts","./Constants.ts","./OpenPopupManager.ts"],(function(e){var t,r,i,n,o,s,a,l,p,c,u,h,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.initializerDefineProperty},function(e){i=e.cclegacy,n=e.Label,o=e.Node,s=e._decorator,a=e.Component,l=e.instantiate,p=e.Sprite},function(e){c=e.ShopData},function(e){u=e.ResourcesUtil},function(e){h=e.Constants},function(e){m=e.OpenPopupManager}],execute:function(){var d,g,f,v,w,b,y,C,S,B,P;i._RF.push({},"e4e0diw95ZGfYqzIPhCOKlg","ShopBoxLevelupPopup",void 0);const{ccclass:I,property:R}=s;e("ShopBoxLevelupPopup",(d=I("ShopBoxLevelupPopup"),g=R(n),f=R(o),v=R(o),w=R(o),d((C=t((y=class extends a{constructor(){super(...arguments),r(this,"level",C,this),r(this,"commonRewards",S,this),r(this,"rareRewards",B,this),r(this,"rewardItem",P,this),this.rewardData=null}show(){let e=c.instance.boxShop.level;this.level.string="Lv."+e.toString();let t=c.instance.getShopChestByLevel(e);this.setChestItems(t.common,this.commonRewards),this.setChestItems(t.rare,this.rareRewards)}setChestItems(e,t){e.forEach(((e,r)=>{let i,o=c.instance.getItemCfgById(e.itemId);t.children[r]?(i=t.children[r],t.children[r].active=!0):(i=l(this.rewardItem),i.parent=t);let s=h.itemsPath+o.icon+"/spriteFrame";u.setSpriteFrame(s,i.getChildByName("fragment").getChildByName("rarity").getComponent(p)),i.getChildByName("count").getComponent(n).string="+"+e.count}));for(let r=e.length;r<t.children.length;r++)t.children[r].active=!1}onCloseBtn(){m.instance.hide(h.PopupUI.ShopBoxLevelupPopup)}}).prototype,"level",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=t(y.prototype,"commonRewards",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=t(y.prototype,"rareRewards",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=t(y.prototype,"rewardItem",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=y))||b));i._RF.pop()}}}));

System.register("chunks:///_virtual/ShopBoxOpenPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./OpenPopupManager.ts","./SpriteEx.ts","./EventListener.ts","./GameEvent.ts","./LanguageManager.ts"],(function(e){var t,n,i,o,r,s,p,a,u,l,c,h,b,m,g,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,o=e.ParticleSystem2D,r=e.Node,s=e.AnimationComponent,p=e.Label,a=e._decorator,u=e.Component},function(e){l=e.Constants},function(e){c=e.OpenPopupManager,h=e.LayerType},function(e){b=e.SpriteEx},function(e){m=e.EventListener},function(e){g=e.GameEvent},function(e){f=e.LanguageManager}],execute:function(){var x,y,P,w,v,S,_,d,B,L,O,A,E;i._RF.push({},"d412a8ehqBHzISnwFQDkukY","ShopBoxOpenPopup",void 0);const{ccclass:z,property:D}=a;e("ShopBoxOpenPopup",(x=z("ShopBoxOpenPopup"),y=D(o),P=D(r),w=D(s),v=D(p),S=D(b),x((B=t((d=class extends u{constructor(){super(...arguments),n(this,"starAnim",B,this),n(this,"bg",L,this),n(this,"boxAnim",O,this),n(this,"title",A,this),n(this,"icon",E,this),this._rewards=[],this._boxItem=null,this._showBoxLevelup=!1}show(e,t,n){this._boxItem=e,this._rewards=t,this._showBoxLevelup=n,this.title.string=f.instance.getLang("shop.chest"+e.type),this.icon.index="common"==e.type?0:1,this.bg.active=!1,this.boxAnim.play(),this.boxAnim.on(s.EventType.FINISHED,(()=>{this.bg.active=!0,this.starAnim.resetSystem()}))}onCloseBtn(){c.instance.hide(l.PopupUI.ShopBoxOpenPopup),c.instance.showRewardPopup(this._rewards,null,(e=>{this._showBoxLevelup&&c.instance.show(l.PopupUI.ShopBoxLevelupPopup,null,h.TOP,!1)})),m.emit(g.UPDATE_SHOP_BOX)}}).prototype,"starAnim",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(d.prototype,"bg",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(d.prototype,"boxAnim",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(d.prototype,"title",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(d.prototype,"icon",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=d))||_));i._RF.pop()}}}));

System.register("chunks:///_virtual/ShopBoxRewardItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./ResourcesUtil.ts","./SpriteEx.ts","./ItemModel.ts","./BagData.ts","./ShopData.ts"],(function(t){var e,i,n,o,a,r,s,c,l,u,p,h,f,m,g,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,o=t.Label,a=t.Node,r=t.Sprite,s=t._decorator,c=t.Component,l=t.UITransform,u=t.Vec3},function(t){p=t.Constants},function(t){h=t.ResourcesUtil},function(t){f=t.SpriteEx},function(t){m=t.ItemType},function(t){g=t.BagData},function(t){d=t.ShopData}],execute:function(){var y,b,I,S,w,x,B,D,F,R,z;n._RF.push({},"4ad60OfpcxDQJhlzQbifeJF","ShopBoxRewardItem",void 0);const{ccclass:C,property:q}=s;t("ShopBoxRewardItem",(y=C("ShopBoxRewardItem"),b=q(o),I=q(a),S=q(r),w=q(f),y((D=e((B=class extends c{constructor(){super(...arguments),i(this,"count",D,this),i(this,"flag",F,this),i(this,"icon",R,this),i(this,"quality",z,this),this._itemCfg=null}init(t,e){let i=this._itemCfg=d.instance.getItemCfgById(t.itemId),n="";n=i.type==m.WeaponFragment?p.weaponIconPath+g.instance.getWeaponIcon(i.dataId)+"/spriteFrame":p.itemsPath+i.icon+"/spriteFrame",h.geSpriteFrame(n).then((t=>{this.icon.spriteFrame=t;let e=this.icon.getComponent(l).contentSize,i=Math.min(80/e.width,80/e.height);this.icon.node.setScale(i,i)})),this.count.string=`x${t.count}`,this.quality.index=i.quality?i.quality:0,this.flag.active=!1,e&&this.setAnim()}setAnim(){this.quality.node.scale=new u(1,1,1)}onInfoBtn(){}}).prototype,"count",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(B.prototype,"flag",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(B.prototype,"icon",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(B.prototype,"quality",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=B))||x));n._RF.pop()}}}));

System.register("chunks:///_virtual/ShopBoxRewardPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./OpenPopupManager.ts","./ShopData.ts","./ResourcesUtil.ts"],(function(e){var t,i,r,n,s,l,o,a,h,c,u,p,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){r=e.cclegacy,n=e.Label,s=e.Node,l=e._decorator,o=e.Component,a=e.instantiate,h=e.Sprite},function(e){c=e.Constants},function(e){u=e.OpenPopupManager},function(e){p=e.ShopData},function(e){v=e.ResourcesUtil}],execute:function(){var m,f,g,d,L,B,b,w,_,y,C,I,R,x,S;r._RF.push({},"e8850OvsihAIaIWkg18gHym","ShopBoxRewardPopup",void 0);const{ccclass:P,property:z}=l;e("ShopBoxRewardPopup",(m=P("ShopBoxRewardPopup"),f=z(n),g=z(s),d=z(s),L=z(s),B=z(s),b=z(s),m((y=t((_=class extends o{constructor(){super(...arguments),i(this,"level",y,this),i(this,"leftBtn",C,this),i(this,"rightBtn",I,this),i(this,"commonRewards",R,this),i(this,"rareRewards",x,this),i(this,"rewardItem",S,this),this._maxLevel=10,this._curLevel=1}async show(){this._curLevel=p.instance.boxShop.level,this.setChestLevelInfo()}setChestLevelInfo(){this.level.string=`Lv.${this._curLevel}`,this._curLevel<=1?(this.leftBtn.active=!1,this.rightBtn.active=!0):this._curLevel<this._maxLevel?(this.leftBtn.active=!0,this.rightBtn.active=!0):(this.leftBtn.active=!0,this.rightBtn.active=!1);let e=p.instance.getShopChestByLevel(this._curLevel);this.setChestItems(e.common,this.commonRewards),this.setChestItems(e.rare,this.rareRewards)}setChestItems(e,t){e.forEach(((e,i)=>{let r,s=p.instance.getItemCfgById(e.itemId);t.children[i]?(r=t.children[i],t.children[i].active=!0):(r=a(this.rewardItem),r.parent=t);let l=c.itemsPath+s.icon+"/spriteFrame";v.setSpriteFrame(l,r.getChildByName("fragment").getChildByName("rarity").getComponent(h)),r.getChildByName("count").getComponent(n).string="+"+e.count}));for(let i=e.length;i<t.children.length;i++)t.children[i].active=!1}onLeftBtn(){this._curLevel--,this._curLevel<=0&&(this._curLevel=1),this.setChestLevelInfo()}onRightBtn(){this._curLevel++,this._curLevel>=this._maxLevel&&(this._curLevel=this._maxLevel),this.setChestLevelInfo()}onCloseBtn(){u.instance.hide(c.PopupUI.ShopBoxRewardPopup)}}).prototype,"level",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(_.prototype,"leftBtn",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(_.prototype,"rightBtn",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(_.prototype,"commonRewards",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=t(_.prototype,"rareRewards",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=t(_.prototype,"rewardItem",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=_))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/ShopBoxSubItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./OpenPopupManager.ts","./SpriteEx.ts","./ShopData.ts","./LanguageManager.ts","./AdManager.ts"],(function(t){var e,n,o,i,r,a,s,c,l,u,p,b,h,g,m,d,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){o=t.cclegacy,i=t.Label,r=t.RichText,a=t.Node,s=t._decorator,c=t.Component,l=t.UITransform},function(t){u=t.Constants},function(t){p=t.OpenPopupManager,b=t.LayerType},function(t){h=t.SpriteEx},function(t){g=t.ShopData},function(t){m=t.LanguageManager},function(t){d=t.AdManager,f=t.AdType}],execute:function(){var y,x,B,S,C,w,O,L,z,_,v,I,A,F,D,P,j,M,T;o._RF.push({},"14914cHVmtA/6BExA0fHeks","ShopBoxSubItem",void 0);const{ccclass:H,property:k}=s;t("ShopBoxSubItem",(y=H("ShopBoxSubItem"),x=k(i),B=k(h),S=k(r),C=k(h),w=k(i),O=k(a),L=k(a),z=k(a),y((I=e((v=class extends c{constructor(){super(...arguments),n(this,"title",I,this),n(this,"bg",A,this),n(this,"desc",F,this),n(this,"buyIcon",D,this),n(this,"fee",P,this),n(this,"countdown",j,this),n(this,"adBtn",M,this),n(this,"buyBtn",T,this),this._boxObj=null}init(t){let e=g.instance.boxShop.level;this._boxObj=t,this.title.string=m.instance.getLang("shop.chest"+t.type),this.bg.index="common"==t.type?0:1,t.key>0?(this.buyIcon.index="common"==t.type?2:3,this.fee.node.active=!1):(this.buyIcon.index=1,this.fee.node.active=!0,this.fee.string=`${t.price}`),t.adLimit>0?(this.adBtn.active=!0,this.buyBtn.getComponent(l).setContentSize(140,90)):(this.adBtn.active=!1,this.buyBtn.getComponent(l).setContentSize(200,90));let n="<color=#31FF0A>"+m.instance.getLang("common")+"</color>";e>2&&"common"==t.type&&(n="<color=#00CCFF>"+m.instance.getLang("uncommon")+"</color>"),e<=2&&"rare"==t.type&&(n="<color=#00CCFF>"+m.instance.getLang("uncommon")+"</color>"),e>2&&"rare"==t.type&&(n="<color=#FA1CB3>"+m.instance.getLang("rare")+"</color>"),this.desc.string="<b>"+m.instance.getLang("shop.chestweapon",[n])+"<b>",this.countdown.active=t.freeCountdown&&t.freeCountdown>0,this.setOutLine()}setOutLine(){this.scheduleOnce((()=>{let t=this.desc.node.children;for(let e=0;e<t.length;e++){const n=t[e];n.getComponent(i).isBold=!0,n.getComponent(i).enableOutline=!0,n.getComponent(i).enableShadow=!1,n.getComponent(i).outlineWidth=3}}),.01)}onBuyBoxBtn(){g.instance.buyBox(this._boxObj)}onWatchAdBtn(){d.instance.showAd(f.SHOP_BOX,"common"==this._boxObj.type?0:1,((t,e)=>{0==t&&g.instance.buyBox(this._boxObj,e)}))}toBoxDetail(){p.instance.show(u.PopupUI.ShopBoxDetailPopup,null,b.TOP,!1,this._boxObj)}onDisable(){}}).prototype,"title",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(v.prototype,"bg",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(v.prototype,"desc",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(v.prototype,"buyIcon",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(v.prototype,"fee",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(v.prototype,"countdown",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=e(v.prototype,"adBtn",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(v.prototype,"buyBtn",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=v))||_));o._RF.pop()}}}));

System.register("chunks:///_virtual/ShopBoxWeaponDetailPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./CfgMgr.ts","./ItemModel.ts","./SpriteEx.ts","./ResourcesUtil.ts","./BagData.ts","./ShopData.ts"],(function(e){var t,n,i,o,a,r,p,l,s,c,u,h,g,m,d,y,f,b,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,o=e.Label,a=e.Node,r=e.Sprite,p=e._decorator,l=e.Component,s=e.UITransform,c=e.instantiate},function(e){u=e.OpenPopupManager},function(e){h=e.Constants},function(e){g=e.CfgMgr},function(e){m=e.ItemCfg,d=e.ItemType},function(e){y=e.SpriteEx},function(e){f=e.ResourcesUtil},function(e){b=e.BagData},function(e){C=e.ShopData}],execute:function(){var w,S,I,B,x,D,P,F,z,M,W,N,v;i._RF.push({},"2e5cdVydl1AVbqiy2lKmht3","ShopBoxWeaponDetailPopup",void 0);const{ccclass:L,property:q}=p;e("ShopBoxWeaponDetailPopup",(w=L("ShopBoxWeaponDetailPopup"),S=q(o),I=q(a),B=q(a),x=q(r),D=q(y),w((z=t((F=class extends l{constructor(){super(...arguments),n(this,"probability",z,this),n(this,"weaponList",M,this),n(this,"wepaonItem",W,this),n(this,"icon",N,this),n(this,"banner",v,this)}show(e){let t=C.instance.getItemCfgById(e),n=[],i=g.getCfgDataArray(new m);for(let e=0;e<i.length;e++){let o=i[e];o.type==d.WeaponFragment&&o.quality==t.quality&&n.push(o)}let o=b.instance.getCarryWeaponArr(),a=h.itemsPath+t.icon+"/spriteFrame";f.geSpriteFrame(a).then((e=>{this.icon.spriteFrame=e;let t=this.icon.getComponent(s).contentSize,n=Math.min(160/t.width,160/t.height);this.icon.node.setScale(n,n)})),this.weaponList.removeAllChildren(),n.sort(((e,t)=>{if(o.indexOf(e.dataId)>=0)return-1}));let p=0;for(let e=0;e<n.length;e++){let t=n[e],i=!(o.indexOf(t.dataId)>=0);p+=i?0:1;let a=c(this.wepaonItem);a.getComponent(y).index=t.quality;let l=h.weaponIconPath+b.instance.getWeaponIcon(t.dataId)+"/spriteFrame";f.geSpriteFrame(l).then((e=>{a.getChildByName("weapon").getComponent(r).spriteFrame=e;let t=a.getChildByName("weapon").getComponent(s).contentSize,n=Math.min(64/t.width,64/t.height);a.getChildByName("weapon").setScale(n,n)})),a.getChildByName("lock").active=i,i&&(a.getComponent(r).grayscale=!0,a.getChildByName("weapon").getComponent(r).grayscale=!0),a.parent=this.weaponList}this.probability.string=Number(100/p).toFixed(2)+"%"}onCloseTouch(){u.instance.hide(h.PopupUI.ShopBoxWeaponDetailPopup)}}).prototype,"probability",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=t(F.prototype,"weaponList",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=t(F.prototype,"wepaonItem",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=t(F.prototype,"icon",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=t(F.prototype,"banner",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=F))||P));i._RF.pop()}}}));

System.register("chunks:///_virtual/ShopChestItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ShopData.ts","./EventListener.ts","./GameEvent.ts","./ShopChestSubItem.ts"],(function(t){var e,n,o,i,s,r,a,h,c,p,l,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){o=t.cclegacy,i=t.Node,s=t.Prefab,r=t._decorator,a=t.Component,h=t.instantiate},function(t){c=t.ShopData},function(t){p=t.EventListener},function(t){l=t.GameEvent},function(t){u=t.ShopChestSubItem}],execute:function(){var b,f,S,m,C,P,v;o._RF.push({},"056b3z3bpxDdbN9a0+oTWNI","ShopChestItem",void 0);const{ccclass:D,property:d}=r;t("ShopChestItem",(b=D("ShopChestItem"),f=d(i),S=d(s),b((P=e((C=class extends a{constructor(){super(...arguments),n(this,"content",P,this),n(this,"shopChestSubPrefab",v,this)}init(){this.setShopBoxContent()}setShopBoxContent(){let t=c.instance.chestShop;if(this.content.removeAllChildren(),t&&t.materialBox){let e=h(this.shopChestSubPrefab);e.parent=this.content,e.getComponent(u).init(t.materialBox)}}onEnable(){p.on(l.UPDATE_SHOP_BOX,this.init,this)}onDisable(){p.off(l.UPDATE_SHOP_BOX,this.init,this)}}).prototype,"content",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(C.prototype,"shopChestSubPrefab",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=C))||m));o._RF.pop()}}}));

System.register("chunks:///_virtual/ShopChestSubItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ShopData.ts","./AdManager.ts","./LanguageManager.ts"],(function(t){var e,n,i,o,a,s,r,u,c,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,o=t.Label,a=t._decorator,s=t.Component},function(t){r=t.ShopData},function(t){u=t.AdManager,c=t.AdType},function(t){h=t.LanguageManager}],execute:function(){var b,l,p,d,m,g,S;i._RF.push({},"f11d1/jwIxJZaPSeZbQPw/W","ShopChestSubItem",void 0);const{ccclass:f,property:x}=a;t("ShopChestSubItem",(b=f("ShopChestSubItem"),l=x(o),p=x(o),b((g=e((m=class extends s{constructor(){super(...arguments),n(this,"adNum",g,this),n(this,"diamondNum",S,this),this._boxObj=null}init(t){this._boxObj=t,this.setShopBoxContent()}setShopBoxContent(){this.adNum.string=h.instance.getLang("game.lefttoday")+this._boxObj.adLimit,this.diamondNum.string=`${this._boxObj.price}`}onBuyBoxBtn(){r.instance.buyChest(this._boxObj)}onWatchAdBtn(){u.instance.showAd(c.SHOP_BOX,2,((t,e)=>{0==t&&r.instance.buyChest(this._boxObj,e)}))}}).prototype,"adNum",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(m.prototype,"diamondNum",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=m))||d));i._RF.pop()}}}));

System.register("chunks:///_virtual/ShopData.ts",["cc","./Constants.ts","./Api.ts","./CfgMgr.ts","./EventListener.ts","./HttpService.ts","./OpenPopupManager.ts","./WalletManager.ts","./PlayerData.ts","./GameEvent.ts","./ItemModel.ts","./RewardModel.ts","./ShopModel.ts","./ShopBillData.ts"],(function(t){var e,o,a,n,s,i,h,p,d,l,c,S,r,u,_,g,P,y;return{setters:[function(t){e=t.cclegacy},function(t){o=t.Constants},function(t){a=t.Api},function(t){n=t.CfgMgr},function(t){s=t.EventListener},function(t){i=t.HttpService},function(t){h=t.OpenPopupManager,p=t.LayerType},function(t){d=t.WalletManager},function(t){l=t.PlayerData},function(t){c=t.GameEvent},function(t){S=t.ItemCfg,r=t.ItemIdType},function(t){u=t.RewardObj},function(t){_=t.BoxShopModel,g=t.DailyShopModel,P=t.ShopChestLevelCfg},function(t){y=t.ShopBillData}],execute:function(){e._RF.push({},"7a99dPOyFBNd6BcTo/voQfQ","ShopData",void 0);class m{constructor(){this._boxShop=new _,this._dailyShop=new g,this._goldShop=[],this._diamondShop=[],this._heroShop=[],this._chestShop=null,this._chestLevelData=new Map,this.pageNode=void 0}get dailyShop(){return this._dailyShop}get boxShop(){return this._boxShop}get chestShop(){return this._chestShop}get goldShop(){return this._goldShop}get diamondShop(){return this._diamondShop}get heroShop(){return this._heroShop}initCfg(){let t=n.getCfgDataArray(new P);for(let e=0;e<t.length;e++){let o=t[e];this._chestLevelData.set(o.level,o)}}getItemCfgById(t){return n.getDataById(new S,t)}getShopInfo(){this._diamondShop.length>0&&s.emit(c.UPDATE_SHOP_POPUP),i.instance.post(a.SHOP_INFO).then((t=>{0==t.code&&(this._boxShop=t.data.boxShop,this._chestShop=t.data.chestShop,this._dailyShop=t.data.dailyShop,this._goldShop=t.data.goldShop,this._diamondShop=t.data.diamondShop,this._heroShop=t.data.heroShop,s.emit(c.UPDATE_SHOP_POPUP))}))}updateDailyShop(t){this._dailyShop=t,s.emit(c.UPDATE_SHOP_DAILY)}updateBoxShop(t){this._boxShop=t,s.emit(c.UPDATE_SHOP_BOX)}updateChestShop(t){this._chestShop=t,s.emit(c.UPDATE_SHOP_BOX)}updateGoldShop(t){this._goldShop=t,s.emit(c.UPDATE_SHOP_GOLD)}updateDiamondShop(t){this._diamondShop=t,s.emit(c.UPDATE_SHOP_DIAMOND)}updateHeroShop(t){this._heroShop=t,s.emit(c.UPDATE_SHOP_HERO)}getShopCfgById(t){return this._dailyShop.goods.find((e=>e.id==t))}getShopChestByLevel(t){return this._chestLevelData.get(t)}getShopChestRewardItems(t,e){let o=[],a=new Map;for(let o=0;o<=t;o++){let t=this._chestLevelData.get(o)[e];for(let e=0;e<t.length;e++){const o=t[e];let n=o.count;a.has(o.itemId)&&(n+=a.get(o.itemId)),a.set(o.itemId,n)}}return a.forEach(((t,e)=>{let a=new u;a.count=t,a.itemId=e,o.push(a)})),o}buyBox(t,e){i.instance.post(a.SHOP_BOX_BUY,{shopId:t.id,type:t.type,sign:e,isKeyOpen:t.key>0}).then((e=>{if(0==e.code){let a=!1;e.data.boxShop.level>this._boxShop.level&&(a=!0),this.updateBoxShop(e.data.boxShop),h.instance.show(o.PopupUI.ShopBoxOpenPopup,null,p.TOP,!1,t,e.data.result,a),l.instance.getPlayerInfo()}else h.instance.showToast(e.msg)})).catch((()=>{}))}buyChest(t,e){i.instance.post(a.SHOP_CHEST_BUY,{shopId:t.id,type:t.type,sign:e,isKeyOpen:0}).then((t=>{0==t.code?(this.updateChestShop(t.data.chestShop),h.instance.showRewardPopup(t.data.result,null),l.instance.getPlayerInfo()):h.instance.showToast(t.msg)})).catch((()=>{}))}buyDalilyItem(t,e,o){i.instance.post(a.SHOP_DAILY_BUY,{shopId:t,sign:e}).then((e=>{if(0==e.code){h.instance.showRewardPopup(e.data.result,null,o),s.emit(c.CLOSE_SHOP_ITEM_POPUP),m.instance.updateDailyShop(e.data.dailyShop);let a=!0;t!=r.Diamond&&t!=r.Gold&&t!=r.Food&&t!=r.TicketBox||(a=!1),l.instance.getPlayerInfo(a)}else h.instance.showToast(e.msg)}))}buyDiamondWithWallet(t,e){d.instance.isConnected()?this._buyDiamondWithWallet(t,e):d.instance.connectWallet((()=>{this._buyDiamondWithWallet(t,e)}))}_buyDiamondWithWallet(t,e){i.instance.post(a.SHOP_DIAMOND_PREBUY,{shopId:t}).then((t=>{0==t.code?d.instance.buyWithToken(t.data.amount,t.data.payload,((o,a)=>{0==o&&(y.instance.addBill(t.data.billId,"diamond",e,c.GET_SHOP_DATA),h.instance.showToast("shop.submitSuccess"))})):h.instance.showToast(t?t.msg:"network.error")}))}buyDiamond(t,e,o){i.instance.post(a.SHOP_DIAMOND_BUY,{shopId:t,sign:e}).then((t=>{0==t.code?(h.instance.showRewardPopup(t.data.result,null,o),s.emit(c.CLOSE_SHOP_ITEM_POPUP),m.instance.updateDiamondShop(t.data.diamondShop),l.instance.getPlayerInfo(!1)):h.instance.showToast(t.msg)}))}buyHeroWithWallet(t,e,o){d.instance.isConnected()?this._buyHeroWithWallet(t,e,o):d.instance.connectWallet((()=>{this._buyHeroWithWallet(t,e,o)}))}_buyHeroWithWallet(t,e,o){i.instance.post(a.SHOP_HERO_PREBUY,{shopId:t}).then((t=>{0==t.code?d.instance.buyWithToken(t.data.amount,t.data.payload,((a,n)=>{0==a&&(y.instance.addBill(t.data.billId,"hero"+e,o,c.GET_SHOP_DATA),h.instance.showToast("shop.submitSuccess"))})):h.instance.showToast(t?t.msg:"network.error")}))}clear(){}static get instance(){return this._instance||(this._instance=new m),this._instance}}t("ShopData",m),m._instance=null;t("ShopBuyObj",class{constructor(){this.sid=void 0,this.count=void 0}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/ShopDayItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Util.ts","./ShopData.ts","./ShopDaySubItem.ts","./EventListener.ts","./GameEvent.ts","./LanguageManager.ts","./AdManager.ts","./HttpService.ts","./Api.ts"],(function(t){var e,n,i,o,a,s,r,h,c,l,u,f,p,d,m,D,S,y,b,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,o=t.Label,a=t.RichText,s=t.Node,r=t.Prefab,h=t._decorator,c=t.Component,l=t.instantiate},function(t){u=t.Util},function(t){f=t.ShopData},function(t){p=t.ShopDaySubItem},function(t){d=t.EventListener},function(t){m=t.GameEvent},function(t){D=t.LanguageManager},function(t){S=t.AdManager,y=t.AdType},function(t){b=t.HttpService},function(t){g=t.Api}],execute:function(){var _,P,A,T,E,I,v,L,H,w,R;i._RF.push({},"506acm8PaJAVIQN7NcEX9ZF","ShopDayItem",void 0);const{ccclass:F,property:C}=h;t("ShopDayItem",(_=F("ShopDayItem"),P=C(o),A=C(a),T=C(s),E=C(r),_((L=e((v=class extends c{constructor(){super(...arguments),n(this,"time",L,this),n(this,"dayTimes",H,this),n(this,"content",w,this),n(this,"shopDaySubPrefab",R,this),this._refreshData=null}init(){this._refreshData=f.instance.dailyShop.refresh,this._refreshData&&(this.dayTimes.string="<b><color=#ffffff>"+D.instance.getLang("shop.lefttoday")+`</color><color=#3BFC16>${this._refreshData.limit}</color><color=#ffffff></color></b>`),this.setShopDayContent()}setShopDayContent(){let t=f.instance.dailyShop.goods,e=0;for(e=0;e<t.length;e++){const n=t[e];if(this.content.children[e])this.content.children[e].getComponent(p).init(n);else{let t=l(this.shopDaySubPrefab);t.parent=this.content,t.getComponent(p).init(n)}}for(let t=this.content.children.length-1;t>=e;t--)this.content.children[t].removeFromParent()}onRefreshBtn(){S.instance.showAd(y.SHOP_DAILY_REFRESH,0,((t,e)=>{0==t&&b.instance.post(g.SHOP_DAILY_REFRESH,{sign:e}).then((t=>{0==t.code&&f.instance.updateDailyShop(t.data.dailyShop)}))}))}updateTime(){this._refreshData&&(this._refreshData.countdown<=0&&(f.instance.getShopInfo(),this.unschedule(this.updateTime)),this._refreshData.countdown--,this.time.string=u.timeToString(this._refreshData.countdown))}onEnable(){d.on(m.UPDATE_SHOP_DAILY,this.init,this),this.unschedule(this.updateTime),this.schedule(this.updateTime,1)}onDisable(){d.off(m.UPDATE_SHOP_DAILY,this.init,this),this.unschedule(this.updateTime)}}).prototype,"time",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(v.prototype,"dayTimes",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(v.prototype,"content",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(v.prototype,"shopDaySubPrefab",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=v))||I));i._RF.pop()}}}));

System.register("chunks:///_virtual/ShopDaySubItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./EventListener.ts","./OpenPopupManager.ts","./ResourcesUtil.ts","./SpriteEx.ts","./GameEvent.ts","./ShopData.ts","./ItemModel.ts","./BagData.ts","./LanguageManager.ts","./CoinMode.ts","./Util.ts","./BagHeroData.ts","./AdManager.ts"],(function(t){var e,i,n,o,s,a,r,l,u,c,h,m,g,p,f,d,b,y,I,_,D,L,E,C,w,R;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,o=t.Label,s=t.Node,a=t.Sprite,r=t._decorator,l=t.Component,u=t.UITransform,c=t.Vec3},function(t){h=t.Constants},function(t){m=t.EventListener},function(t){g=t.OpenPopupManager,p=t.LayerType},function(t){f=t.ResourcesUtil},function(t){d=t.SpriteEx},function(t){b=t.GameEvent},function(t){y=t.ShopData},function(t){I=t.ItemType},function(t){_=t.BagData},function(t){D=t.LanguageManager},function(t){L=t.CoinObj},function(t){E=t.Util},function(t){C=t.BagHeroData},function(t){w=t.AdManager,R=t.AdType}],execute:function(){var S,T,v,A,F,G,x,z,P,W,M,O,k,B,q,U,H,N,Y,$,j,K,V,J,Q;n._RF.push({},"a486bSBqYFN2p6sE6rUzfgF","ShopDaySubItem",void 0);const{ccclass:X,property:Z}=r;t("ShopDaySubItem",(S=X("ShopDaySubItem"),T=Z(d),v=Z(o),A=Z(o),F=Z(o),G=Z(o),x=Z(s),z=Z(a),P=Z(d),W=Z(d),M=Z(s),O=Z(s),S((q=e((B=class extends l{constructor(){super(...arguments),i(this,"bg",q,this),i(this,"title",U,this),i(this,"count",H,this),i(this,"fee",N,this),i(this,"discount",Y,this),i(this,"flag",$,this),i(this,"icon",j,this),i(this,"qulity",K,this),i(this,"buyIcon",V,this),i(this,"soldout",J,this),i(this,"mask",Q,this),this._goodItem=null,this._itemCfg=null,this._types=[I.Diamond,I.Energy,I.Gold,I.Ticket,I.TicketBox,I.Food,I.WeaponFragment],this._events=[b.GET_DIAMOND_REWARD,b.GET_ENERGY_REWARD,b.GET_GOLD_REWARD,b.GET_TICKET_REWARD,b.GET_TICKET_REWARD,b.GET_FOOD_REWARD,b.GET_WEAPON_REWARD]}init(t){this._goodItem=t,this._itemCfg=y.instance.getItemCfgById(t.item.itemId),this.mask.active=t.freeLimit>0||t.adLimit>0,this.title.string=D.instance.getLang(this._itemCfg.name),this.qulity.index=this._itemCfg.quality,this.bg.index=0==t.price?0:1;let e=h.itemsPath+this._itemCfg.icon+"/spriteFrame";this._itemCfg.type==I.WeaponFragment?(this.flag.active=!0,e=h.weaponIconPath+_.instance.getWeaponIcon(this._itemCfg.dataId)+"/spriteFrame"):this._itemCfg.type==I.HeroFragment?(this.flag.active=!0,e=h.heroIconPath+C.instance.getHeroIcon(this._itemCfg.dataId)+"/spriteFrame"):this.flag.active=!1,f.geSpriteFrame(e).then((t=>{this.icon.spriteFrame=t;let e=this.icon.getComponent(u).contentSize,i=Math.min(80/e.width,80/e.height);this.icon.node.setScale(i,i)})),this.count.string=`x${t.item.count}`,void 0===this._itemCfg.quality&&(this.qulity.getComponent(a).spriteFrame=null),this.buyIcon.node.active=!0,t.freeLimit>0?(this.buyIcon.index=0,this.buyIcon.node.active=!1,this.fee.string=D.instance.getLang("free")):t.adLimit>0?(this.buyIcon.index=0,this.fee.string=D.instance.getLang("free")):t.buyLimit>0&&"gold"==t.token?(this.buyIcon.index=1,this.fee.string=`${t.price}`):(this.buyIcon.index=2,this.fee.string=`${t.price}`);let i=!0;(t.adLimit>0||t.freeLimit>0||t.buyLimit>0)&&(i=!1),this.soldout.active=i,this.buyIcon.node.parent.active=!i}getTokenIndex(t){return t.freeLimit>0||t.adLimit>0?0:t.buyLimit>0&&"gold"==t.token?1:2}onClickBtn(){let t=!0;(this._goodItem.adLimit>0||this._goodItem.freeLimit>0||this._goodItem.buyLimit>0)&&(t=!1),t?g.instance.showToast("shop.soldout"):this._goodItem.freeLimit>0?y.instance.buyDalilyItem(this._goodItem.id,"",this.showFlyGoldAnim.bind(this)):this._goodItem.adLimit>0?w.instance.showAd(R.SHOP_DAILY,this._goodItem.id,((t,e)=>{0==t&&y.instance.buyDalilyItem(this._goodItem.id,e,this.showFlyGoldAnim.bind(this))})):g.instance.show(h.PopupUI.ShopItemPopup,null,p.TOP,!1,this._goodItem,this.showFlyGoldAnim.bind(this))}showFlyGoldAnim(){let t=this._types.indexOf(this._itemCfg.type);if(t<0)return;let e=this.node.getComponent(u).convertToWorldSpaceAR(new c(0,0,0)),i=new L;i.pos=e,i.num=E.getRandomInt(5,10),m.emit(this._events[t],i)}}).prototype,"bg",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(B.prototype,"title",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(B.prototype,"count",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(B.prototype,"fee",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(B.prototype,"discount",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=e(B.prototype,"flag",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(B.prototype,"icon",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(B.prototype,"qulity",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(B.prototype,"buyIcon",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(B.prototype,"soldout",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(B.prototype,"mask",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=B))||k));n._RF.pop()}}}));

System.register("chunks:///_virtual/ShopDiamondItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ShopData.ts","./ShopDiamondSubItem.ts","./EventListener.ts","./GameEvent.ts","./WalletManager.ts","./OpenPopupManager.ts","./Constants.ts"],(function(t){var n,e,o,i,a,l,s,c,r,p,h,u,b,m,d,f;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){o=t.cclegacy,i=t.Node,a=t.Prefab,l=t.Label,s=t._decorator,c=t.Component,r=t.instantiate},function(t){p=t.ShopData},function(t){h=t.ShopDiamondSubItem},function(t){u=t.EventListener},function(t){b=t.GameEvent},function(t){m=t.WalletManager},function(t){d=t.OpenPopupManager},function(t){f=t.Constants}],execute:function(){var D,g,S,P,I,W,C,E,U,_,w;o._RF.push({},"c9d22s+z8REQ7ZNKuPUT79b","ShopDiamondItem",void 0);const{ccclass:y,property:v}=s;t("ShopDiamondItem",(D=y("ShopDiamondItem"),g=v(i),S=v(a),P=v(l),I=v(l),D((E=n((C=class extends c{constructor(){super(...arguments),e(this,"content",E,this),e(this,"shopDiamondSubPrefab",U,this),e(this,"balance",_,this),e(this,"walletBtn",w,this)}init(){this.setShopDiamondContent(),this.setWalletContent()}setShopDiamondContent(){let t=p.instance.diamondShop;if(0!=t.length)if(this.content.children.length)this.content.children.forEach(((n,e)=>{const o=t[e];n.getComponent(h).init(o,e)}));else for(let n=0;n<t.length;n++){const e=t[n];let o=r(this.shopDiamondSubPrefab);o.parent=this.content,o.getComponent(h).init(e,n)}}setWalletContent(){let t=m.instance.connectUI&&m.instance.connectUI.connected;this.walletBtn.string=t?"Wallet":"Connect",t?m.instance.getTokenBalance((t=>{this.balance.string=Number(Number(t)/10**9).toFixed(2)})):this.balance.string="--"}onWalletBtn(){m.instance.connectUI&&m.instance.connectUI.connected?d.instance.show(f.PopupUI.WalletPopup):m.instance.connectWallet((()=>{this.walletBtn.string="Wallet"}))}onUpdateWallet(){this.setWalletContent()}onEnable(){u.on(b.UPDATE_SHOP_DIAMOND,this.setShopDiamondContent,this),u.on(b.UPDATE_WALLET_INFO,this.onUpdateWallet,this)}onDisable(){u.off(b.UPDATE_SHOP_DIAMOND,this.setShopDiamondContent,this),u.off(b.UPDATE_WALLET_INFO,this.onUpdateWallet,this)}}).prototype,"content",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=n(C.prototype,"shopDiamondSubPrefab",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=n(C.prototype,"balance",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=n(C.prototype,"walletBtn",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=C))||W));o._RF.pop()}}}));

System.register("chunks:///_virtual/ShopDiamondSubItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventListener.ts","./SpriteEx.ts","./Util.ts","./GameEvent.ts","./CoinMode.ts","./LanguageManager.ts","./ShopData.ts","./AdManager.ts"],(function(t){var i,n,e,o,a,s,r,u,c,l,m,d,h,b,p,f,g,y;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){e=t.cclegacy,o=t.Label,a=t.Node,s=t._decorator,r=t.Component,u=t.UITransform,c=t.Vec3},function(t){l=t.EventListener},function(t){m=t.SpriteEx},function(t){d=t.Util},function(t){h=t.GameEvent},function(t){b=t.CoinObj},function(t){p=t.LanguageManager},function(t){f=t.ShopData},function(t){g=t.AdManager,y=t.AdType}],execute:function(){var I,D,v,_,S,w,L,A,M,x,z,E,k,R,C,F,P;e._RF.push({},"d0e64YxAnNM0afPlMwIPeIj","ShopDiamondSubItem",void 0);const{ccclass:N,property:O}=s;t("ShopDiamondSubItem",(I=N("ShopDiamondSubItem"),D=O(o),v=O(o),_=O(o),S=O(o),w=O(m),L=O(m),A=O(a),I((z=i((x=class extends r{constructor(){super(...arguments),n(this,"title",z,this),n(this,"count",E,this),n(this,"fee",k,this),n(this,"bonus",R,this),n(this,"icon",C,this),n(this,"buyIcon",F,this),n(this,"mask",P,this),this._diamondItem=null}init(t,i){this._diamondItem=t,this.title.string=p.instance.getLang(t.name),this.buyIcon.node.active=!0,t.freeLimit>0?(this.buyIcon.node.active=!1,this.fee.string=p.instance.getLang("free"),this.mask.active=!0):t.adLimit>0?(this.buyIcon.index=0,this.fee.string=p.instance.getLang("free"),this.mask.active=!0):(this.buyIcon.index=1,this.fee.string=`${t.price}`,this.mask.active=!1),t.bonus?(this.bonus.node.parent.active=!0,this.bonus.string=`Bonus:${t.bonus}`):this.bonus.node.parent.active=!1,this.count.string=`x${t.item.count}`,this.icon.index=i}onClickBtn(){this._diamondItem.freeLimit>0?f.instance.buyDiamond(this._diamondItem.id,"",this.showFlyDiamondAnim.bind(this)):this._diamondItem.adLimit>0?g.instance.showAd(y.SHOP_DIAMOND,this._diamondItem.id,((t,i)=>{0==t&&f.instance.buyDiamond(this._diamondItem.id,i,this.showFlyDiamondAnim.bind(this))})):f.instance.buyDiamondWithWallet(this._diamondItem.id,this._diamondItem.item.count)}showFlyDiamondAnim(){let t=this.node.getComponent(u).convertToWorldSpaceAR(new c(0,0,0)),i=new b;i.pos=t,i.num=d.getRandomInt(5,10),l.emit(h.GET_DIAMOND_REWARD,i)}}).prototype,"title",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=i(x.prototype,"count",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=i(x.prototype,"fee",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=i(x.prototype,"bonus",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=i(x.prototype,"icon",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=i(x.prototype,"buyIcon",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=i(x.prototype,"mask",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=x))||M));e._RF.pop()}}}));

System.register("chunks:///_virtual/ShopEnergyPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PlayerData.ts","./OpenPopupManager.ts","./Constants.ts","./LanguageManager.ts","./HttpService.ts","./Api.ts","./AdManager.ts","./RewardModel.ts","./ItemModel.ts"],(function(e){var t,n,i,o,r,a,s,u,p,l,c,b,g,y,h,d,m,f,w;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,o=e.Sprite,r=e.Label,a=e._decorator,s=e.Component,u=e.UITransform,p=e.Vec3},function(e){l=e.PlayerData},function(e){c=e.OpenPopupManager},function(e){b=e.Constants},function(e){g=e.LanguageManager},function(e){y=e.HttpService},function(e){h=e.Api},function(e){d=e.AdManager,m=e.AdType},function(e){f=e.RewardObj},function(e){w=e.ItemIdType}],execute:function(){var P,E,A,L,N,R,S,I,O,z,M,T,v,_,j,Y,C;i._RF.push({},"844f0/uYzRAkKEbbPrU4gP3","ShopEnergyPopup",void 0);const{ccclass:D,property:H}=a;e("ShopEnergyPopup",(P=D("ShopEnergyPopup"),E=H(o),A=H(r),L=H(r),N=H(r),R=H(r),S=H(r),I=H(r),P((M=t((z=class extends s{constructor(){super(...arguments),n(this,"icon",M,this),n(this,"buyNumber",T,this),n(this,"buyAmount",v,this),n(this,"buyLimit",_,this),n(this,"adNumber",j,this),n(this,"adAmount",Y,this),n(this,"adLimit",C,this)}show(){this.setEnergyInfo()}setEnergyInfo(){let e=l.instance.energyObj;this.buyNumber.string="x"+e.buyNumber,this.buyLimit.string=g.instance.getLang("shop.lefttoday")+e.buyLimit,this.buyAmount.string=e.price.toString(),this.adNumber.string="x"+e.adNumber,this.adLimit.string=g.instance.getLang("shop.lefttoday")+e.adLimit}hidePopup(){c.instance.hide(b.PopupUI.ShopEnergyPopup)}onBuyEnergy(){let e=l.instance.energyObj;e.buyLimit<=0?c.instance.showToast("shop.usedup"):y.instance.post(h.SHOP_ENERGY_BUY).then((t=>{if(t&&0==t.code){l.instance.energyObj=t.data.energyInfo;let n=[],i=new f;i.count=e.buyNumber,i.itemId=w.Energy,n.push(i),c.instance.showRewardPopup(n,null,(()=>{let e=this.buyNumber.node.getComponent(u).convertToWorldSpaceAR(new p(0,0,0));c.instance.showRewardAnimPopup(e,n)})),this.setEnergyInfo()}else c.instance.showToast(t.msg)}))}onWatchEnergy(){let e=l.instance.energyObj;e.adLimit<=0?c.instance.showToast("shop.usedup"):d.instance.showAd(m.ENERGY,0,((t,n)=>{0==t&&y.instance.post(h.SHOP_ENERGY_BUY,{sign:n}).then((t=>{if(0==t.code){let n=[],i=new f;i.count=e.adNumber,i.itemId=w.Energy,n.push(i),c.instance.showRewardPopup(n,null,(()=>{let e=this.adNumber.node.getComponent(u).convertToWorldSpaceAR(new p(0,0,0));c.instance.showRewardAnimPopup(e,n)})),l.instance.energyObj=t.data.energyInfo,this.setEnergyInfo()}else c.instance.showToast(t.msg)}))}))}}).prototype,"icon",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=t(z.prototype,"buyNumber",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=t(z.prototype,"buyAmount",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(z.prototype,"buyLimit",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=t(z.prototype,"adNumber",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=t(z.prototype,"adAmount",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(z.prototype,"adLimit",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=z))||O));i._RF.pop()}}}));

System.register("chunks:///_virtual/ShopGoldItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ShopData.ts","./ShopGoldSubItem.ts","./EventListener.ts","./GameEvent.ts"],(function(t){var e,n,o,i,r,s,l,c,a,h,p,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){o=t.cclegacy,i=t.Node,r=t.Prefab,s=t._decorator,l=t.Component,c=t.instantiate},function(t){a=t.ShopData},function(t){h=t.ShopGoldSubItem},function(t){p=t.EventListener},function(t){u=t.GameEvent}],execute:function(){var f,d,b,S,G,m,g;o._RF.push({},"c755a3qYBNHNJcLkdoWVbWz","ShopGoldItem",void 0);const{ccclass:D,property:P}=s;t("ShopGoldItem",(f=D("ShopGoldItem"),d=P(i),b=P(r),f((m=e((G=class extends l{constructor(){super(...arguments),n(this,"content",m,this),n(this,"shopGoldSubPrefab",g,this)}init(){this.setShopGoldContent()}setShopGoldContent(){let t=a.instance.goldShop;if(this.content.children.length)this.content.children.forEach(((e,n)=>{const o=t[n];e.getComponent(h).init(o,n)}));else for(let e=0;e<t.length;e++){const n=t[e];let o=c(this.shopGoldSubPrefab);o.parent=this.content,o.getComponent(h).init(n,e)}}onEnable(){p.on(u.UPDATE_SHOP_GOLD,this.init,this)}onDisable(){p.off(u.UPDATE_SHOP_GOLD,this.init,this)}}).prototype,"content",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=e(G.prototype,"shopGoldSubPrefab",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=G))||S));o._RF.pop()}}}));

System.register("chunks:///_virtual/ShopGoldSubItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./EventListener.ts","./OpenPopupManager.ts","./SpriteEx.ts","./Util.ts","./GameEvent.ts","./CoinMode.ts","./LanguageManager.ts"],(function(t){var e,n,i,o,r,s,u,l,a,c,p,h,f,m,b,g,d,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,o=t.Label,r=t.Node,s=t._decorator,u=t.Component,l=t.UITransform,a=t.Vec3},function(t){c=t.Constants},function(t){p=t.EventListener},function(t){h=t.OpenPopupManager,f=t.LayerType},function(t){m=t.SpriteEx},function(t){b=t.Util},function(t){g=t.GameEvent},function(t){d=t.CoinObj},function(t){y=t.LanguageManager}],execute:function(){var I,S,v,w,L,G,P,_,z,E,x,C,D,M,R;i._RF.push({},"9ca90VsPz5I0JiIDB0FIPJB","ShopGoldSubItem",void 0);const{ccclass:k,property:F}=s;t("ShopGoldSubItem",(I=k("ShopGoldSubItem"),S=F(o),v=F(o),w=F(o),L=F(m),G=F(m),P=F(r),I((E=e((z=class extends u{constructor(){super(...arguments),n(this,"title",E,this),n(this,"count",x,this),n(this,"fee",C,this),n(this,"icon",D,this),n(this,"buyIcon",M,this),n(this,"mask",R,this),this._goldItem=null,this.PopupLayer=void 0}init(t,e){this._goldItem=t,this.title.string=y.instance.getLang(t.name),this.buyIcon.index=2,this.fee.string=t.price>0?`${t.price}`:y.instance.getLang("free"),this.count.string=`x${t.item.count}`,this.icon.index=e,this.mask.active=!(t.price>0)}onClickBtn(){h.instance.show(c.PopupUI.ShopItemPopup,null,f.TOP,!1,this._goldItem,this.showFlyGoldAnim.bind(this))}showFlyGoldAnim(){let t=this.node.getComponent(l).convertToWorldSpaceAR(new a(0,0,0)),e=new d;e.pos=t,e.num=b.getRandomInt(5,10),p.emit(g.GET_GOLD_REWARD,e)}}).prototype,"title",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(z.prototype,"count",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(z.prototype,"fee",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(z.prototype,"icon",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(z.prototype,"buyIcon",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(z.prototype,"mask",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=z))||_));i._RF.pop()}}}));

System.register("chunks:///_virtual/ShopHeroItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ShopData.ts","./EventListener.ts","./GameEvent.ts","./ShopHeroSubItem.ts"],(function(t){var e,n,o,r,i,s,c,h,a,p,l,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){o=t.cclegacy,r=t.Node,i=t.Prefab,s=t._decorator,c=t.Component,h=t.instantiate},function(t){a=t.ShopData},function(t){p=t.EventListener},function(t){l=t.GameEvent},function(t){u=t.ShopHeroSubItem}],execute:function(){var f,S,b,H,m,g,E;o._RF.push({},"76027Izn51Gl5LYy1ZsrU+a","ShopHeroItem",void 0);const{ccclass:P,property:d}=s;t("ShopHeroItem",(f=P("ShopHeroItem"),S=d(r),b=d(i),f((g=e((m=class extends c{constructor(){super(...arguments),n(this,"content",g,this),n(this,"shopHeroSubPrefab",E,this)}init(){this.setShopHeroContent()}setShopHeroContent(){let t=a.instance.heroShop;if(0!=t.length)if(this.content.children.length)this.content.children.forEach(((e,n)=>{const o=t[n];e.getComponent(u).init(o,n)}));else for(let e=0;e<t.length;e++){const n=t[e];let o=h(this.shopHeroSubPrefab);o.parent=this.content,o.getComponent(u).init(n,e)}}onEnable(){p.on(l.UPDATE_SHOP_HERO,this.setShopHeroContent,this)}onDisable(){p.off(l.UPDATE_SHOP_HERO,this.setShopHeroContent,this)}}).prototype,"content",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(m.prototype,"shopHeroSubPrefab",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=m))||H));o._RF.pop()}}}));

System.register("chunks:///_virtual/ShopHeroSubItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SpriteEx.ts","./LanguageManager.ts","./ShopData.ts"],(function(e){var t,i,n,r,o,u,a,c,l,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,r=e.Label,o=e.Node,u=e._decorator,a=e.Component},function(e){c=e.SpriteEx},function(e){l=e.LanguageManager},function(e){s=e.ShopData}],execute:function(){var h,p,b,f,g,m,y,S,d,I,_,x,z,L,j;n._RF.push({},"42860IhqWRDnK2bbkEcnn+A","ShopHeroSubItem",void 0);const{ccclass:k,property:v}=u;e("ShopHeroSubItem",(h=k("ShopHeroSubItem"),p=v(r),b=v(r),f=v(r),g=v(c),m=v(c),y=v(o),h((I=t((d=class extends a{constructor(){super(...arguments),i(this,"title",I,this),i(this,"count",_,this),i(this,"fee",x,this),i(this,"icon",z,this),i(this,"buyIcon",L,this),i(this,"mask",j,this),this._heroObj=null,this.PopupLayer=void 0}init(e,t){this._heroObj=e,this.title.string=l.instance.getLang(e.name),this.buyIcon.index=2,this.fee.string=e.price>0?`${e.price}`:l.instance.getLang("free"),this.count.string=`x${e.item.count}`,20020==e.item.itemId&&(this.icon.index=0),this.mask.active=!(e.price>0)}onClickBtn(){s.instance.buyHeroWithWallet(this._heroObj.id,this._heroObj.item.itemId,this._heroObj.item.count)}}).prototype,"title",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(d.prototype,"count",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(d.prototype,"fee",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(d.prototype,"icon",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(d.prototype,"buyIcon",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(d.prototype,"mask",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=d))||S));n._RF.pop()}}}));

System.register("chunks:///_virtual/ShopItemPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./EventListener.ts","./OpenPopupManager.ts","./ResourcesUtil.ts","./SpriteEx.ts","./GameEvent.ts","./ShopData.ts","./HttpService.ts","./Api.ts","./ItemModel.ts","./BagData.ts","./PlayerData.ts","./LanguageManager.ts","./BagHeroData.ts"],(function(t){var e,i,n,o,a,s,r,l,c,u,p,h,g,f,m,d,_,b,y,P,I,C,S;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,o=t.Label,a=t.Node,s=t.Sprite,r=t._decorator,l=t.Component,c=t.UITransform},function(t){u=t.Constants},function(t){p=t.EventListener},function(t){h=t.OpenPopupManager},function(t){g=t.ResourcesUtil},function(t){f=t.SpriteEx},function(t){m=t.GameEvent},function(t){d=t.ShopData},function(t){_=t.HttpService},function(t){b=t.Api},function(t){y=t.ItemType},function(t){P=t.BagData},function(t){I=t.PlayerData},function(t){C=t.LanguageManager},function(t){S=t.BagHeroData}],execute:function(){var w,D,B,E,H,O,L,v,z,F,M,U,k,x,R,T,q,G,A;n._RF.push({},"3d838+GhuZPYKiDIll/Hhzd","ShopItemPopup",void 0);const{ccclass:W,property:Y}=r;t("ShopItemPopup",(w=W("ShopItemPopup"),D=Y(o),B=Y(o),E=Y(o),H=Y(o),O=Y(a),L=Y(s),v=Y(f),z=Y(f),w((U=e((M=class extends l{constructor(){super(...arguments),i(this,"title",U,this),i(this,"count",k,this),i(this,"fee",x,this),i(this,"desc",R,this),i(this,"flag",T,this),i(this,"icon",q,this),i(this,"qulity",G,this),i(this,"buyIcon",A,this),this._goodItem=null,this._itemCfg=null,this._callback=null,this._tokens=["ad","gold","diamond","ton"]}show(t,e){this._itemCfg=d.instance.getItemCfgById(t.item.itemId),this._callback=e,this._goodItem=t,this.title.string=C.instance.getLang(this._itemCfg.name),this.count.string=`${t.item.count}`,this.qulity.index=this._itemCfg.quality?this._itemCfg.quality:0,this.buyIcon.index=this._tokens.indexOf(t.token),this.fee.string=t.price?`${t.price}`:C.instance.getLang("free"),this.flag.active=this._itemCfg.type==y.WeaponFragment||this._itemCfg.type==y.HeroFragment,this.desc.string=C.instance.getLang(this._itemCfg.desc);let i="";i=this._itemCfg.type==y.WeaponFragment?u.weaponIconPath+P.instance.getWeaponIcon(this._itemCfg.dataId)+"/spriteFrame":this._itemCfg.type==y.HeroFragment?u.heroIconPath+S.instance.getHeroIcon(this._itemCfg.dataId)+"/spriteFrame":u.itemsPath+this._itemCfg.icon+"/spriteFrame",g.geSpriteFrame(i).then((t=>{this.icon.spriteFrame=t;let e=this.icon.getComponent(c).contentSize,i=Math.min(80/e.width,80/e.height);this.icon.node.setScale(i,i)}))}onCloseBtn(){h.instance.hide(u.PopupUI.ShopItemPopup)}onBuyBtn(){"gold"==this._itemCfg.type?_.instance.post(b.SHOP_GOLD_BUY,{goldId:this._goodItem.id}).then((t=>{0==t.code?(this.showRewardPopup(t.data.result),d.instance.updateGoldShop(t.data.goldShop),I.instance.getPlayerInfo()):h.instance.showToast(t.msg)})):d.instance.buyDalilyItem(this._goodItem.id,"",this._callback)}showRewardPopup(t){this.onCloseBtn(),h.instance.showRewardPopup(t,null,this._callback),p.emit(m.UPDATE_SHOP_POPUP_ITEMS,this._goodItem.id)}onEnable(){p.on(m.CLOSE_SHOP_ITEM_POPUP,this.onCloseBtn,this)}onDisable(){p.off(m.CLOSE_SHOP_ITEM_POPUP,this.onCloseBtn,this)}}).prototype,"title",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(M.prototype,"count",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(M.prototype,"fee",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(M.prototype,"desc",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(M.prototype,"flag",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(M.prototype,"icon",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(M.prototype,"qulity",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(M.prototype,"buyIcon",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=M))||F));n._RF.pop()}}}));

System.register("chunks:///_virtual/ShopModel.ts",["cc"],(function(i){var o;return{setters:[function(i){o=i.cclegacy}],execute:function(){o._RF.push({},"a5ce7us23JJ3J56AkrGJjGd","ShopModel",void 0);i("ShopChestLevelCfg",class{constructor(){this.ClassName="ShopChestLevel",this.Id=void 0,this.level=void 0,this.exp=void 0,this.common=void 0,this.rare=void 0}});i("ShopInfoResult",class{constructor(){this.boxShop=void 0,this.dailyShop=void 0,this.goldShop=void 0,this.diamondShop=void 0,this.heroShop=void 0,this.chestShop=void 0}});i("ShopBuyBoxResult",class{constructor(){this.boxShop=void 0,this.result=void 0}});i("ShopBuyChestResult",class{constructor(){this.chestShop=void 0,this.result=void 0}});i("DiamondPreBuyResult",class{constructor(){this.amount=void 0,this.billId=void 0,this.payload=void 0,this.toAddress=void 0,this.tokenAddress=void 0}});i("ChestShopModel",class{constructor(){this.materialBox=void 0}});i("BoxShopModel",class{constructor(){this.exp=0,this.expMax=100,this.level=1,this.shopBoxes=void 0}});i("BoxItemModel",class{constructor(){this.id=void 0,this.freeCountdown=void 0,this.items=void 0,this.price=void 0,this.token=void 0,this.type=void 0,this.adLimit=void 0,this.freeLimit=void 0,this.buyLimit=void 0,this.key=void 0}});i("DailyShopModel",class{constructor(){this.goods=[],this.refresh=void 0}});i("GoodItemModel",class{constructor(){this.id=void 0,this.item=void 0,this.price=void 0,this.token=void 0,this.name=void 0,this.freeLimit=void 0,this.adLimit=void 0,this.buyLimit=void 0,this.bonus=void 0}});i("DailyRefreshModel",class{constructor(){this.countdown=0,this.limit=20,this.price=10}}),o._RF.pop()}}}));

System.register("chunks:///_virtual/ShopPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./ResourcesUtil.ts","./ShopData.ts","./EventListener.ts","./GameEvent.ts","./PlayerData.ts"],(function(t){var e,o,n,s,i,a,p,r,l,c,h,u,f,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.initializerDefineProperty},function(t){n=t.cclegacy,s=t.Node,i=t.ScrollView,a=t._decorator,p=t.Component,r=t.instantiate},function(t){l=t.Constants},function(t){c=t.ResourcesUtil},function(t){h=t.ShopData},function(t){u=t.EventListener},function(t){f=t.GameEvent},function(t){g=t.PlayerData}],execute:function(){var D,S,P,_,m,b,y;n._RF.push({},"a553f0vbv9AQoJWK3AQjT9x","ShopPopup",void 0);const{ccclass:v,property:d}=a;t("ShopPopup",(D=v("ShopPopup"),S=d(s),P=d(i),D((b=e((m=class extends p{constructor(){super(...arguments),o(this,"content",b,this),o(this,"scrollView",y,this),this._flag=!1,this._popup=["shopDayItem","shopBoxItem","shopChestItem","shopDiamondItem","shopHeroItem"]}show(){h.instance.getShopInfo(),this.setContentList()}getShopData(){h.instance.getShopInfo(),g.instance.getPlayerInfo()}onEnable(){u.on(f.GET_SHOP_DATA,this.getShopData,this)}onDisable(){u.off(f.GET_SHOP_DATA,this.getShopData,this)}async setContentList(){if(!this._flag&&!this.content.children.length){this._flag=!0;for(let t=0;t<this._popup.length;t++){const e=this._popup[t];let o=l.shopPreabPath+e;await c.getPrefab(o).then((t=>{let o=r(t);o.parent=this.content;let n=e[0].toUpperCase()+e.slice(1);o.getComponent(n).init()}))}}this.scrollView.scrollToTop()}}).prototype,"content",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=e(m.prototype,"scrollView",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=m))||_));n._RF.pop()}}}));

System.register("chunks:///_virtual/ShopSuccessPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./OpenPopupManager.ts","./GameController.ts","./SpriteEx.ts","./LanguageManager.ts"],(function(t){var n,e,i,o,r,s,u,c,a,p,l,h;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){i=t.cclegacy,o=t.ParticleSystem2D,r=t.Label,s=t._decorator,u=t.Component},function(t){c=t.Constants},function(t){a=t.OpenPopupManager},function(t){p=t.default},function(t){l=t.SpriteEx},function(t){h=t.LanguageManager}],execute:function(){var g,f,m,S,d,b,y,C,P,_,w;i._RF.push({},"7323eH+zmNNTI0sEXjaPSxg","ShopSuccessPopup",void 0);const{ccclass:x,property:z}=s;t("ShopSuccessPopup",(g=x("ShopSuccessPopup"),f=z(o),m=z(l),S=z(r),d=z(r),g((C=n((y=class extends u{constructor(){super(...arguments),e(this,"rewardAnim",C,this),e(this,"icon",P,this),e(this,"title",_,this),e(this,"count",w,this),this._diamondCount=0,this._coinCount=0,this._energyCount=0}show(t,n){this._diamondCount=0,this._coinCount=0,this._energyCount=0,this.setContent(t),this.rewardAnim.resetSystem()}async setContent(t){this.count.string=t.count.toString(),this.title.string=h.instance.getLang(t.name),this.icon.index=t.icon}onCloseBtn(){p.resume(),a.instance.hide(c.PopupUI.ShopSuccessPopup)}}).prototype,"rewardAnim",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=n(y.prototype,"icon",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=n(y.prototype,"title",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=n(y.prototype,"count",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=y))||b));i._RF.pop()}}}));

System.register("chunks:///_virtual/SignInItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./QuestData.ts","./HttpService.ts","./Api.ts","./OpenPopupManager.ts","./SignInSubItem.ts","./RewardChestItem.ts","./ChestModel.ts","./GameEvent.ts","./EventListener.ts","./PlayerData.ts","./AdManager.ts"],(function(e){var t,i,n,s,a,r,o,l,c,u,h,p,g,d,m,b,f,I,w,y,S,v,D,L,P;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,s=e.Node,a=e.Label,r=e.ProgressBar,o=e.Button,l=e.Prefab,c=e._decorator,u=e.Component,h=e.instantiate,p=e.UITransform,g=e.Vec3},function(e){d=e.QuestData},function(e){m=e.HttpService},function(e){b=e.Api},function(e){f=e.OpenPopupManager},function(e){I=e.SignInSubItem},function(e){w=e.RewardChestItem},function(e){y=e.ChestAnim},function(e){S=e.GameEvent},function(e){v=e.EventListener},function(e){D=e.PlayerData},function(e){L=e.AdManager,P=e.AdType}],execute:function(){var C,A,E,T,R,_,k,z,B,U,x,M,N,G,O,Q,H;n._RF.push({},"b5b2d6qBSJB7LDJDN/u17mb","SignInItem",void 0);const{ccclass:F,property:J}=c;e("SignInItem",(C=F("SignInItem"),A=J(s),E=J(s),T=J(a),R=J(r),_=J(o),k=J(l),z=J(l),C((x=t((U=class extends u{constructor(){super(...arguments),i(this,"rewardList",x,this),i(this,"boxList",M,this),i(this,"checkInTime",N,this),i(this,"progress",G,this),i(this,"checkInBtn",O,this),i(this,"rewardItem",Q,this),i(this,"siginItem",H,this)}init(){this.setContent()}setContent(){let e=0,t=d.instance.signInfo;null!=t&&(e=t.cumulativeDays==t.cumulativeRewards[t.cumulativeRewards.length-1].day?1:t.cumulativeDays%10/10,this.checkInTime.string=t.cumulativeDays.toString(),this.progress.progress=e,this.checkInBtn.interactable=!t.isSign,t.signRewards.forEach(((e,i)=>{if(this.rewardList.children[i])this.rewardList.children[i].getComponent(I).init(e,i,t.signDay,t.isSign);else{let n=h(this.siginItem);n.getComponent(I).init(e,i,t.signDay,t.isSign),n.parent=this.rewardList}})),t.cumulativeRewards.forEach(((e,i)=>{let n=y.Received;if(e.draw||(n=t.cumulativeDays<e.day?y.Unavailable:y.Available),this.boxList.children[i])this.boxList.children[i].getComponent(w).init(e.rewards,e.day,n,"sign");else{let t=h(this.rewardItem);t.getComponent(w).init(e.rewards,e.day,n,"sign"),t.parent=this.boxList}})))}onSiginIn(){L.instance.showAd(P.SIGNIN,0,((e,t)=>{0==e&&m.instance.post(b.EVENT_SIGN_CLAIM,{sign:t}).then((e=>{0==e.code?(f.instance.showRewardPopup(e.data.rewards,null,(t=>{if(t){let t=0,i=d.instance.signInfo;for(let e=0;e<7;e++)if(!i.isSign&&e==i.signDay){e+=1;break}if(this.rewardList.children[t]){let i=this.rewardList.children[t].getComponent(p).convertToWorldSpaceAR(new g(0,0,0));f.instance.showRewardAnimPopup(i,e.data.rewards)}}})),d.instance.signInfo=e.data.signInfo,this.setContent(),D.instance.getPlayerInfo(!1)):f.instance.showToast(e.msg)})).catch((e=>{f.instance.showToast("network.error")}))}))}onEnable(){v.on(S.UPDATE_DAILY_QUEST_POPUP,this.setContent,this)}onDisable(){v.off(S.UPDATE_DAILY_QUEST_POPUP,this.setContent,this)}}).prototype,"rewardList",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=t(U.prototype,"boxList",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=t(U.prototype,"checkInTime",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=t(U.prototype,"progress",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=t(U.prototype,"checkInBtn",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=t(U.prototype,"rewardItem",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=t(U.prototype,"siginItem",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=U))||B));n._RF.pop()}}}));

System.register("chunks:///_virtual/SignInSubItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RewardItem.ts","./LanguageManager.ts","./SpriteEx.ts"],(function(e){var t,i,r,n,a,o,s,l,c,u,p,d,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){r=e.cclegacy,n=e.Label,a=e.Node,o=e.Prefab,s=e._decorator,l=e.Component,c=e.UITransform,u=e.instantiate},function(e){p=e.RewardItem},function(e){d=e.LanguageManager},function(e){h=e.SpriteEx}],execute:function(){var g,b,m,w,f,y,I,L,S,v,z,k,C,x,F,R,D;r._RF.push({},"19e25PVjZBNFoFr/5cLRDgF","SignInSubItem",void 0);const{ccclass:P,property:_}=s;e("SignInSubItem",(g=P("SignInSubItem"),b=_(n),m=_(a),w=_(a),f=_(a),y=_(o),I=_(a),L=_(a),g((z=t((v=class extends l{constructor(){super(...arguments),i(this,"day",z,this),i(this,"mask",k,this),i(this,"redpoint",C,this),i(this,"rewardList",x,this),i(this,"reward",F,this),i(this,"bg",R,this),i(this,"checked",D,this)}init(e,t,i,r){if(this.day.string=d.instance.getLang("day",[t+1]),this.mask.active=t+1<=i,this.redpoint.active=!r&&t==i,this.checked.active=!r&&t==i,this.rewardList.removeAllChildren(),6==t)this.node.getComponent(c).width=560,this.node.getComponent(h).index=1,this.bg.active=!0,e.rewards.forEach(((e,t)=>{let i=u(this.reward);i.getComponent(p).init(e),i.parent=this.rewardList}));else{this.node.getComponent(h).index=0;let t=u(this.reward);t.getComponent(p).init(e.rewards[0]),t.parent=this.rewardList}}}).prototype,"day",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(v.prototype,"mask",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(v.prototype,"redpoint",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=t(v.prototype,"rewardList",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t(v.prototype,"reward",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(v.prototype,"bg",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(v.prototype,"checked",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=v))||S));r._RF.pop()}}}));

System.register("chunks:///_virtual/SkillBulletBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PoolManager.ts","./BaseComponent.ts","./EventListener.ts","./GameEvent.ts","./Util.ts","./GameDefine.ts","./SkillModel.ts","./SkillData.ts","./MonsterData.ts","./SkillUpgradeData.ts","./AudioManager.ts"],(function(e){var t,l,i,s,n,o,h,a,r,u,d,g,c,b,k,m,T,O,B,_,p,y,E,S,j,v,f,M,A,R,x;return{setters:[function(e){t=e.applyDecoratedDescriptor,l=e.initializerDefineProperty},function(e){i=e.cclegacy,s=e.Node,n=e._decorator,o=e.Vec3,h=e.v2,a=e.v3,r=e.Animation,u=e.CircleCollider2D,d=e.tween,g=e.Vec2,c=e.misc,b=e.Rect,k=e.UITransform,m=e.bezier},function(e){T=e.PoolManager},function(e){O=e.default},function(e){B=e.EventListener},function(e){_=e.GameEvent},function(e){p=e.Util},function(e){y=e.GameDefine},function(e){E=e.SkillBulletType,S=e.BulletMoveType,j=e.TargetType,v=e.SkillObj,f=e.SkillBulletObj},function(e){M=e.SkillData},function(e){A=e.MonsterData},function(e){R=e.SkillUpgradeData},function(e){x=e.AudioManager}],execute:function(){var C,P,L,D,w;i._RF.push({},"8f7c12DY8NE1LdJCAb4kT1q","SkillBulletBase",void 0);const{ccclass:I,property:N}=n;e("SkillBulletBase",(C=I("SkillBulletBase"),P=N(s),C((w=t((D=class extends O{constructor(){super(...arguments),l(this,"icon",w,this),this.skillBulletObj=null,this.initStatus=!1,this.bulletId=101,this.during=10,this.cd=0,this.damageR=30,this.damageInterval=void 0,this.damageTimes=void 0,this.isCollider=void 0,this.LoopCount=0,this.moveSpeed=1500,this.initSpeed=1500,this.isEasing=!1,this.scale=1,this.bulletMove=[],this._dir=new o,this._screenTriggleNumber=0,this.curPos=new o,this.targetPos=new o,this.quadBoundBox=null,this.boundBox=null,this._skillBulletKey="",this.type=0,this._minY=5,this._maxY=300,this._minX=0,this._maxX=0,this._playTime=1}initSkillBullet(e,t){void 0===t&&(t=0),this.type=this.skillBulletObj.skillObj.type;let l=this.node.getPosition(),i=new o;this.targetPos=e.clone(),o.subtract(i,e,l);let s=p.vector_to_angle(h(i.x,i.y)),n=p.angle_to_vector(s+t);i.set(n.x,n.y),this._dir=i.normalize(),this.isEasing=!1,this.curPos=this.node.getPosition(),this.scale=this.skillBulletObj.skillObj.bulletScale/100,this.setSkillSize(),this.during=this.skillBulletObj.skillObj.during*(100+this.skillBulletObj.skillObj.duringPer)/100,this.moveSpeed=this.getSkillMoveSpeedByType(),this.initSpeed=this.moveSpeed,this.bulletMove=this.skillBulletObj.skillObj.bulletMove,this.damageTimes=this.skillBulletObj.skillObj.damageNum,this.damageInterval=0,this.isCollider=!0,this.LoopCount=0,this.bulletId=this.skillBulletObj.skillObj.Id,this._skillBulletKey="skillBullet"+this.bulletId+Math.random().toString().substring(2,6)+Math.random().toString().substring(2,12),this.setSkillBulletBoundBox(),this.setSkillBulletAnim(),this.initStatus=!0}setSkillSize(){this.node.setScale(a(this.scale,this.scale,this.scale))}setSkillBulletAnim(){let e=this.icon.getComponent(r);e.clips.length>0&&(e.on(r.EventType.LASTFRAME,this.onLastPlay,this),e.play("effect"))}onLastPlay(){0==this.skillBulletObj.skillObj.during&&this.clear()}setSkillBulletBoundBox(){this.boundBox=this.node.getComponent(u),this.boundBox.radius=this.skillBulletObj.skillObj.colliderRadius}easingSpeed(e,t){if(this.isEasing){class t{constructor(){this.t=void 0}}let l=new t;l.t=0,d(l).to(e,{t:1},{onUpdate:(e,t)=>{const l=h(0,0),i=h(0,.4),s=h(.2,1),n=h(1,1),o=(l.x,i.x,s.x,n.x,l.y*(1-t)*(1-t)*(1-t)+3*i.y*t*(1-t)*(1-t)+3*s.y*t*t*(1-t)+n.y*t*t*t);this.moveSpeed=this.initSpeed+500*o}}).start()}}setBulletMove(e){if(this.skillBulletObj.skillObj.bulletSpeed>0){let t=this.node.getPosition(),l=a(this._dir.x,this._dir.y,0).multiply(a(this.moveSpeed*e,this.moveSpeed*e,0)),i=t.add(l);this.node.setPosition(i),this.curPos=i,this.setBulletAngle(this.skillBulletObj.skillObj.bulletType)}else{let e=a(this.targetPos.x,this.targetPos.y+90,0);this.node.setPosition(e),this.boundBox=this.node.getComponent(u),this.boundBox.offset=new g(Number(0),Number(-90))}}setBulletAngle(e){switch(e){case E.SKILL_BULLET_LINE:let e=new g(this._dir.x,this._dir.y).signAngle(new g(0,1)),t=c.radiansToDegrees(e);this.node.angle=-t;break;case E.SKILL_BULLET_LINE_ROTATION:case E.SKILL_BULLET_PARABOLA:this.node.angle=this.node.angle-20}}playBulletTween(e){this.node.eulerAngles=new o(0,0,0);let t=this.node,l=t.position,i=t.eulerAngles,s=d(l);this._minY=l.y+(e.y-l.y)/2+100,this._maxY=l.y+(e.y-l.y)/2+100,this._maxX=l.x+(e.x-l.x)/2+100,this._minX=l.x+(e.x-l.x)/2+100;const n=this._minY,h=this._maxY,a=this._minX,r=this._maxX;s.parallel(d().to(this._playTime,{x:e.x},{progress:function(e,t,l,i){return m(e,a,r,t,i)},easing:"smooth",onUpdate:()=>{t.setPosition(l),this.curPos=l}}),d().to(this._playTime,{y:e.y},{progress:function(e,t,l,i){return m(e,n,h,t,i)},easing:"smooth",onUpdate:()=>{t.setPosition(l),this.curPos=l}})).call((()=>{})).start(),d(i).to(this._playTime,{z:-1440},{onUpdate:()=>{t.eulerAngles=i}}).start()}updateSkillBulletScreen(e){let t=new b(-y.viewWidth/2,-y.viewHeight/2,y.viewWidth,y.viewHeight),l=this.curPos,i=this.skillBulletObj.releaseTimes,s=this.bulletMove&&0!=this.bulletMove.length?this.bulletMove[i%this.bulletMove.length]:S.MOVE_NORMAL;if(s==S.MOVE_LIMIT_EDGE_REBOUND&&this._screenTriggleNumber>=this.bulletMove.length&&!t.contains(h(l.x,l.y)))this.clear();else if(s==S.MOVE_NORMAL){if(!t.contains(h(l.x,l.y)))return void this.clear()}else s!=S.MOVE_LIMIT_EDGE_REBOUND&&s!=S.MOVE_TARGET_EDGE_REBOUND&&s!=S.MOVE_BACK||this.setScreenTriggleChange(s)}updateSkillDamageInterval(e){this.skillBulletObj.skillObj.damageInterval&&(this.damageInterval-=e,this.isCollider=!1,this.damageInterval<=0&&(this.isCollider=!0,this.damageInterval=this.skillBulletObj.skillObj.damageInterval))}insertRectCircleObj(){if(this.initStatus)switch(this.type){case 10:break;default:B.emit(_.INSERT_QUARD_TREE_RECT_CIRCLE,this._skillBulletKey,this,this.quadBoundBox,1)}}onAttacked(){}colliderEffect(e){if(e.node.parent&&this.skillBulletObj.skillObj.hitBack>0){let t=[[2,this.skillBulletObj.skillObj.hitBack,.2]];e.setMonsterHurtMoveEffect(t,this._dir.clone(),this.curPos)}}setScreenTriggleChange(e){if(this.curPos.x>y.viewWidth/2||this.curPos.x<-y.viewWidth/2||this.curPos.y>y.viewHeight/2||this.curPos.y<-y.viewHeight/2){if(e==S.MOVE_LIMIT_EDGE_REBOUND||e==S.MOVE_TARGET_EDGE_REBOUND){let e=0,t=0;this.curPos.x>y.viewWidth/2?(e=1,t=0):this.curPos.x<-y.viewWidth/2?(e=-1,t=0):this.curPos.y>y.viewHeight/2?(e=0,t=1):this.curPos.y<=-y.viewHeight/2&&(e=0,t=-1);let l=new o(e,t,0);this._dir=this._dir.subtract(l.multiplyScalar(2*o.dot(this._dir,l)))}else if(e==S.MOVE_BACK&&0==this._screenTriggleNumber){let e=new o(this._dir.x,this._dir.y,this._dir.z);this._dir=e.negative()}this._screenTriggleNumber++}}reflect(e,t){return e.subtract(t.multiplyScalar(2*o.dot(e,t)))}setMoveReflect(e){let t=this.node.getPosition().subtract(e).normalize();this._dir=this._dir.subtract(t.multiplyScalar(2*o.dot(this._dir,t))),this.damageTimes=1}triggleClearByDuring(e){0!=this.during&&(this.during-=e,this.during<=0&&this.clear())}triggleSkillBySkillId(){}colliderTriggleSkill(e,t,l){for(let l=0;l<e.length;l++){let i=e[l],s=M.instance.getSkillCfgById(i),n=new v;n.Id=s.Id;for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e)){const t=s[e];n.hasOwnProperty(e)&&(n[e]=t)}n.weaponId=this.skillBulletObj.skillObj.weaponId,n.level=this.skillBulletObj.skillObj.level,"0"==s.bulletRes&&(n.bulletRes=this.skillBulletObj.skillObj.bulletRes,n.res=this.skillBulletObj.skillObj.res),n=R.instance.getUpgradeSkillBySkillId(n),x.instance.playSound(n.soundId),0==s.damagePer?n.damage=this.skillBulletObj.skillObj.damage:n.damage=this.skillBulletObj.skillObj.damage*s.damagePer/100;let h=new f;h.releaseTimes=1,h.skillKey=this.skillBulletObj.skillKey,h.skillObj=n,h.pos=this.getFirePos(),h.targetPos=new o(0,-200,0),s.targetType!=j.TARGET_NEXT&&s.targetType!=j.TARGET_CURRENT&&s.targetType!=j.TARGET_ALONG||(h.monsterKey=t);let r=.1,u=h.skillObj.salvo;for(let e=0;e<u;e++)if(s.targetType==j.TARGET_CURRENT||s.targetType==j.TARGET_CURRENT_ALL){let t=h.skillObj.bulletCount,l=this.node.getPosition();for(let i=0;i<t;i++){let t=h.skillObj.intervalAngle,s=M.instance.getSkillDirAngle(i,t);B.emit(_.ATTACK_SKILL_EFFECT,h,l,s,r*e)}}else if(s.targetType==j.TARGET_ALONG){let t=h.skillObj.bulletCount,l=this.node.getPosition(),i=a(this._dir.x,this._dir.y,0).multiply(a(1*this.moveSpeed,1*this.moveSpeed,0)),s=l.add(i);this.setBulletAngle(this.skillBulletObj.skillObj.bulletType);for(let l=0;l<t;l++){let t=h.skillObj.intervalAngle,i=M.instance.getSkillDirAngle(l,t);B.emit(_.ATTACK_SKILL_EFFECT,h,s,i,r*e)}}else{let l=1,i=A.instance.getNearMonster(h.skillKey,s.targetType==j.TARGET_NEXT?t:"");if(i.length){let t=h.skillObj.bulletCount;for(let s=0;s<t;s++)for(let t=0;t<l;t++){let l=h.skillObj.intervalAngle,n=M.instance.getSkillDirAngle(s,l);t<i.length&&B.emit(_.ATTACK_SKILL_EFFECT,h,i[t],n,r*e)}}}}}getFirePos(){let e=this.node.getPosition();return new o(e.x,e.y+this.node.getComponent(k).height,0)}checkColliderCount(e){let t=e.monsterKey;if(0==this.damageTimes||this.skillBulletObj.monsterKey==t)return;let l=e.node.getPosition();this.damageTimes>0&&this.damageTimes--;let i=this.skillBulletObj.skillObj.bulletSkills;if(e.onAttacked(this.skillBulletObj),this.colliderEffect(e),this.colliderTriggleSkill(i,t,l),0==this.damageTimes){let e=this.skillBulletObj.releaseTimes,t=this.bulletMove&&0!=this.bulletMove.length?this.bulletMove[e%this.bulletMove.length]:S.MOVE_NORMAL;t==S.MOVE_TARGET_REBOUND||t==S.MOVE_TARGET_EDGE_REBOUND?this.setMoveReflect(l):this.nextClear()}}checkColliderCountWithTowerMonster(e){let t=e.monsterKey;if(0==this.damageTimes||this.skillBulletObj.monsterKey==t)return;-1==this.damageTimes&&(this.damageTimes=1);let l=e.node.getPosition();this.damageTimes>0&&this.damageTimes--;let i=this.skillBulletObj.skillObj.bulletSkills;if(e.onAttacked(this.skillBulletObj),this.colliderTriggleSkill(i,t,l),0==this.damageTimes){let e=this.skillBulletObj.releaseTimes,t=this.bulletMove&&0!=this.bulletMove.length?this.bulletMove[e%this.bulletMove.length]:S.MOVE_NORMAL;t==S.MOVE_TARGET_REBOUND||t==S.MOVE_TARGET_EDGE_REBOUND?this.setMoveReflect(l):this.nextClear()}}checkColliderCountWithTapMonster(e){let t=e.monsterKey;if(0==this.damageTimes||this.skillBulletObj.monsterKey==t)return;-1==this.damageTimes&&(this.damageTimes=1);let l=e.node.getPosition();this.damageTimes>0&&this.damageTimes--;let i=this.skillBulletObj.skillObj.bulletSkills;e.onAttacked(this.skillBulletObj),this.colliderTriggleSkill(i,t,l),this.nextClear()}checkColliderCountWithDoor(e,t){0!=this.damageTimes&&(this.damageTimes=0,e.onBulletHited(t),0==this.damageTimes&&this.nextClear())}colliderTriggleClearByType(e,t){}getSkillMoveSpeedByType(){let e=0;switch(this.type){case 99:e=0;break;default:e=this.skillBulletObj.skillObj.bulletSpeed*(100+this.skillBulletObj.skillObj.bulletSpeedPer)/100}return e}onEnable(){}onDisable(){}nextClear(){this.during=-1}clear(){this.initStatus=!1,this.boundBox=null,this.quadBoundBox=null,this.skillBulletObj.callback&&this.skillBulletObj.callback(),B.emit(_.DELETE_QUARD_TREE_OBJ,this._skillBulletKey),T.instance.putNode(this.node)}childUpdate(e){}}).prototype,"icon",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=D))||L));i._RF.pop()}}}));

System.register("chunks:///_virtual/SkillBulletItem.ts",["cc","./SkillBulletBase.ts","./GameDefine.ts","./MonsterBase.ts","./TowerDoorItem.ts","./TowerMonsterBase.ts","./TapMonsterBase.ts"],(function(t){var e,o,n,i,s,l,r,a,c,u,h,m,d;return{setters:[function(t){e=t.cclegacy,o=t.Collider2D,n=t.Contact2DType,i=t.UITransform,s=t.v3,l=t.director,r=t._decorator},function(t){a=t.SkillBulletBase},function(t){c=t.GameDefine},function(t){u=t.MonsterBase},function(t){h=t.TowerDoorItem},function(t){m=t.TowerMonsterBase},function(t){d=t.TapMonsterBase}],execute:function(){var B;e._RF.push({},"a6484nUmyVJOrVFOypCdAIm","SkillBulletItem",void 0);const{ccclass:C,property:p}=r;t("SkillBulletItem",C("SkillBulletItem")(B=class extends a{constructor(){super(...arguments),this._curWave=0}init(t,e,o,n){void 0===n&&(n=1),this.initStatus=!1,this.skillBulletObj=t,this._curWave=n,this.initSkillBullet(e,o)}start(){let t=this.getComponent(o);t&&t.on(n.BEGIN_CONTACT,this.onBeginContact,this)}onBeginContact(t,e,o){if(e.name.indexOf("towerDoorItem")>=0){let t=this.node.getComponent(i).convertToWorldSpaceAR(s(0,0,0));this.checkColliderCountWithDoor(e.node.getComponent(h),t)}else e.name.indexOf("towerMonsterItem")>=0?this.checkColliderCountWithTowerMonster(e.node.getComponent(m)):e.name.indexOf("tapMonsterItem")>=0?this.checkColliderCountWithTapMonster(e.node.getComponent(d)):this.checkColliderCount(e.node.getComponent(u))}childUpdate(t){if(c.gameStart&&this.initStatus){l.getTotalFrames();this.updateSkillBulletScreen(t),this.triggleClearByDuring(t),this.setBulletMove(t),this.initStatus&&c.gameWave!=this._curWave&&this.clear()}}})||B);e._RF.pop()}}}));

System.register("chunks:///_virtual/SkillData.ts",["cc","./CfgMgr.ts","./SkillModel.ts","./SkillTargetModel.ts","./MonsterData.ts","./WeaponModel.ts"],(function(e){var t,r,n,a,s,l,o;return{setters:[function(e){t=e.cclegacy,r=e.Vec3},function(e){n=e.CfgMgr},function(e){a=e.SkillCfg},function(e){s=e.SkillTargetCfg},function(e){l=e.MonsterData},function(e){o=e.WeaponType}],execute:function(){t._RF.push({},"d47c0P8lLFPJqDru2of1KHi","SkillData",void 0);class i{getSkillCfgById(e){return n.getDataById(new a,e)}getSkillTargetId(e,t){return e.length?t<e.length?e[t]:e[e.length-1]:0}getSkillBulletCount(e){if(e){let t=n.getDataById(new s,e);if(t.random){let e=t.random.split(":");return Number(e[1])}return 1}return 1}getSkillDirAngle(e,t){let r=0;return e&&(r=e%2==0?e/2*t:-Math.ceil(e/2)*t),r}getSkillAtkTargetPos(e,t,r){let a=[];if(e){let l=n.getDataById(new s,e),o=l.type,i=l.random.split(":"),g=Number(i[0]),c=Number(i[1]);if(o.length)switch(o[0]){case 1:case 2:a=this.getHeroNearTargetPos(!0,g,c,r,t);break;case 3:case 4:a=this.getMonsterHpTargetPos(!0,g,c,r,t);break;case 7:a=this.getScreenTargetPos(g,c,r);break;case 8:case 9:a=this.getSelfTargetPos(!0,g,c,r,t);break;default:a=this.getScreenTargetPos(g,c,r)}a=a.length?a:this.getRandPos(t,c)}else a=[t];return a}getHeroNearTargetPos(e,t,r,n,a){let s=[],o=l.instance.getNearMonsterTarget(n),i=[],g=[];if(o.size&&(o.forEach((e=>{let t=e.getColliderPos().x;i.push({monsterBase:e,distance:t})})),i.sort(((t,r)=>e?t.distance-r.distance:r.distance-t.distance)),t=t>=i.length?i.length:t,g=i.slice(0,t),g.length))for(let e=0;e<r;e++){let t=g[e<g.length?Math.floor(Math.random()*g.length):0];s.push(t.monsterBase.getColliderPos())}return s}getMonsterHpTargetPos(e,t,r,n,a){let s=[],o=l.instance.getNearMonsterTarget(n),i=[],g=[];if(o.size&&(o.forEach((e=>{let t=e.curHp;i.push({monsterBase:e,hp:t})})),i.sort(((t,r)=>e?r.hp-t.hp:t.hp-r.hp)),t=t>=i.length?i.length:t,g=i.slice(0,t),g.length))for(let e=0;e<r;e++){let t=g[e<g.length?Math.floor(Math.random()*g.length):0];s.push(t.monsterBase.getColliderPos())}return s}getScreenTargetPos(e,t,r){let n=[],a=l.instance.getNearMonsterTarget(r);if(a.size){let e=Array.from(a.values());for(let r=0;r<t;r++){let t=Math.floor(Math.random()*e.length);n.push(e[t].getColliderPos())}}return n}getSelfTargetPos(e,t,n,a,s){let o=[],i=l.instance.getNearMonsterTarget(a),g=[],c=[];if(i.size&&(i.forEach((e=>{let t=r.distance(e.getColliderPos(),s);t>50&&g.push({monsterBase:e,distance:t})})),g.sort(((t,r)=>e?t.distance-r.distance:r.distance-t.distance)),t=t>=g.length?g.length:t,c=g.slice(0,t),c.length))for(let e=0;e<n;e++){let t=c[e<c.length?Math.floor(Math.random()*c.length):0];o.push(t.monsterBase.getColliderPos())}return o}getRandPos(e,t){let n=[];for(let e=0;e<t;e++){let e=new r;e.x=0,e.y=2*(Math.random()-.5)*200,n.push(e)}return n}checkColliderTriggleSkill(e,t,r){let n=!1;switch(e){case 1:n=1==t;break;case 2:n=t==r;break;case 3:n=!0;break;default:n=!1}return n}clear(){}static get instance(){return this._instance||(this._instance=new i),this._instance}isAttackType(e){return e!=o.ARMOR_HP&&e!=o.ARMOR_HPPER&&e!=o.ARMOR_SHIELD}}e("SkillData",i),i._instance=null,t._RF.pop()}}}));

System.register("chunks:///_virtual/SkillGetItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./ResourcesUtil.ts","./SpriteEx.ts","./SkillTipsItem.ts"],(function(t){var e,i,n,s,o,r,l,c,a,u,p,m,h,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,s=t.Sprite,o=t.Prefab,r=t._decorator,l=t.Component,c=t.instantiate,a=t.Vec3,u=t.UITransform},function(t){p=t.Constants},function(t){m=t.ResourcesUtil},function(t){h=t.SpriteEx},function(t){f=t.SkillTipsItem}],execute:function(){var d,I,b,g,k,S,y,F,C;n._RF.push({},"45b51MEfYFLoqIOehOVd5LO","SkillGetItem",void 0);const{ccclass:T,property:_}=r;t("SkillGetItem",(d=T("SkillGetItem"),I=_(h),b=_(s),g=_(o),d((y=e((S=class extends l{constructor(){super(...arguments),i(this,"iconFrame",y,this),i(this,"icon",F,this),i(this,"skillTipsItem",C,this),this._desc=null}init(t,e){void 0===e&&(e=!0),this._desc=t.desc;let i=p.skillIconPath+t.icon+"/spriteFrame";this.iconFrame.index=t.quality-1,m.setSpriteFrame(i,this.icon);let n=this.node.getComponentsInChildren(s);if(!e)for(let t=0;t<n.length;t++){n[t].grayscale=!0}}onTapBtn(){let t=c(this.skillTipsItem);t.parent=this.node;let e=new a(0,this.node.getComponent(u).width/2,0);t.setPosition(e),t.getComponent(f).init(this._desc)}}).prototype,"iconFrame",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(S.prototype,"icon",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(S.prototype,"skillTipsItem",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=S))||k));n._RF.pop()}}}));

System.register("chunks:///_virtual/SkillManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEvent.ts","./EventListener.ts","./SkillData.ts","./ResourcesUtil.ts","./PoolManager.ts","./Constants.ts","./SkillUpgradeData.ts","./WeaponModel.ts","./GameDefine.ts"],(function(e){var t,l,i,n,s,a,o,r,c,p,k,f,b,u,m,h,d,E,S;return{setters:[function(e){t=e.applyDecoratedDescriptor,l=e.initializerDefineProperty},function(e){i=e.cclegacy,n=e.Node,s=e._decorator,a=e.Component,o=e.instantiate,r=e.Sprite,c=e.Animation,p=e.AnimationClip},function(e){k=e.GameEvent},function(e){f=e.EventListener},function(e){b=e.SkillData},function(e){u=e.ResourcesUtil},function(e){m=e.PoolManager},function(e){h=e.Constants},function(e){d=e.SkillUpgradeData},function(e){E=e.WeaponType},function(e){S=e.GameDefine}],execute:function(){var g,O,P,R,_;i._RF.push({},"bfbb4uHJ+JKjq7N/Z8t/KLe","SkillManager",void 0);const{ccclass:j,property:M}=s;e("SkillManager",(g=j("SkillManager"),O=M(n),g((_=t((R=class extends a{constructor(){super(...arguments),l(this,"skillParentUp",_,this),this._skillPrefabItemMap=new Map}init(){}onEnable(){f.on(k.ATTACK_SKILL_EFFECT,this.onAttackSkillEffect,this),f.on(k.ARMOR_SKILL_EFFECT,this.onArmorSkillEffect,this)}onDisable(){f.off(k.ATTACK_SKILL_EFFECT,this.onAttackSkillEffect,this),f.off(k.ARMOR_SKILL_EFFECT,this.onArmorSkillEffect,this)}onAttackSkillEffect(e,t,l,i){void 0===i&&(i=0),this.scheduleOnce((()=>{let i=null,n=e.skillObj.Id,s=null;if(this._skillPrefabItemMap.has(n))i=m.instance.getNodeItemById(this._skillPrefabItemMap.get(n),n.toString()),this.skillParentUp.addChild(i),i.setPosition(e.pos),s=i.components[1],s.init(e,t,l,S.gameWave);else{let a=h.battSkillPath;u.getPrefab(a).then((a=>{let k="";k=e.skillObj.res==e.skillObj.bulletRes?h.weaponIconPath+e.skillObj.bulletRes:h.bulletPath+e.skillObj.bulletRes,1==e.skillObj.bulletFrames?(k+="/spriteFrame",u.getSpriteFrame(k).then((c=>{i=o(a);let p=i.getChildByName("icon").getComponent(r);p.spriteFrame=c,p.node.angle=e.skillObj.angle,p.node.setScale(e.skillObj.scale,e.skillObj.scale),this.skillParentUp.addChild(i),i.setPosition(e.pos),s=i.components[1],s.init(e,t,l,S.gameWave),this._skillPrefabItemMap.set(n,i)}))):u.getSpriteAtlas(k).then((r=>{i=o(a);let k=i.getChildByName("icon").getComponent(c),f=p.createWithSpriteFrames(r,e.skillObj.bulletFrames);f.name="effect",f.wrapMode=p.WrapMode.Loop,k.addClip(f),k.node.angle=e.skillObj.angle,k.node.setScale(e.skillObj.scale,e.skillObj.scale),this.skillParentUp.addChild(i),i.setPosition(e.pos),s=i.components[1],s.init(e,t,l,S.gameWave),this._skillPrefabItemMap.set(n,i)}))}))}}),i)}onArmorSkillEffect(e){let t=e.skillObj.damage*(100+e.skillObj.damagePer)/100;e.skillObj.type==E.ARMOR_HP?f.emit(k.HERO_RESTORE_HP,t):e.skillObj.type==E.ARMOR_HPPER?f.emit(k.HERO_RESTORE_HPPER,t,e.skillObj.restoreHps):e.skillObj.type==E.ARMOR_SHIELD&&f.emit(k.HERO_RESTORE_SHIELD,t)}reset(){this.unscheduleAllCallbacks()}clear(){b.instance.clear(),d.instance.clear()}}).prototype,"skillParentUp",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=R))||P));i._RF.pop()}}}));

System.register("chunks:///_virtual/SkillModel.ts",["cc"],(function(i){var t;return{setters:[function(i){t=i.cclegacy}],execute:function(){t._RF.push({},"e96c1LMiTlDMYmCWtHlD/ym","SkillModel",void 0);i("SkillCfg",class{constructor(){this.ClassName="Skill",this.Id=void 0,this.name=void 0,this.desc=void 0,this.scale=void 0,this.quality=void 0,this.res=void 0,this.element=void 0,this.targetType=void 0,this.bulletRes=void 0,this.bulletFrames=void 0,this.bulletType=void 0,this.during=0,this.cd=0,this.angle=void 0,this.probability=0,this.damageNum=0,this.damagePer=0,this.bulletSpeed=void 0,this.bulletCount=1,this.colliderRadius=50,this.intervalAngle=void 0,this.move=void 0,this.soundId=void 0,this.bulletBuffs=void 0,this.subSkills=void 0,this.doubleSkills=void 0}});i("SkillBulletType",function(i){return i[i.SKILL_BULLET_LINE=1]="SKILL_BULLET_LINE",i[i.SKILL_BULLET_LINE_ROTATION=2]="SKILL_BULLET_LINE_ROTATION",i[i.SKILL_BULLET_PARABOLA=3]="SKILL_BULLET_PARABOLA",i[i.SKILL_BULLET_RANGE=10]="SKILL_BULLET_RANGE",i}({})),i("BulletMoveType",function(i){return i[i.MOVE_NORMAL=0]="MOVE_NORMAL",i[i.MOVE_LIMIT_EDGE_REBOUND=1]="MOVE_LIMIT_EDGE_REBOUND",i[i.MOVE_TARGET_REBOUND=2]="MOVE_TARGET_REBOUND",i[i.MOVE_TARGET_EDGE_REBOUND=3]="MOVE_TARGET_EDGE_REBOUND",i[i.MOVE_BACK=4]="MOVE_BACK",i}({}));i("SkillObj",class{constructor(){this.Id=void 0,this.weaponId=void 0,this.level=void 0,this.name=void 0,this.desc=void 0,this.quality=void 0,this.res=void 0,this.frame=void 0,this.type=void 0,this.soundId=void 0,this.element=void 0,this.targetType=void 0,this.scale=0,this.angle=0,this.colliderRadius=50,this.bulletRes=void 0,this.bulletFrames=void 0,this.bulletType=void 0,this.bulletSpeed=0,this.bulletSpeedPer=0,this.bulletScale=100,this.bulletCount=1,this.during=10,this.duringPer=0,this.probability=0,this.doubleSkills=void 0,this.intervalAngle=0,this.range=0,this.cd=0,this.cdPer=0,this.cdAddPer=0,this.damage=0,this.damageRange=0,this.damageNum=0,this.damagePer=0,this.damageAddPer=0,this.damageInterval=0,this.bossDamagePer=0,this.critPer=0,this.critNum=0,this.critDamagePer=50,this.salvo=1,this.hitBack=0,this.bulletMove=[],this.bulletBuffs=[],this.subSkills=[],this.bulletSkills=[],this.restoreHps=[]}});i("SkillBulletObj",class{constructor(){this.releaseTimes=void 0,this.skillKey=void 0,this.skillObj=void 0,this.monsterKey=void 0,this.layer=1,this.pos=void 0,this.callback=void 0,this.targetPos=void 0,this.param=void 0,this.scale=1}});i("ReleaseSkillObj",class{constructor(){this.skillKey=void 0,this.skillObj=void 0,this.animTime=.05,this.releaseTimes=1,this.bulletCount=1,this.callback=void 0}});i("DamageType",function(i){return i[i.NORMAL=0]="NORMAL",i[i.CRIT=1]="CRIT",i[i.DEBUFF=2]="DEBUFF",i}({})),i("TargetType",function(i){return i[i.TARGET_NEAREST=0]="TARGET_NEAREST",i[i.TARGET_RANDOM=1]="TARGET_RANDOM",i[i.TARGET_SELF=2]="TARGET_SELF",i[i.TARGET_NEXT=3]="TARGET_NEXT",i[i.TARGET_CURRENT=4]="TARGET_CURRENT",i[i.TARGET_CURRENT_ALL=5]="TARGET_CURRENT_ALL",i[i.TARGET_ALONG=6]="TARGET_ALONG",i}({}));i("AtkObj",class{constructor(){this.atk=0,this.type=0}});i("SkillElementType",function(i){return i[i.NORMAL=0]="NORMAL",i[i.FIRE=1]="FIRE",i[i.ICE=2]="ICE",i[i.WIND=3]="WIND",i[i.LIGHTNING=4]="LIGHTNING",i[i.DRUG=5]="DRUG",i}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/SkillSelectItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./ResourcesUtil.ts","./SpriteEx.ts","./SkillUpgradeData.ts","./EventListener.ts","./GameEvent.ts","./CoinMode.ts","./WeaponShopData.ts","./GuideData.ts","./OpenPopupManager.ts","./LanguageManager.ts"],(function(e){var t,i,n,a,l,s,r,c,o,u,p,g,d,h,f,k,S,b,_,U,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,a=e.Sprite,l=e.RichText,s=e._decorator,r=e.Component,c=e.Label},function(e){o=e.Constants},function(e){u=e.ResourcesUtil},function(e){p=e.SpriteEx},function(e){g=e.SkillUpgradeData,d=e.SkillUpgradeType},function(e){h=e.EventListener},function(e){f=e.GameEvent},function(e){k=e.CoinObj},function(e){S=e.WeaponShopData},function(e){b=e.GuideData,_=e.GuideStep},function(e){U=e.OpenPopupManager},function(e){m=e.LanguageManager}],execute:function(){var C,O,E,L,y,P,A,B,D,G,I;n._RF.push({},"d2164JsWmlHK60Q7+zA/GgW","SkillSelectItem",void 0);const{ccclass:M,property:j}=s;e("SkillSelectItem",(C=M("SkillSelectItem"),O=j(p),E=j(p),L=j(a),y=j(l),C((B=t((A=class extends r{constructor(){super(...arguments),i(this,"frame",B,this),i(this,"quality",D,this),i(this,"icon",G,this),i(this,"desc",I,this),this._callBack=null,this._skillUpgradeCfg=null}init(e,t){let i=g.instance.getSkillUpgradeCfgById(e.id);this._callBack=t,this._skillUpgradeCfg=i,this.frame.index=i.quality-1,this.quality.index=i.quality-1;let n=m.instance.getLang(i.desc);this.desc.string="<b><outline width=3 color=#000>"+n+"</outline></b>",this.setOutLine();let a=o.skillIconPath+i.icon+"/spriteFrame";u.geSpriteFrame(a).then((e=>{this.icon.spriteFrame=e}))}setOutLine(){this.scheduleOnce((()=>{let e=this.desc.node.children;for(let t=0;t<e.length;t++){e[t].getComponent(c).enableShadow=!1}}),.01)}setUpgradeSkill(e){if(!this._skillUpgradeCfg)return;switch(this._skillUpgradeCfg.type){case d.SKILL_BATTLE:g.instance.upgradeBattleSkillObjAtt(this._skillUpgradeCfg);break;case d.SKILL_BUFF:g.instance.upgradeBuffSkillObjAtt(this._skillUpgradeCfg);break;case d.GOLD:let t=g.instance.upgradeGoldObjAtt(this._skillUpgradeCfg);if(t>0){let i=new k;i.pos=e,i.num=t,h.emit(f.GAME_CHANGE_COIN,i)}break;case d.MONSTR_MOVE:g.instance.upgradeMonsterSpeedObjAtt(this._skillUpgradeCfg);break;case d.EXP:g.instance.upgradeExpObjAtt(this._skillUpgradeCfg);break;case d.HP:g.instance.upgradeHpObjAtt(this._skillUpgradeCfg),h.emit(f.UPDATE_HERO_HP);break;case d.SHOP:g.instance.upgradeShopObjAtt(this._skillUpgradeCfg),S.instance.upgradeSkill(this._skillUpgradeCfg.attrs);break;case d.BOSS:}}onTouchBtn(e){let t=e.target.getWorldPosition();this._callBack&&this._callBack(),this.setUpgradeSkill(t),b.instance.curStep==_.GUIDE_STEP9_SELECT_SKILL&&U.instance.hide(o.PopupUI.GuidePopup)}}).prototype,"frame",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(A.prototype,"quality",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(A.prototype,"icon",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(A.prototype,"desc",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=A))||P));n._RF.pop()}}}));

System.register("chunks:///_virtual/SkillSelectPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./GameController.ts","./PopupManager.ts","./SkillUpgradeData.ts","./SkillSelectItem.ts","./GuideData.ts","./OpenPopupManager.ts","./SpriteEx.ts","./PlayerData.ts","./GameData.ts","./AdManager.ts","./GameEvent.ts","./EventListener.ts"],(function(e){var t,i,n,l,s,a,c,r,o,u,h,p,f,b,S,g,k,m,d,L,A,_,I,w;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,l=e.Node,s=e.Label,a=e._decorator,c=e.Component,r=e.tween,o=e.v3},function(e){u=e.Constants},function(e){h=e.default},function(e){p=e.PopupManager},function(e){f=e.SkillUpgradeData,b=e.SelectObj},function(e){S=e.SkillSelectItem},function(e){g=e.GuideData,k=e.GuideStep},function(e){m=e.OpenPopupManager},function(e){d=e.SpriteEx},function(e){L=e.PlayerData},function(e){A=e.GameData},function(e){_=e.AdBattleType},function(e){I=e.GameEvent},function(e){w=e.EventListener}],execute:function(){var E,P,v,B,y,C,T,D,G,z,U,O,x,j,M,R,F,K,N,W,H,V,Y;n._RF.push({},"6da23yMgY1B+pjD6+TmVFFj","SkillSelectPopup",void 0);const{ccclass:q,property:J}=a;e("SkillSelectPopup",(E=q("SkillSelectPopup"),P=J(l),v=J(l),B=J(l),y=J(l),C=J(d),T=J(s),D=J(l),G=J(d),z=J(s),U=J(l),E((j=t((x=class extends c{constructor(){super(...arguments),i(this,"content",j,this),i(this,"block",M,this),i(this,"mask",R,this),i(this,"btnList",F,this),i(this,"refreshIcon",K,this),i(this,"refreshLabel",N,this),i(this,"refreshBtn",W,this),i(this,"selectAllIcon",H,this),i(this,"selectAllLabel",V,this),i(this,"selectAllBtn",Y,this),this._wave=1,this._itemNumber=0,this._callback=null}show(e,t,i){if(this._callback=i,g.instance.curStep==k.GUIDE_STEP8_BATTLE){let t=g.instance.getCurGuideData(),i=[];for(let e=0;e<t.length;e++){let n=new b;n.id=t[e],n.premise=0,n.weaponId=0,n.weight=0,i.push(n)}e=i}this._wave=t,this._itemNumber=e.length,this.setSkillSelectInfo(e),L.instance.chapterObj.ticket>0?(this.refreshIcon.index=1,this.selectAllIcon.index=1):(this.refreshIcon.index=0,this.selectAllIcon.index=0)}async setSkillSelectInfo(e){A.instance.refreshSkillCount<=0?this.refreshBtn.active=!1:this.refreshBtn.active=!0,A.instance.selectAllSkillCount<=0?this.selectAllBtn.active=!1:this.selectAllBtn.active=!0,this.refreshLabel.string=A.instance.refreshSkillCount+"/10",this.selectAllLabel.string=A.instance.selectAllSkillCount+"/3",this.mask.active=!0;let t=this.content.children;this.block.active=!0,this.btnList.setScale(.5,.5);for(let e=0;e<t.length;e++){t[e].active=!1}for(let i=0;i<e.length;i++){const n=e[i];let l=t[i];l.getComponent(S).init(n,this.onCloseBtn.bind(this)),await new Promise((t=>{l.setScale(.5,.5),l.active=!0,r(l).to(.1,{scale:o(1,1,1)},{easing:"backOut"}).call((()=>{i==e.length-1&&(this.block.active=!1),t(0)})).start()}))}r(this.btnList).to(.1,{scale:o(1,1,1)},{easing:"backOut"}).call((()=>{this.mask.active=!1})).start(),g.instance.curStep==k.GUIDE_STEP8_BATTLE&&(m.instance.hide(u.PopupUI.GuidePopup),g.instance.curStep=1,m.instance.showGameGuidePopup(this.content.children[0]))}onCloseBtn(){this.scheduleOnce((()=>{h.resume(),this._callback&&this._callback(),p.instance.hide(u.PopupUI.SkillSelectPopup)}),.2)}onRefrshBtn(){if(L.instance.chapterObj.ticket>0){if(A.instance.spendTicket(_.REFRESH_SKILL)){w.emit(I.UPDATE_BATTLE_TICKET),A.instance.refreshSkillCount=1;let e=f.instance.getSelectSkillListByWeight(this._wave);this.setSkillSelectInfo(e)}}else A.instance.watchAd(_.REFRESH_SKILL,(e=>{if(0==e){A.instance.refreshSkillCount=1;let e=f.instance.getSelectSkillListByWeight(this._wave);this.setSkillSelectInfo(e)}}))}onAllBtn(e){if(L.instance.chapterObj.ticket>0){if(A.instance.spendTicket(_.GETALL_SKILL)){w.emit(I.UPDATE_BATTLE_TICKET);let t=e.target.getWorldPosition();this.onCloseBtn(),A.instance.selectAllSkillCount=1;let i=this.content.children;for(let e=0;e<i.length&&e<this._itemNumber;e++){i[e].getComponent(S).setUpgradeSkill(t)}}}else A.instance.watchAd(_.GETALL_SKILL,(t=>{if(0==t){let t=e.target.getWorldPosition();A.instance.selectAllSkillCount=1;let i=this.content.children;for(let e=0;e<i.length&&e<this._itemNumber;e++){i[e].getComponent(S).setUpgradeSkill(t)}this.onCloseBtn()}}))}}).prototype,"content",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(x.prototype,"block",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(x.prototype,"mask",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(x.prototype,"btnList",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(x.prototype,"refreshIcon",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(x.prototype,"refreshLabel",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(x.prototype,"refreshBtn",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(x.prototype,"selectAllIcon",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(x.prototype,"selectAllLabel",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(x.prototype,"selectAllBtn",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=x))||O));n._RF.pop()}}}));

System.register("chunks:///_virtual/SkillTargetModel.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"44ac058KoRK5JPZE8lOhCeF","SkillTargetModel",void 0);t("SkillTargetCfg",class{constructor(){this.ClassName="SkillTarget",this.Id=void 0,this.type=void 0,this.stress=void 0,this.random=void 0,this.targetCamp=void 0,this.targetHp=void 0,this.targetStatus=void 0,this.condition=void 0,this.notargetStatus=void 0}}),i._RF.pop()}}}));

System.register("chunks:///_virtual/SkillTipsItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageManager.ts"],(function(e){var t,i,n,r,o,s,l,a,c,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,r=e.RichText,o=e.Node,s=e._decorator,l=e.Component,a=e.Vec3,c=e.tween},function(e){u=e.LanguageManager}],execute:function(){var p,f,g,d,h,m,w;n._RF.push({},"aecb9efmnZO3bMCXmWl8ISy","SkillTipsItem",void 0);const{ccclass:b,property:y}=s;e("SkillTipsItem",(p=b("SkillTipsItem"),f=y(r),g=y(o),p((m=t((h=class extends l{constructor(){super(...arguments),i(this,"desc",m,this),i(this,"arrow",w,this)}init(e,t){void 0===t&&(t=0);let i=u.instance.getLang(e);i=i.replace(/ffffff/g,"071e3e").replace(/59c535/g,"ea35c1"),-1==i.indexOf("071e3e")&&(i="<color=#071e3e>"+i+"</color>"),this.desc.string=i,this.arrow.setPosition(t,this.arrow.getPosition().y),this.setAnim()}onCloseBtn(e){e.preventSwallow=!0,this.node.parent=null}setAnim(){this.node.scale=new a(0,0,0),c(this.node).to(.2,{scale:new a(1.1,1.1,1.1)}).to(.2,{scale:new a(1,1,1)}).start()}}).prototype,"desc",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(h.prototype,"arrow",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=h))||d));n._RF.pop()}}}));

System.register("chunks:///_virtual/SkillTypeItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./SkillModel.ts","./SkillData.ts","./MonsterData.ts","./HeroData.ts","./GameDefine.ts","./Constants.ts","./ResourcesUtil.ts","./SkillUpgradeData.ts","./Util.ts"],(function(i){var t,e,l,s,n,a,r,o,h,c,k,u,_,d,S,p,b;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.initializerDefineProperty},function(i){l=i.cclegacy,s=i.Sprite,n=i._decorator,a=i.UITransform},function(i){r=i.default},function(i){o=i.SkillObj,h=i.ReleaseSkillObj},function(i){c=i.SkillData},function(i){k=i.MonsterData},function(i){u=i.HeroData},function(i){_=i.GameDefine},function(i){d=i.Constants},function(i){S=i.ResourcesUtil},function(i){p=i.SkillUpgradeData},function(i){b=i.Util}],execute:function(){var O,g,j,y,f,m,I;l._RF.push({},"f6d1449qq9HZJX0i4z/zLFB","SkillTypeItem",void 0);const{ccclass:C,property:w}=n;i("SkillTypeItem",(O=C("SkillTypeItem"),g=w(s),j=w(s),O((m=t((f=class extends r{constructor(){super(...arguments),e(this,"quality",m,this),e(this,"skilIcon",I,this),this._skillObj=null,this._initSkillObj=null,this._cd=0,this._initCd=0,this._initRelease=!0,this._weaponKey="",this._releaseTimes=0}get range(){return this._skillObj.range}init(i,t){this._releaseTimes=0,this._weaponKey=i;let e=c.instance.getSkillCfgById(t.skillId);this._initSkillObj=new o,this._initSkillObj.Id=e.Id;for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)){const t=e[i];this._initSkillObj.hasOwnProperty(i)&&(this._initSkillObj[i]=t)}this._initSkillObj.weaponId=t.weaponId,this._initSkillObj.level=t.level,this._initSkillObj.bulletScale=100,this._initSkillObj.cd=t.cd,this._initSkillObj.range=80*t.range,this._initSkillObj.damage=t.damage,this._initSkillObj.type=t.type,this._initSkillObj.salvo=1,this._initSkillObj.bulletCount=0==this._initSkillObj.bulletCount?1:this._initSkillObj.bulletCount,this._skillObj=p.instance.getUpgradeSkillBySkillId(this._initSkillObj),this._cd=this._initCd=this.getCd(),this.setSkillTypeInfo(this._skillObj)}getCd(){let i=(100-this._skillObj.cdPer-this._skillObj.cdAddPer)/100;return i<.2&&(i=.2),this._skillObj.cd*i}setSkillTypeInfo(i){let t=d.weaponIconPath+i.res+"/spriteFrame",e=d.qualityPath+i.quality+"/spriteFrame";S.geSpriteFrame(e).then((i=>{this.quality.spriteFrame=i})),S.geSpriteFrame(t).then((i=>{this.skilIcon.spriteFrame=i;let t=this.skilIcon.getComponent(a).contentSize,e=Math.min(80/t.width,80/t.height);this.skilIcon.node.setScale(e,e),this._initRelease=!0}))}initSkillCd(){this._initCd=this.getCd(),this._cd=this._initCd}setSkillProgressBar(i){let t=i/this._initCd;this.node.getChildByName("bar").getComponent(s).fillRange=t}createQueueSkill(){let i=new h;i.skillObj=b.clone(this._skillObj),i.skillKey=this._weaponKey,this._releaseTimes++,i.releaseTimes=this._releaseTimes,u.instance.addQueueSkill(i)}childUpdate(i){if(_.gameStart&&this._initRelease){this._cd-=i,this.setSkillProgressBar(this._cd);let t=u.instance.heroPoint;this._cd<0&&(this._skillObj=p.instance.getUpgradeSkillBySkillId(this._initSkillObj),c.instance.isAttackType(this._skillObj.type)?k.instance.checkSkillNearMonster(t,this._skillObj.range)&&this.createQueueSkill():this.createQueueSkill(),this.initSkillCd()),k.instance.setNearMonster(this._weaponKey,t,this._skillObj.range)}}}).prototype,"quality",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(f.prototype,"skilIcon",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=f))||y));l._RF.pop()}}}));

System.register("chunks:///_virtual/SkillUpgradeData.ts",["cc","./CfgMgr.ts","./Util.ts","./BattleLevelModel.ts","./SkillUpgradeModel.ts","./BagData.ts","./GridData.ts","./HeroData.ts","./WeaponData.ts"],(function(e){var t,a,l,i,r,s,n,p,d,o,g;return{setters:[function(e){t=e.cclegacy},function(e){a=e.CfgMgr},function(e){l=e.Util},function(e){i=e.BattleLevelCfg},function(e){r=e.SkillUpgradeCfg,s=e.SkillUpgradeObj,n=e.SkillUpgradeAttrType},function(e){p=e.BagData},function(e){d=e.GridData},function(e){o=e.HeroData},function(e){g=e.WeaponData}],execute:function(){t._RF.push({},"0197azBjyNEkIhWWJCAKOOQ","SkillUpgradeData",void 0);class h{constructor(){this._battleSkillUpgradeData=new Map,this._buffSkillUpgradeData=new Map,this._normalSkillUpgradeData=new Map,this._battleLevelData=new Map,this._unlockUpgradeOptionsPoolData=[],this._unlockUpgradeOptionsNumber=new Map,this._doubleSkillGroup=new Map,this._carryWeaponGroup=new Map,this._learnUpgradeSkillNumber=new Map,this._learnUpgradeSkillGroup=new Map,this._learnUpgradeData=[]}init(){let e=a.getCfgDataArray(new i);for(let t=0;t<e.length;t++){const a=e[t];this._battleLevelData.set(a.level,a)}this._carryWeaponGroup=p.instance.getCarryWeaponMap(),this.initUpgradeOptionsPoolData()}initUpgradeOptionsPoolData(){this.clearUpgradeData();let e=a.getCfgDataArray(new r);for(let t=0;t<e.length;t++){const a=e[t];if(0==a.aimSkills.length||0==a.weight)continue;let l=new u;l.id=a.Id,l.premise=a.premise,l.weaponId=a.weaponId,l.weight=a.weight,l.options_num=a.num;let i=this._getKey(a.weaponId,a.type,a.skillLevel);if(a.weaponId){if(this._carryWeaponGroup.has(a.weaponId)){this._carryWeaponGroup.get(a.weaponId)>=a.weaponLevel&&this._unlockUpgradeOptionsPoolData.push(l)}}else this._unlockUpgradeOptionsPoolData.push(l);this._unlockUpgradeOptionsNumber.has(i)?this._unlockUpgradeOptionsNumber.set(i,this._unlockUpgradeOptionsNumber.get(i)+a.num):this._unlockUpgradeOptionsNumber.set(i,1)}}initUpgradeWeaponBuff(){let e=d.instance.getGridItemData(),t=d.instance.getGridMapData();this._battleSkillUpgradeData.forEach((e=>{e.damageAddPer=0,e.cdAddPer=0})),this._buffSkillUpgradeData.forEach((a=>{let l=a.weaponId,i=[];for(let t=0;t<e.length;t++){let a=e[t].wid;l==g.instance.getWeaponByWid(a).weaponId&&(i=i.concat(e[t].data))}let r=a.aimSkills;if(0!=i.length){let e=d.instance.getNearbyGridIndexByTiled(i),l=[];for(let a=0;a<e.length;a++){let i=d.instance.getGridTiledByIndex(e[a]),r=t[i.row][i.col];"0"!=r&&""!=r&&r&&-1==l.indexOf(r)&&l.push(r)}for(let e=0;e<l.length;e++){let t=d.instance.getGridItemWid(l[e]),i=g.instance.getWeaponByWid(t);if(i&&(i&&-1!=r.indexOf(i.skillId))){const e=i.skillId;let t=this._battleSkillUpgradeData.has(e)?this._battleSkillUpgradeData.get(e):new s;t.skillId=e,t.cdAddPer+=a.cdAddPer,t.damageAddPer+=a.damageAddPer,this._battleSkillUpgradeData.has(e)||this._battleSkillUpgradeData.set(e,t)}}}}))}upgradeBattleSkillObjAtt(e){let t=e.aimSkills;if(this.setLearnUpgradeSkillGroup(e),t)for(let a=0;a<t.length;a++){const l=t[a];let i=this._battleSkillUpgradeData.has(l)?this._battleSkillUpgradeData.get(l):new s;i.aimSkills&&0!=i.aimSkills.length||(i.aimSkills=t);let r=this._updateSkillUpgradeObj(i,l,e);this._battleSkillUpgradeData.has(l)||this._battleSkillUpgradeData.set(l,r)}}upgradeBuffSkillObjAtt(e){let t=e.weaponId;this.setLearnUpgradeSkillGroup(e);let a=this._buffSkillUpgradeData.has(e.weaponId)?this._buffSkillUpgradeData.get(e.weaponId):new s;a.aimSkills&&0!=a.aimSkills.length||(a.aimSkills=e.aimSkills);let l=this._updateSkillUpgradeObj(a,e.weaponId,e);this._buffSkillUpgradeData.has(t)||this._buffSkillUpgradeData.set(t,l),this.initUpgradeWeaponBuff()}upgradeGoldObjAtt(e){this.setLearnUpgradeSkillGroup(e);let t=this._normalSkillUpgradeData.has(S.GOLD)?this._normalSkillUpgradeData.get(S.GOLD):new s;t.aimSkills&&0!=t.aimSkills.length||(t.aimSkills=e.aimSkills);let a=this._updateSkillUpgradeObj(t,S.GOLD,e);this._normalSkillUpgradeData.has(S.GOLD)||this._normalSkillUpgradeData.set(S.GOLD,a);let l=e.attrs,i=0;for(let e=0;e<l.length;e++)"gold"==l[e].key&&(i+=Number(l[e].value));return i}upgradeHpObjAtt(e){this.setLearnUpgradeSkillGroup(e);let t=e.attrs,a=0;for(let e=0;e<t.length;e++)"hpPer"==t[e].key&&(a+=Number(t[e].value));o.instance.addHpPer(a)}upgradeExpObjAtt(e){this.setLearnUpgradeSkillGroup(e);let t=this._normalSkillUpgradeData.has(S.EXP)?this._normalSkillUpgradeData.get(S.EXP):new s,a=this._updateSkillUpgradeObj(t,S.EXP,e);this._normalSkillUpgradeData.has(S.EXP)||this._normalSkillUpgradeData.set(S.EXP,a)}upgradeHeroObjAtt(e){this.setLearnUpgradeSkillGroup(e);let t=this._normalSkillUpgradeData.has(S.SKILL_HERO)?this._normalSkillUpgradeData.get(S.SKILL_HERO):new s,a=this._updateSkillUpgradeObj(t,S.SKILL_HERO,e);this._normalSkillUpgradeData.has(S.SKILL_HERO)||this._normalSkillUpgradeData.set(S.SKILL_HERO,a)}upgradeMonsterSpeedObjAtt(e){this.setLearnUpgradeSkillGroup(e);let t=this._normalSkillUpgradeData.has(S.MONSTR_MOVE)?this._normalSkillUpgradeData.get(S.MONSTR_MOVE):new s,a=this._updateSkillUpgradeObj(t,S.MONSTR_MOVE,e);this._normalSkillUpgradeData.has(S.MONSTR_MOVE)||this._normalSkillUpgradeData.set(S.MONSTR_MOVE,a)}upgradeShopObjAtt(e){this.setLearnUpgradeSkillGroup(e)}getGoldUpgradeSkill(){if(this._normalSkillUpgradeData.has(S.GOLD)){return this._normalSkillUpgradeData.get(S.GOLD).goldPer}return 0}getExpUpgradeSkill(){if(this._normalSkillUpgradeData.has(S.EXP)){return this._normalSkillUpgradeData.get(S.EXP).expPer}return 0}getMonsterSpeedUpgradeSkill(){if(this._normalSkillUpgradeData.has(S.MONSTR_MOVE)){return this._normalSkillUpgradeData.get(S.MONSTR_MOVE).speedPer}return 0}setLearnUpgradeSkillGroup(e){let t=e.Id;this._learnUpgradeSkillNumber.has(t)?this._learnUpgradeSkillNumber.set(t,this._learnUpgradeSkillNumber.get(t)+1):this._learnUpgradeSkillNumber.set(t,1),this._learnUpgradeData.push(e.Id);let a=this._getKey(e.weaponId,e.type,e.skillLevel),l=this._unlockUpgradeOptionsNumber.get(a),i=new k,r=this._getKey(e.weaponId,e.type);if(this._learnUpgradeSkillGroup.has(r)){if(i=this._learnUpgradeSkillGroup.get(r),i.id=e.Id,l>i.options_num+1)i.options_num++;else{i.options_num=0;let e=i.skillLevel;i.skillLevel=e+1}this._learnUpgradeSkillGroup.set(r,i)}else{let t=1;1==l&&t++,i.id=e.Id,i.skillLevel=t,i.options_num=1==l?0:1,this._learnUpgradeSkillGroup.set(r,i)}}setDoubleSkillGroup(e,t){this._doubleSkillGroup.set(e,t)}_getKey(e,t,a){let l=e+"|"+(0==e?t:0);return a?l+"|"+a:l}getUpgradeSkillBySkillId(e){let t=l.clone(e);if(this._battleSkillUpgradeData.has(t.Id)){let e=this._battleSkillUpgradeData.get(t.Id);for(const a in e)if(!(["weaponId","Id"].indexOf(a)>=0)&&Object.prototype.hasOwnProperty.call(e,a)){const l=e[a];if(t.hasOwnProperty(a))if(Array.isArray(t[a]))for(let e in l)-1==t[a].indexOf(l[e])&&t[a].push(l[e]);else t[a]+=l}}if(this._battleSkillUpgradeData.has(0)){let e=this._battleSkillUpgradeData.get(0);for(const a in e)if(!(["weaponId","Id"].indexOf(a)>=0)&&Object.prototype.hasOwnProperty.call(e,a)){const l=e[a];t.hasOwnProperty(a)&&!Array.isArray(t[a])&&(t[a]+=l)}}return t}getLearnSkillUpgrades(){return this._learnUpgradeData}getSkillUpgradeCfgById(e){return a.getDataById(new r,e)}getBattleLevelByLevel(e){let t=100;return this._battleLevelData.has(e)&&(t=this._battleLevelData.get(e).exp),t}hasLearnSkill(e){return this._learnUpgradeSkillNumber.has(e)}getUnlockUpgradeOptionsData(e){let t=[];return this._unlockUpgradeOptionsPoolData.forEach((e=>{let a=this.getSkillUpgradeCfgById(e.id);if(this._learnUpgradeSkillNumber.has(e.id)){let a=this._learnUpgradeSkillNumber.get(e.id);e.options_num>a&&t.push(e)}else{let l=this._getKey(a.weaponId,a.type),i=new k;i.skillLevel=1,this._learnUpgradeSkillGroup.get(l)&&(i=this._learnUpgradeSkillGroup.get(l)),i.skillLevel>=a.skillLevel&&(e.premise&&!this._learnUpgradeSkillNumber.has(e.premise)||0!=a.doubleSkill&&a.doubleSkill!=this._doubleSkillGroup.get(a.weaponId)||t.push(e))}})),t}getSelectObjByWeight(e,t){let a=0,l=0,i=0,r=0,s=[];for(let a=0;a<e.length;a++){let l=e[a];if(l.weight){let i=!1;for(let e=0;e<t.length;e++){const a=t[e];if(l.id==a.id||0!=a.weaponId&&a.weaponId==l.weaponId){i=!0;break}}if(!i){let t=e[a];r+=t.weight,s.push(t)}}}if(s.length){let e=Math.random()*r;return s.some(((t,r)=>{if(l=a+t.weight,e>=a&&e<l)return i=r,!0;a=l})),s[i]}return null}getSelectSkillListByWeight(e){let t=[],a=this.getUnlockUpgradeOptionsData(e);for(let e=0;e<3;e++){let e=this.getSelectObjByWeight(a,t);e&&t.push(e)}return t}learnCarrayWeaponAllSkills(){let e=h.instance.getCarrayWeaponAllSkills();for(let t in e){let a=e[t],l=h.instance.getSkillUpgradeCfgById(a.id),i=l.type;if(i==S.SKILL_BATTLE)h.instance.upgradeBattleSkillObjAtt(l);else if(i==S.SKILL_BUFF){h.instance.upgradeBuffSkillObjAtt(l);break}}}getCarrayWeaponAllSkills(){let e=[];return this._unlockUpgradeOptionsPoolData.forEach((t=>{0!=t.weaponId&&e.push(t)})),e}getWeaponBuffSkillIds(e){if(this._buffSkillUpgradeData.has(e)){return this._buffSkillUpgradeData.get(e).aimSkills}return[]}_updateSkillUpgradeObj(e,t,a){e.skillId=t,e.skillType=a.skillType,e.weaponId=a.weaponId;let l=a.attrs;for(let t=0;t<l.length;t++){let a=l[t];e.hasOwnProperty(a.key)&&(a.type==n.ASSIGN?e[a.key]=a.value:Array.isArray(e[a.key])?-1==e[a.key].indexOf(a.value)&&e[a.key].push(a.value):e[a.key]+=Number(a.value))}return e}clearUpgradeData(){this._unlockUpgradeOptionsPoolData=[],this._unlockUpgradeOptionsNumber.clear(),this._battleSkillUpgradeData.forEach((e=>{e.damageAddPer=0,e.cdAddPer=0}))}clear(){this._learnUpgradeData=[],this._doubleSkillGroup.clear(),this._battleLevelData.clear(),this._unlockUpgradeOptionsPoolData=[],this._unlockUpgradeOptionsNumber.clear(),this._battleSkillUpgradeData.clear(),this._buffSkillUpgradeData.clear(),this._learnUpgradeSkillNumber.clear(),this._learnUpgradeSkillGroup.clear()}static get instance(){return this._instance||(this._instance=new h),this._instance}}e("SkillUpgradeData",h),h._instance=null;class u{constructor(){this.id=void 0,this.premise=void 0,this.weaponId=void 0,this.options_num=void 0,this.weight=void 0}}e("SelectObj",u);e("LearnSelectObj",class{constructor(){this.id=void 0,this.options_num=0}});class k{constructor(){this.id=void 0,this.skillLevel=1,this.options_num=0}}e("LearnSkillGroupObj",k);e("WeaponGroupObj",class{constructor(){this.wid=void 0,this.level=0}});let S=e("SkillUpgradeType",function(e){return e[e.SKILL_BATTLE=0]="SKILL_BATTLE",e[e.SKILL_BUFF=1]="SKILL_BUFF",e[e.GOLD=2]="GOLD",e[e.MONSTR_MOVE=3]="MONSTR_MOVE",e[e.EXP=4]="EXP",e[e.HP=5]="HP",e[e.SHOP=6]="SHOP",e[e.BOSS=7]="BOSS",e[e.SKILL_HERO=8]="SKILL_HERO",e}({}));e("SkillSelectType",function(e){return e[e.NORMAL=0]="NORMAL",e[e.UPGRADE=1]="UPGRADE",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/SkillUpgradeModel.ts",["cc"],(function(i){var t;return{setters:[function(i){t=i.cclegacy}],execute:function(){t._RF.push({},"2de5cbLS+hCTpA4HvJpJnJv","SkillUpgradeModel",void 0);i("SkillUpgradeCfg",class{constructor(){this.ClassName="SkillUpgrade",this.Id=void 0,this.name=void 0,this.desc=void 0,this.icon=void 0,this.weaponId=void 0,this.weaponLevel=void 0,this.skillLevel=void 0,this.skillType=void 0,this.type=void 0,this.premise=void 0,this.num=void 0,this.aimSkills=void 0,this.doubleSkill=void 0,this.weight=void 0,this.quality=void 0,this.waveLimit=void 0,this.attrs=void 0}});i("SkillUpgradeObj",class{constructor(){this.skillId=0,this.skillType=0,this.weaponId=0,this.hp=0,this.exp=0,this.goldPer=0,this.expPer=0,this.speedPer=0,this.cdPer=0,this.cdAddPer=0,this.damageRange=0,this.damageNum=0,this.damage=0,this.damagePer=0,this.damageAddPer=0,this.bossDamagePer=0,this.critPer=0,this.critDamagePer=0,this.critNum=0,this.range=0,this.bulletSpeed=0,this.bulletScale=0,this.salvo=0,this.bulletCount=0,this.bulletSpeedPer=0,this.duringPer=0,this.probability=0,this.hitBack=0,this.intervalAngle=0,this.bulletMove=[],this.aimSkills=[],this.bulletBuffs=[],this.bulletSkills=[],this.subSkills=[],this.restoreHps=[]}});i("SkillUpgradeAttrType",function(i){return i[i.ADD=0]="ADD",i[i.SUB=1]="SUB",i[i.ASSIGN=2]="ASSIGN",i[i.APPEND=3]="APPEND",i}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/SlotItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageManager.ts","./PlayerData.ts"],(function(t){var e,a,i,r,n,s,c,o,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.initializerDefineProperty},function(t){i=t.cclegacy,r=t.Node,n=t.Label,s=t._decorator,c=t.Component},function(t){o=t.LanguageManager},function(t){l=t.PlayerData}],execute:function(){var u,p,h,d,g,m,f;i._RF.push({},"add118G6C5IfoC31YQkeguY","SlotItem",void 0);const{ccclass:b,property:I}=s;t("SlotItem",(u=b("SlotItem"),p=I(r),h=I(n),u((m=e((g=class extends c{constructor(){super(...arguments),a(this,"mask",m,this),a(this,"desc",f,this),this.sid=-1,this.chapterId=0}init(t,e){let a=l.instance.chapterObj.chapterId;this.sid=e,this.chapterId=t,this.mask.active=!1,t&&(Number(t)>=a?(this.mask.active=!0,this.desc.string=o.instance.getLang("game.unlockchapter",[t.toString()])):this.chapterId=0)}updateWeapon(){this.chapterId=0,this.mask.active=!1}}).prototype,"mask",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=e(g.prototype,"desc",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=g))||d));i._RF.pop()}}}));

System.register("chunks:///_virtual/SniperBullet.ts",["cc","./SniperLevelData.ts","./EventListener.ts","./SniperEvent.ts","./AudioManager.ts"],(function(t){var e,s,i,n,o,a,r,h,c,_,u;return{setters:[function(t){e=t.cclegacy,s=t.Component,i=t.Vec2,n=t.Vec3,o=t.misc,a=t.UITransform,r=t._decorator},function(t){h=t.SniperLevelData},function(t){c=t.EventListener},function(t){_=t.SniperEvent},function(t){u=t.AudioManager}],execute:function(){var d;e._RF.push({},"741c5ZBkNBLL6hoWSpyCUuf","SniperBullet",void 0);const{ccclass:l,property:p}=r;t("SniperBullet",l("SniperBullet")(d=class extends s{constructor(){super(...arguments),this._speed=1e3,this._index=0,this._reversed=!1,this._velocity=new i,this._targetPos=new n,this._curPathObj=null,this._path=[],this._status=!1}init(t){var e=o.radiansToDegrees(Math.atan2(t.y,t.x));this.node.angle=e,this._velocity=t,this._curPathObj=h.instance.getPathPoint(),this._status=!0}checkCollider(t){h.instance.playerRect.contains(t)&&(c.emit(_.HERO_DIE),c.emit(_.ENEMY_WIN),this._status=!1,this.node.destroy()),h.instance.enemyRect.contains(t)&&(c.emit(_.ENEMY_DIE),c.emit(_.HERO_WIN),this._status=!1,this.node.destroy())}update(t){if(this._status)if(this._curPathObj){this._velocity=this._curPathObj.vector;let e=this._curPathObj.targetWPos;this._targetPos=this.node.parent.getComponent(a).convertToNodeSpaceAR(new n(e.x,e.y));let s=new n;s.x=this.node.position.x+this._velocity.x*t*this._speed,s.y=this.node.position.y+this._velocity.y*t*this._speed,this.node.setPosition(s),this.checkCollider(new i(s.x,s.y));let o=this._speed*t;n.squaredDistance(this._targetPos,s)<=o*o&&(u.instance.playSound(16),this.node.setPosition(this._targetPos),this._curPathObj=h.instance.getPathPoint()),o>1e4&&(c.emit(_.HERO_DIE),c.emit(_.ENEMY_WIN),this._status=!1,this.node.destroy())}else c.emit(_.HERO_DIE),c.emit(_.ENEMY_WIN),this._status=!1,this.node.destroy()}})||d);e._RF.pop()}}}));

System.register("chunks:///_virtual/SniperData.ts",["cc","./Constants.ts","./AdManager.ts","./Api.ts","./CfgMgr.ts","./EventListener.ts","./HttpService.ts","./OpenPopupManager.ts","./PlayerData.ts","./GameEvent.ts","./GameDefine.ts","./SniperModel.ts","./SniperEvent.ts"],(function(e){var t,n,s,i,a,r,l,c,_,h,o,u,v,p,d;return{setters:[function(e){t=e.cclegacy},function(e){n=e.Constants},function(e){s=e.AdManager,i=e.AdType},function(e){a=e.Api},function(e){r=e.CfgMgr},function(e){l=e.EventListener},function(e){c=e.HttpService},function(e){_=e.OpenPopupManager,h=e.LayerType},function(e){o=e.PlayerData},function(e){u=e.GameEvent},function(e){v=e.GameDefine},function(e){p=e.SniperCfg},function(e){d=e.SniperEvent}],execute:function(){t._RF.push({},"dde8fR19WVNEqBPwPQmF8Wp","SniperData",void 0);class P{constructor(){this.gameStart=!1,this.gamePause=!1,this._cupBullet=150,this._level=0,this._winRewards=[],this._events=[],this._maxLevel=0,this._ticket=0,this._levelObjs=[]}get level(){return this._level}set level(e){this._level=e}get cupBullet(){return this._cupBullet}set cupBullet(e){this._cupBullet+=e}get winRewards(){return this._winRewards}get events(){return this._events}set winRewards(e){this._winRewards=e}get maxLevel(){return this._maxLevel}get ticket(){return this._ticket}get levelObjs(){return this._levelObjs}getSniperCfg(e){return r.getDataById(new p,e)}getSniperInfo(){c.instance.post(a.SNIPER_INFO,{}).then((e=>{0==e.code&&(this._levelObjs=e.data.levels,this._maxLevel=e.data.level,this._ticket=e.data.ticket,this._events=e.data.events,l.emit(d.UPDATE_SNIPER_DATA))}))}play(e){P.instance.ticket>0?this._play(e):s.instance.showAd(i.SNIPERAD,1,((t,n)=>{0==t&&this._play(e,n)}))}_play(e,t){l.emit(u.SHOW_LOADING),c.instance.post(a.SNIPER_PLAY,{level:e,sign:t}).then((t=>{0==t.code?(this._ticket=t.data.ticket,this._winRewards=t.data.rewards,l.emit(d.UPDATE_SNIPER_TICKET_DATA),_.instance.show(n.PopupUI.SniperGame,null,h.TOP,!1,e)):(_.instance.showToast(t.msg),l.emit(u.HIDE_LOADING))}))}retry(e){P.instance.ticket>0?this._retry(e):s.instance.showAd(i.SNIPERAD,1,((t,n)=>{0==t&&this._retry(e,n)}))}_retry(e,t){l.emit(u.SHOW_LOADING),c.instance.post(a.SNIPER_PLAY,{level:e,sign:t}).then((e=>{0==e.code?(this._ticket=e.data.ticket,this._winRewards=e.data.rewards,l.emit(d.UPDATE_SNIPER_TICKET_DATA),l.emit(d.GAME_AGAIN)):(_.instance.showToast(e.msg),l.emit(u.HIDE_LOADING))}))}unlock(e){s.instance.showAd(i.SNIPERAD,0,((t,n)=>{0==t&&c.instance.post(a.SNIPER_UNLOCK,{level:e,sign:n}).then((e=>{0==e.code&&(this._levelObjs=e.data.levels,this._maxLevel=e.data.level,this._ticket=e.data.ticket,l.emit(d.UPDATE_SNIPER_DATA))}))}))}settleBattle(e,t){c.instance.post(a.SNIPER_SETTLE,{level:e,status:t}).then((e=>{0==e.code?(this._winRewards=e.data.rewards,this._maxLevel=e.data.level,l.emit(d.UPDATE_SNIPER_DATA),o.instance.getPlayerInfo()):_.instance.showToast(e.msg)}))}clear(){v.gameStart=!1,this.gamePause=!1,this._cupBullet=150}static get instance(){return this._instance||(this._instance=new P),this._instance}}e("SniperData",P),P.bulletPath="Prefab/Sniper/Bullet/sniperBullet",P.heroPath="Prefab/Sniper/Hero/sniperHero",P.enemyPath="Prefab/Sniper/Enemy/sniperEnemy",P.levelPath="Prefab/Sniper/Level/sniperLevel",P._instance=void 0;e("SniperInfoResult",class{constructor(){this.level=void 0,this.ticket=void 0,this.levels=void 0,this.rewards=void 0,this.events=void 0}});e("EnergyAmin",function(e){return e.Idle="Move",e.Win="Win",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/SniperEnemy.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./EventListener.ts","./SniperEvent.ts","./SniperData.ts","./OpenPopupManager.ts","./Constants.ts","./ResourcesUtil.ts"],(function(n){var e,t,i,o,r,s,a,l,c,p,m,u,E,h,y,f,d,g;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.initializerDefineProperty},function(n){i=n.cclegacy,o=n.AnimationComponent,r=n.Sprite,s=n._decorator,a=n.Component,l=n.color,c=n.tween,p=n.Color},function(n){m=n.AudioManager},function(n){u=n.EventListener},function(n){E=n.SniperEvent},function(n){h=n.EnergyAmin,y=n.SniperData},function(n){f=n.OpenPopupManager},function(n){d=n.Constants},function(n){g=n.ResourcesUtil}],execute:function(){var S,D,I,M,b,A,_;i._RF.push({},"41bddJYO35MZLiP29rT9qEm","SniperEnemy",void 0);const{ccclass:v,property:N}=s;n("SniperEnemy",(S=v("SniperEnemy"),D=N(o),I=N(r),S((A=e((b=class extends a{constructor(){super(...arguments),t(this,"monsterAnim",A,this),t(this,"icon",_,this)}init(){this.monsterAnim.play(h.Idle);let n=y.instance.getSniperCfg(y.instance.level),e=d.monsterIconPath+n.monster+"/spriteFrame";g.geSpriteFrame(e).then((n=>{this.icon.spriteFrame=n}))}onEnemyIdle(){this.monsterAnim.play(h.Idle)}onEnemyDeath(){this.playHit(),f.instance.show(d.PopupUI.SniperWinPopup)}playHit(){let n=this.monsterAnim.getComponent(r);n.color=l(255,255,255,1);let e=l(255,255,255,50);c(n).to(.15,{},{onUpdate(n,t){e=l(255,255,255,50*t),n.color=e}}).call((()=>{e=l(255,255,255,255),n.color=e})).start(),n.color=(new p).fromHEX("FF4B4B"),this.scheduleOnce((()=>{n.color=new p(255,255,255)}),.3)}onEnemyWin(){m.instance.playSound(14),this.monsterAnim.play(h.Win)}onEnable(){u.on(E.ENEMY_IDLE,this.onEnemyIdle,this),u.on(E.ENEMY_DIE,this.onEnemyDeath,this),u.on(E.ENEMY_WIN,this.onEnemyWin,this)}onDisable(){u.off(E.ENEMY_IDLE,this.onEnemyIdle,this),u.off(E.ENEMY_DIE,this.onEnemyDeath,this),u.off(E.ENEMY_WIN,this.onEnemyWin,this)}}).prototype,"monsterAnim",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(b.prototype,"icon",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=b))||M));i._RF.pop()}}}));

System.register("chunks:///_virtual/SniperEvent.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"eac3fOfFGRC6KIJSnE0hu9R","SniperEvent",void 0);class E{}e("SniperEvent",E),E.SHOOT_BULLET="sniperShootBullet",E.SNIPER_TOUCH_START="sniperTouchStart",E.SNIPER_TOUCH_MOVE="sniperTouchMove",E.SNIPER_TOUCH_END="sniperTouchEnd",E.SNIPER_TOUCH_CANCLE="sniperTouchCancle",E.UPDATE_SNIPER_DATA="updateSniperData",E.UPDATE_SNIPER_TICKET_DATA="updateSniperTicketData",E.HERO_DIE="sniperHeroDie",E.HERO_WIN="sniperHeroWin",E.ENEMY_IDLE="sniperEnemyIdle",E.ENEMY_DIE="sniperEnemyDie",E.ENEMY_WIN="sniperEnemyWin",E.UPDATE_BULLET="updateSniperBullet",E.GAME_OVER="sniperGameOver",E.GAME_AGAIN="sniperGameAgain",E.GAME_NEXT="sniperGameNext",n._RF.pop()}}}));

System.register("chunks:///_virtual/SniperGame.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SniperLevelData.ts","./SniperData.ts","./ResourcesUtil.ts","./SniperLevel.ts","./SniperEvent.ts","./EventListener.ts","./GameEvent.ts","./OpenPopupManager.ts","./Constants.ts"],(function(t){var e,n,i,o,s,a,r,l,c,u,h,p,v,f,E,m,d,S,U;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,o=t.Node,s=t.Prefab,a=t._decorator,r=t.Component,l=t.Vec2,c=t.instantiate,u=t.Toggle},function(t){h=t.SniperLevelData},function(t){p=t.SniperData},function(t){v=t.ResourcesUtil},function(t){f=t.SniperLevel},function(t){E=t.SniperEvent},function(t){m=t.EventListener},function(t){d=t.GameEvent},function(t){S=t.OpenPopupManager},function(t){U=t.Constants}],execute:function(){var L,b,g,C,G,_,T,A,O;i._RF.push({},"295a9v/e2FHUYan22cu2VQh","SniperGame",void 0);const{ccclass:P,property:y}=a;t("SniperGame",(L=P("SniperGame"),b=y(o),g=y(s),C=y(o),L((T=e((_=class extends r{constructor(){super(...arguments),n(this,"levelRoot",T,this),n(this,"bulletUIitemPrefab",A,this),n(this,"list",O,this),this.velocity=new l}show(t){p.instance.gameStart=!1,m.emit(d.HIDE_LOADING),p.instance.level=t,this.init(t)}init(t){this.levelRoot.destroyAllChildren(),h.instance.clear(),this.createLevel(t),this.crateUiList()}crateUiList(){this.list.destroyAllChildren();let t=h.instance.bulletCount;for(let e=0;e<t;e++){c(this.bulletUIitemPrefab).parent=this.list}}updateBulletList(){let t=h.instance.maxBulletCount-h.instance.bulletCount,e=this.list.children;for(let n=0;n<t;n++){e[n].getComponent(u).isChecked=!1}}createLevel(t){let e=p.levelPath+t;v.getPrefab(e).then((t=>{let e=c(t);e.parent=this.levelRoot,e.getComponent(f).init()}))}onGameAgain(){p.instance.gameStart=!1,this.init(p.instance.level)}onGameOver(){S.instance.hide(U.PopupUI.SniperGame)}onCloseBtn(){S.instance.hide(U.PopupUI.SniperGame)}start(){this.node.on(o.EventType.TOUCH_START,this.touchStart,this),this.node.on(o.EventType.TOUCH_MOVE,this.touchMove,this),this.node.on(o.EventType.TOUCH_END,this.touchEnd,this),this.node.on(o.EventType.TOUCH_CANCEL,this.touchEnd,this)}touchStart(t){var e=t.getUILocation();m.emit(E.SNIPER_TOUCH_START,e)}touchMove(t){var e=t.getUILocation();m.emit(E.SNIPER_TOUCH_MOVE,e)}touchEnd(t){var e=t.getUILocation();m.emit(E.SNIPER_TOUCH_END,e)}onEnable(){m.on(E.UPDATE_BULLET,this.updateBulletList,this),m.on(E.GAME_OVER,this.onGameOver,this),m.on(E.GAME_AGAIN,this.onGameAgain,this)}onDisable(){m.off(E.UPDATE_BULLET,this.updateBulletList,this),m.off(E.GAME_OVER,this.onGameOver,this),m.off(E.GAME_AGAIN,this.onGameAgain,this)}}).prototype,"levelRoot",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(_.prototype,"bulletUIitemPrefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(_.prototype,"list",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=_))||G));i._RF.pop()}}}));

System.register("chunks:///_virtual/SniperHero.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./SniperLevelData.ts","./EventListener.ts","./OpenPopupManager.ts","./Constants.ts","./SniperEvent.ts","./SniperData.ts"],(function(e){var t,n,i,o,s,r,a,h,l,c,u,p,d,S,f,_,m,g,T,N,y,E;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,o=e.sp,s=e.Node,r=e._decorator,a=e.Component,h=e.Vec2,l=e.UITransform,c=e.Vec3,u=e.misc,p=e.PhysicsSystem2D,d=e.ERaycast2DType,S=e.ParticleSystem2D},function(e){f=e.AudioManager},function(e){_=e.PathObj,m=e.SniperLevelData},function(e){g=e.EventListener},function(e){T=e.OpenPopupManager},function(e){N=e.Constants},function(e){y=e.SniperEvent},function(e){E=e.SniperData}],execute:function(){var b,C,P,v,A,w,D,H,O,R,k,x,M,I,L;i._RF.push({},"c6736at3ApLzYqr4S5N47wH","SniperHero",void 0);const{ccclass:U,property:z}=r;e("SniperHero",(b=U("SniperHero"),C=z(o.Skeleton),P=z(s),v=z(s),A=z(s),w=z(s),D=z(s),b((R=t((O=class extends a{constructor(){super(...arguments),n(this,"skeleton",R,this),n(this,"rotateNode",k,this),n(this,"ancher",x,this),n(this,"fileNode",M,this),n(this,"lineNode",I,this),n(this,"fireSmoke",L,this),this._dir=new h,this._vector=new h,this._curPathObj=new _,this._bulletBone=null,this._canShoot=!1,this._sniperCfg=null}init(){this.skeleton.clearTrack(1),this.skeleton.timeScale=1,this.skeleton.setAnimation(0,"idle",!0),this._bulletBone=this.skeleton.findBone("bullet"),this._sniperCfg=E.instance.getSniperCfg(E.instance.level)}resetAnimDir(e){let t=e*this.node.getScale().x+(this.node.getScale().x>0||0==e?0:180);if(t<=this._sniperCfg.maxAngle&&t>=this._sniperCfg.minAngle)return!1;let n=400*Math.cos(t/180*Math.PI),i=400*Math.sin(t/180*Math.PI);return this._bulletBone.x=n,this._bulletBone.y=i,!0}updateAncher(){let e=this.fileNode.getComponent(l).convertToWorldSpaceAR(new c(0,0,0)),t=this.rotateNode.getComponent(l).convertToNodeSpaceAR(e),n=this.checkCollider(e);n&&(0==n.x&&0==n.y&&(this._canShoot=!1),this.ancher.setPosition(n.x,n.y),this.updateLinePoint(t,new h(n.x,n.y)))}updateLinePoint(e,t){let n=h.distance(new h(e.x,e.y),t);this.lineNode.setPosition(e),this.lineNode.getComponent(l).setContentSize(n,4);let i=new h;h.subtract(i,t.clone(),new h(e.x,e.y));let o=i.normalize(),s=u.radiansToDegrees(Math.atan2(o.y,o.x));this.lineNode.angle=s,this._vector=o.clone()}checkCollider(e){let t=e.clone(),n=new h(t.x,t.y).add(this._dir.clone().multiplyScalar(2e3)),i=new c(n.x,n.y),o=new c;const s=p.instance.raycast(t,i,d.Closest,4096);for(let e=0;e<s.length;e++){const t=s[e],n=(t.collider,t.point),i=t.normal;t.fraction;o=this.rotateNode.getComponent(l).convertToNodeSpaceAR(new c(n.x,n.y)),this._curPathObj.normal=i.clone(),this._curPathObj.targetWPos=n.clone(),this._curPathObj.vector=this._dir.clone()}return o}onHeroDeath(){f.instance.playSound(13),m.instance.bulletCount=-1,m.instance.clearPath(),this.skeleton.setAnimation(1,"dead",!1),g.emit(y.UPDATE_BULLET),m.instance.bulletCount<=0?T.instance.show(N.PopupUI.SniperOverPopup):E.instance.gameStart=!1}onHeroWin(){E.instance.gameStart=!1,m.instance.clearPath(),this.skeleton.setAnimation(1,"win",!1)}onTouchStart(e){if(E.instance.gameStart)return;g.emit(y.ENEMY_IDLE),this.skeleton.clearAnimation(1),this.skeleton.setAnimation(0,"idle",!0),this.rotateNode.active=!0;let t=this.rotateNode.getComponent(l).convertToNodeSpaceAR(new c(e.x,e.y,0));this._dir=new h(t.x,t.y).normalize();var n=u.radiansToDegrees(Math.atan2(this._dir.y,this._dir.x));this._canShoot=this.resetAnimDir(n)}onTouchMove(e){if(E.instance.gameStart)return;let t=this.rotateNode.getComponent(l).convertToNodeSpaceAR(new c(e.x,e.y,0));this._dir=new h(t.x,t.y).normalize();var n=u.radiansToDegrees(Math.atan2(this._dir.y,this._dir.x));this._canShoot=this.resetAnimDir(n)}onTouchEnd(e){if(!this._canShoot)return void T.instance.showToast("sniper.angleTips");if(E.instance.gameStart)return;this.rotateNode.active=!1,this.skeleton.timeScale=5,this.skeleton.setAnimation(1,"shoot",!1);let t=this.fileNode.getComponent(l).convertToWorldSpaceAR(new c(0,0,0));m.instance.setPathArr(this._curPathObj,500),g.emit(y.SHOOT_BULLET,t,this._vector);let n=this.node.getComponent(l).convertToNodeSpaceAR(t);this.fireSmoke.setPosition(n),this.fireSmoke.active=!1,this.fireSmoke.active=!0,E.instance.gameStart=!0,this.fireSmoke.getComponent(S).resetSystem(),f.instance.playSound(15)}onEnable(){g.on(y.SNIPER_TOUCH_START,this.onTouchStart,this),g.on(y.SNIPER_TOUCH_MOVE,this.onTouchMove,this),g.on(y.SNIPER_TOUCH_END,this.onTouchEnd,this),g.on(y.SNIPER_TOUCH_CANCLE,this.onTouchEnd,this),g.on(y.HERO_DIE,this.onHeroDeath,this),g.on(y.HERO_WIN,this.onHeroWin,this)}onDisable(){g.off(y.SNIPER_TOUCH_START,this.onTouchStart,this),g.off(y.SNIPER_TOUCH_MOVE,this.onTouchMove,this),g.off(y.SNIPER_TOUCH_END,this.onTouchEnd,this),g.off(y.SNIPER_TOUCH_CANCLE,this.onTouchEnd,this),g.off(y.HERO_DIE,this.onHeroDeath,this),g.off(y.HERO_WIN,this.onHeroWin,this)}update(e){this.updateAncher()}}).prototype,"skeleton",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(O.prototype,"rotateNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(O.prototype,"ancher",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(O.prototype,"fileNode",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(O.prototype,"lineNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(O.prototype,"fireSmoke",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=O))||H));i._RF.pop()}}}));

System.register("chunks:///_virtual/SniperLevel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SniperLevelData.ts","./ResourcesUtil.ts","./SniperBullet.ts","./EventListener.ts","./SniperHero.ts","./SniperEnemy.ts","./SniperEvent.ts","./SniperData.ts"],(function(e){var t,n,o,i,r,l,a,s,c,p,u,h,y,m,f,R,b,g,S,d,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){o=e.cclegacy,i=e.Node,r=e._decorator,l=e.Component,a=e.PhysicsSystem2D,s=e.ERaycast2DType,c=e.UITransform,p=e.Vec3,u=e.instantiate,h=e.Rect,y=e.PolygonCollider2D},function(e){m=e.SniperLevelData},function(e){f=e.ResourcesUtil},function(e){R=e.SniperBullet},function(e){b=e.EventListener},function(e){g=e.SniperHero},function(e){S=e.SniperEnemy},function(e){d=e.SniperEvent},function(e){v=e.SniperData}],execute:function(){var C,P,L,w,E,D,T,B,z,A,x;o._RF.push({},"b1604SE0n5CDJcbI6+mLMfp","SniperLevel",void 0);const{ccclass:N,property:_}=r;e("SniperLevel",(C=N("SniperLevel"),P=_(i),L=_(i),w=_(i),E=_(i),C((B=t((T=class extends l{constructor(){super(...arguments),n(this,"playerRoot",B,this),n(this,"enemyRoot",z,this),n(this,"bulletRoot",A,this),n(this,"points",x,this)}init(){m.instance.bulletNode=this.bulletRoot,this.createPlayer(),this.createEnemy()}checkCollider(){let e=this.playerRoot.getWorldPosition(),t=this.enemyRoot.getWorldPosition();const n=a.instance.raycast(e,t,s.Any,4096);for(let e=0;e<n.length;e++){const t=n[e],o=(t.collider,t.point);t.normal,t.fraction;this.playerRoot.getComponent(c).convertToNodeSpaceAR(new p(o.x,o.y))}}createPlayer(){let e=v.heroPath;f.getPrefab(e).then((e=>{let t=u(e);t.parent=this.playerRoot,t.getComponent(g).init();let n=t.getComponent(c).contentSize,o=t.getComponent(c).convertToWorldSpaceAR(new p(0,0,0)),i=this.bulletRoot.getComponent(c).convertToNodeSpaceAR(o),r=new h(i.x-n.width/2,i.y,n.width,n.height);m.instance.playerRect=r}))}createEnemy(){let e=v.enemyPath;f.getPrefab(e).then((e=>{let t=u(e);t.parent=this.enemyRoot,t.getComponent(S).init();let n=t.getComponent(c).contentSize,o=t.getComponent(c).convertToWorldSpaceAR(new p(0,0,0)),i=this.bulletRoot.getComponent(c).convertToNodeSpaceAR(o),r=new h(i.x-n.width/2,i.y,n.width,n.height);m.instance.enemyRect=r}))}onCreateBullet(e,t){let n=v.bulletPath,o=this.bulletRoot.getComponent(c).convertToNodeSpaceAR(new p(e.x,e.y));f.getPrefab(n).then((e=>{let n=u(e);n.parent=this.bulletRoot,n.setPosition(o),n.getComponent(R).init(t)}))}addLintPoint(){let e=this.points.children;for(let t=0;t<e.length;t++){let n=e[t].getComponent(y).points;m.instance.addLinePoint(n,this.points)}}onEnable(){b.on(d.SHOOT_BULLET,this.onCreateBullet,this)}onDisable(){b.off(d.SHOOT_BULLET,this.onCreateBullet,this)}}).prototype,"playerRoot",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(T.prototype,"enemyRoot",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(T.prototype,"bulletRoot",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(T.prototype,"points",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=T))||D));o._RF.pop()}}}));

System.register("chunks:///_virtual/SniperLevelData.ts",["cc","./Util.ts","./SniperData.ts"],(function(t){var e,n,i,o,r,l,s,c,a,h;return{setters:[function(t){e=t.cclegacy,n=t.Rect,i=t.UITransform,o=t.Vec3,r=t.Vec2,l=t.PhysicsSystem2D,s=t.ERaycast2DType,c=t.Intersection2D},function(t){a=t.Util},function(t){h=t.SniperData}],execute:function(){e._RF.push({},"8a30d42jnxGapSF1zO9t11y","SniperLevelData",void 0);class y{constructor(){this._linePoints=[],this._pathArr=[],this._playerRect=new n,this._enemyRect=new n,this.bulletNode=null,this._bulletCount=5,this.maxBulletCount=5,this.difficulty=-1}set bulletCount(t){this._bulletCount+=t}get bulletCount(){return this._bulletCount}set playerRect(t){this._playerRect=t}get playerRect(){return this._playerRect}set enemyRect(t){this._enemyRect=t}get enemyRect(){return this._enemyRect}addLinePoint(t,e){for(let n=0;n<t.length;n++)if(n<=t.length-2){const r=e.getComponent(i).convertToWorldSpaceAR(new o(t[n].x,t[n].y)),l=e.getComponent(i).convertToWorldSpaceAR(new o(t[n+1].x,t[n].y));let s=new u;s.startPoint=r,s.endPoint=l,this._linePoints.push(s)}}reflect(t,e){let n=r.dot(t,e);return{x:2*n*e.x-t.x,y:2*n*e.y-t.y}}findIntersection(t,e,n,i){let o={x:e.x-t.x,y:e.y-t.y},l={x:i.x-n.x,y:i.y-n.y},s=o.x*l.y-o.y*l.x;if(0===s)return null;let c=((n.x-t.x)*l.y-(n.y-t.y)*l.x)/s,a=((n.x-t.x)*o.y-(n.y-t.y)*o.x)/s;if(c>=0&&c<=1&&a>=0&&a<=1){let e={x:t.x+c*o.x,y:t.y+c*o.y},n=new r(l.x,l.y).normalize();return{intersection:e,reflection:this.reflect(o,n)}}return null}getIntersection(t,e,n,i){let o=this.findIntersection(t,e,n,i);return o?new r(o.intersection.x,o.intersection.y):null}getIntersectionByLine(t,e,n){let o=t.clone(),l=t.clone().add(e.multiplyScalar(2e4)),s=new r,c=[];for(let e=0;e<this._linePoints.length;e++){const a=this._linePoints[e];let h=n.getComponent(i).convertToNodeSpaceAR(a.startPoint),y=n.getComponent(i).convertToNodeSpaceAR(a.endPoint);if(s=this.getIntersection(o,l,new r(h.x,h.y),new r(y.x,y.y)),s){let e=r.distance(t,s),n=new d;n.dis=e,n.point=s.clone(),c.push(n)}}return c.length?(c.sort(((t,e)=>t.dis-e.dis)),c[0].point):s}getReflect(t,e){let n=r.dot(t,e);return t.subtract(e.multiplyScalar(2*n))}getCollider(t,e){let n=t.clone(),i=new r(n.x,n.y).add(e.clone().multiplyScalar(2e3)),c=new o(i.x,i.y),a=new p;const h=l.instance.raycast(n,c,s.Closest,4096);for(let t=0;t<h.length;t++){const n=h[t],i=(n.collider,n.point),o=n.normal;n.fraction;a.normal=o.clone(),a.targetWPos=i.clone(),a.vector=e.clone()}return a}checkHitEnemy(t,e){let n=this.bulletNode.getComponent(i).convertToNodeSpaceAR(new o(t.x,t.y,0)),l=this.bulletNode.getComponent(i).convertToNodeSpaceAR(new o(e.x,e.y,0));return!!c.lineRect(new r(n.x,n.y),new r(l.x,l.y),this.enemyRect)}setPathArr(t,e){this._pathArr=[];let n=a.clone(t);this._pathArr.push(a.clone(n));let i=h.instance.getSniperCfg(h.instance.level);this.difficulty<0&&(this.difficulty=Math.floor(100*Math.random()));for(let t=0;t<e;t++){let t=this.getReflect(new r(n.vector.x,n.vector.y),new r(n.normal.x,n.normal.y)),e=this.getCollider(new o(n.targetWPos.x,n.targetWPos.y,0),new r(t.x,t.y));if(e.targetWPos)if(i.difficulty>=this.difficulty&&this.checkHitEnemy(n.targetWPos,e.targetWPos)){t=new r(n.vector.x,n.vector.y).negative();let e=this.getCollider(new o(n.targetWPos.x,n.targetWPos.y,0),new r(t.x,t.y));e.targetWPos&&(n=a.clone(e),this._pathArr.push(a.clone(n)))}else n=a.clone(e),this._pathArr.push(a.clone(n))}}getPathPoint(){return this._pathArr.length?this._pathArr.shift():null}clearPath(){this._pathArr=[]}clear(){this._linePoints=[],this._pathArr=[],this._bulletCount=5,this.maxBulletCount=5,this.bulletNode=null,this.difficulty=Math.floor(100*Math.random())}static get instance(){return this._instance||(this._instance=new y),this._instance}}t("SniperLevelData",y),y._instance=void 0;class u{constructor(){this.startPoint=void 0,this.endPoint=void 0}}t("LineObj",u);class d{constructor(){this.point=void 0,this.dis=void 0}}t("IntersectionObj",d);class p{constructor(){this.targetWPos=void 0,this.vector=void 0,this.normal=void 0}}t("PathObj",p),e._RF.pop()}}}));

System.register("chunks:///_virtual/SniperLevelItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SpriteEx.ts","./SniperData.ts","./LanguageManager.ts"],(function(e){var t,i,l,n,r,a,s,o,c,u,p,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){l=e.cclegacy,n=e.Sprite,r=e.Label,a=e.Node,s=e._decorator,o=e.Component,c=e.Color},function(e){u=e.SpriteEx},function(e){p=e.SniperData},function(e){h=e.LanguageManager}],execute:function(){var b,g,m,v,d,f,B,y,L,w,k,x,z,S,O,F,I,_,A,N,j,D,C,E,H,M,P;l._RF.push({},"44f9cFqxRFLhrFnB60I7tea","SniperLevelItem",void 0);const{ccclass:R,property:T}=s;e("SniperLevelItem",(b=R("SniperLevelItem"),g=T(n),m=T(u),v=T(r),d=T(r),f=T(a),B=T(a),y=T(a),L=T(r),w=T(a),k=T(r),x=T(u),z=T(a),b((F=t((O=class extends o{constructor(){super(...arguments),i(this,"progressBar",F,this),i(this,"levelBg",I,this),i(this,"levelNumber",_,this),i(this,"chapterText",A,this),i(this,"startBtn",N,this),i(this,"startAdBtn",j,this),i(this,"startAdIcon",D,this),i(this,"ticketLimit",C,this),i(this,"unlockBtn",E,this),i(this,"adLimit",H,this),i(this,"icon",M,this),i(this,"stars",P,this),this._levelObj=null}init(e,t){this._levelObj=e;let i=p.instance.getSniperCfg(e.level);for(let e=0;e<this.stars.children.length;e++)this.stars.children[e].getComponent(u).index=i.star>e?0:1;e.level==t+1?this.levelBg.index=1:e.level<t+1?this.levelBg.index=0:this.levelBg.index=2,this.levelNumber.string=`${e.level}`,this.chapterText.string=h.instance.getLang("game.chapter")+` ${e.level}`,e.level<t+1?this.progressBar.color=(new c).fromHEX("#3BFFFF"):this.progressBar.color=(new c).fromHEX("#OOOOOO");let l=!(t>=e.level||e.adNumber>=e.adLimit);this.icon.index=l?1:0,this.adLimit.string=e.adNumber+"/"+e.adLimit,this.ticketLimit.string="1/"+p.instance.ticket,this.startBtn.active=!l&&p.instance.ticket>0,this.startAdBtn.active=!l&&0==p.instance.ticket,this.startAdIcon.active=!(p.instance.ticket>0),this.unlockBtn.active=l}onPlayBtn(){p.instance.play(this._levelObj.level)}onUnlockBtn(){p.instance.unlock(this._levelObj.level)}}).prototype,"progressBar",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=t(O.prototype,"levelBg",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(O.prototype,"levelNumber",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=t(O.prototype,"chapterText",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=t(O.prototype,"startBtn",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=t(O.prototype,"startAdBtn",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(O.prototype,"startAdIcon",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(O.prototype,"ticketLimit",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=t(O.prototype,"unlockBtn",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=t(O.prototype,"adLimit",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=t(O.prototype,"icon",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=t(O.prototype,"stars",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=O))||S));l._RF.pop()}}}));

System.register("chunks:///_virtual/SniperModel.ts",["cc"],(function(i){var t;return{setters:[function(i){t=i.cclegacy}],execute:function(){t._RF.push({},"daf50XAZ8lHk5rfEVjmPsY4","SniperModel",void 0);i("SniperCfg",class{constructor(){this.ClassName="Sniper",this.Id=void 0,this.level=void 0,this.adLimit=void 0,this.rewards=void 0,this.difficulty=void 0,this.star=void 0,this.monster=void 0,this.minAngle=void 0,this.maxAngle=void 0}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/SniperOverPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./EventListener.ts","./OpenPopupManager.ts","./SniperEvent.ts","./SniperData.ts"],(function(e){var n,t,i,r,o,a,p,s,c,u,l,f,v;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.initializerDefineProperty},function(e){i=e.cclegacy,r=e.Prefab,o=e.AnimationComponent,a=e.Node,p=e._decorator,s=e.Component},function(e){c=e.Constants},function(e){u=e.EventListener},function(e){l=e.OpenPopupManager},function(e){f=e.SniperEvent},function(e){v=e.SniperData}],execute:function(){var P,d,b,h,y,m,S,O,g;i._RF.push({},"8ce6d4LwHRB5oz5Alo/fYyQ","SniperOverPopup",void 0);const{ccclass:w,property:A}=p;e("SniperOverPopup",(P=w("SniperOverPopup"),d=A(r),b=A(o),h=A(a),P((S=n((m=class extends s{constructor(){super(...arguments),t(this,"rewardPrefab",S,this),t(this,"failAnim",O,this),t(this,"adIcon",g,this)}show(e){this.failAnim.play(),this.adIcon.active=!(v.instance.ticket>0)}onPlayBtn(){l.instance.hide(c.PopupUI.SniperOverPopup),v.instance.retry(v.instance.level)}onCloseBtn(){l.instance.hide(c.PopupUI.SniperOverPopup),u.emit(f.GAME_OVER)}}).prototype,"rewardPrefab",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=n(m.prototype,"failAnim",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=n(m.prototype,"adIcon",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=m))||y));i._RF.pop()}}}));

System.register("chunks:///_virtual/SniperPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SniperData.ts","./SniperLevelItem.ts","./OpenPopupManager.ts","./Constants.ts","./SniperEvent.ts","./EventListener.ts","./AudioManager.ts","./LanguageManager.ts"],(function(e){var t,n,i,s,o,a,r,l,p,h,u,c,d,b,m,f,v,g,L;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,s=e.sp,o=e.Node,a=e.Prefab,r=e.Label,l=e._decorator,p=e.Component,h=e.instantiate,u=e.UITransform},function(e){c=e.SniperData},function(e){d=e.SniperLevelItem},function(e){b=e.OpenPopupManager},function(e){m=e.Constants},function(e){f=e.SniperEvent},function(e){v=e.EventListener},function(e){g=e.AudioManager},function(e){L=e.LanguageManager}],execute:function(){var _,S,y,P,A,D,C,M,E,I,X,w,U;i._RF.push({},"cb170fbM4tGmpkK90JUwL4c","SniperPopup",void 0);const{ccclass:z,property:N}=l;e("SniperPopup",(_=z("SniperPopup"),S=N(s.Skeleton),y=N(o),P=N(o),A=N(a),D=N(r),_((E=t((M=class extends p{constructor(){super(...arguments),n(this,"hero",E,this),n(this,"content",I,this),n(this,"tips",X,this),n(this,"eventDailyItem",w,this),n(this,"eventLabel",U,this),this._endX=0,this._startX=0,this._idleNumber=0}show(){this._endX=0,this._startX=0,g.instance.playMusic(18,!0),c.instance.gameStart=!1,c.instance.getSniperInfo(),this.onUpdateContent(),this.hero.setAnimation(0,"idle",!0),this.hero.setCompleteListener((e=>{let t=e.animation.name;"idle"==t?(this._idleNumber++,this._idleNumber>5&&(this._idleNumber=0,this.hero.setAnimation(1,"shoot",!1))):"shoot"==t&&(Math.random()>.5?this.hero.setAnimation(1,"win",!1):this.hero.setAnimation(1,"dead",!1))}))}onUpdateContent(){if(0==c.instance.levelObjs.length)return;this.content.removeAllChildren(),c.instance.levelObjs.forEach(((e,t)=>{let n=h(this.eventDailyItem);n.getComponent(d).init(e,c.instance.maxLevel),n.parent=this.content}));let e=c.instance.events;if(e&&e.length>0){this.eventLabel.node.parent.parent.active=!0;let t="";for(let n=0;n<e.length;n++){let i=e[n];t+=L.instance.getLang("sniper.usernotices",[i.username,i.level])+"    "}this.eventLabel.string=t,this.scheduleOnce((()=>{this.eventLabel.node.position;let e=this.eventLabel.node.getComponent(u).contentSize;this._endX=200-e.width-400,this._startX=-200}),1)}else this.eventLabel.node.parent.parent.active=!1,this._endX=0}onCloseBtn(){b.instance.hide(m.PopupUI.SniperPopup),g.instance.playMusic(1,!0)}update(e){if(0==this._endX)return;let t=this.eventLabel.node.position;t.x<=this._endX&&this.eventLabel.node.setPosition(this._startX,t.y),this.eventLabel.node.setPosition(t.x-100*e,t.y)}onEnable(){v.on(f.UPDATE_SNIPER_DATA,this.onUpdateContent,this)}onDisable(){v.off(f.UPDATE_SNIPER_DATA,this.onUpdateContent,this)}}).prototype,"hero",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(M.prototype,"content",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=t(M.prototype,"tips",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=t(M.prototype,"eventDailyItem",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=t(M.prototype,"eventLabel",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=M))||C));i._RF.pop()}}}));

System.register("chunks:///_virtual/SniperWinPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./EventListener.ts","./OpenPopupManager.ts","./RewardItem.ts","./SniperEvent.ts","./SniperData.ts"],(function(n){var e,t,i,r,o,a,s,l,p,c,u,f,h,b,w,d;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.initializerDefineProperty},function(n){i=n.cclegacy,r=n.Prefab,o=n.Node,a=n.AnimationComponent,s=n._decorator,l=n.Component,p=n.Vec3,c=n.instantiate},function(n){u=n.Constants},function(n){f=n.EventListener},function(n){h=n.OpenPopupManager},function(n){b=n.RewardItem},function(n){w=n.SniperEvent},function(n){d=n.SniperData}],execute:function(){var m,P,g,y,v,S,C,W,z,A,E;i._RF.push({},"db0d4FHWn5MV6i6vBksa2Wz","SniperWinPopup",void 0);const{ccclass:M,property:R}=s;n("SniperWinPopup",(m=M("SniperWinPopup"),P=R(r),g=R(o),y=R(a),v=R(o),m((W=e((C=class extends l{constructor(){super(...arguments),t(this,"rewardPrefab",W,this),t(this,"content",z,this),t(this,"winAnim",A,this),t(this,"btn",E,this)}show(){d.instance.settleBattle(d.instance.level,!0),this.winAnim.play(),this.setContent()}async setContent(){let n=d.instance.winRewards;this.content.removeAllChildren();let e=new p(0,0,0),t=n.length,i=t>=4?4:t;e.x=120*-(i-1)/2;for(let t=0;t<n.length;t++)await new Promise((r=>{this.scheduleOnce((()=>{const o=n[t];let a=c(this.rewardPrefab),s=new p(0,0,0),l=Math.floor(t/i),u=t%i;s.x=e.x+120*u,s.y=-120*l,a.parent=this.content,a.getComponent(b).init(o),a.setPosition(s),r(0)}),.1)}))}onCloseBtn(){h.instance.hide(u.PopupUI.SniperWinPopup),f.emit(w.GAME_OVER)}}).prototype,"rewardPrefab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(C.prototype,"content",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(C.prototype,"winAnim",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(C.prototype,"btn",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=C))||S));i._RF.pop()}}}));

System.register("chunks:///_virtual/SoundModel.ts",["cc"],(function(i){var o;return{setters:[function(i){o=i.cclegacy}],execute:function(){o._RF.push({},"da0b587TatEfYOmhgmfwcge","SoundModel",void 0);i("SoundCfg",class{constructor(){this.ClassName="Sound",this.Id=void 0,this.Name=void 0,this.Desc=void 0,this.Group=void 0,this.Type=void 0,this.Volume=void 0,this.Delay=void 0,this.Mp3=void 0}}),o._RF.pop()}}}));

System.register("chunks:///_virtual/SpinTipsPopup.ts",["cc","./OpenPopupManager.ts","./Constants.ts"],(function(p){var n,s,o,t,e;return{setters:[function(p){n=p.cclegacy,s=p.Component,o=p._decorator},function(p){t=p.OpenPopupManager},function(p){e=p.Constants}],execute:function(){var c;n._RF.push({},"33811XsuQxHbZKINlmZsV0x","SpinTipsPopup",void 0);const{ccclass:i,property:u}=o;p("SpinTipsPopup",i("SpinTipsPopup")(c=class extends s{show(){}onCloseTouch(){t.instance.hide(e.PopupUI.SpinTipsPopup)}})||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/SpriteEx.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,i,n,o,p,s,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.initializerDefineProperty},function(e){i=e.cclegacy,n=e.Sprite,o=e.SpriteFrame,p=e.CCInteger,s=e._decorator,u=e.Component}],execute:function(){var a,c,l,x,d,h,m,y;i._RF.push({},"a7351A5vfBG26Vq3Fx4Zzzr","SpriteEx",void 0);const{ccclass:g,property:f,executeInEditMode:F,requireComponent:_,menu:b}=s;e("SpriteEx",(a=_(n),c=b("UI/SpriteEx Index"),l=f({type:[o],tooltip:"SpriteEx Indexes"}),x=f({type:p,tooltip:"The Current Frame"}),g(d=F(d=a(d=c((m=t((h=class extends u{constructor(){super(...arguments),r(this,"spriteFrames",m,this),r(this,"_index",y,this)}get index(){return this._index}set index(e){if(e<0)return;this._index=e%this.spriteFrames.length,this.node.getComponent(n).spriteFrame=this.spriteFrames[this._index]}get size(){return this.spriteFrames.length}}).prototype,"spriteFrames",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[null]}}),t(h.prototype,"index",[x],Object.getOwnPropertyDescriptor(h.prototype,"index"),h.prototype),y=t(h.prototype,"_index",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=h))||d)||d)||d)||d));i._RF.pop()}}}));

System.register("chunks:///_virtual/StarPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./PlayerData.ts"],(function(t){var e,i,r,n,a,s,o,l,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){r=t.cclegacy,n=t.Label,a=t._decorator,s=t.Component},function(t){o=t.OpenPopupManager},function(t){l=t.Constants},function(t){u=t.PlayerData}],execute:function(){var p,c,h,b,g,m,f,y,P,d,w,z,v,$,D,S,k,C,A;r._RF.push({},"ddbc3FCET1EdqPZ4bAP1NxD","StarPopup",void 0);const{ccclass:_,property:x}=a;t("StarPopup",(p=_("StarPopup"),c=x(n),h=x(n),b=x(n),g=x(n),m=x(n),f=x(n),y=x(n),P=x(n),p((z=e((w=class extends s{constructor(){super(...arguments),i(this,"accountAge",z,this),i(this,"telegram",v,this),i(this,"invite",$,this),i(this,"task",D,this),i(this,"game",S,this),i(this,"purchase",k,this),i(this,"spin",C,this),i(this,"other",A,this)}show(){let t=u.instance.starObj;this.accountAge.string=`${t.account}`,this.telegram.string=`${t.premium}`,this.invite.string=`${t.invite}`,this.game.string=`${t.battle}`,this.purchase.string=`${t.purchase?t.purchase:0}`,this.task.string=`${t.task}`,this.spin.string=`${t.spin}`,this.other.string=`${t.other}`}onCloseTouch(){o.instance.hide(l.PopupUI.StarPopup)}}).prototype,"accountAge",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=e(w.prototype,"telegram",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=e(w.prototype,"invite",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=e(w.prototype,"task",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=e(w.prototype,"game",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=e(w.prototype,"purchase",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=e(w.prototype,"spin",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=e(w.prototype,"other",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=w))||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/Storage.ts",["cc"],(function(t){var e,a;return{setters:[function(t){e=t.cclegacy,a=t.sys}],execute:function(){e._RF.push({},"aa9e8led8JCu5kY5fi2qjfH","Storage",void 0);t("Storage",class{static setItem(t,e){a.localStorage.setItem(t,e)}static getItem(t){return a.localStorage.getItem(t)}static removeItem(t){a.localStorage.removeItem(t)}static clear(){a.localStorage.clear()}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/SysOpenData.ts",["cc","./CfgMgr.ts","./PlayerData.ts","./GameDefine.ts","./SysOpenModel.ts"],(function(t){var e,n,s,a,i;return{setters:[function(t){e=t.cclegacy},function(t){n=t.CfgMgr},function(t){s=t.PlayerData},function(t){a=t.GameDefine},function(t){i=t.SysOpenCfg}],execute:function(){e._RF.push({},"63bbcBqI+ZE/66F0uXhki5z","SysOpenData",void 0);class c{constructor(){this._sysOpenData=new Map}init(){let t=n.getCfgDataArray(new i);for(let e=0;e<t.length;e++){let n=t[e];this._sysOpenData.set(n.Id,n)}}checkSysOpen(t){if(a.isDebug)return!0;if(this._sysOpenData.has(t)){return!(this._sysOpenData.get(t).unlock>=s.instance.chapterObj.chapterId)}return!1}getSysOpenCfgById(t){return n.getDataById(new i,t)}unlockSysAction(t){}static get instance(){return this._instance||(this._instance=new c),this._instance}}t("SysOpenData",c),c._instance=null,e._RF.pop()}}}));

System.register("chunks:///_virtual/SysOpenModel.ts",["cc"],(function(s){var e;return{setters:[function(s){e=s.cclegacy}],execute:function(){e._RF.push({},"630dfslL79EJa1ydFpf86ok","SysOpenModel",void 0);s("SysOpenCfg",class{constructor(){this.ClassName="SysOpen",this.Id=void 0,this.name=void 0,this.type=void 0,this.desc=void 0,this.unlock=void 0}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/SystemConstantModel.ts",["cc"],(function(t){var s;return{setters:[function(t){s=t.cclegacy}],execute:function(){s._RF.push({},"4905eDmeYhEfpQXfWDy9VDm","SystemConstantModel",void 0);t("SystemConstantCfg",class{constructor(){this.ClassName="SystemConstant",this.Id=void 0,this.ConstantName=void 0,this.ConstantValue=void 0,this.ConstantValue2=void 0,this.Explain=void 0}}),s._RF.pop()}}}));

System.register("chunks:///_virtual/TapBattleUIManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventListener.ts","./TapEvent.ts","./PoolManager.ts","./TapMonsterHpItem.ts","./Constants.ts","./ResourcesUtil.ts","./TapDamageNumItem.ts","./TapTouch.ts","./TapShadow.ts"],(function(t){var e,a,n,i,o,r,l,s,h,p,u,b,c,d,f,m,P,g,T;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.initializerDefineProperty},function(t){n=t.cclegacy,i=t.Node,o=t.Label,r=t._decorator,l=t.Component,s=t.instantiate,h=t.UITransform,p=t.Vec3},function(t){u=t.EventListener},function(t){b=t.TapEvent},function(t){c=t.PoolManager},function(t){d=t.TapMonsterHpItem},function(t){f=t.Constants},function(t){m=t.ResourcesUtil},function(t){P=t.TapDamageNumItem},function(t){g=t.TapTouch},function(t){T=t.TapShadow}],execute:function(){var U,C,I,_,D,M,S,w,A,N,H,E,R;n._RF.push({},"dd4406TTPVBSpJdwEOWbMBt","TapBattleUIManager",void 0);const{ccclass:v,property:y}=r;t("TapBattleUIManager",(U=v("TapBattleUIManager"),C=y(i),I=y(i),_=y(o),D=y(o),M=y(o),U((A=e((w=class extends l{constructor(){super(...arguments),a(this,"battleUIUpParent",A,this),a(this,"battleUIDownParent",N,this),a(this,"atk",H,this),a(this,"cd",E,this),a(this,"wave",R,this),this._battlerUIPrefabData=new Map}init(){}clear(t){void 0===t&&(t=!0),t&&this._battlerUIPrefabData.clear(),this.battleUIUpParent.removeAllChildren(),this.battleUIDownParent.getChildByName("Shadow").removeAllChildren()}onCreateMonsterHp(t){let e="tapMonsterHpItem",a=null,n=null,i=this.battleUIUpParent;if(this._battlerUIPrefabData.has(e))n=this._battlerUIPrefabData.get(e),a=s(n),i.addChild(a),a.getComponent(d).init(t),t.monsterHpItem=a.getComponent(d);else{let n=f.tapBattlePath+e;m.getPrefab(n).then((n=>{this._battlerUIPrefabData.set(e,n),a=s(n),i.addChild(a),a.getComponent(d).init(t),t.monsterHpItem=a.getComponent(d)}))}}onCreateDamageNum(t,e,a,n){let i="tapDamageNumItem",o=null,r=null;if(this._battlerUIPrefabData.has(i))r=this._battlerUIPrefabData.get(i),o=c.instance.getNodeItem(r),this.battleUIUpParent.addChild(o),o.setPosition(t),o.getComponent(P).init(e,a);else{let n=f.tapBattlePath+i;m.getPrefab(n).then((n=>{this._battlerUIPrefabData.set(i,n),o=c.instance.getNodeItem(n),this.battleUIUpParent.addChild(o),o.setPosition(t),o.getComponent(P).init(e,a)}))}}onCreateTapTouch(t){let e=this.node.getComponent(h).convertToNodeSpaceAR(new p(t.x,t.y,0)),a="tapTouch";if(this._battlerUIPrefabData.has(a)){let t=this._battlerUIPrefabData.get(a),n=c.instance.getNodeItem(t);this.battleUIUpParent.addChild(n),n.setPosition(e),n.getComponent(g).init()}else{let t=f.tapBattlePath+a;m.getPrefab(t).then((t=>{this._battlerUIPrefabData.set(a,t);let n=c.instance.getNodeItem(t);this.battleUIUpParent.addChild(n),n.setPosition(e),n.getComponent(g).init()}))}}onCreateMonsterShadow(t){let e="tapShadow",a=null,n=null,i=this.battleUIDownParent.getChildByName("Shadow");if(this._battlerUIPrefabData.has(e))n=this._battlerUIPrefabData.get(e),a=s(n),i.addChild(a),a.getComponent(T).init(t),t.monsterShadow=a.getComponent(T);else{let n=f.tapBattlePath+e;m.getPrefab(n).then((n=>{this._battlerUIPrefabData.set(e,n),a=s(n),i.addChild(a),a.getComponent(T).init(t),t.monsterShadow=a.getComponent(T)}))}}onEnable(){u.on(b.SHOW_TAP_MONSTER_HP,this.onCreateMonsterHp,this),u.on(b.TAP_CREATE_DAMAGER_NUM,this.onCreateDamageNum,this),u.on(b.SHOW_TAP_MONSTER_SHADOW,this.onCreateMonsterShadow,this),u.on(b.TAP_GAME_TOUCH_START,this.onCreateTapTouch,this)}onDisable(){u.off(b.SHOW_TAP_MONSTER_HP,this.onCreateMonsterHp,this),u.off(b.TAP_CREATE_DAMAGER_NUM,this.onCreateDamageNum,this),u.off(b.TAP_GAME_TOUCH_START,this.onCreateTapTouch,this),u.off(b.SHOW_TAP_MONSTER_SHADOW,this.onCreateMonsterShadow,this)}}).prototype,"battleUIUpParent",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(w.prototype,"battleUIDownParent",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(w.prototype,"atk",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(w.prototype,"cd",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(w.prototype,"wave",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=w))||S));n._RF.pop()}}}));

System.register("chunks:///_virtual/TapBgManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./ResourcesUtil.ts","./TapData.ts"],(function(t){var e,a,n,r,s,o,i,c,p,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.initializerDefineProperty},function(t){n=t.cclegacy,r=t.Node,s=t._decorator,o=t.Component,i=t.Sprite},function(t){c=t.Constants},function(t){p=t.ResourcesUtil},function(t){l=t.TapData}],execute:function(){var u,g,b,f,h;n._RF.push({},"a0904bkbGVKzrCw0QzptO2m","TapBgManager",void 0);const{ccclass:m,property:B}=s;t("TapBgManager",(u=m("TapBgManager"),g=B(r),u((h=e((f=class extends o{constructor(){super(...arguments),a(this,"bg",h,this)}init(){this.setBattleBgRes()}setBattleBgRes(){let t=l.instance.tapObj?l.instance.tapObj.count:0;t=t||0,console.log("count",t);let e=Math.floor(t%10)+1,a=c.mapPath+"battleMap"+e+"/spriteFrame";let n=this.bg.getComponent(i);p.geSpriteFrame(a).then((t=>{n.spriteFrame=t}))}}).prototype,"bg",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=f))||b));n._RF.pop()}}}));

System.register("chunks:///_virtual/TapDamageNumItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PoolManager.ts","./SkillModel.ts"],(function(e){var t,i,o,a,n,s,r,l,c,u,m,p,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){o=e.cclegacy,a=e.Node,n=e.Label,s=e.Sprite,r=e._decorator,l=e.Component,c=e.v3,u=e.tween,m=e.Color},function(e){p=e.PoolManager},function(e){d=e.DamageType}],execute:function(){var h,f,g,b,y,D,N,v,F;o._RF.push({},"efdbaBLmEVBoZ5v6FJrFTpJ","TapDamageNumItem",void 0);const{ccclass:L,property:w}=r;e("TapDamageNumItem",(h=L("TapDamageNumItem"),f=w(a),g=w(n),b=w(s),h((N=t((D=class extends l{constructor(){super(...arguments),i(this,"damageNode",N,this),i(this,"numLab",v,this),i(this,"crt",F,this),this.monsterKey=""}init(e,t,i){void 0===i&&(i=25),this.numLab.string=`${e}`,this.numLab.fontSize=i,this.setDamageColor(t),this.setDamageFlyAnim(e,t)}setDamageScaleAnim(e,t){e>0?(this.node.scale=c(1,1,1),u(this.node).to(.25,{scale:c(.8,.8,.8)}).call((()=>{p.instance.putNode(this.node)})).start()):p.instance.putNode(this.node)}setDamageFlyAnim(e,t){let i=this.damageNode;if(e>0){class e{constructor(){this.position=void 0,this.scale=void 0}}let t=new e;t.position=i.getPosition(),t.scale=1.5,u(t).parallel(u().by(.25,{position:c(0,30,0)},{onUpdate:e=>{i.setPosition(e.position)}}),u().to(.25,{scale:1.3},{onUpdate:e=>{i.setScale(e.scale,e.scale)}})).delay(.25).call((()=>{i.setPosition(0,0,0),p.instance.putNode(this.node)})).start()}else i.setPosition(0,0,0),p.instance.putNode(this.node)}setDamageColor(e){switch(e){case d.NORMAL:case d.DEBUFF:this.numLab.color=(new m).fromHEX("#ffffff"),this.crt.node.active=!1;break;case d.CRIT:this.numLab.color=(new m).fromHEX("#FF0000"),this.crt.node.active=!0}}}).prototype,"damageNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(D.prototype,"numLab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(D.prototype,"crt",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=D))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/TapData.ts",["cc","./AdManager.ts","./Api.ts","./CfgMgr.ts","./EventListener.ts","./HttpService.ts","./OpenPopupManager.ts","./PlayerData.ts","./MonsterModel.ts","./TapEvent.ts"],(function(t){var n,s,a,e,i,o,c,p,r,T,h;return{setters:[function(t){n=t.cclegacy},function(t){s=t.AdManager,a=t.AdType},function(t){e=t.Api},function(t){i=t.CfgMgr},function(t){o=t.EventListener},function(t){c=t.HttpService},function(t){p=t.OpenPopupManager},function(t){r=t.PlayerData},function(t){T=t.MonsterCfg},function(t){h=t.TapEvent}],execute:function(){n._RF.push({},"64b332931pJ+pVyWPz4Q/e4","TapData",void 0);class d{constructor(){this._tapObj=null,this.winRewards=[],this.failRewards=[]}get tapObj(){return this._tapObj}getTapInfo(){c.instance.post(e.TAP_INFO,{}).then((t=>{this._tapObj=t.data,o.emit(h.UPDATE_TAP_DATA)})).catch((t=>{}))}settleBattle(t,n,s){this._tapObj.count+=1,c.instance.post(e.TAP_SETTLE,{tap:n,damage:s,monster:t}).then((t=>{0==t.code?(this._tapObj=t.data.info,o.emit(h.UPDATE_TAP_DATA),r.instance.getPlayerInfo()):this.getTapInfo()}))}claimTicket(){s.instance.showAd(a.TAPAD,0,((t,n)=>{0==t&&c.instance.post(e.TAP_TICKET_AD,{sign:n}).then((t=>{0==t.code?(this._tapObj=t.data,o.emit(h.UPDATE_TAP_DATA),p.instance.showToast("Success")):p.instance.showToast(t.msg)}))}))}buyTicket(){c.instance.post(e.TAP_TICKET_BUY,{}).then((t=>{0==t.code?(this._tapObj=t.data,o.emit(h.UPDATE_TAP_DATA),p.instance.showToast("Success")):p.instance.showToast(t.msg)}))}getMonsterCfgById(t){return i.getDataById(new T,t)}static get instance(){return this._instance||(this._instance=new d),this._instance}}t("TapData",d),d._instance=null;t("TapInfoResult",class{constructor(){this.adLimit=void 0,this.adMaxLimit=void 0,this.diamond=void 0,this.ticket=void 0,this.count=void 0,this.monsterHp=void 0,this.monsterAddHp=void 0,this.bagFactor=void 0,this.total=void 0,this.minBag=void 0,this.maxBag=void 0}}),n._RF.pop()}}}));

System.register("chunks:///_virtual/TapEvent.ts",["cc"],(function(T){var _;return{setters:[function(T){_=T.cclegacy}],execute:function(){_._RF.push({},"f0414kJn4ZP4LX4cAEijTMJ","TapEvent",void 0);class a{}T("TapEvent",a),a.TAP_GAME_TOUCH_START="tapGameTouchStart",a.TAP_GAME_TOUCH_MOVE="tapGameTouchMove",a.TAP_GAME_TOUCH_END="tapGameTouchEnd",a.TAP_GAME_TOUCH_CANCLE="tapGameTouchCancle",a.TAP_CREATE_HERO="tapCreateHero",a.SHOW_TAP_MONSTER_HP="showTapMonsterHp",a.SHOW_TAP_MONSTER_SHADOW="showTapMonsterShadow",a.SHOW_TAP_MONSTER_DIE_EFFECT="showTapMonsterDieEffect",a.TAP_MONSTER_DIE="tapMonsterDie",a.UPDATE_TAP_HERO_HP="updateTapHeroHp",a.TAP_ATTACK_SKILL_EFFECT="tapAttackSkillEffect",a.TAP_GAME_START="tapGameStart",a.TAP_GAME_END="tapGameEnd",a.TAP_GAME_OVER="tapGameOver",a.TAP_CREATE_DAMAGER_NUM="tapCreateDamageNum",a.TAP_BATTLE_NEXT_WAVE="tapBattleNextWave",a.UPDATE_TAP_DATA="updateTapData",_._RF.pop()}}}));

System.register("chunks:///_virtual/TapGame.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TapMonsterManager.ts","./TapBgManager.ts","./GameDefine.ts","./TapHeroManager.ts","./EventListener.ts","./TapSkillManager.ts","./TapSkillData.ts","./TapEvent.ts","./TapBattleUIManager.ts","./OpenPopupManager.ts","./Constants.ts","./TapData.ts","./GameEvent.ts","./PlayerData.ts","./ResourcesUtil.ts","./GuideData.ts"],(function(t){var e,n,i,a,r,s,o,l,c,h,u,p,g,T,m,b,M,f,_,E,d,A,P,O,U,v,y,D,I,k,C;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,a=t.Node,r=t.Label,s=t._decorator,o=t.Component,l=t.Tween,c=t.tween,h=t.UITransform,u=t.instantiate,p=t.v3,g=t.Input},function(t){T=t.TapMonsterManager},function(t){m=t.TapBgManager},function(t){b=t.GameDefine},function(t){M=t.TapHeroManager},function(t){f=t.EventListener},function(t){_=t.TapSkillManager},function(t){E=t.TapSkillData},function(t){d=t.TapEvent},function(t){A=t.TapBattleUIManager},function(t){P=t.OpenPopupManager,O=t.LayerType},function(t){U=t.Constants},function(t){v=t.TapData},function(t){y=t.GameEvent},function(t){D=t.PlayerData},function(t){I=t.ResourcesUtil},function(t){k=t.GuideData,C=t.GuideStep}],execute:function(){var G,w,B,N,S,R,x,H,z,F,j,L,V,$,Y,q,J,K,W,X,Z,Q,tt,et,nt,it,at,rt,st,ot,lt,ct,ht,ut,pt;i._RF.push({},"eac29IhX/JDlYlE/KfVaIZf","TapGame",void 0);const{ccclass:gt,property:Tt}=s;t("TapGame",(G=gt("TapGame"),w=Tt(a),B=Tt(a),N=Tt(a),S=Tt(r),R=Tt(a),x=Tt(r),H=Tt(r),z=Tt(a),F=Tt(a),j=Tt(a),L=Tt(r),V=Tt(m),$=Tt(M),Y=Tt(T),q=Tt(A),J=Tt(_),G((X=e((W=class extends o{constructor(){super(...arguments),n(this,"gameCtrl",X,this),n(this,"battleMap",Z,this),n(this,"buttons",Q,this),n(this,"timeText",tt,this),n(this,"closeBtn",et,this),n(this,"bagText",nt,this),n(this,"killMonster",it,this),n(this,"startBtn",at,this),n(this,"clickFinger",rt,this),n(this,"bagIcon",st,this),n(this,"ticketText",ot,this),n(this,"bgManager",lt,this),n(this,"heroManager",ct,this),n(this,"monsterManager",ht,this),n(this,"battleUIManager",ut,this),n(this,"skillManager",pt,this),this.maxBattleTime=15,this._battleTime=0,this._killMonsterNumber=0,this._tapNumber=0,this._damageNumber=0,this._hasMonster=!1}show(){this._hasMonster=!1,v.instance.getTapInfo(),this.init(),this.onUpdatePlayerInfo(),k.instance.guideMode&&k.instance.curStep==C.GUIDE_STEP1_AIRDROP_BTN&&(k.instance.curStep=1,P.instance.show(U.PopupUI.GuidePopup,null,O.TOP,!1,this.startBtn,(()=>{}),(()=>{})))}init(){E.instance.init(),this.bgManager.init(),this.skillManager.init(),this.monsterManager.init(),this.heroManager.init(),this.battleUIManager.init(),this.timeText.node.parent.active=!1}onStartBtn(){k.instance.guideMode&&k.instance.curStep==C.GUIDE_STEP2_AIRDROP_PAGE&&(k.instance.curStep=1,P.instance.hide(U.PopupUI.GuidePopup)),this._hasMonster&&(0!=v.instance.tapObj.ticket?(v.instance.tapObj.count<2&&(this.clickFinger.active=!0,l.stopAllByTarget(this.clickFinger),c(this.clickFinger).sequence(c().delay(.1),c().call((()=>{this.clickFinger.children[0].active=!this.clickFinger.children[0].active,this.clickFinger.children[1].active=!this.clickFinger.children[0].active}))).repeatForever().start()),this._killMonsterNumber=0,this._tapNumber=0,this._damageNumber=0,this._battleTime=this.maxBattleTime,this.timeText.string=`${this._battleTime}`,this.closeBtn.active=!1,b.gameStart=!0,this.timeText.node.parent.active=!0,this.buttons.active=!1,b.gameTouch=!0,f.emit(d.TAP_CREATE_HERO),this.schedule(this.updateTime,1)):P.instance.showToast("tap.ticketzore"))}updateTime(){if(this._battleTime--,this._battleTime<=0)return b.gameTouch=!1,f.emit(d.TAP_GAME_END),void this.unschedule(this.updateTime);this.timeText.string=`${this._battleTime}`}onTouchStart(t){if(t.preventSwallow=!0,b.gameTouch){this._tapNumber++;let e=t.getUILocation();f.emit(d.TAP_GAME_TOUCH_START,e)}}onTouchMove(t){t.preventSwallow=!0;let e=t.getUILocation();f.emit(d.TAP_GAME_TOUCH_MOVE,e)}onTouchEnd(t){t.preventSwallow=!0;let e=t.getUILocation();f.emit(d.TAP_GAME_TOUCH_MOVE,e)}onTouchCancle(){}onGameEnd(){v.instance.tapObj.count<5&&(l.stopAllByTarget(this.clickFinger),this.clickFinger.active=!1),this.timeText.node.parent.active=!1,this.heroManager.clear(),this.monsterManager.clear(),this.battleUIManager.clear(!1);let t=v.instance.tapObj,e=this._killMonsterNumber*t.bagFactor;e=e>t.minBag?e:t.minBag,e=e>t.maxBag?t.maxBag:e,P.instance.show(U.PopupUI.TapWinPopup,null,O.TOP,!1,e,this._killMonsterNumber,this._tapNumber,this._damageNumber),this.scheduleOnce((()=>{this.monsterManager.createMonster(v.instance.tapObj.monsterHp,v.instance.tapObj.monsterAddHp,v.instance.tapObj.count+1),this.bgManager.init()}),1)}onGameOver(t){this.killMonster.string="0",this.onGameBag(t)}onGameBag(t){let e=this.bagIcon.getPosition(),n=Math.min(t.num,10),i=t.pos,a=U.commonPreabPath+"bagItem",r=this.bagIcon.parent.getComponent(h).convertToNodeSpaceAR(i);I.getPrefab(a).then((t=>{for(let i=0;i<n;i++){let a=u(t),s=2*(Math.random()-.5)*100+r.x,o=2*(Math.random()-.5)*50+r.y;a.parent=this.bagIcon.parent,a.setPosition(r),this.scheduleOnce((()=>{c(a).to(.2,{position:p(s,o,0)},{easing:"sineIn"}).delay(.2).to(1,{position:e},{easing:"sineInOut"}).call((()=>{a.destroy(),1!=n&&1!=i||f.emit(y.UPDATE_PLAYER_DATA,"bag"),n-1==i&&(this.buttons.active=!0,this.closeBtn.active=!0)})).start()}),.05+.05*i)}}))}onTicketBtn(){P.instance.show(U.PopupUI.TapTicketPopup)}onBagBtn(){P.instance.show(U.PopupUI.BagTokenPopup)}onCloseBtn(){this.buttons.active=!0,b.gameTouch=!1,E.instance.clear(),this.heroManager.clear(),this.monsterManager.clear(),this.battleUIManager.clear(),this.skillManager.clear(),k.instance.guideMode&&k.instance.curStep==C.GUIDE_STEP4_AIRDROP_END_GAME&&f.emit(y.GUIDE_ACTION),P.instance.hide(U.PopupUI.TapGame)}onUpdatePlayerInfo(){let t=D.instance.assetObj;this.bagText.string=`${t.bag}`}onUpdateContent(){this._hasMonster||(this._hasMonster=!0,this.monsterManager.createMonster(v.instance.tapObj.monsterHp,v.instance.tapObj.monsterAddHp,v.instance.tapObj.count)),this.ticketText.string=`${v.instance.tapObj.ticket}`}onMonsterDie(t){this._killMonsterNumber++,this._damageNumber+=t,this.killMonster.string=`${this._killMonsterNumber}`}onEnable(){this.gameCtrl.on(g.EventType.TOUCH_START,this.onTouchStart,this),this.gameCtrl.on(g.EventType.TOUCH_MOVE,this.onTouchMove,this),this.gameCtrl.on(g.EventType.TOUCH_END,this.onTouchEnd,this),this.gameCtrl.on(g.EventType.TOUCH_CANCEL,this.onTouchCancle,this),f.on(d.TAP_GAME_END,this.onGameEnd,this),f.on(d.TAP_GAME_OVER,this.onGameOver,this),f.on(y.UPDATE_PLAYER_DATA,this.onUpdatePlayerInfo,this),f.on(d.UPDATE_TAP_DATA,this.onUpdateContent,this),f.on(d.TAP_MONSTER_DIE,this.onMonsterDie,this)}onDisable(){this.gameCtrl.off(g.EventType.TOUCH_START,this.onTouchStart,this),this.gameCtrl.off(g.EventType.TOUCH_MOVE,this.onTouchMove,this),this.gameCtrl.off(g.EventType.TOUCH_END,this.onTouchEnd,this),this.gameCtrl.off(g.EventType.TOUCH_CANCEL,this.onTouchCancle,this),f.off(d.TAP_GAME_END,this.onGameEnd,this),f.off(d.TAP_GAME_OVER,this.onGameOver,this),f.off(y.UPDATE_PLAYER_DATA,this.onUpdatePlayerInfo,this),f.off(d.UPDATE_TAP_DATA,this.onUpdateContent,this),f.off(d.TAP_MONSTER_DIE,this.onMonsterDie,this)}}).prototype,"gameCtrl",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=e(W.prototype,"battleMap",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(W.prototype,"buttons",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=e(W.prototype,"timeText",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),et=e(W.prototype,"closeBtn",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=e(W.prototype,"bagText",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),it=e(W.prototype,"killMonster",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),at=e(W.prototype,"startBtn",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rt=e(W.prototype,"clickFinger",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),st=e(W.prototype,"bagIcon",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ot=e(W.prototype,"ticketText",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),lt=e(W.prototype,"bgManager",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ct=e(W.prototype,"heroManager",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ht=e(W.prototype,"monsterManager",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ut=e(W.prototype,"battleUIManager",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pt=e(W.prototype,"skillManager",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=W))||K));i._RF.pop()}}}));

System.register("chunks:///_virtual/TapHeroBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./EventListener.ts","./GameDefine.ts","./TapSkillData.ts","./Util.ts","./HeroData.ts","./SkillModel.ts","./TapEvent.ts"],(function(t){var e,i,s,n,o,l,r,h,a,c,u,T,_,p,f,d,A,k,E;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){s=t.cclegacy,n=t.sp,o=t.Node,l=t.Prefab,r=t._decorator,h=t.Vec3,a=t.view,c=t.color,u=t.tween},function(t){T=t.default},function(t){_=t.EventListener},function(t){p=t.GameDefine},function(t){f=t.TapSkillData},function(t){d=t.Util},function(t){A=t.HeroAnim},function(t){k=t.SkillBulletObj},function(t){E=t.TapEvent}],execute:function(){var S,b,m,H,P,w,C,v,y;s._RF.push({},"5ca8avfQDtCqpjEIn0Inpkw","TapHeroBase",void 0);const{ccclass:g,property:M}=r;t("TapHeroBase",(S=g("TapHeroBase"),b=M(n.Skeleton),m=M(o),H=M(l),S((C=e((w=class extends T{constructor(){super(...arguments),i(this,"heroSpine",C,this),i(this,"skillTypeList",v,this),i(this,"skillTypePrefab",y,this),this._firePos=new h(0,100,0),this.isCollider=void 0,this.heroKey="",this.releaseSkillStatus=!0,this._atkNumber=0,this._width=100,this._skills=[],this._skillIndex=0,this._showHitTotalTime=.15}initBorn(){this.heroKey="1001",this._width=(p.viewWidth>a.getVisibleSize().width?a.getVisibleSize().width:p.viewWidth)-100,this._skills=f.instance.getHeroSkills()}getFirePos(){let t=this.node.getPosition();return new h(t.x+this._firePos.x,t.y+this._firePos.y,0)}updateSkillDamageInterval(){}onAttacked(t){}onBuff(t){}playHit(){let t=this.heroSpine;t.color=c(255,255,255,1);let e=c(255,255,255,50);u(t).to(this._showHitTotalTime,{},{onUpdate(t,i){e=c(255,255,255,50*i),t.color=e}}).call((()=>{e=c(255,255,255,255),t.color=e})).start()}releaseSkill(){this.unschedule(this.initHeroAnim),this.heroSpine.setAnimation(0,0==this._atkNumber?A.ATK1:A.ATK2,!1),this._atkNumber=0==this._atkNumber?1:0;let t=0,e=this._skillIndex;this._skillIndex==this._skills.length-1?this._skillIndex=0:this._skillIndex++;let i=this._skills[e];if(i){let e=this.getFirePos(),s=new k;s.skillObj=i,s.pos=e,s.targetPos=new h(e.x,-200,0),s.releaseTimes=1;let n=0,o=1,l=1,r=e.x;for(let e=0;e<o;e++){let e=10,i=r+((t-l/2)*e+.5*e);t++,s.pos.x=i,s.targetPos.x=i;let o=d.clone(s),a=new h(i,-200,0);_.emit(E.TAP_ATTACK_SKILL_EFFECT,o,a,0,n)}}this.scheduleOnce(this.initHeroAnim,1)}clear(){this.unscheduleAllCallbacks()}initHeroAnim(){this.heroSpine.addAnimation(0,A.IDLE,!0)}onTouchStart(t){this.releaseSkill()}onTouchMove(t){}onTouchEnd(t){}onEnable(){_.on(E.TAP_GAME_TOUCH_START,this.onTouchStart,this),_.on(E.TAP_GAME_TOUCH_MOVE,this.onTouchMove,this),_.on(E.TAP_GAME_TOUCH_END,this.onTouchEnd,this),_.on(E.TAP_GAME_TOUCH_CANCLE,this.onTouchEnd,this)}onDisable(){_.off(E.TAP_GAME_TOUCH_START,this.onTouchStart,this),_.off(E.TAP_GAME_TOUCH_MOVE,this.onTouchMove,this),_.off(E.TAP_GAME_TOUCH_END,this.onTouchEnd,this),_.off(E.TAP_GAME_TOUCH_CANCLE,this.onTouchEnd,this)}childUpdate(t){}}).prototype,"heroSpine",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(w.prototype,"skillTypeList",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=e(w.prototype,"skillTypePrefab",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=w))||P));s._RF.pop()}}}));

System.register("chunks:///_virtual/TapHeroItem.ts",["cc","./TapHeroBase.ts"],(function(e){var t,r,c;return{setters:[function(e){t=e.cclegacy,r=e._decorator},function(e){c=e.TapHeroBase}],execute:function(){var s;t._RF.push({},"26cb4T7OeRD9ZvNRsZ8t7WF","TapHeroItem",void 0);const{ccclass:o,property:a}=r;e("TapHeroItem",o("TapHeroItem")(s=class extends c{init(){this.initBorn()}})||s);t._RF.pop()}}}));

System.register("chunks:///_virtual/TapHeroManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourcesUtil.ts","./Constants.ts","./TapHeroItem.ts","./EventListener.ts","./TapEvent.ts"],(function(e){var t,n,r,o,i,a,s,c,l,h,p,u,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){r=e.cclegacy,o=e.Node,i=e._decorator,a=e.Component,s=e.Vec3,c=e.instantiate},function(e){l=e.ResourcesUtil},function(e){h=e.Constants},function(e){p=e.TapHeroItem},function(e){u=e.EventListener},function(e){f=e.TapEvent}],execute:function(){var P,H,T,g,C;r._RF.push({},"33730G9z6NI35lFTyFqGAm8","TapHeroManager",void 0);const{ccclass:E,property:d}=i;e("TapHeroManager",(P=E("TapHeroManager"),H=d(o),P((C=t((g=class extends a{constructor(){super(...arguments),this._heroPoint=new s(0,-620,0),n(this,"heroParent",C,this)}init(){}onCreateHero(){let e=h.tapHeroPath;l.getPrefab(e).then((e=>{let t=c(e),n=this._heroPoint;t.parent=this.heroParent,t.setPosition(n),t.getComponent(p).init()}))}clear(){this.heroParent.children.length>0&&this.heroParent.children[0].getComponent(p).clear(),this.heroParent.destroyAllChildren()}onEnable(){u.on(f.TAP_CREATE_HERO,this.onCreateHero,this)}onDisable(){u.off(f.TAP_CREATE_HERO,this.onCreateHero,this)}}).prototype,"heroParent",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=g))||T));r._RF.pop()}}}));

System.register("chunks:///_virtual/TapMonsterBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./EventListener.ts","./MonsterModel.ts","./SkillModel.ts","./MonsterEventModel.ts","./TapEvent.ts"],(function(t){var e,s,i,n,o,r,h,l,m,a,c,u,d,p,A,f,H,g,M,S,T,E;return{setters:[function(t){e=t.applyDecoratedDescriptor,s=t.initializerDefineProperty},function(t){i=t.cclegacy,n=t.AnimationComponent,o=t.sp,r=t._decorator,h=t.Vec3,l=t.Sprite,m=t.Color,a=t.Animation,c=t.v3,u=t.UITransform,d=t.CircleCollider2D,p=t.Vec2,A=t.color,f=t.tween},function(t){H=t.default},function(t){g=t.EventListener},function(t){M=t.MonsterAmin},function(t){S=t.DamageType},function(t){T=t.MonsterType},function(t){E=t.TapEvent}],execute:function(){var b,C,_,B,P,y,D;i._RF.push({},"94944l8CYlIoJP7iBPbahLJ","TapMonsterBase",void 0);const{ccclass:v,property:O}=r;t("TapMonsterBase",(b=v("TapMonsterBase"),C=O(n),_=O(o.Skeleton),b((y=e((P=class extends H{constructor(){super(...arguments),s(this,"monsterAnim",y,this),s(this,"hitAnim",D,this),this.monsterShadow=null,this.monsterHpItem=null,this.initStatus=!1,this.monsterCfg=null,this.monsterObj=null,this.monsterId=101,this.monsterHp=10,this.monsterAddHp=10,this.curHp=10,this.totalDamage=0,this.scale=1,this.width=100,this.height=100,this.isMove=!0,this.curAnim="",this.curPos=new h,this.colliderPos=new h,this.boundBox=null,this.monsterKey="",this.isDie=!1,this.isHurt=!1,this.dieNumber=0,this._showHitTotalTime=.15}setMonsterBorn(){this.monsterId=this.monsterCfg.Id,this.monsterHp=this.monsterObj.hp,this.monsterAddHp=this.monsterObj.addHp,this.curHp=this.monsterHp,this.curPos=this.node.getPosition(),this.monsterAnim.getComponent(l).color=new m(255,255,255),this.setMonsterSize();let t=this.monsterCfg.mType==T.BOSS?"boss":"monster";this.monsterKey=t+this.monsterId+Math.random().toString().substring(2,6)+Math.random().toString().substring(2,12),this.setMonsterBoundBox(),this.isDie=!1,this.isHurt=!1,this.hitAnim.node.active=!1,this.hitAnim.setCompleteListener((()=>{this.hitAnim.node.active=!1})),g.emit(E.SHOW_TAP_MONSTER_HP,this),g.emit(E.SHOW_TAP_MONSTER_SHADOW,this),this.initStatus=!0}setMonsterAnimEvent(){this.monsterAnim.on(a.EventType.FINISHED,(t=>{this.setMonsterAnim(M.Atk)}))}setMonsterSize(){this.scale=this.monsterCfg.iconScale+(this.monsterCfg.mType==T.BOSS?.5:1.2),this.node.setScale(c(this.scale,this.scale,this.scale)),this.width=this.node.getChildByName("icon").getComponent(u).contentSize.width,this.height=this.node.getChildByName("icon").getComponent(u).contentSize.height}setMonsterAnim(t,e){this.monsterCfg&&(this.monsterAnim.play(t),this.curAnim=t)}getColliderPos(){let t=this.curPos.clone(),e=this.boundBox.offset;return t.x+=e.x,t.y+=e.y,t}setMonsterBoundBox(){this.boundBox=this.node.getComponent(d),this.boundBox.radius=this.monsterCfg.colliderRadius;let t=this.monsterCfg.colliderOffset?this.monsterCfg.colliderOffset.split("|"):["0","0"];this.boundBox.offset=new p(Number(t[0]),Number(t[1]))}getBoundBoxCircle(){return this.boundBox instanceof d?this.boundBox.radius:20}onAttacked(t){if(!this.initStatus)return;this.hitAnim.node.active=!0,this.hitAnim.setAnimation(0,"animation",!1);let e=S.NORMAL,s=t.skillObj,i=s.damage;this.attacked(i,e,s.weaponId,s.level)}attacked(t,e,s,i){if(t>0&&!this.isDie){let e=Math.ceil(t);this.curHp-=e,this.totalDamage+=e,this.monsterHpItem&&this.monsterHpItem.setMonsterHp(this.curHp,this.monsterHp),g.emit(E.TAP_CREATE_DAMAGER_NUM,this.getColliderPos(),e),this.curHp<=0&&(this.dieNumber++,this.curHp=this.monsterHp+this.dieNumber*this.monsterAddHp,g.emit(E.TAP_MONSTER_DIE,this.totalDamage)),this.setMonsterHurtEffect(),this.playHit()}}playHit(){let t=this.monsterAnim.getComponent(l);t.color=A(255,255,255,1);let e=A(255,255,255,50);f(t).to(this._showHitTotalTime,{},{onUpdate(t,s){e=A(255,255,255,50*s),t.color=e}}).call((()=>{e=A(255,255,255,255),t.color=e})).start()}setMonsterHurtEffect(t){if(void 0===t&&(t=.3),!this.isDie&&!this.isHurt){this.isHurt=!0;let e=this.monsterAnim.getComponent(l);e.color=(new m).fromHEX("FF4B4B"),this.scheduleOnce((()=>{this.isHurt=!1,e.color=new m(255,255,255)}),t)}}clear(){this.unscheduleAllCallbacks(),g.emit(E.SHOW_TAP_MONSTER_DIE_EFFECT,this.node.getPosition()),this.initStatus=!1,this.monsterCfg=null,this.monsterObj=null,this.monsterHpItem.clear(),this.monsterHpItem=null,this.monsterShadow.clear(),this.monsterShadow=null,this.isMove=!0,this.isHurt=!1}onGameStart(){this.totalDamage=0,this.setMonsterAnim(M.Atk,!0),this.setMonsterAnimEvent()}onGameEnd(){this.curHp=this.monsterHp}onEnable(){g.on(E.TAP_GAME_START,this.onGameStart,this),g.on(E.TAP_GAME_END,this.onGameEnd,this)}onDisable(){g.off(E.TAP_GAME_START,this.onGameStart,this),g.off(E.TAP_GAME_END,this.onGameEnd,this)}}).prototype,"monsterAnim",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(P.prototype,"hitAnim",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=P))||B));i._RF.pop()}}}));

System.register("chunks:///_virtual/TapMonsterHpItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./PoolManager.ts"],(function(t){var e,o,n,i,s,r,a,p,c,l,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.initializerDefineProperty},function(t){n=t.cclegacy,i=t.Node,s=t._decorator,r=t.UITransform,a=t.ProgressBar,p=t.UIOpacity,c=t.tween},function(t){l=t.default},function(t){h=t.PoolManager}],execute:function(){var m,u,g,d,b,f,C;n._RF.push({},"8f5161BmeFLq4VSAOmQMn3B","TapMonsterHpItem",void 0);const{ccclass:y,property:M}=s;t("TapMonsterHpItem",(m=y("TapMonsterHpItem"),u=M(i),g=M(i),m((f=e((b=class extends l{constructor(){super(...arguments),o(this,"barAnim",f,this),o(this,"bar",C,this),this._com=null}init(t){this._com=t,this.barAnim.getComponent(r).width=this.node.getComponent(r).width,this.getComponent(a).progress=1,this.setMonsterHpPos()}setMonsterHp(t,e){t<=0&&(t=0),this.getComponent(p).opacity=255,this.getComponent(a).progress=t/e;let o=this.bar.getComponent(r).width,n=this.barAnim.getComponent(r).width-o;c(this.barAnim.getComponent(r)).by(.2,{width:-n}).call((()=>{t<=0&&this.reset()})).start()}setMonsterHpPos(){let t=this._com.getColliderPos(),e=this._com.scale,o=this._com.height*e;this.node.setPosition(t.x,t.y+o+20,0)}reset(){this.getComponent(a).progress=100,this.barAnim.getComponent(r).width=this.node.getComponent(r).width}clear(){h.instance.putNode(this.node)}}).prototype,"barAnim",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(b.prototype,"bar",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=b))||d));n._RF.pop()}}}));

System.register("chunks:///_virtual/TapMonsterItem.ts",["cc","./TapMonsterBase.ts"],(function(t){var s,e,n;return{setters:[function(t){s=t.cclegacy,e=t._decorator},function(t){n=t.TapMonsterBase}],execute:function(){var r;s._RF.push({},"9e7b1pPOsJKmpAPkuNybcgp","TapMonsterItem",void 0);const{ccclass:o,property:c}=e;t("TapMonsterItem",o("TapMonsterItem")(r=class extends n{init(t,s){this.monsterCfg=t,this.monsterObj=s,this.initStatus=!1,this.isDie=!1,this.setMonsterBorn()}})||r);s._RF.pop()}}}));

System.register("chunks:///_virtual/TapMonsterManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./MonsterModel.ts","./ResourcesUtil.ts","./Constants.ts","./TapMonsterItem.ts","./TapData.ts","./TapMonsterModel.ts","./CfgMgr.ts"],(function(t){var e,n,s,r,o,a,i,c,l,p,u,d,g,M,h,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){s=t.cclegacy,r=t.Node,o=t._decorator,a=t.Vec3,i=t.instantiate,c=t.Sprite},function(t){l=t.default},function(t){p=t.MonsterCfg},function(t){u=t.ResourcesUtil},function(t){d=t.Constants},function(t){g=t.TapMonsterItem},function(t){M=t.TapData},function(t){h=t.TapMonsterObj},function(t){f=t.CfgMgr}],execute:function(){var m,C,P,y,T;s._RF.push({},"54c77ikeY1H5J5O6i9nRgo0","TapMonsterManager",void 0);const{ccclass:I,property:R}=o;t("TapMonsterManager",(m=I("TapMonsterManager"),C=R(r),m((T=e((y=class extends l{constructor(){super(...arguments),n(this,"monsterParent",T,this),this._monsterIds=[]}init(){let t=f.getCfgDataArray(new p),e=[];for(let n=0;n<t.length;n++){let s=t[n];s.iconScale>.5&&e.push(s.Id)}this._monsterIds=e}createMonster(t,e,n){let s=n%this._monsterIds.length,r=new h;r.id=this._monsterIds[s],r.hp=t+10*n,r.addHp=e,r.pos=this.getScreenUpRandPos(400),this.onCreateMonster(r)}getScreenUpRandPos(t){let e=new a;return e.x=0,e.y=100,e}onCreateMonster(t){let e=t.id,n=M.instance.getMonsterCfgById(e),s=d.tapMonsterPath;u.getPrefab(s).then((e=>{this.loadMonsterRes(t,n,e)}))}loadMonsterRes(t,e,n,s){let r=i(n),o=d.monsterIconPath+e.icon+"/spriteFrame";u.geSpriteFrame(o).then((n=>{r.getChildByName("icon").getComponent(c).spriteFrame=n,this.monsterParent.addChild(r),r.setPosition(t.pos),r.getComponent(g).init(e,t)}))}clear(){this.monsterParent.destroyAllChildren()}}).prototype,"monsterParent",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=y))||P));s._RF.pop()}}}));

System.register("chunks:///_virtual/TapMonsterModel.ts",["cc"],(function(t){var s;return{setters:[function(t){s=t.cclegacy}],execute:function(){s._RF.push({},"545d0GdXFNDGI4ff8mE7REK","TapMonsterModel",void 0);t("TapMonsterObj",class{constructor(){this.id=void 0,this.hp=void 0,this.addHp=void 0,this.pos=void 0}}),s._RF.pop()}}}));

System.register("chunks:///_virtual/TapShadow.ts",["cc","./BaseComponent.ts"],(function(t){var e,o,s;return{setters:[function(t){e=t.cclegacy,o=t._decorator},function(t){s=t.default}],execute:function(){var n;e._RF.push({},"97d7a+ul35DtKFPCb1Myy4F","TapShadow",void 0);const{ccclass:c,property:a}=o;t("TapShadow",c("TapShadow")(n=class extends s{constructor(){super(...arguments),this._com=null}init(t){this._com=t;let e=t.monsterCfg.shadeScale+.5;this.node.setScale(e,e,e),this.setMonsterShadownPos()}setMonsterShadownPos(){let t=this._com.node.getPosition();this.node.setPosition(t.x,t.y+0,0)}clear(){}})||n);e._RF.pop()}}}));

System.register("chunks:///_virtual/TapSkillData.ts",["cc","./CfgMgr.ts","./BagData.ts","./WeaponModel.ts","./SkillModel.ts"],(function(e){var t,a,l,i,n,s,r;return{setters:[function(e){t=e.cclegacy},function(e){a=e.CfgMgr},function(e){l=e.BagData},function(e){i=e.WeaponCfg,n=e.WeaponType},function(e){s=e.SkillCfg,r=e.SkillObj}],execute:function(){t._RF.push({},"b620cUR9KBMHItZY6Yai0As","TapSkillData",void 0);class c{constructor(){this._skillKeys=[],this._weaponSkillMapData=new Map,this._upgradeSkills=[]}init(){this.initSkills()}getSkillCfgById(e){return a.getDataById(new s,e)}initSkills(){l.instance.getBagWeaponMap().forEach(((e,t)=>{let s=a.getDataById(new i,t);if(s.type!=n.ATTACK_MAGIC&&!n.ATTACK_PHYSICAL)return;let c=1;e>=20?c=4:e<20&&e>=15?c=3:e<15&&e>=10&&(c=2);let p=s.skillIds[c-1],g=l.instance.calWeaponLevelCfgByLevel(t,c),o=c-1,u=this.getSkillCfgById(p),d=new r;d.Id=u.Id;for(const e in u)if(Object.prototype.hasOwnProperty.call(u,e)){const t=u[e];d.hasOwnProperty(e)&&(d[e]=t)}0==d.bulletSpeed&&(d.bulletSpeed=800,d.during=10),d.Id=p,d.weaponId=t,d.cd=s.cd,d.desc=s.desc,d.level=c,d.quality=o,d.type=s.type,d.targetType=s.targetType,d.name=s.name,d.range=s.range,d.damage=Math.ceil(s.hcUp[o]*(s.damage+g.addDamage)*10)/10;let k=t+"|"+c;this._weaponSkillMapData.set(k,d)}))}getSkills(){return this._skillKeys}get upgradeSkills(){return this._upgradeSkills}getHeroSkills(){return Array.from(this._weaponSkillMapData.values())}clear(){this._weaponSkillMapData.clear(),this._skillKeys=[]}static get instance(){return this._instance||(this._instance=new c),this._instance}}e("TapSkillData",c),c._instance=null,t._RF.pop()}}}));

System.register("chunks:///_virtual/TapSkillManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventListener.ts","./Constants.ts","./ResourcesUtil.ts","./PoolManager.ts","./SkillBulletItem.ts","./TapEvent.ts"],(function(e){var t,l,i,n,s,a,o,r,p,c,k,u,d,h,b,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,l=e.initializerDefineProperty},function(e){i=e.cclegacy,n=e.Node,s=e._decorator,a=e.Component,o=e.instantiate,r=e.Sprite,p=e.Animation,c=e.AnimationClip},function(e){k=e.EventListener},function(e){u=e.Constants},function(e){d=e.ResourcesUtil},function(e){h=e.PoolManager},function(e){b=e.SkillBulletItem},function(e){f=e.TapEvent}],execute:function(){var g,m,P,C,S;i._RF.push({},"dd179/gl9ZHiJkKVjoNpdZB","TapSkillManager",void 0);const{ccclass:_,property:M}=s;e("TapSkillManager",(g=_("TapSkillManager"),m=M(n),g((S=t((C=class extends a{constructor(){super(...arguments),l(this,"skillParentUp",S,this),this._skillPrefabItemMap=new Map}init(){}onAttackSkillEffect(e,t,l,i){void 0===i&&(i=0),this.scheduleOnce((()=>{let i=null,n=e.skillObj.Id;if(this._skillPrefabItemMap.has(n))i=h.instance.getNodeItemById(this._skillPrefabItemMap.get(n),"tap_"+n.toString()),this.skillParentUp.addChild(i),i.setPosition(e.pos),i.getComponent(b).init(e,t,l);else{let s=u.tapBattSkillPath;d.getPrefab(s).then((s=>{let a="";a=e.skillObj.res==e.skillObj.bulletRes?u.weaponIconPath+e.skillObj.bulletRes:u.bulletPath+e.skillObj.bulletRes,1==e.skillObj.bulletFrames?(a+="/spriteFrame",d.getSpriteFrame(a).then((a=>{i=o(s);let p=i.getChildByName("icon").getComponent(r);p.spriteFrame=a,p.node.angle=e.skillObj.angle,p.node.setScale(e.skillObj.scale,e.skillObj.scale),this.skillParentUp.addChild(i),i.setPosition(e.pos),i.getComponent(b).init(e,t,l),this._skillPrefabItemMap.set(n,i)}))):d.getSpriteAtlas(a).then((a=>{i=o(s);let r=i.getChildByName("icon").getComponent(p),k=c.createWithSpriteFrames(a,e.skillObj.bulletFrames);k.name="effect",k.wrapMode=c.WrapMode.Loop,r.addClip(k),r.node.angle=e.skillObj.angle,r.node.setScale(e.skillObj.scale,e.skillObj.scale),this.skillParentUp.addChild(i),i.setPosition(e.pos),i.getComponent(b).init(e,t,l),this._skillPrefabItemMap.set(n,i)}))}))}}),i)}clear(){this._skillPrefabItemMap.clear(),this.skillParentUp.destroyAllChildren()}onEnable(){k.on(f.TAP_ATTACK_SKILL_EFFECT,this.onAttackSkillEffect,this)}onDisable(){k.off(f.TAP_ATTACK_SKILL_EFFECT,this.onAttackSkillEffect,this)}}).prototype,"skillParentUp",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=C))||P));i._RF.pop()}}}));

System.register("chunks:///_virtual/TapTicketPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./OpenPopupManager.ts","./TapData.ts","./LanguageManager.ts","./TapEvent.ts","./EventListener.ts"],(function(t){var e,n,i,a,o,r,c,s,p,u,l,T;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,a=t.Label,o=t._decorator,r=t.Component},function(t){c=t.Constants},function(t){s=t.OpenPopupManager},function(t){p=t.TapData},function(t){u=t.LanguageManager},function(t){l=t.TapEvent},function(t){T=t.EventListener}],execute:function(){var d,g,h,f,b,k,m,y,x,P,L;i._RF.push({},"9c69eOoXsFGCL1EybREXjmb","TapTicketPopup",void 0);const{ccclass:C,property:D}=o;t("TapTicketPopup",(d=C("TapTicketPopup"),g=D(a),h=D(a),f=D(a),b=D(a),d((y=e((m=class extends r{constructor(){super(...arguments),n(this,"adTicketText",y,this),n(this,"ticketText",x,this),n(this,"adTodayTicket",P,this),n(this,"diamondText",L,this)}show(){this.onUpdateContent()}onUpdateContent(){let t=p.instance.tapObj;this.ticketText.string=`${t.ticket}`,this.adTicketText.string=u.instance.getLang("tap.watchadearn",[t.adMaxLimit]),this.adTodayTicket.string=u.instance.getLang("tap.todayearn",[t.adMaxLimit-t.adLimit,t.adMaxLimit]),this.diamondText.string=`${t.diamond}`}onClaimBtn(){p.instance.claimTicket()}onBuyBtn(){p.instance.buyTicket()}onCloseBtn(){s.instance.hide(c.PopupUI.TapTicketPopup)}onEnable(){T.on(l.UPDATE_TAP_DATA,this.onUpdateContent,this)}onDisable(){T.off(l.UPDATE_TAP_DATA,this.onUpdateContent,this)}}).prototype,"adTicketText",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(m.prototype,"ticketText",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(m.prototype,"adTodayTicket",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(m.prototype,"diamondText",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=m))||k));i._RF.pop()}}}));

System.register("chunks:///_virtual/TapTouch.ts",["cc","./PoolManager.ts"],(function(c){var e,t,n,o,a;return{setters:[function(c){e=c.cclegacy,t=c.Component,n=c.Animation,o=c._decorator},function(c){a=c.PoolManager}],execute:function(){var s;e._RF.push({},"252ecbhyexHXrIuMrgQcTjZ","TapTouch",void 0);const{ccclass:r,property:i}=o;c("TapTouch",r("TapTouch")(s=class extends t{init(){this.getComponent(n).play(),this.scheduleOnce((function(){this.clear()}),.5)}clear(){a.instance.putNode(this.node)}})||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/TapWinPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./OpenPopupManager.ts","./RewardItem.ts","./RewardModel.ts","./ItemModel.ts","./CoinMode.ts","./TapData.ts","./EventListener.ts","./TapEvent.ts","./GuideData.ts"],(function(t){var e,n,i,o,a,r,s,u,c,p,l,f,h,d,b,m,w,P,T,g,v,y,A;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,o=t.Prefab,a=t.Node,r=t.AnimationComponent,s=t._decorator,u=t.Component,c=t.Vec3,p=t.instantiate,l=t.UITransform,f=t.v3},function(t){h=t.Constants},function(t){d=t.OpenPopupManager},function(t){b=t.RewardItem},function(t){m=t.RewardObj},function(t){w=t.ItemIdType},function(t){P=t.CoinObj},function(t){T=t.TapData},function(t){g=t.EventListener},function(t){v=t.TapEvent},function(t){y=t.GuideData,A=t.GuideStep}],execute:function(){var C,R,I,M,_,D,E,O,S,W,x;i._RF.push({},"968a38fTuVJVbR/xhWXAjbk","TapWinPopup",void 0);const{ccclass:G,property:z}=s;t("TapWinPopup",(C=G("TapWinPopup"),R=z(o),I=z(a),M=z(r),_=z(a),C((O=e((E=class extends u{constructor(){super(...arguments),n(this,"rewardPrefab",O,this),n(this,"content",S,this),n(this,"winAnim",W,this),n(this,"btn",x,this)}show(t,e,n,i){T.instance.settleBattle(e,n,i),this.winAnim.play(),this.setContent(t),y.instance.guideMode&&y.instance.curStep==A.GUIDE_STEP3_AIRDROP_START_GAME&&(y.instance.curStep=1)}async setContent(t){let e=[],n=new m;n.count=t,n.itemId=w.Bag,e.push(n);let i=e;this.content.removeAllChildren();let o=new c(0,0,0),a=i.length,r=a>=4?4:a;o.x=120*-(r-1)/2;for(let t=0;t<i.length;t++)await new Promise((e=>{this.scheduleOnce((()=>{const n=i[t];let a=p(this.rewardPrefab),s=new c(0,0,0),u=Math.floor(t/r),l=t%r;s.x=o.x+120*l,s.y=-120*u,a.parent=this.content,a.getComponent(b).init(n),a.setPosition(s),e(0)}),.1)}));this.btn.active=!1,this.scheduleOnce((()=>{this.btn.active=!0}),1)}onCloseBtn(){let t=new P;t.pos=this.btn.getComponent(l).convertToWorldSpaceAR(f(0,0,0)),t.num=10,g.emit(v.TAP_GAME_OVER,t),d.instance.hide(h.PopupUI.TapWinPopup)}}).prototype,"rewardPrefab",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(E.prototype,"content",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(E.prototype,"winAnim",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(E.prototype,"btn",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=E))||D));i._RF.pop()}}}));

System.register("chunks:///_virtual/TaskData.ts",["cc","./HttpService.ts","./Api.ts","./EventListener.ts","./GameEvent.ts","./AdManager.ts","./PlayerData.ts","./OpenPopupManager.ts"],(function(t){var s,a,i,e,n,o,c,d,T,A,r;return{setters:[function(t){s=t.cclegacy,a=t._decorator},function(t){i=t.HttpService},function(t){e=t.Api},function(t){n=t.EventListener},function(t){o=t.GameEvent},function(t){c=t.AdPlatform,d=t.AdManager,T=t.AdType},function(t){A=t.PlayerData},function(t){r=t.OpenPopupManager}],execute:function(){var h,p;s._RF.push({},"c4296gr4dRIWIFiW1PrfKJB","TaskData",void 0);const{ccclass:u,property:k}=a;t("TaskData",u("TaskData")(((p=class t{constructor(){this.tasks=[],this._claimTaskId=0}getTaskList(){i.instance.post(e.TASK_LIST).then((t=>{t&&0==t.code&&(this.tasks=t.data.tasks,n.emit(o.UPDTAE_TASK_DATA))}))}reportTask(t){let s=t.id;"adLink"==t.subType?t.adTypes.indexOf(c.Monatag)>=0?d.instance.showPopAd(T.TASKAD,t.subId,((t,a)=>{0==t&&i.instance.post(e.TASK_REPORT,{taskId:s,sign:a}).then((t=>{t&&0==t.code&&(this.tasks=t.data.tasks,n.emit(o.UPDTAE_TASK_DATA))}))})):d.instance.showSpecailAd(T.TASKAD,t.subId,t.adTypes,((t,a)=>{0==t&&i.instance.post(e.TASK_REPORT,{taskId:s,sign:a}).then((t=>{t&&0==t.code&&(this.tasks=t.data.tasks,n.emit(o.UPDTAE_TASK_DATA))}))})):"partner"==t.subType?(window.Telegram.WebApp.openLink(t.url),setTimeout(function(){i.instance.post(e.TASK_REPORT,{taskId:s}).then((t=>{t&&0==t.code&&(this.tasks=t.data.tasks,n.emit(o.UPDTAE_TASK_DATA))}))}.bind(this),5e3)):"adVideo"==t.subType&&d.instance.showSpecailAd(T.TASKAD,t.subId,t.adTypes,((t,a)=>{0==t&&i.instance.post(e.TASK_REPORT,{taskId:s,sign:a}).then((t=>{t&&0==t.code&&(this.tasks=t.data.tasks,n.emit(o.UPDTAE_TASK_DATA))}))}))}claim(t,s){this._claimTaskId!=t&&(this._claimTaskId=t,i.instance.post(e.TASK_CLAIM,{taskId:t}).then((t=>{this._claimTaskId=0,t&&0==t.code?(this.tasks=t.data.tasks,A.instance.getPlayerInfo(),n.emit(o.UPDTAE_TASK_DATA),r.instance.showToast("Success"),s()):(this._claimTaskId=0,r.instance.showToast(t.msg))})))}static get instance(){return this._instance||(this._instance=new t),this._instance}})._instance=null,h=p))||h);t("TaskObj",class{constructor(){this.id=void 0,this.rewards=void 0,this.title=void 0,this.state=void 0,this.progress=void 0,this.report=void 0,this.total=void 0,this.type=void 0,this.action=void 0,this.subType=void 0,this.subId=void 0,this.url=void 0,this.adTypes=void 0}}),s._RF.pop()}}}));

System.register("chunks:///_virtual/TaskItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TaskData.ts","./Constants.ts","./CfgMgr.ts","./ItemModel.ts","./ResourcesUtil.ts","./SpriteEx.ts","./LanguageManager.ts"],(function(t){var e,i,a,n,r,s,o,l,c,u,p,g,h,b,d,m,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){a=t.cclegacy,n=t.Sprite,r=t.Label,s=t.ProgressBar,o=t.Node,l=t._decorator,c=t.Component,u=t.UITransform},function(t){p=t.TaskData},function(t){g=t.Constants},function(t){h=t.CfgMgr},function(t){b=t.ItemCfg},function(t){d=t.ResourcesUtil},function(t){m=t.SpriteEx},function(t){f=t.LanguageManager}],execute:function(){var w,y,I,k,B,T,z,v,x,C,M,L,_,S,D,F,R,j,P,N,O,V,U,$,E;a._RF.push({},"14aadGiRtdCP7txCFoe6L3R","TaskItem",void 0);const{ccclass:G,property:H}=l;t("TaskItem",(w=G("TaskItem"),y=H(n),I=H(r),k=H(r),B=H(s),T=H(r),z=H(o),v=H(o),x=H(o),C=H(o),M=H(r),L=H(m),w((D=e((S=class extends c{constructor(){super(...arguments),i(this,"rewardIcon",D,this),i(this,"rewardNum",F,this),i(this,"desc",R,this),i(this,"progress",j,this),i(this,"progressValue",P,this),i(this,"goBtn",N,this),i(this,"claimBtn",O,this),i(this,"claimedBtn",V,this),i(this,"claimedMask",U,this),i(this,"actionText",$,this),i(this,"actionIcon",E,this),this._taskObj=void 0}start(){}init(t){this._taskObj=t,this.progress.progress=t.progress/t.total,this.progressValue.string=`${t.progress}/${t.total}`,"partner"==t.subType?this.desc.string=t.title:this.desc.string=f.instance.getLang(t.title,[t.total]);let e=h.getDataById(new b,t.rewards[0].itemId),i=g.itemsPath+e.icon+"/spriteFrame";d.geSpriteFrame(i).then((t=>{this.rewardIcon.spriteFrame=t;let e=this.rewardIcon.getComponent(u).contentSize,i=Math.min(100/e.width,100/e.height);this.rewardIcon.node.setScale(i,i)})),this.rewardNum.string=`${t.rewards[0].count}`,this.goBtn.active=-1==t.state,this.actionText.string=f.instance.getLang(t.action),"adLink"==t.subType?this.actionIcon.index=1:"adVideo"==t.subType?this.actionIcon.index=0:this.actionIcon.node.active=!1,this.claimBtn.active=0==t.state,this.claimedBtn.active=1==t.state,this.claimedMask.active=1==t.state}onGoBtn(){p.instance.reportTask(this._taskObj)}onClaimBtn(){p.instance.claim(this._taskObj.id,(()=>{}))}}).prototype,"rewardIcon",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=e(S.prototype,"rewardNum",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=e(S.prototype,"desc",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=e(S.prototype,"progress",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=e(S.prototype,"progressValue",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=e(S.prototype,"goBtn",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=e(S.prototype,"claimBtn",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=e(S.prototype,"claimedBtn",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=e(S.prototype,"claimedMask",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=e(S.prototype,"actionText",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=e(S.prototype,"actionIcon",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=S))||_));a._RF.pop()}}}));

System.register("chunks:///_virtual/TaskPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TaskData.ts","./TaskItem.ts","./OpenPopupManager.ts","./Constants.ts","./EventListener.ts","./GameEvent.ts"],(function(t){var e,n,i,o,s,a,l,r,c,u,p,h,b,k,f,w,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,o=t.ScrollView,s=t.Prefab,a=t.Node,l=t._decorator,r=t.Component,c=t.instantiate,u=t.Sprite,p=t.Color},function(t){h=t.TaskData},function(t){b=t.TaskItem},function(t){k=t.OpenPopupManager},function(t){f=t.Constants},function(t){w=t.EventListener},function(t){d=t.GameEvent}],execute:function(){var m,T,v,S,C,g,V,y,P,A,D;i._RF.push({},"00bdb39tqNIZpbNY5CvTv5l","TaskPopup",void 0);const{ccclass:E,property:I}=l;t("TaskPopup",(m=E("TaskPopup"),T=I(o),v=I(o),S=I(s),C=I(a),m((y=e((V=class extends r{constructor(){super(...arguments),n(this,"taskScrollView",y,this),n(this,"bonusScrollView",P,this),n(this,"taskItem",A,this),n(this,"tabs",D,this)}show(){h.instance.getTaskList(),this.taskScrollView.node.active=!0,this.bonusScrollView.node.active=!1,this.setContent()}setContent(){0!=h.instance.tasks.length&&(this.taskScrollView.content.removeAllChildren(),h.instance.tasks.forEach(((t,e)=>{if("daily"==t.type){let e=c(this.taskItem);e.getComponent(b).init(t),e.parent=this.taskScrollView.content}})),this.bonusScrollView.content.removeAllChildren(),h.instance.tasks.forEach(((t,e)=>{if("daily"!=t.type){let e=c(this.taskItem);e.getComponent(b).init(t),e.parent=this.bonusScrollView.content}})))}onTabTouch(t,e){let n=Number(e);this.tabs.children.forEach(((t,e)=>{t.getComponent(u).color=n==e?new p(49,129,255,255):new p(41,40,61,255),t.getChildByName("checked").active=n==e})),0==n?(this.taskScrollView.node.active=!0,this.bonusScrollView.node.active=!1):(this.taskScrollView.node.active=!1,this.bonusScrollView.node.active=!0)}onCloseTouch(){k.instance.hide(f.PopupUI.TaskPopup)}onEnable(){w.on(d.UPDTAE_TASK_DATA,this.setContent,this)}onDisable(){w.off(d.UPDTAE_TASK_DATA,this.setContent,this)}}).prototype,"taskScrollView",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=e(V.prototype,"bonusScrollView",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=e(V.prototype,"taskItem",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=e(V.prototype,"tabs",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=V))||g));i._RF.pop()}}}));

System.register("chunks:///_virtual/Toast.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageManager.ts"],(function(e){var t,n,s,i,a,o,r,c,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){s=e.cclegacy,i=e.Label,a=e._decorator,o=e.Component,r=e.tween,c=e.v3},function(e){l=e.LanguageManager}],execute:function(){var u,g,p,d,h;s._RF.push({},"ddfe1rgxVxEoZW8/Ku88Xn7","Toast",void 0);const{ccclass:b,property:f}=a;e("Toast",(u=b("Toast"),g=f(i),u((h=t((d=class extends o{constructor(){super(...arguments),n(this,"lbText",h,this)}init(e,t){let n=l.instance.getLang(e,t);n&&""!=n||(n=e),this.lbText.string=n,this.node.setScale(.5,.5),this.setAnim()}setAnim(){r(this.node).to(.2,{scale:c(1.1,1.1,1.1)},{easing:"sineIn"}).to(.2,{scale:c(1,1,1)},{easing:"sineOut"}).delay(.2).by(.5,{position:c(0,100,0)}).call((()=>{this.scheduleOnce((()=>{this.node.destroy()}),1)})).start()}}).prototype,"lbText",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=d))||p));s._RF.pop()}}}));

System.register("chunks:///_virtual/TopBarItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventListener.ts","./GameEvent.ts","./PlayerData.ts","./Util.ts"],(function(t){var e,n,i,o,a,r,l,s,c,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,o=t.Label,a=t._decorator,r=t.Component},function(t){l=t.EventListener},function(t){s=t.GameEvent},function(t){c=t.PlayerData},function(t){u=t.Util}],execute:function(){var p,d,f,m,b,h,y,g,A,P,D;i._RF.push({},"84418DsgexO86swWab1eKL6","TopBarItem",void 0);const{ccclass:E,property:v}=a;t("TopBarItem",(p=E("TopBarItem"),d=v(o),f=v(o),m=v(o),b=v(o),p((g=e((y=class extends r{constructor(){super(...arguments),n(this,"gold",g,this),n(this,"diamond",A,this),n(this,"ticket",P,this),n(this,"food",D,this)}init(){this.onUpdatePlayerInfo()}onUpdatePlayerInfo(t){let e=c.instance.assetObj;t&&"all"!=t&&"gold"!=t||u.numberAnimation(this.gold,e.gold),t&&"all"!=t&&"diamond"!=t||u.numberAnimation(this.diamond,e.diamond),t&&"all"!=t&&"ticket"!=t||u.numberAnimation(this.ticket,c.instance.chapterObj.ticket),t&&"all"!=t&&"food"!=t||u.numberAnimation(this.food,c.instance.heroObj.food)}onEnable(){l.on(s.UPDATE_PLAYER_DATA,this.onUpdatePlayerInfo,this)}onDisable(){l.off(s.UPDATE_PLAYER_DATA,this.onUpdatePlayerInfo,this)}}).prototype,"gold",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(y.prototype,"diamond",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(y.prototype,"ticket",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(y.prototype,"food",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=y))||h));i._RF.pop()}}}));

System.register("chunks:///_virtual/TopupData.ts",["cc","./Api.ts","./CfgMgr.ts","./EventListener.ts","./HttpService.ts","./OpenPopupManager.ts","./GameEvent.ts","./GrowthFundMode.ts","./MonthlyPassModel.ts","./WalletManager.ts","./ShopBillData.ts","./FirstTopupModel.ts"],(function(t){var n,a,s,e,o,i,r,u,d,c,h,p,_;return{setters:[function(t){n=t.cclegacy},function(t){a=t.Api},function(t){s=t.CfgMgr},function(t){e=t.EventListener},function(t){o=t.HttpService},function(t){i=t.OpenPopupManager},function(t){r=t.GameEvent},function(t){u=t.GrowthFundCfg,d=t.GrowthFundLevelCfg},function(t){c=t.MonthlyPassCfg},function(t){h=t.WalletManager},function(t){p=t.ShopBillData},function(t){_=t.FirstTopupCfg}],execute:function(){n._RF.push({},"39c81XPdQhKoIg9Dxp/niWB","TopupData",void 0);class l{constructor(){this._monthlyPassData=[],this._fundIdData=new Map,this._fundObjData=new Map,this._firstTopupData=[]}get monthlyPassData(){return this._monthlyPassData}get firstTopupData(){return this._firstTopupData}getFirstTopupCfg(t){return s.getDataById(new _,t)}getFirstTopupItems(t){let n=s.getCfgDataArray(new _)[t],a=[];for(let t=0;t<n.rewards.length;t++)for(let s=0;s<n.rewards[t].length;s++)a.push(n.rewards[t][s]);return a}getFirtTopupFromNetwork(){o.instance.post(a.TOPUP_FIRST_INFO,{}).then((t=>{0==t.code&&(this._firstTopupData=t.data.firsts,e.emit(r.UPDATE_FIRST_TOPUP_POPUP))}))}onBuyFirstTopup(t){h.instance.isConnected()?this._onBuyFirstTopup(t):h.instance.connectWallet((()=>{this._onBuyFirstTopup(t)}))}_onBuyFirstTopup(t){o.instance.post(a.TOPUP_FIRST_PREBUY,{firstId:t}).then((t=>{0==t.code?h.instance.buyWithToken(t.data.amount,t.data.payload,((n,a)=>{0==n&&(p.instance.addBill(t.data.billId,"firsttopup",1,r.GET_FIRST_TOPUP_DATA),i.instance.showToast("shop.submitSuccess"))})):i.instance.showToast(t?t.msg:"network.error")}))}onClaimFirstTopup(t){o.instance.post(a.TOPUP_FIRST_CLAIM,{firstId:t,day:1}).then((t=>{0==t.code?(this._firstTopupData=t.data.firsts,e.emit(r.UPDATE_FIRST_TOPUP_POPUP),i.instance.showRewardPopup(t.data.rewards,null)):i.instance.showToast(t.msg)}))}getMonthlyPassCfg(t){return s.getDataById(new c,t)}getMonthlyPassFromNetwork(){o.instance.post(a.TOPUP_MONTHLY_PASS_INFO,{}).then((t=>{0==t.code&&(this._monthlyPassData=t.data.pass,e.emit(r.UPDATE_MONTHLY_PASS_POPUP))}))}onBuyMonthlyPass(t,n){h.instance.isConnected()?this._onBuyMonthlyPass(t,n):h.instance.connectWallet((()=>{this._onBuyMonthlyPass(t,n)}))}_onBuyMonthlyPass(t,n){o.instance.post(a.TOPUP_MONTHLY_PASS_PREBUY,{passId:t}).then((t=>{0==t.code?h.instance.buyWithToken(t.data.amount,t.data.payload,((a,s)=>{0==a&&(p.instance.addBill(t.data.billId,n,1,r.GET_MONTHLY_PASS_DATA),i.instance.showToast("shop.submitSuccess"))})):i.instance.showToast(t.msg)}))}onClaimMonthlyPass(t){o.instance.post(a.TOPUP_MONTHLY_PASS_CLAIM,{passId:t}).then((t=>{0==t.code?(this._monthlyPassData=t.data.pass,e.emit(r.UPDATE_MONTHLY_PASS_POPUP),i.instance.showRewardPopup(t.data.rewards,null)):i.instance.showToast(t.msg)}))}getGrowthFundCfg(t){return s.getDataById(new u,t)}getGrowthFundCfgArr(){return s.getCfgDataArray(new u)}getGrowthFundLevelArrCfg(t){let n=s.getCfgDataArray(new d),a=[];for(let s=0;s<n.length;s++){const e=n[s];e.fundId==t&&a.push(e)}return a}initFundCfg(){let t=l.instance.getGrowthFundCfgArr();for(let n=0;n<t.length;n++){const a=t[n];this._fundIdData.set(a.type,a.Id)}}getFundFromNetwork(){o.instance.post(a.TOPUP_FUND_INFO,{}).then((t=>{if(0==t.code){this._fundObjData.clear();for(let n=0;n<t.data.funds.length;n++){const a=t.data.funds[n];this._fundObjData.set(a.fundId,a)}e.emit(r.UPDATE_GROWTH_FUND_POPUP)}}))}getFundIdByType(t){return this._fundIdData.get(t)}getFundObjById(t){return this._fundObjData.get(t)}onBuyFund(t,n,a){h.instance.isConnected()?this._onBuyFund(t,n,a):h.instance.connectWallet((()=>{this._onBuyFund(t,n,a)}))}_onBuyFund(t,n,s){o.instance.post(a.TOPUP_FUND_PREBUY,{fundId:t,grade:n}).then((t=>{0==t.code?h.instance.buyWithToken(t.data.amount,t.data.payload,((n,a)=>{0==n&&(p.instance.addBill(t.data.billId,s,1,r.GET_GROWTH_FUND_DATA),i.instance.showToast("shop.submitSuccess"))})):i.instance.showToast(t?t.msg:"network.error")}))}onClaimFund(t,n){o.instance.post(a.TOPUP_FUND_CLAIM,{rewardId:t,grade:n}).then((t=>{if(0==t.code){this._fundObjData.clear();for(let n=0;n<t.data.funds.length;n++){const a=t.data.funds[n];this._fundObjData.set(a.fundId,a)}e.emit(r.UPDATE_GROWTH_FUND_POPUP),i.instance.showRewardPopup(t.data.rewards,null)}else i.instance.showToast(t.msg)}))}static get instance(){return this._instance||(this._instance=new l),this._instance}}t("TopupData",l),l._instance=null,n._RF.pop()}}}));

System.register("chunks:///_virtual/TopupModel.ts",["cc"],(function(s){var t;return{setters:[function(s){t=s.cclegacy}],execute:function(){t._RF.push({},"2fb00nD215DX52p4ktl1FHP","TopupModel",void 0);s("FirstTopupResult",class{constructor(){this.firsts=void 0,this.rewards=void 0}});s("FirstTopupObj",class{constructor(){this.availableDays=void 0,this.claimedDays=void 0,this.firstId=void 0,this.price=void 0,this.state=void 0,this.token=void 0}});s("MonthlyPassResult",class{constructor(){this.pass=void 0,this.rewards=void 0}});s("TopupPreBuyResult",class{constructor(){this.amount=void 0,this.billId=void 0,this.payload=void 0,this.toAddress=void 0}});s("MonthlyPassObj",class{constructor(){this.countdown=void 0,this.draw=void 0,this.passId=void 0,this.price=void 0,this.token=void 0,this.state=void 0}});s("GrowthFundResult",class{constructor(){this.funds=void 0}});s("GrowthFundClaimResult",class{constructor(){this.funds=void 0,this.rewards=void 0}});s("GrowthFundObj",class{constructor(){this.claimedRewards=void 0,this.currentValue=void 0,this.fundId=void 0,this.states=void 0}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/TowerBattleUIManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventListener.ts","./TowerEvent.ts","./PoolManager.ts","./Constants.ts","./ResourcesUtil.ts","./TowerShadow.ts","./BlastItem.ts","./TowerDamageNumItem.ts","./TowerMonsterHpItem.ts","./TowerHpItem.ts","./TowerSkillData.ts","./LanguageManager.ts","./TowerEventData.ts","./TowerWeaponItem.ts"],(function(t){var e,n,a,i,o,r,l,s,h,f,p,u,m,b,c,g,d,I,w,C,_,P,D;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){a=t.cclegacy,i=t.Node,o=t.Label,r=t.Prefab,l=t._decorator,s=t.Component,h=t.instantiate},function(t){f=t.EventListener},function(t){p=t.TowerEvent},function(t){u=t.PoolManager},function(t){m=t.Constants},function(t){b=t.ResourcesUtil},function(t){c=t.TowerShadow},function(t){g=t.BlastItem},function(t){d=t.TowerDamageNumItem},function(t){I=t.TowerMonsterHpItem},function(t){w=t.TowerHpItem},function(t){C=t.TowerSkillData},function(t){_=t.LanguageManager},function(t){P=t.TowerEventData},function(t){D=t.TowerWeaponItem}],execute:function(){var E,T,U,N,S,W,M,O,R,H,v,A,B,y,L,k,z;a._RF.push({},"945bdFNqehERLp5MTCeLA5J","TowerBattleUIManager",void 0);const{ccclass:F,property:x}=l;t("TowerBattleUIManager",(E=F("TowerBattleUIManager"),T=x(i),U=x(i),N=x(o),S=x(o),W=x(o),M=x(i),O=x(r),E((v=e((H=class extends s{constructor(){super(...arguments),n(this,"battleUIUpParent",v,this),n(this,"battleUIDownParent",A,this),n(this,"atk",B,this),n(this,"cd",y,this),n(this,"wave",L,this),n(this,"weaponParent",k,this),n(this,"weaponItem",z,this),this._battlerUIPrefabData=new Map,this._battleUiNode=new Map}init(){this.onCreateWallHp(),this.onSetWaveInfo(1),this.onUpdateAttackInfo()}clear(){this._battlerUIPrefabData.clear(),this._battleUiNode.clear(),this.battleUIUpParent.removeAllChildren(),this.battleUIDownParent.getChildByName("Die").removeAllChildren(),this.battleUIDownParent.getChildByName("Shadow").removeAllChildren(),this.battleUIDownParent.getChildByName("Buff").removeAllChildren()}onCreateWallHp(){this.battleUIDownParent.getChildByPath("Wall/towerHpItem").getComponent(w).init()}onCreateMonsterHp(t){let e="towerMonsterHpItem",n=null,a=null,i=this.battleUIUpParent;if(this._battlerUIPrefabData.has(e))a=this._battlerUIPrefabData.get(e),n=u.instance.getNodeItem(a),i.addChild(n),n.getComponent(I).init(t),t.monsterHpItem=n.getComponent(I);else{let a=m.towerBattlePath+e;b.getPrefab(a).then((a=>{this._battlerUIPrefabData.set(e,a),n=u.instance.getNodeItem(a),i.addChild(n),n.getComponent(I).init(t),t.monsterHpItem=n.getComponent(I)}))}}onCreateMonsterShadow(t){let e="towerShadow",n=null,a=null,i=this.battleUIDownParent.getChildByName("Shadow");if(this._battlerUIPrefabData.has(e))a=this._battlerUIPrefabData.get(e),n=u.instance.getNodeItem(a),i.addChild(n),n.getComponent(c).init(t),t.monsterShadow=n.getComponent(c);else{let a=m.towerBattlePath+e;b.getPrefab(a).then((a=>{this._battlerUIPrefabData.set(e,a),n=u.instance.getNodeItem(a),i.addChild(n),n.getComponent(c).init(t),t.monsterShadow=n.getComponent(c)}))}}onCreateDamageNum(t,e,n,a){let i="towerDamageNumItem",o=null,r=null;if(this._battlerUIPrefabData.has(i))r=this._battlerUIPrefabData.get(i),o=u.instance.getNodeItem(r),this.battleUIUpParent.addChild(o),o.setPosition(t),o.getComponent(d).init(e,n);else{let a=m.towerBattlePath+i;b.getPrefab(a).then((a=>{this._battlerUIPrefabData.set(i,a),o=u.instance.getNodeItem(a),this.battleUIUpParent.addChild(o),o.setPosition(t),o.getComponent(d).init(e,n)}))}}onCreateDieEffect(t){let e="blastItem",n=null,a=null,i=this.battleUIDownParent.getChildByName("Die");if(this._battlerUIPrefabData.has(e))a=this._battlerUIPrefabData.get(e),n=u.instance.getNodeItem(a),i.addChild(n),n.setPosition(t),n.getComponent(g).init();else{let a=m.battlePath+e;b.getPrefab(a).then((a=>{this._battlerUIPrefabData.set(e,a),n=u.instance.getNodeItem(a),i.addChild(n),n.setPosition(t),n.getComponent(g).init()}))}}onUpdateAttackInfo(){this.atk.string=`${C.instance.getDamage()}`,this.cd.string=Number(C.instance.getCdPer()).toFixed(1),this.weaponParent.removeAllChildren();let t=[],e=C.instance.getHeroSkills();for(let n=0;n<e.length;n++){let a=e[n],i=h(this.weaponItem);i.getComponent(D).init(a.weaponId,!0),i.parent=this.weaponParent,t.push(a.weaponId)}let n=C.instance.weaponIds;for(let e=0;e<n.length;e++){let a=n[e];if(-1==t.indexOf(a)){let t=h(this.weaponItem);t.getComponent(D).init(a,!1),t.parent=this.weaponParent}}}onSetWaveInfo(t){this.wave.string=_.instance.getLang("game.wave",[`${t}/${P.instance.maxWave}`])}onEnable(){f.on(p.SHOW_TOWER_MONSTER_HP,this.onCreateMonsterHp,this),f.on(p.SHOW_TOWER_MONSTER_SHADOW,this.onCreateMonsterShadow,this),f.on(p.SHOW_TOWER_MONSTER_DIE_EFFECT,this.onCreateDieEffect,this),f.on(p.TOWER_CREATE_DAMAGER_NUM,this.onCreateDamageNum,this),f.on(p.TOWER_CLEAR_DOOR,this.onUpdateAttackInfo,this),f.on(p.TOWER_BATTLE_NEXT_WAVE,this.onSetWaveInfo,this)}onDisable(){f.off(p.SHOW_TOWER_MONSTER_HP,this.onCreateMonsterHp,this),f.off(p.SHOW_TOWER_MONSTER_SHADOW,this.onCreateMonsterShadow,this),f.off(p.SHOW_TOWER_MONSTER_DIE_EFFECT,this.onCreateDieEffect,this),f.off(p.TOWER_CREATE_DAMAGER_NUM,this.onCreateDamageNum,this),f.off(p.TOWER_CLEAR_DOOR,this.onUpdateAttackInfo,this),f.off(p.TOWER_BATTLE_NEXT_WAVE,this.onSetWaveInfo,this)}}).prototype,"battleUIUpParent",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(H.prototype,"battleUIDownParent",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(H.prototype,"atk",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=e(H.prototype,"cd",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(H.prototype,"wave",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(H.prototype,"weaponParent",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(H.prototype,"weaponItem",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=H))||R));a._RF.pop()}}}));

System.register("chunks:///_virtual/TowerBgManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./ResourcesUtil.ts","./TowerData.ts"],(function(e){var t,r,n,a,o,s,i,c,l,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.initializerDefineProperty},function(e){n=e.cclegacy,a=e.Node,o=e._decorator,s=e.Component,i=e.Sprite},function(e){c=e.Constants},function(e){l=e.ResourcesUtil},function(e){p=e.TowerData}],execute:function(){var u,g,f,h,B;n._RF.push({},"3cae3/U+HJEL5xydWk7HlkK","TowerBgManager",void 0);const{ccclass:b,property:d}=o;e("TowerBgManager",(u=b("TowerBgManager"),g=d(a),u((B=t((h=class extends s{constructor(){super(...arguments),r(this,"bg",B,this)}init(){this.setBattleBgRes()}setBattleBgRes(){let e=p.instance.chapterId,t=Math.floor(e%10)+1,r=c.mapPath+"battleMap"+t+"/spriteFrame";let n=this.bg.getComponent(i);l.geSpriteFrame(r).then((e=>{n.spriteFrame=e}))}}).prototype,"bg",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=h))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/TowerBuffModel.ts",["cc"],(function(i){var e;return{setters:[function(i){e=i.cclegacy}],execute:function(){e._RF.push({},"2ae5dzcVKhNdrdJFYAMc0ip","TowerBuffModel",void 0);i("TowerBuffCfg",class{constructor(){this.ClassName="TowerBuff",this.Id=void 0,this.icon=void 0,this.color=void 0,this.type=void 0,this.attr=void 0,this.stepValue=void 0,this.maxValue=void 0,this.minValue=void 0,this.desc=void 0,this.nextId=void 0}});i("TowerBuffObj",class{constructor(){this.id=void 0,this.value=void 0,this.pos=void 0,this.wave=void 0,this.width=void 0}});i("TowerBuffType",function(i){return i.ADD="add",i.SUB="sub",i}({})),i("TowerSkillType",function(i){return i.CD="cd",i.CDPER="cdPer",i.DAMAGE="damage",i.DAMAGEPER="damagePer",i.WEAPONNUMBER="weaponNumber",i.BULLETNUMBER="bulletNumber",i.HP="hp",i}({}));e._RF.pop()}}}));

System.register("chunks:///_virtual/TowerDamageNumItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PoolManager.ts","./SkillModel.ts"],(function(e){var t,o,i,a,n,s,r,l,c,u,m,d,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.initializerDefineProperty},function(e){i=e.cclegacy,a=e.Node,n=e.Label,s=e.Sprite,r=e._decorator,l=e.Component,c=e.v3,u=e.tween,m=e.Color},function(e){d=e.PoolManager},function(e){p=e.DamageType}],execute:function(){var h,f,g,b,N,y,D,w,v;i._RF.push({},"b261a+vG31BsruNWYdrUNuc","TowerDamageNumItem",void 0);const{ccclass:L,property:F}=r;e("TowerDamageNumItem",(h=L("TowerDamageNumItem"),f=F(a),g=F(n),b=F(s),h((D=t((y=class extends l{constructor(){super(...arguments),o(this,"damageNode",D,this),o(this,"numLab",w,this),o(this,"crt",v,this),this.monsterKey=""}init(e,t,o){void 0===o&&(o=25),this.numLab.string=`${e}`,this.numLab.fontSize=o,this.setsetDamageColor(t),this.setDamageFlyAnim(e,t)}setDamageScaleAnim(e,t){e>0?(this.node.scale=c(1,1,1),u(this.node).to(.25,{scale:c(.8,.8,.8)}).call((()=>{d.instance.putNode(this.node)})).start()):d.instance.putNode(this.node)}setDamageFlyAnim(e,t){let o=this.damageNode;if(e>0){class e{constructor(){this.position=void 0,this.scale=void 0}}let t=new e;t.position=o.getPosition(),t.scale=1.5,u(t).parallel(u().by(.25,{position:c(0,30,0)},{onUpdate:e=>{o.setPosition(e.position)}}),u().to(.25,{scale:1.3},{onUpdate:e=>{o.setScale(e.scale,e.scale)}})).delay(.25).call((()=>{o.setPosition(0,0,0),d.instance.putNode(this.node)})).start()}else o.setPosition(0,0,0),d.instance.putNode(this.node)}setsetDamageColor(e){switch(e){case p.NORMAL:case p.DEBUFF:this.numLab.color=(new m).fromHEX("#ffffff"),this.crt.node.active=!1;break;case p.CRIT:this.numLab.color=(new m).fromHEX("#FF0000"),this.crt.node.active=!0}}}).prototype,"damageNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(y.prototype,"numLab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(y.prototype,"crt",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=y))||N));i._RF.pop()}}}));

System.register("chunks:///_virtual/TowerData.ts",["cc","./Api.ts","./HttpService.ts","./PlayerData.ts","./BagTowerData.ts","./TowerEventData.ts","./TowerSkillData.ts"],(function(t){var e,a,s,n,i,r,c;return{setters:[function(t){e=t.cclegacy},function(t){a=t.Api},function(t){s=t.HttpService},function(t){n=t.PlayerData},function(t){i=t.BagTowerData},function(t){r=t.TowerEventData},function(t){c=t.TowerSkillData}],execute:function(){e._RF.push({},"e53feAip+ZFtY8pIW8+VXoW","TowerData",void 0);class o{constructor(){this._battleId=0,this._chapterId=0,this.events=[],this.winRewards=[],this.failRewards=[]}get chapterId(){return this._chapterId}startBattle(t){s.instance.post(a.CASHHERO_START,{}).then((e=>{0==e.code?(i.instance.getBagTowerInfo(),n.instance.getPlayerInfo(),this._chapterId=e.data.chapterId,this._battleId=e.data.battleId,this.events=e.data.waves,this.winRewards=e.data.rewards.success,this.failRewards=e.data.rewards.failure,t(e.code)):t(e.code,e?e.msg:"error")}))}settleBattle(t,e){let o={chapterId:this._chapterId,wave:e,maxWave:r.instance.maxWave,cdPer:c.instance.getCdPer(),bulletCount:c.instance.getBulletCount(),cd:c.instance.getCd(),damage:c.instance.getDamage(),skills:c.instance.getSkills(),upgradeSkills:c.instance.upgradeSkills};s.instance.post(a.CASHHERO_SETTLE,{battleId:this._battleId,state:t,battleInfo:JSON.stringify(o)}).then((t=>{0==t.code&&(i.instance.getBagTowerInfo(!1),n.instance.getPlayerInfo())}))}static get instance(){return this._instance||(this._instance=new o),this._instance}}t("TowerData",o),o._instance=null;t("CashHeroStartResult",class{constructor(){this.chapterId=void 0,this.battleId=void 0,this.waves=void 0,this.rewards=void 0}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/TowerDoorItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./SpriteEx.ts","./TowerBuffModel.ts","./TowerSkillData.ts","./TowerHeroItem.ts","./EventListener.ts","./PoolManager.ts","./LanguageManager.ts","./TowerEvent.ts","./GameDefine.ts"],(function(t){var i,e,s,o,h,n,r,d,a,l,_,g,u,f,p,c,m,C,W,v,w,S;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){s=t.cclegacy,o=t.Node,h=t.Label,n=t.sp,r=t._decorator,d=t.v3,a=t.Vec3,l=t.Collider2D,_=t.Contact2DType,g=t.UITransform},function(t){u=t.default},function(t){f=t.SpriteEx},function(t){p=t.TowerBuffType},function(t){c=t.TowerSkillData},function(t){m=t.TowerHeroItem},function(t){C=t.EventListener},function(t){W=t.PoolManager},function(t){v=t.LanguageManager},function(t){w=t.TowerEvent},function(t){S=t.GameDefine}],execute:function(){var b,P,T,D,y,x,E,O,I,R,A,B,M;s._RF.push({},"183a7xpnu5CaLqUizOa52/x","TowerDoorItem",void 0);const{ccclass:L,property:U}=r;t("TowerDoorItem",(b=L("TowerDoorItem"),P=U(o),T=U(o),D=U(f),y=U(h),x=U(n.Skeleton),b((I=i((O=class extends u{constructor(){super(...arguments),e(this,"leftPole",I,this),e(this,"rightPole",R,this),e(this,"doorScreen",A,this),e(this,"desc",B,this),e(this,"hitAnim",M,this),this._moveSpeed=0,this.dir=d(0,-1,0),this.curPos=new a,this._doorScaleWidth=20,this._maxSpeed=0,this._originPos=void 0,this._targetWidth=300,this._minWidth=100,this._maxWidth=500,this._step=0,this._cd=-1,this._initCd=.15,this._during=10,this._doorEdge=0,this._state=void 0,this._buffCfg=void 0,this._value=void 0,this.wave=void 0,this.initStatus=void 0,this.doorKey=void 0,this._hitTimes=1}init(t,i){this._hitTimes=1,this._buffCfg=t,this._value=i.value,this.wave=i.wave,this.hitAnim.node.active=!1,this.hitAnim.setCompleteListener((()=>{this.hitAnim.node.active=!1})),this.doorKey=this.wave+"-"+this._buffCfg.Id+Math.random().toString().substring(2,6)+Math.random().toString().substring(2,12),this._moveSpeed=c.instance.getSpeed(),this._maxSpeed=this._moveSpeed,this._originPos=this.node.position.clone(),this.setRoleState("move"),this._targetWidth=300,this._step=0,this._minWidth=100,this._maxWidth=500,this.node.position.x>0?this._doorEdge=this.node.position.x+.5*this._targetWidth:this._doorEdge=this.node.position.x-.5*this._targetWidth,this.setBuffInfo(),this._during=10,this.resetSize(i.width),this.initStatus=!0}start(){let t=this.getComponent(l);t&&t.on(_.BEGIN_CONTACT,this.onBeginContact,this)}onBeginContact(t,i,e){i.name.indexOf("towerHeroItem")>=0&&this.checkCollider(i.node.getComponent(m))}checkCollider(t){0!=this._hitTimes&&(this._hitTimes=0,t.onDoorHited(this._buffCfg,this._value),0==this._hitTimes&&this.nextClear())}setBuffInfo(){this.desc.string=v.instance.getLang(this._buffCfg.desc,[this._value]),this.doorScreen.index=this._buffCfg.color}onBulletHited(t){if(!this.initStatus)return;if(this._cd>0)return 1;this.hitAnim.node.active=!0,this.hitAnim.setAnimation(0,"animation",!1);let i=this.node.getComponent(g).convertToNodeSpaceAR(t);this.hitAnim.node.setPosition(i.x,this.hitAnim.node.position.y);let e=!1;this._cd=this._initCd,"add"==this._buffCfg.type?(e=this._value<this._buffCfg.maxValue,this._value+=e?this._buffCfg.stepValue:0):this._buffCfg.type==p.SUB&&(e=!0,this._value-=0==this._value?0:this._buffCfg.stepValue,0==this._value&&this._buffCfg.nextId&&(this._buffCfg=c.instance.getBuffCfgById(this._buffCfg.nextId),this._value=1)),this.setBuffInfo(),e&&this.onHitedUpdateWidth()}onHitedUpdateWidth(){var t=this.getScaleWidth(this._doorScaleWidth);t>0&&C.emit(w.TOWER_UPDATE_DOOR_WIDTH,this.wave,this.doorKey,t,this.setScaleWidth.bind(this))}childUpdate(t){this._cd-=t,0!=this._step&&this.updateWidth(this._step),S.gameStart&&this.triggleClearByDuring()&&this.buffMoveFrame(t)}buffMoveFrame(t){let i=this._moveSpeed,e=this.node.getPosition(),s=this.dir.clone().multiply(d(i*t,i*t,0)),o=e.add(s);this.node.setPosition(o),this.curPos=o}setRoleState(t){this._state=t}resetSize(t){this._targetWidth=t,this._step=0,this.node.getComponent(g).width=t;let i=.5*-this.node.getComponent(g).width+.5*this.leftPole.getComponent(g).width,e=.5*this.node.getComponent(g).width-.5*this.rightPole.getComponent(g).width;this.leftPole.setPosition(i,this.leftPole.position.y),this.rightPole.setPosition(e,this.rightPole.position.y),this.doorScreen.getComponent(g).width=this.node.getComponent(g).width-20,this.node.position.x>0?this._doorEdge=this.node.position.x+.5*this._targetWidth:this._doorEdge=this.node.position.x-.5*this._targetWidth}getScaleWidth(t){return t>0?this._targetWidth>=this._maxWidth?0:Math.min(t,this._maxWidth-this._targetWidth):t<0?this._targetWidth<=this._minWidth?0:Math.max(Math.abs(t),this._targetWidth-this._minWidth):0}setScaleWidth(t){this._targetWidth+=t,this._targetWidth>this._maxWidth?this._targetWidth=this._maxWidth:this._targetWidth<this._minWidth&&(this._targetWidth=this._minWidth),this._step=(this._targetWidth-this.node.getComponent(g).contentSize.width)/10}updateWidth(t){var i=this.node.getComponent(g).contentSize.width;this.node.getComponent(g).width+=t;let e=this.node.getComponent(g).width;this._step<0?e<=this._targetWidth&&(this.node.getComponent(g).width=this._targetWidth,this._step=0,t=-Math.abs(i-this._targetWidth)):this._step>0&&e>=this._targetWidth&&(this.node.getComponent(g).width=this._targetWidth,this._step=0,t=Math.abs(i-this._targetWidth)),e=this.node.getComponent(g).width;let s=.5*-e+.5*this.leftPole.getComponent(g).width;this.leftPole.setPosition(s,this.leftPole.position.y);let o=.5*e-.5*this.rightPole.getComponent(g).width;this.rightPole.setPosition(o,this.rightPole.position.y),this.doorScreen.node.getComponent(g).width=e-20,this._doorEdge<0?this.node.setPosition(this._doorEdge+.5*e,this.node.position.y,0):this.node.setPosition(this._doorEdge-.5*e,this.node.position.y,0)}triggleClearByDuring(){return!(this._during<0)||(this.clear(),C.emit(w.TOWER_CLEAR_DOOR,this.wave),!1)}nextClear(){this._during=-1}clear(){this.initStatus&&(this.initStatus=!1,W.instance.putNodeByKey(this.node,"door_"+this._buffCfg.Id.toString()))}onUpdateWidth(t,i,e,s){if(this.wave!=t||this.doorKey==i)return;let o=this.getScaleWidth(-this._doorScaleWidth);if(e>0&&o>0){let t=Math.min(e,o);this.setScaleWidth(-t),s&&s(t)}}onClearDoor(t){this.wave==t&&this.nextClear()}onEnable(){C.on(w.TOWER_UPDATE_DOOR_WIDTH,this.onUpdateWidth,this),C.on(w.TOWER_CLEAR_DOOR,this.onClearDoor,this)}onDisable(){C.off(w.TOWER_UPDATE_DOOR_WIDTH,this.onUpdateWidth,this),C.off(w.TOWER_CLEAR_DOOR,this.onClearDoor,this)}}).prototype,"leftPole",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=i(O.prototype,"rightPole",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=i(O.prototype,"doorScreen",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=i(O.prototype,"desc",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=i(O.prototype,"hitAnim",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=O))||E));s._RF.pop()}}}));

System.register("chunks:///_virtual/TowerEvent.ts",["cc"],(function(e){var E;return{setters:[function(e){E=e.cclegacy}],execute:function(){E._RF.push({},"f3c3781F5BAz78n2FmGz0+R","TowerEvent",void 0);class T{}e("TowerEvent",T),T.TOWER_GAME_TOUCH_START="towerGameTouchStart",T.TOWER_GAME_TOUCH_MOVE="towerGameTouchMove",T.TOWER_GAME_TOUCH_END="towerGameTouchEnd",T.TOWER_GAME_TOUCH_CANCLE="towerGameTouchCancle",T.SHOW_TOWER_MONSTER_HP="showTowerMonsterHp",T.SHOW_TOWER_MONSTER_SHADOW="showTowerMonsterShadow",T.SHOW_TOWER_MONSTER_DIE_EFFECT="showTowerMonsterDieEffect",T.UPDATE_TOWER_HERO_HP="updateTowerHeroHp",T.TOWER_ATTACK_SKILL_EFFECT="towerAttackSkillEffect",T.TOWER_UPDATE_DOOR_WIDTH="towerUpdateDoorWidth",T.TOWER_CLEAR_DOOR="towerClearDoor",T.TOWER_GAME_OVER="towerGameOver",T.TOWER_MONSTER_DIE="towerMonsterDie",T.TOWER_CREATE_DAMAGER_NUM="towerCreateDamageNum",T.TOWER_BATTLE_NEXT_WAVE="towerBattleNextWave",E._RF.pop()}}}));

System.register("chunks:///_virtual/TowerEventData.ts",["cc","./TowerEventModel.ts","./CfgMgr.ts","./TowerGuardEventModel.ts","./GameDefine.ts","./MonsterModel.ts","./TowerData.ts"],(function(t){var e,n,s,a,r,i,h,u,v;return{setters:[function(t){e=t.cclegacy,n=t.view,s=t.Vec3},function(t){a=t.TowerEventCfg},function(t){r=t.CfgMgr},function(t){i=t.TowerGuardEventCfg},function(t){h=t.GameDefine},function(t){u=t.MonsterCfg},function(t){v=t.TowerData}],execute:function(){e._RF.push({},"a943b5fXXtCxKU+4s7YK7eY","TowerEventData",void 0);class o{constructor(){this._brushEventData=[],this._maxWave=10}get brushEventData(){return this._brushEventData}get maxWave(){return this._maxWave}init(){this.setGuardEvensFromServer()}setGuardEventsFromCfg(){let t=v.instance.chapterId;t=1;let e=r.getCfgDataArray(new i);for(let t=0;t<e.length;t++)if(1==e[t].chapter){let n=e[t],s=new a;s.monsters=n.monsters,s.buffs=n.buffs,s.wave=n.wave,s.dt=n.dt,this._brushEventData.push(s)}this._maxWave=this._brushEventData[this._brushEventData.length-1].wave}setGuardEvensFromServer(){let t=v.instance.events;for(let e=0;e<t.length;e++){let n=t[e],s=new a;s.monsters=n.monsters,s.buffs=n.buffs,s.wave=n.wave,s.dt=n.dt,this._brushEventData.push(s)}this._maxWave=this._brushEventData[this._brushEventData.length-1].wave}getScreenUpRandPos(t,e,a){let r=h.viewWidth>n.getVisibleSize().width?n.getVisibleSize().width:h.viewWidth,i=new s,u=r/t;return i.x=.5*-r+.5*u+u*e,i.y=h.viewHeight/2+a-h.battleMapDownPosy/3,i}getMonsterCfgById(t){return r.getDataById(new u,t)}getMonsterSpeed(t){return t}getUnitWidth(t){return(h.viewWidth>n.getVisibleSize().width?n.getVisibleSize().width:h.viewWidth)/t}clear(){this._brushEventData=[]}static get instance(){return this._instance||(this._instance=new o),this._instance}}t("TowerEventData",o),o._instance=null,e._RF.pop()}}}));

System.register("chunks:///_virtual/TowerEventModel.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"265b3XmH6hLhpiNF75iakDL","TowerEventModel",void 0);t("TowerEventCfg",class{constructor(){this.Id=void 0,this.wave=void 0,this.dt=void 0,this.buffs=void 0,this.monsters=void 0}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/TowerFailPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./EventListener.ts","./OpenPopupManager.ts","./RewardItem.ts","./TowerEvent.ts","./TowerData.ts","./TowerEventData.ts","./GameData.ts"],(function(e){var t,n,i,r,o,a,s,l,u,c,p,f,h,w,b,m,g,d,P,T;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,r=e.Prefab,o=e.Node,a=e.AnimationComponent,s=e.ProgressBar,l=e.Label,u=e._decorator,c=e.Component,p=e.Vec3,f=e.instantiate},function(e){h=e.Constants},function(e){w=e.EventListener},function(e){b=e.OpenPopupManager},function(e){m=e.RewardItem},function(e){g=e.TowerEvent},function(e){d=e.TowerData},function(e){P=e.TowerEventData},function(e){T=e.GameState}],execute:function(){var v,y,x,C,D,E,F,B,R,z,A,_,M;i._RF.push({},"4d8186gZitCH7J+j0DY+p1Y","TowerFailPopup",void 0);const{ccclass:O,property:L}=u;e("TowerFailPopup",(v=O("TowerFailPopup"),y=L(r),x=L(o),C=L(a),D=L(s),E=L(l),v((R=t((B=class extends c{constructor(){super(...arguments),n(this,"rewardPrefab",R,this),n(this,"content",z,this),n(this,"failAnim",A,this),n(this,"progressBar",_,this),n(this,"lbText",M,this)}show(e){this.lbText.string=Number(e/P.instance.maxWave*100).toFixed(1)+"%",this.progressBar.progress=e/P.instance.maxWave,d.instance.settleBattle(T.Failure,e),this.failAnim.play(),this.setContent()}async setContent(){let e=d.instance.failRewards;this.content.removeAllChildren();let t=new p(0,0,0),n=e.length,i=n>=4?4:n;t.x=120*-(i-1)/2;for(let n=0;n<e.length;n++)await new Promise((r=>{this.scheduleOnce((()=>{const o=e[n];let a=f(this.rewardPrefab),s=new p(0,0,0),l=Math.floor(n/i),u=n%i;s.x=t.x+120*u,s.y=-120*l,a.parent=this.content,a.getComponent(m).init(o),a.setPosition(s),r(0)}),.1)}))}onCloseBtn(){b.instance.hide(h.PopupUI.TowerFailPopup),w.emit(g.TOWER_GAME_OVER)}}).prototype,"rewardPrefab",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(B.prototype,"content",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(B.prototype,"failAnim",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(B.prototype,"progressBar",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(B.prototype,"lbText",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=B))||F));i._RF.pop()}}}));

System.register("chunks:///_virtual/TowerGame.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TowerMonsterManager.ts","./TowerBgManager.ts","./GameDefine.ts","./TowerHeroManager.ts","./EventListener.ts","./TowerSkillManager.ts","./TowerSkillData.ts","./TowerEvent.ts","./TowerBattleUIManager.ts","./OpenPopupManager.ts","./Constants.ts"],(function(e){var t,n,i,r,a,o,l,s,u,c,h,g,T,p,M,f,m,E;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,r=e.Node,a=e._decorator,o=e.Component,l=e.Input},function(e){s=e.TowerMonsterManager},function(e){u=e.TowerBgManager},function(e){c=e.GameDefine},function(e){h=e.TowerHeroManager},function(e){g=e.EventListener},function(e){T=e.TowerSkillManager},function(e){p=e.TowerSkillData},function(e){M=e.TowerEvent},function(e){f=e.TowerBattleUIManager},function(e){m=e.OpenPopupManager},function(e){E=e.Constants}],execute:function(){var b,w,C,O,v,_,y,U,G,H,S,R,I,d,A,D,k;i._RF.push({},"20fc5eyUGRHgr7lZyi7Xyt8","TowerGame",void 0);const{ccclass:z,property:L}=a;e("TowerGame",(b=z("TowerGame"),w=L(r),C=L(r),O=L(u),v=L(h),_=L(s),y=L(f),U=L(T),b((S=t((H=class extends o{constructor(){super(...arguments),n(this,"gameCtrl",S,this),n(this,"battleMap",R,this),n(this,"bgManager",I,this),n(this,"heroManager",d,this),n(this,"monsterManager",A,this),n(this,"battleUIManager",D,this),n(this,"skillManager",k,this)}show(e){this.init(e)}init(e){p.instance.init(e),this.bgManager.init(),this.skillManager.init(),this.monsterManager.init(),this.heroManager.init(),this.battleUIManager.init(),c.gameStart=!0}onTouchStart(e){e.preventSwallow=!0;let t=e.getUILocation();g.emit(M.TOWER_GAME_TOUCH_START,t)}onTouchMove(e){e.preventSwallow=!0;let t=e.getUILocation();g.emit(M.TOWER_GAME_TOUCH_MOVE,t)}onTouchEnd(e){e.preventSwallow=!0;let t=e.getUILocation();g.emit(M.TOWER_GAME_TOUCH_MOVE,t)}onTouchCancle(){}onGameOver(){p.instance.clear(),this.heroManager.clear(),this.monsterManager.clear(),this.battleUIManager.clear(),this.skillManager.clear(),m.instance.hide(E.PopupUI.TowerGame)}onEnable(){this.gameCtrl.on(l.EventType.TOUCH_START,this.onTouchStart,this),this.gameCtrl.on(l.EventType.TOUCH_MOVE,this.onTouchMove,this),this.gameCtrl.on(l.EventType.TOUCH_END,this.onTouchEnd,this),this.gameCtrl.on(l.EventType.TOUCH_CANCEL,this.onTouchCancle,this),g.on(M.TOWER_GAME_OVER,this.onGameOver,this)}onDisable(){this.gameCtrl.off(l.EventType.TOUCH_START,this.onTouchStart,this),this.gameCtrl.off(l.EventType.TOUCH_MOVE,this.onTouchMove,this),this.gameCtrl.off(l.EventType.TOUCH_END,this.onTouchEnd,this),this.gameCtrl.off(l.EventType.TOUCH_CANCEL,this.onTouchCancle,this),g.off(M.TOWER_GAME_OVER,this.onGameOver,this)}}).prototype,"gameCtrl",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(H.prototype,"battleMap",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(H.prototype,"bgManager",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=t(H.prototype,"heroManager",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(H.prototype,"monsterManager",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(H.prototype,"battleUIManager",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(H.prototype,"skillManager",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=H))||G));i._RF.pop()}}}));

System.register("chunks:///_virtual/TowerGuardEventModel.ts",["cc"],(function(t){var s;return{setters:[function(t){s=t.cclegacy}],execute:function(){s._RF.push({},"ec497nWqYBFyL3hM4GszCxn","TowerGuardEventModel",void 0);t("TowerGuardEventCfg",class{constructor(){this.ClassName="TowerGuardEvent",this.Id=void 0,this.chapter=void 0,this.wave=void 0,this.dt=void 0,this.buffs=void 0,this.monsters=void 0}});t("TowerGuardEventModel",class{constructor(){this.wave=void 0,this.dt=void 0,this.buffs=void 0,this.monsters=void 0}}),s._RF.pop()}}}));

System.register("chunks:///_virtual/TowerHeroBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./EventListener.ts","./TowerHeroData.ts","./GameDefine.ts","./TowerSkillData.ts","./Util.ts","./HeroData.ts","./SkillModel.ts","./TowerEvent.ts"],(function(e){var t,i,o,n,s,r,l,h,a,c,u,T,d,_,f,p,E,w,S,m,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){o=e.cclegacy,n=e.sp,s=e.Node,r=e.Prefab,l=e._decorator,h=e.Vec3,a=e.view,c=e.color,u=e.tween,T=e.UITransform},function(e){d=e.default},function(e){_=e.EventListener},function(e){f=e.TowerHeroData},function(e){p=e.GameDefine},function(e){E=e.TowerSkillData},function(e){w=e.Util},function(e){S=e.HeroAnim},function(e){m=e.SkillBulletObj},function(e){g=e.TowerEvent}],execute:function(){var b,A,C,H,O,k,y,v,D;o._RF.push({},"48687Od3whFJYPuvws5dzDv","TowerHeroBase",void 0);const{ccclass:M,property:P}=l;e("TowerHeroBase",(b=M("TowerHeroBase"),A=P(n.Skeleton),C=P(s),H=P(r),b((y=t((k=class extends d{constructor(){super(...arguments),i(this,"heroSpine",y,this),i(this,"skillTypeList",v,this),i(this,"skillTypePrefab",D,this),this._firePos=new h(0,100,0),this.isCollider=void 0,this.heroKey="",this.releaseSkillStatus=!0,this._atkNumber=0,this._cd=1,this._initCd=1,this._width=100,this._showHitTotalTime=.15}initBorn(){this._cd=this._initCd=E.instance.getCd(),this.heroKey=f.instance.heroKey,this._width=(p.viewWidth>a.getVisibleSize().width?a.getVisibleSize().width:p.viewWidth)-100}getFirePos(){let e=this.node.getPosition();return new h(e.x+this._firePos.x,e.y+this._firePos.y,0)}updateSkillDamageInterval(){}onAttacked(e){}onBuff(e){}playHit(){let e=this.heroSpine;e.color=c(255,255,255,1);let t=c(255,255,255,50);u(e).to(this._showHitTotalTime,{},{onUpdate(e,i){t=c(255,255,255,50*i),e.color=t}}).call((()=>{t=c(255,255,255,255),e.color=t})).start()}updateCd(e){p.gameStart&&(this._cd-=e*E.instance.getCdPer(),this._cd<0&&(this.releaseSkill(),this._cd=this._initCd))}releaseSkill(){let e=E.instance.getHeroSkills(),t=e.length;this.unschedule(this.initHeroAnim),this.heroSpine.setAnimation(0,0==this._atkNumber?S.ATK1:S.ATK2,!1),this._atkNumber=0==this._atkNumber?1:0;let i=0;for(let o=0;o<e.length;o++){let n=e[o];if(n){let e=this.getFirePos(),o=E.instance.getDamage();o>0&&(n.damage=o);let s=new m;s.skillObj=n,s.pos=e,s.targetPos=new h(e.x,-200,0),s.releaseTimes=1;let r=0,l=E.instance.getBulletCount(),a=l*t,c=e.x;for(let e=0;e<l;e++){let e=10,t=c+(a%2==0?(i-Math.floor(a/2))*e:(i-a/2)*e+.5*e);i++,s.pos.x=t,s.targetPos.x=t;let o=w.clone(s),n=new h(t,-200,0);_.emit(g.TOWER_ATTACK_SKILL_EFFECT,o,n,0,r)}}}this.scheduleOnce(this.initHeroAnim,1)}onDoorHited(e,t){E.instance.upgradeSkillObj(e,t)}clear(){this.unscheduleAllCallbacks()}initHeroAnim(){this.heroSpine.addAnimation(0,S.IDLE,!0)}onTouchStart(e){}onTouchMove(e){let t=this.node.parent.getComponent(T).convertToNodeSpaceAR(new h(e.x,e.y,0));t.x<this._width/2&&t.x>-this._width/2&&this.node.setPosition(t.x,this.node.position.y)}onTouchEnd(e){}onEnable(){_.on(g.TOWER_GAME_TOUCH_START,this.onTouchStart,this),_.on(g.TOWER_GAME_TOUCH_MOVE,this.onTouchMove,this),_.on(g.TOWER_GAME_TOUCH_END,this.onTouchEnd,this),_.on(g.TOWER_GAME_TOUCH_CANCLE,this.onTouchEnd,this)}onDisable(){_.off(g.TOWER_GAME_TOUCH_START,this.onTouchStart,this),_.off(g.TOWER_GAME_TOUCH_MOVE,this.onTouchMove,this),_.off(g.TOWER_GAME_TOUCH_END,this.onTouchEnd,this),_.off(g.TOWER_GAME_TOUCH_CANCLE,this.onTouchEnd,this)}childUpdate(e){}}).prototype,"heroSpine",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(k.prototype,"skillTypeList",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(k.prototype,"skillTypePrefab",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=k))||O));o._RF.pop()}}}));

System.register("chunks:///_virtual/TowerHeroData.ts",["cc","./HeroModel.ts","./CfgMgr.ts"],(function(t){var e,i,s,r;return{setters:[function(t){e=t.cclegacy,i=t.Vec3},function(t){s=t.HeroCfg},function(t){r=t.CfgMgr}],execute:function(){e._RF.push({},"80866vOvFdEeoF3NRBK7HaJ","TowerHeroData",void 0);class h{constructor(){this._heroPoint=new i(0,-620,0),this._heroR=450,this._heroKey="1001",this._releaseSkillQueue=[],this._curHp=100,this._maxHp=100,this._lastMaxHp=100,this._remainHp=100,this._heroId=0,this._damagePer=0}get heroPoint(){return this._heroPoint}get heroKey(){return this._heroKey}get heroR(){return this._heroR}get maxHp(){return this._maxHp}get curHp(){return this._curHp}get heroId(){return this._heroId}get damagePer(){return this._damagePer}init(){this._heroId=0,this._damagePer=0,this._curHp=100,this._maxHp=100,this._lastMaxHp=100,this._remainHp=100}getHeroCfgById(t){return r.getDataById(new s,t)}initHp(){this._remainHp=this._curHp,this._lastMaxHp=this._maxHp}addHp(t){if(t=100*t/100,this._maxHp+t<this._lastMaxHp)this._maxHp+=t,this._curHp+=t,this._curHp>this._remainHp&&(this._curHp=this._remainHp);else if(this._maxHp+t>=this._lastMaxHp&&this._maxHp<this._lastMaxHp){let e=this._maxHp+t-this._lastMaxHp;this._maxHp+=t,this._curHp=e+this._remainHp}else this._maxHp+=t,this._curHp+=t}subHp(t,e){return!1}subCurHp(t){let e=t;this._curHp-=e,this._curHp<=0&&(this._curHp=0),this._remainHp=this._curHp}addCurHp(t){this._curHp+t>this._maxHp?this._curHp=this._maxHp:this._curHp+=t,this._remainHp=this._curHp}addQueueSkill(t){this._releaseSkillQueue.push(t)}getQueueSkill(){return this._releaseSkillQueue.shift()}clear(){this._releaseSkillQueue=[]}static get instance(){return this._instance||(this._instance=new h),this._instance}}t("TowerHeroData",h),h._instance=null;t("HeroAnim",function(t){return t.IDLE="idle",t.ATK="attack",t.ATK1="attack1",t.ATK2="attack2",t.HIT="hit",t.DIE="die",t}({}));e._RF.pop()}}}));

System.register("chunks:///_virtual/TowerHeroItem.ts",["cc","./GameDefine.ts","./TowerHeroBase.ts"],(function(e){var t,r,o,c;return{setters:[function(e){t=e.cclegacy,r=e._decorator},function(e){o=e.GameDefine},function(e){c=e.TowerHeroBase}],execute:function(){var n;t._RF.push({},"4ae2aJYh+hJEK17ltQdV3Wo","TowerHeroItem",void 0);const{ccclass:s,property:a}=r;e("TowerHeroItem",s("TowerHeroItem")(n=class extends c{init(){this.initBorn()}childUpdate(e){o.gameStart&&this.updateCd(e)}})||n);t._RF.pop()}}}));

System.register("chunks:///_virtual/TowerHeroManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourcesUtil.ts","./Constants.ts","./TowerHeroItem.ts","./TowerHeroData.ts"],(function(e){var t,r,o,n,i,a,s,c,l,u,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.initializerDefineProperty},function(e){o=e.cclegacy,n=e.Node,i=e._decorator,a=e.Component,s=e.instantiate},function(e){c=e.ResourcesUtil},function(e){l=e.Constants},function(e){u=e.TowerHeroItem},function(e){h=e.TowerHeroData}],execute:function(){var p,H,f,d,g;o._RF.push({},"dd54fYQ9vhH8JHZEcIaoJkN","TowerHeroManager",void 0);const{ccclass:P,property:w}=i;e("TowerHeroManager",(p=P("TowerHeroManager"),H=w(n),p((g=t((d=class extends a{constructor(){super(...arguments),r(this,"heroParent",g,this)}init(){h.instance.init(),this.creatHero()}creatHero(){let e=l.towerHeroPath;c.getPrefab(e).then((e=>{let t=s(e),r=h.instance.heroPoint;t.parent=this.heroParent,t.setPosition(r),t.getComponent(u).init()}))}clear(){h.instance.clear(),this.heroParent.children[0].getComponent(u).clear(),this.heroParent.destroyAllChildren()}}).prototype,"heroParent",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=d))||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/TowerHpItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventListener.ts","./GameDefine.ts","./OpenPopupManager.ts","./Util.ts","./TowerHeroData.ts","./Constants.ts","./TowerEvent.ts"],(function(t){var e,n,i,r,o,a,s,p,c,h,l,u,m,f,g,H,T,w;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,r=t.Node,o=t.Label,a=t._decorator,s=t.Component,p=t.UITransform,c=t.ProgressBar,h=t.tween},function(t){l=t.EventListener},function(t){u=t.GameDefine},function(t){m=t.OpenPopupManager,f=t.LayerType},function(t){g=t.Util},function(t){H=t.TowerHeroData},function(t){T=t.Constants},function(t){w=t.TowerEvent}],execute:function(){var d,b,P,B,y,C,E,D,M;i._RF.push({},"5883eP6P7hCeodN5WQjOTGX","TowerHpItem",void 0);const{ccclass:_,property:v}=a;t("TowerHpItem",(d=_("TowerHpItem"),b=v(r),P=v(r),B=v(o),d((E=e((C=class extends s{constructor(){super(...arguments),n(this,"hpBarAnim",E,this),n(this,"hpBar",D,this),n(this,"hpText",M,this)}init(){let t=g.adapterScale();this.hpBarAnim.getComponent(p).width=this.node.getComponent(p).width,this.hpText.string=`${Math.ceil(H.instance.curHp)}`;let e=Math.ceil(H.instance.curHp),n=Math.ceil(H.instance.maxHp);this.hpBar.getComponent(c).progress=e/n,this.node.setScale(t,t)}setHeroHp(t){let e=Math.ceil(Math.round(100*H.instance.curHp)/100),n=Math.ceil(Math.round(100*H.instance.maxHp)/100);e<=0&&(e=0),this.hpText.string=`${e}`,this.hpBar.getComponent(c).progress=e/n;let i=this.hpBar.getComponent(p).width,r=this.hpBarAnim.getComponent(p).width-i;h(this.hpBarAnim.getComponent(p)).by(.2,{width:-r}).call((()=>{e<=0&&(u.gameOver=!0,u.gameStart=!1,m.instance.show(T.PopupUI.TowerFailPopup,null,f.TOP,!1,t))})).start()}onEnable(){l.on(w.UPDATE_TOWER_HERO_HP,this.setHeroHp,this)}onDisable(){l.off(w.UPDATE_TOWER_HERO_HP,this.setHeroHp,this)}}).prototype,"hpBarAnim",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(C.prototype,"hpBar",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(C.prototype,"hpText",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=C))||y));i._RF.pop()}}}));

System.register("chunks:///_virtual/TowerMonsterBase.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./PoolManager.ts","./EventListener.ts","./MonsterModel.ts","./GameDefine.ts","./SkillModel.ts","./MonsterEventModel.ts","./TowerEvent.ts","./TowerSkillData.ts"],(function(t){var i,e,s,o,n,r,h,l,m,a,u,c,d,p,f,g,H,M,S,v,C,w,b,y;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){s=t.cclegacy,o=t.AnimationComponent,n=t.sp,r=t._decorator,h=t.v3,l=t.Vec3,m=t.Sprite,a=t.Color,u=t.UITransform,c=t.CircleCollider2D,d=t.Vec2,p=t.color,f=t.tween},function(t){g=t.default},function(t){H=t.PoolManager},function(t){M=t.EventListener},function(t){S=t.MonsterAmin},function(t){v=t.GameDefine},function(t){C=t.DamageType},function(t){w=t.MonsterType},function(t){b=t.TowerEvent},function(t){y=t.TowerSkillData}],execute:function(){var T,A,B,O,_,x,E;s._RF.push({},"b1a23OG981JKJyf4yxyl3Qr","TowerMonsterBase",void 0);const{ccclass:D,property:k}=r;t("TowerMonsterBase",(T=D("TowerMonsterBase"),A=k(o),B=k(n.Skeleton),T((x=i((_=class extends g{constructor(){super(...arguments),e(this,"monsterAnim",x,this),e(this,"hitAnim",E,this),this.monsterHpItem=null,this.monsterShadow=null,this.initStatus=!1,this.monsterCfg=null,this.monsterObj=null,this.moveSpeed=80,this.monsterId=101,this.monsterHp=10,this.curHp=10,this.atk=5,this.atkTime=0,this.dir=h(0,-1,0),this.scale=1,this.width=100,this.height=100,this.atkNumber=0,this._during=10,this.isMove=!0,this.curAnim="",this.curPos=new l,this.colliderPos=new l,this.boundBox=null,this.monsterKey="",this.isDie=!1,this.isCollider=void 0,this.isHurt=!1,this.isRepulse=!1,this._moveEffect=null,this._bossComing=!1,this._showHitTotalTime=.15}setMonsterBorn(){this.moveSpeed=y.instance.getSpeed(),this.monsterId=this.monsterCfg.Id,this.atkNumber=0,this.monsterHp=this.monsterObj.addHp,this.atk=this.monsterObj.addAtk,this.curHp=this.monsterHp,this.dir=h(0,-1,0),this.curPos=this.node.getPosition(),2==this.monsterCfg.moveType&&(this.curPos.x<0?(this.dir.x=1,this.dir.y=-1,this.dir.normalize()):(this.dir.x=-1,this.dir.y=-1,this.dir.normalize())),this.isMove=!0,this.atkTime=0,this.monsterAnim.getComponent(m).color=new a(255,255,255),this.setMonsterSize();let t=this.monsterCfg.mType==w.BOSS?"boss":"monster";this.monsterKey=t+this.monsterId+Math.random().toString().substring(2,6)+Math.random().toString().substring(2,12),this.setMonsterBoundBox(),this.isDie=!1,this.isHurt=!1,this.isRepulse=!1,this.hitAnim.node.active=!1,this.hitAnim.setCompleteListener((()=>{this.hitAnim.node.active=!1})),M.emit(b.SHOW_TOWER_MONSTER_HP,this),M.emit(b.SHOW_TOWER_MONSTER_SHADOW,this),this._during=10,this.initStatus=!0}setMonsterSize(){this.scale=this.monsterCfg.iconScale+.5,this.node.setScale(h(this.scale,this.scale,this.scale)),this.width=this.node.getChildByName("icon").getComponent(u).contentSize.width,this.height=this.node.getChildByName("icon").getComponent(u).contentSize.height}setMonsterAnim(t,i){this.curAnim!=t&&this.monsterCfg&&(this.monsterAnim.play(t),this.curAnim=t)}getColliderPos(){let t=this.curPos.clone(),i=this.boundBox.offset;return t.x+=i.x,t.y+=i.y,t}setMonsterBoundBox(){this.boundBox=this.node.getComponent(c),this.boundBox.radius=this.monsterCfg.colliderRadius;let t=this.monsterCfg.colliderOffset?this.monsterCfg.colliderOffset.split("|"):["0","0"];this.boundBox.offset=new d(Number(t[0]),Number(t[1]))}getBoundBoxCircle(){return this.boundBox instanceof c?this.boundBox.radius:20}monsterMoveFrame(t){if(!this.isRepulse&&this.isMove){let i=0,e=this.moveSpeed*(100-i)/100;this.setMonsterAnim(S.Move);let s=this.node.getPosition(),o=this.dir.clone();2==this.monsterCfg.moveType&&(this.curPos.x<-v.viewWidth/2+this.width*this.scale?(o.x=1,o.y=-1,this.dir=o.normalize()):this.curPos.x>v.viewWidth/2-this.width*this.scale&&(o.x=-1,o.y=-1,this.dir=o.normalize()));let n=o.multiply(h(e*t,e*t,0)),r=s.add(n);this.node.setPosition(r),this.curPos=r}}onAttacked(t){if(!this.initStatus)return;this.hitAnim.node.active=!0,this.hitAnim.setAnimation(0,"animation",!1);let i=C.NORMAL,e=t.skillObj,s=e.damage;this.attacked(s,i,e.weaponId,e.level)}attacked(t,i,e,s){if(t>0&&!this.isDie){let i=Math.ceil(t);this.curHp-=i,this.monsterHpItem&&this.monsterHpItem.setMonsterHp(this.curHp,this.monsterHp),this.curHp<=0&&(this.curHp=0,this.isDie=!0,this.nextClear())}}onHitWall(t){this.isDie||(this.isDie=!0,t.onHited(this.monsterObj.addAtk,this.monsterObj.wave),this.curHp=0,this.monsterHpItem&&this.monsterHpItem.setMonsterHp(0,this.monsterHp),this.nextClear(),M.emit(b.TOWER_MONSTER_DIE))}playHit(){let t=this.monsterAnim.getComponent(m);t.color=p(255,255,255,1);let i=p(255,255,255,50);f(t).to(this._showHitTotalTime,{},{onUpdate(t,e){i=p(255,255,255,50*e),t.color=i}}).call((()=>{i=p(255,255,255,255),t.color=i})).start()}setMonsterHurtEffect(t){if(void 0===t&&(t=.3),!this.isDie&&!this.isHurt){this.isHurt=!0;let i=this.monsterAnim.getComponent(m);i.color=(new a).fromHEX("FF4B4B"),this.scheduleOnce((()=>{this.isHurt=!1,i.color=new a(255,255,255)}),t)}}triggleClearByDuring(){return!(this._during<0)||(this.clear(),M.emit(b.TOWER_MONSTER_DIE),!1)}nextClear(){this._during=-1}clear(){this.unscheduleAllCallbacks(),M.emit(b.SHOW_TOWER_MONSTER_DIE_EFFECT,this.node.getPosition()),this.monsterShadow&&this.monsterShadow.clear(),this.initStatus=!1,this.monsterCfg=null,this.monsterObj=null,this.monsterHpItem=null,this.monsterShadow=null,this.isMove=!0,this.isHurt=!1,this.isRepulse=!1,H.instance.putNodeByKey(this.node,"tower_"+this.monsterId.toString())}childUpdate(t){}}).prototype,"monsterAnim",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=i(_.prototype,"hitAnim",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=_))||O));t("MoveEffect",class{constructor(){this.speed=void 0,this.time=void 0,this.dir=void 0}}),s._RF.pop()}}}));

System.register("chunks:///_virtual/TowerMonsterHpItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./PoolManager.ts","./GameDefine.ts"],(function(e){var t,o,n,s,r,i,c,a,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.initializerDefineProperty},function(e){n=e.cclegacy,s=e.Label,r=e._decorator,i=e.UITransform},function(e){c=e.default},function(e){a=e.PoolManager},function(e){l=e.GameDefine}],execute:function(){var p,u,h,m,f;n._RF.push({},"419f7TFMlJMa6ed8SeIK0+P","TowerMonsterHpItem",void 0);const{ccclass:d,property:g}=r;e("TowerMonsterHpItem",(p=d("TowerMonsterHpItem"),u=g(s),p((f=t((m=class extends c{constructor(){super(...arguments),o(this,"hp",f,this),this._com=null}init(e){this._com=e,this.hp.string=e.monsterHp+""}setMonsterHp(e,t){e<=0&&(e=0),this.hp.string=e+"",e<=0&&this.clear()}setMonsterHpPos(){let e=this._com.getColliderPos(),t=this._com.node.getComponent(i).height;this.node.setPosition(e.x,e.y+t,0)}clear(){a.instance.putNode(this.node)}childUpdate(e){l.gameStart&&this._com&&this.setMonsterHpPos()}}).prototype,"hp",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=m))||h));n._RF.pop()}}}));

System.register("chunks:///_virtual/TowerMonsterItem.ts",["cc","./TowerMonsterBase.ts","./GameDefine.ts","./TowerWallItem.ts"],(function(t){var e,n,o,s,i,r,a;return{setters:[function(t){e=t.cclegacy,n=t.Collider2D,o=t.Contact2DType,s=t._decorator},function(t){i=t.TowerMonsterBase},function(t){r=t.GameDefine},function(t){a=t.TowerWallItem}],execute:function(){var c;e._RF.push({},"5b24a2NSBNLG75l08VWd4Pv","TowerMonsterItem",void 0);const{ccclass:l,property:m}=s;t("TowerMonsterItem",l("TowerMonsterItem")(c=class extends i{init(t,e){this.monsterCfg=t,this.monsterObj=e,this.initStatus=!1,this.isDie=!1,this.setMonsterBorn()}childUpdate(t){r.gameStart&&this.initStatus&&this.triggleClearByDuring()&&this.monsterMoveFrame(t)}start(){let t=this.getComponent(n);t&&t.on(o.BEGIN_CONTACT,this.onBeginContact,this)}onBeginContact(t,e,n){if(e.name.toLowerCase().indexOf("wall")>=0){let t=e.node.getComponent(a);this.onHitWall(t)}}})||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/TowerMonsterManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseComponent.ts","./GameDefine.ts","./TowerEventData.ts","./TowerMonsterModel.ts","./TowerBuffModel.ts","./PoolManager.ts","./ResourcesUtil.ts","./Constants.ts","./TowerDoorItem.ts","./TowerSkillData.ts","./TowerMonsterItem.ts","./EventListener.ts","./OpenPopupManager.ts","./TowerEvent.ts"],(function(e){var t,n,r,s,o,i,a,u,h,l,f,c,d,p,_,g,m,M,T,w,E;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){r=e.cclegacy,s=e.Node,o=e._decorator,i=e.instantiate,a=e.Sprite},function(e){u=e.default},function(e){h=e.GameDefine},function(e){l=e.TowerEventData},function(e){f=e.TowerMonsterObj},function(e){c=e.TowerBuffObj},function(e){d=e.PoolManager},function(e){p=e.ResourcesUtil},function(e){_=e.Constants},function(e){g=e.TowerDoorItem},function(e){m=e.TowerSkillData},function(e){M=e.TowerMonsterItem},function(e){T=e.EventListener},function(e){w=e.OpenPopupManager},function(e){E=e.TowerEvent}],execute:function(){var v,P,b,B,C;r._RF.push({},"dd0084ULWBBtKnu7L/syi/8","TowerMonsterManager",void 0);const{ccclass:D,property:A}=o;e("TowerMonsterManager",(v=D("TowerMonsterManager"),P=A(s),v((C=t((B=class extends u{constructor(){super(...arguments),n(this,"monsterParent",C,this),this._monsterPrefabMap=new Map,this._buffPrefabMap=new Map,this._queueMonsterArr=[],this._queueBuffArr=[],this._curTowerEvent=null,this._schduleTime=1,this.monsterNumber=0}init(){this._schduleTime=0,l.instance.init(),this.monsterNumber=0,this.setCurEvent()}setCurEvent(){l.instance.brushEventData.length?(this._curTowerEvent=l.instance.brushEventData.shift(),this._schduleTime=this._curTowerEvent.dt):this._curTowerEvent=null}setBrushMonsterEvent(){let e=this._curTowerEvent.monsters;for(let t=0;t<e.length;t++){const n=e[t];let r=new f;r.id=n[0],r.addHp=n[1],r.addAtk=n[2],r.wave=this._curTowerEvent.wave,r.pos=l.instance.getScreenUpRandPos(e.length,t,0),this._queueMonsterArr.push(r)}}setBrushBuffEvent(){let e=this._curTowerEvent.buffs;for(let t=0;t<e.length;t++){const n=e[t];let r=new c;r.id=n[0],r.value=n[1],r.wave=this._curTowerEvent.wave,r.pos=l.instance.getScreenUpRandPos(e.length,t,0),r.width=l.instance.getUnitWidth(e.length),this._queueBuffArr.push(r)}}onCreateMonster(){for(;this._queueMonsterArr.length;){let e=this._queueMonsterArr.shift();T.emit(E.TOWER_BATTLE_NEXT_WAVE,e.wave);let t=e.id,n=null,r=e.pos,s=l.instance.getMonsterCfgById(t);if(this._monsterPrefabMap.has(t))n=d.instance.getNodeItemById(this._monsterPrefabMap.get(t),"tower_"+t.toString()),this.monsterParent.addChild(n),n.setPosition(r),n.getComponent(M).init(s,e);else{let t=_.towerMonsterPath;p.getPrefab(t).then((t=>{this.loadMonsterRes(e,s,t)}))}}}onCreateBuff(){for(;this._queueBuffArr.length;){let e=this._queueBuffArr.shift();T.emit(E.TOWER_BATTLE_NEXT_WAVE,e.wave);let t=e.id,n=m.instance.getBuffCfgById(t);if(this._buffPrefabMap.has(t)){let r=d.instance.getNodeItemById(this._buffPrefabMap.get(t),"door_"+t.toString());this.monsterParent.addChild(r),r.setPosition(e.pos),r.getComponent(g).init(n,e)}else{let r=_.towerDoorPath;p.getPrefab(r).then((r=>{let s=i(r);this.monsterParent.addChild(s),s.setPosition(e.pos),s.getComponent(g).init(n,e),this._buffPrefabMap.set(t,s)}))}}}loadMonsterRes(e,t,n,r){let s=i(n),o=_.monsterIconPath+t.icon+"/spriteFrame";p.geSpriteFrame(o).then((n=>{s.getChildByName("icon").getComponent(a).spriteFrame=n,this.monsterParent.addChild(s),s.setPosition(e.pos),s.getComponent(M).init(t,e),this._monsterPrefabMap.set(t.Id,s)}))}onMonsterDie(){this.monsterNumber++,this.monsterParent.children.length||null!=this._curTowerEvent||(h.gameOver=!0,h.gameStart=!1,w.instance.show(_.PopupUI.TowerWinPopup))}triggleBrushMonsterEvent(e){this._schduleTime-=e,this._schduleTime<=0&&this._curTowerEvent&&(this._curTowerEvent.monsters.length>0?this.setBrushMonsterEvent():this._curTowerEvent.buffs.length>0&&this.setBrushBuffEvent(),this.setCurEvent())}onEnable(){T.on(E.TOWER_MONSTER_DIE,this.onMonsterDie,this)}onDisable(){T.off(E.TOWER_MONSTER_DIE,this.onMonsterDie,this)}clear(){this._buffPrefabMap.clear(),this._monsterPrefabMap.clear(),l.instance.clear(),this._schduleTime=1,this._queueMonsterArr=[],this._curTowerEvent=null,this.monsterParent.destroyAllChildren()}childUpdate(e){h.gameStart&&(this.triggleBrushMonsterEvent(e),this._queueMonsterArr.length&&this.onCreateMonster(),this._queueBuffArr.length&&this.onCreateBuff())}}).prototype,"monsterParent",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=B))||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/TowerMonsterModel.ts",["cc"],(function(t){var o;return{setters:[function(t){o=t.cclegacy}],execute:function(){o._RF.push({},"938a6UTnaRMXZFH8H9ST15B","TowerMonsterModel",void 0);t("TowerMonsterObj",class{constructor(){this.id=void 0,this.addHp=void 0,this.addAtk=void 0,this.wave=void 0,this.pos=void 0}}),o._RF.pop()}}}));

System.register("chunks:///_virtual/TowerShadow.ts",["cc","./BaseComponent.ts","./PoolManager.ts","./GameDefine.ts"],(function(e){var t,o,s,n,c;return{setters:[function(e){t=e.cclegacy,o=e._decorator},function(e){s=e.default},function(e){n=e.PoolManager},function(e){c=e.GameDefine}],execute:function(){var a;t._RF.push({},"97d1cWY6SZGwIws8XR9xYWM","TowerShadow",void 0);const{ccclass:i,property:r}=o;e("TowerShadow",i("TowerShadow")(a=class extends s{constructor(){super(...arguments),this._com=null}init(e){this._com=e;let t=e.monsterCfg.shadeScale;this.node.setScale(t,t,t)}setMonsterShadownPos(){let e=this._com.node.getPosition();this.node.setPosition(e.x,e.y+0,0)}clear(){n.instance.putNode(this.node)}childUpdate(e){c.gameStart&&this._com&&this.setMonsterShadownPos()}})||a);t._RF.pop()}}}));

System.register("chunks:///_virtual/TowerSkillData.ts",["cc","./CfgMgr.ts","./BagData.ts","./WeaponModel.ts","./Util.ts","./SkillModel.ts","./TowerBuffModel.ts","./TowerSkillModel.ts"],(function(e){var l,t,s,i,a,n,r,h,k,b,d;return{setters:[function(e){l=e.cclegacy},function(e){t=e.CfgMgr},function(e){s=e.BagData},function(e){i=e.WeaponCfg},function(e){a=e.Util},function(e){n=e.SkillCfg,r=e.SkillObj},function(e){h=e.TowerSkillType,k=e.TowerBuffType,b=e.TowerBuffCfg},function(e){d=e.TowerSkillObj}],execute:function(){l._RF.push({},"905d4NLLDZNP5tnsHtbZDgM","TowerSkillData",void 0);class _{constructor(){this._skillObj=void 0,this._skillKeys=[],this._weaponSkillMapData=new Map,this._weaponIds=[],this._upgradeSkills=[]}init(e){this._weaponIds=e,this._skillObj=new d,this._skillObj.bulletNumber=1,this._skillObj.cdPer=0,this._skillObj.weaponNumber=1;let l=this._selectOneSkill();this._skillObj.damage=l.damage,this._skillObj.cd=l.cd}setInitDamage(e){this._skillObj.damage=e}getSkillObj(){return this._skillObj}upgradeSkillObj(e,l){let t=e.attr,s=e.type;switch(this._upgradeSkills.push(t+"|"+s+"|"+l),t){case h.CD:this._skillObj.cdPer=s==k.ADD?this._skillObj.cdPer+l:this._skillObj.cdPer-l;break;case h.CDPER:e.type==k.ADD?this._skillObj.cdPer=(0==this._skillObj.cdPer?1:this._skillObj.cdPer)*l:0!=l&&(this._skillObj.cdPer/=l);break;case h.DAMAGE:this.addAtkDamage(s==k.ADD?l||0:0-(l||0));break;case h.DAMAGEPER:s==k.ADD?(this._skillObj.damage*=l,this._skillObj.damage=Math.max(1,this._skillObj.damage)):(0!=l&&(this._skillObj.damage/=l),this._skillObj.damage=Math.max(1,this._skillObj.damage));break;case h.WEAPONNUMBER:s==k.ADD?this.addWeapon(Math.max(0,Math.floor(l))):this.subWeapon(Math.max(0,Math.floor(l)));break;case h.BULLETNUMBER:s==k.ADD?this._skillObj.bulletNumber+=l:this._skillObj.bulletNumber=this._skillObj.bulletNumber-l>1?this._skillObj.bulletNumber-l:1;break;case h.HP:s==k.ADD?this.addHp(l):this.subHp(l)}}addAtkDamage(e){this._skillObj.damage+=e,this._skillObj.damage=Math.max(1,this._skillObj.damage)}addWeapon(e){for(let l=0;l<e;l++){this._selectOneSkill()&&(this._skillObj.weaponNumber+=1)}}subWeapon(e){this._skillObj.weaponNumber-e<1?(e=this._skillObj.weaponNumber-1,this._skillObj.weaponNumber=1):this._skillObj.weaponNumber-=e;for(let l=0;l<e;l++){let e=this._skillKeys.shift();this._weaponSkillMapData.delete(e)}}addHp(e){this._skillObj.maxHp+=e,this._skillObj.hp=Math.max(0,Math.min(this._skillObj.hp+e,this._skillObj.maxHp))}subHp(e){this._skillObj.maxHp-=e;var l=this._skillObj.hp;this._skillObj.hp=Math.max(0,Math.min(this._skillObj.hp-e,this._skillObj.maxHp)),this._skillObj.hp<=0&&(this._skillObj.hp=1,e=l-this._skillObj.hp)}getCd(){return 1}getDamage(){return Math.floor(this._skillObj.damage)}getSpeed(){return 80}getBulletCount(){return this._skillObj.bulletNumber}getCdPer(){return Math.max(1+this._skillObj.cdPer,1)}getBuffCfgById(e){return a.clone(t.getDataById(new b,e))}getSkillCfgById(e){return t.getDataById(new n,e)}_selectOneSkill(){let e=this._getBagWeaponSkills();if(0==e.length)return null;let l=e[a.randomIdx(e)],[n,h,k]=l.split("|").map((e=>Number(e))),b=t.getDataById(new i,n),d=s.instance.calWeaponLevelCfgByLevel(n,k),_=k-1,p=this.getSkillCfgById(h),u=new r;u.Id=p.Id;for(const e in p)if(Object.prototype.hasOwnProperty.call(p,e)){const l=p[e];u.hasOwnProperty(e)&&(u[e]=l)}return 0==u.bulletSpeed&&(u.bulletSpeed=800,u.during=10),u.Id=h,u.weaponId=n,u.cd=b.cd,u.desc=b.desc,u.level=k,u.quality=_,u.type=b.type,u.targetType=b.targetType,u.name=b.name,u.range=b.range,u.damage=Math.ceil(b.hcUp[_]*(b.damage+d.addDamage)*10)/10,this._skillKeys.push(l),this._weaponSkillMapData.set(l,u),u}_getBagWeaponSkills(){let e=s.instance.getWeaponData(),l=[];return e.forEach((e=>{let t=e.Id;if(-1==this._weaponIds.indexOf(t))return;let s=t+"|"+e.skillIds[3]+"|4";-1==this._skillKeys.indexOf(s)&&l.push(s)})),l}getSkills(){return this._skillKeys}get weaponIds(){return this._weaponIds}get upgradeSkills(){return this._upgradeSkills}getHeroSkills(){return Array.from(this._weaponSkillMapData.values())}clear(){this._weaponSkillMapData.clear(),this._skillKeys=[],this._skillObj=null}upgradeSkill(){}static get instance(){return this._instance||(this._instance=new _),this._instance}}e("TowerSkillData",_),_._instance=null,l._RF.pop()}}}));

System.register("chunks:///_virtual/TowerSkillManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TowerSkillData.ts","./EventListener.ts","./Constants.ts","./ResourcesUtil.ts","./PoolManager.ts","./SkillBulletItem.ts","./TowerEvent.ts"],(function(e){var t,l,i,n,s,a,o,r,c,p,k,u,h,b,d,f,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,l=e.initializerDefineProperty},function(e){i=e.cclegacy,n=e.Node,s=e._decorator,a=e.Component,o=e.instantiate,r=e.Sprite,c=e.Animation,p=e.AnimationClip},function(e){k=e.TowerSkillData},function(e){u=e.EventListener},function(e){h=e.Constants},function(e){b=e.ResourcesUtil},function(e){d=e.PoolManager},function(e){f=e.SkillBulletItem},function(e){m=e.TowerEvent}],execute:function(){var g,S,P,C,M;i._RF.push({},"5d966JMDU1F9aS3VpOrSbDX","TowerSkillManager",void 0);const{ccclass:O,property:_}=s;e("TowerSkillManager",(g=O("TowerSkillManager"),S=_(n),g((M=t((C=class extends a{constructor(){super(...arguments),l(this,"skillParentUp",M,this),this._skillPrefabItemMap=new Map}init(){}onAttackSkillEffect(e,t,l,i){void 0===i&&(i=0),this.scheduleOnce((()=>{let i=null,n=e.skillObj.Id;if(this._skillPrefabItemMap.has(n))i=d.instance.getNodeItemById(this._skillPrefabItemMap.get(n),"tower_"+n.toString()),this.skillParentUp.addChild(i),i.setPosition(e.pos),i.getComponent(f).init(e,t,l);else{let s=h.towerBattSkillPath;b.getPrefab(s).then((s=>{let a="";a=e.skillObj.res==e.skillObj.bulletRes?h.weaponIconPath+e.skillObj.bulletRes:h.bulletPath+e.skillObj.bulletRes,1==e.skillObj.bulletFrames?(a+="/spriteFrame",b.getSpriteFrame(a).then((a=>{i=o(s);let c=i.getChildByName("icon").getComponent(r);c.spriteFrame=a,c.node.angle=e.skillObj.angle,c.node.setScale(e.skillObj.scale,e.skillObj.scale),this.skillParentUp.addChild(i),i.setPosition(e.pos),i.getComponent(f).init(e,t,l),this._skillPrefabItemMap.set(n,i)}))):b.getSpriteAtlas(a).then((a=>{i=o(s);let r=i.getChildByName("icon").getComponent(c),k=p.createWithSpriteFrames(a,e.skillObj.bulletFrames);k.name="effect",k.wrapMode=p.WrapMode.Loop,r.addClip(k),r.node.angle=e.skillObj.angle,r.node.setScale(e.skillObj.scale,e.skillObj.scale),this.skillParentUp.addChild(i),i.setPosition(e.pos),i.getComponent(f).init(e,t,l),this._skillPrefabItemMap.set(n,i)}))}))}}),i)}clear(){this._skillPrefabItemMap.clear(),this.skillParentUp.destroyAllChildren(),k.instance.clear()}onEnable(){u.on(m.TOWER_ATTACK_SKILL_EFFECT,this.onAttackSkillEffect,this)}onDisable(){u.off(m.TOWER_ATTACK_SKILL_EFFECT,this.onAttackSkillEffect,this)}}).prototype,"skillParentUp",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=C))||P));i._RF.pop()}}}));

System.register("chunks:///_virtual/TowerSkillModel.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"1d307p0dbtBvIkY+QrlvZAU","TowerSkillModel",void 0);t("TowerSkillObj",class{constructor(){this.cd=0,this.cdPer=0,this.damage=0,this.weaponNumber=0,this.bulletNumber=0,this.maxHp=0,this.hp=0}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/TowerWallItem.ts",["cc","./BaseComponent.ts","./EventListener.ts","./TowerHeroData.ts","./TowerEvent.ts"],(function(t){var e,n,s,i,r,o;return{setters:[function(t){e=t.cclegacy,n=t._decorator},function(t){s=t.default},function(t){i=t.EventListener},function(t){r=t.TowerHeroData},function(t){o=t.TowerEvent}],execute:function(){var c;e._RF.push({},"811f0AGxOBIK7llBFf/xVXb","TowerWallItem",void 0);const{ccclass:a,property:u}=n;t("TowerWallItem",a("TowerWallItem")(c=class extends s{constructor(){super(...arguments),this.initStatus=!1}init(){this.initStatus=!0}onHited(t,e){r.instance.subCurHp(t),i.emit(o.UPDATE_TOWER_HERO_HP,e)}clear(){this.initStatus&&(this.initStatus=!1)}})||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/TowerWeaponItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./SpriteEx.ts","./ResourcesUtil.ts","./BagData.ts"],(function(e){var t,n,i,o,r,a,s,c,l,p,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,o=e.Sprite,r=e._decorator,a=e.Component,s=e.UITransform},function(e){c=e.Constants},function(e){l=e.SpriteEx},function(e){p=e.ResourcesUtil},function(e){u=e.BagData}],execute:function(){var g,h,f,m,b,y,d;i._RF.push({},"b1faf4fISVEsYzVBecEhVK4","TowerWeaponItem",void 0);const{ccclass:I,property:w}=r;e("TowerWeaponItem",(g=I("TowerWeaponItem"),h=w(l),f=w(o),g((y=t((b=class extends a{constructor(){super(...arguments),n(this,"bg",y,this),n(this,"icon",d,this)}init(e,t){let n=u.instance.getWeaponCfgById(e);this.bg.index=n.quality,t||(this.node.getComponent(o).grayscale=!0,this.icon.grayscale=!0);let i=c.weaponIconPath+u.instance.getWeaponIcon(e,15)+"/spriteFrame";p.geSpriteFrame(i).then((e=>{this.icon.spriteFrame=e;let t=this.icon.getComponent(s).contentSize,n=Math.min(48/t.width,48/t.height);this.icon.node.setScale(n,n)}))}}).prototype,"bg",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=t(b.prototype,"icon",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=b))||m));i._RF.pop()}}}));

System.register("chunks:///_virtual/TowerWinPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./EventListener.ts","./OpenPopupManager.ts","./RewardItem.ts","./TowerEvent.ts","./TowerData.ts","./GameData.ts","./TowerEventData.ts","./RewardModel.ts","./ItemModel.ts","./CoinMode.ts"],(function(e){var t,n,o,i,r,a,s,c,u,l,p,w,f,m,d,h,b,P,T,g,v,y,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){o=e.cclegacy,i=e.Prefab,r=e.Node,a=e.AnimationComponent,s=e._decorator,c=e.Component,u=e.Vec3,l=e.instantiate,p=e.UITransform,w=e.v3},function(e){f=e.Constants},function(e){m=e.EventListener},function(e){d=e.OpenPopupManager},function(e){h=e.RewardItem},function(e){b=e.TowerEvent},function(e){P=e.TowerData},function(e){T=e.GameState},function(e){g=e.TowerEventData},function(e){v=e.RewardObj},function(e){y=e.ItemIdType},function(e){C=e.CoinObj}],execute:function(){var R,D,E,M,I,W,A,O,x,z,_;o._RF.push({},"f583cMV8qdNg5zL9eVQkD6S","TowerWinPopup",void 0);const{ccclass:S,property:L}=s;e("TowerWinPopup",(R=S("TowerWinPopup"),D=L(i),E=L(r),M=L(a),I=L(r),R((O=t((A=class extends c{constructor(){super(...arguments),n(this,"rewardPrefab",O,this),n(this,"content",x,this),n(this,"winAnim",z,this),n(this,"btn",_,this)}show(){P.instance.settleBattle(T.Success,g.instance.maxWave),this.winAnim.play(),this.setContent()}async setContent(){let e=[];e=P.instance.winRewards;let t=new v;t.count=1,t.itemId=y.Crown,e.push(t);let n=e;this.content.removeAllChildren();let o=new u(0,0,0),i=n.length,r=i>=4?4:i;o.x=120*-(r-1)/2;for(let e=0;e<n.length;e++)await new Promise((t=>{this.scheduleOnce((()=>{const i=n[e];let a=l(this.rewardPrefab),s=new u(0,0,0),c=Math.floor(e/r),p=e%r;s.x=o.x+120*p,s.y=-120*c,a.parent=this.content,a.getComponent(h).init(i),a.setPosition(s),t(0)}),.1)}))}onCloseBtn(){d.instance.hide(f.PopupUI.TowerWinPopup),m.emit(b.TOWER_GAME_OVER);let e=new C;e.pos=this.node.getComponent(p).convertToWorldSpaceAR(w(0,0,0)),e.num=1}}).prototype,"rewardPrefab",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(A.prototype,"content",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(A.prototype,"winAnim",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(A.prototype,"btn",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=A))||W));o._RF.pop()}}}));

System.register("chunks:///_virtual/UnlockItemPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./SpriteEx.ts","./ResourcesUtil.ts","./BagData.ts","./LanguageManager.ts"],(function(t){var e,n,i,o,s,a,r,c,l,p,u,h,g,m,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,o=t.Label,s=t.Sprite,a=t._decorator,r=t.Component,c=t.UITransform},function(t){l=t.OpenPopupManager,p=t.LayerType},function(t){u=t.Constants},function(t){h=t.SpriteEx},function(t){g=t.ResourcesUtil},function(t){m=t.BagData},function(t){f=t.LanguageManager}],execute:function(){var b,I,d,P,y,U,w,k,x,z,L,_,S;i._RF.push({},"574fa4/JmpAkpKzGQUAIacq","UnlockItemPopup",void 0);const{ccclass:C,property:E}=a;t("UnlockItemPopup",(b=C("UnlockItemPopup"),I=E(o),d=E(o),P=E(s),y=E(h),U=E(o),b((x=e((k=class extends r{constructor(){super(...arguments),n(this,"title",x,this),n(this,"itemName",z,this),n(this,"icon",L,this),n(this,"iconEx",_,this),n(this,"desc",S,this),this._items=[]}show(t){this._items=t,this.setOneItem(this._items.shift())}setOneItem(t){if(t.type>this.iconEx.size){let e=u.weaponIconPath+m.instance.getWeaponIcon(t.itemId)+"/spriteFrame";g.geSpriteFrame(e).then((t=>{this.icon.spriteFrame=t;let e=this.icon.getComponent(c).contentSize,n=Math.min(190/e.width,190/e.height);this.icon.node.setScale(n,n)}));let n=m.instance.getWeaponCfgById(t.itemId);this.itemName.string=f.instance.getLang(n.name),this.title.string=f.instance.getLang("bag.unlocknewweapon")}else this.iconEx.index=t.type,this.itemName.string=f.instance.getLang("bag.slot"),this.title.string=f.instance.getLang("bag.unlocknewslot")}onCloseBtn(){0==this._items.length?l.instance.hide(u.PopupUI.UnlockItemPopup):l.instance.hide(u.PopupUI.UnlockItemPopup,(()=>{this.scheduleOnce((()=>{l.instance.show(u.PopupUI.UnlockItemPopup,null,p.TOP,!1,this._items)}),.2)}))}}).prototype,"title",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(k.prototype,"itemName",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(k.prototype,"icon",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(k.prototype,"iconEx",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(k.prototype,"desc",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=k))||w));i._RF.pop()}}}));

System.register("chunks:///_virtual/UserData.ts",["cc","./Api.ts","./CfgMgr.ts","./EventListener.ts","./HttpService.ts","./OpenPopupManager.ts","./PlayerData.ts","./GameEvent.ts","./AvatarsModel.ts"],(function(t){var s,n,a,e,i,r,c,o,u;return{setters:[function(t){s=t.cclegacy},function(t){n=t.Api},function(t){a=t.CfgMgr},function(t){e=t.EventListener},function(t){i=t.HttpService},function(t){r=t.OpenPopupManager},function(t){c=t.PlayerData},function(t){o=t.GameEvent},function(t){u=t.AvatarCfg}],execute:function(){s._RF.push({},"32122Ry1hVOc5x9Sc2ms+7W","UserData",void 0);class h{constructor(){this.userInfo=null,this.avatarList=void 0,this.avatarIds=[],this.bgIds=[]}init(){this.userInfo=c.instance.userObj,this.getAvatarIds(),this.getUserInfo()}getAvatarCfg(t){return a.getDataById(new u,t)}getUserInfo(){i.instance.post(n.USER_PROFILE).then((t=>{0==t.code&&(this.userInfo=t.data.userInfo)}))}getAvatarIds(){this.avatarIds.length>0?e.emit(o.INIT_AVATAR_LIST):i.instance.post(n.USER_AVATARS).then((t=>{0==t.code&&(this.avatarIds=t.data.avatars,this.bgIds=t.data.backgrounds,e.emit(o.INIT_AVATAR_LIST))}))}setCountry(t){i.instance.post(n.USER_SET_COUNTRY,{country:t}).then((t=>{r.instance.showToast("Success"),c.instance.getUserInfo((()=>{}))}))}static get instance(){return this._instance||(this._instance=new h),this._instance}}t("UserData",h),h._instance=null;t("avatarData",class{constructor(){this.avatars=void 0,this.backgrounds=void 0,this.borders=void 0}}),s._RF.pop()}}}));

System.register("chunks:///_virtual/UserItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UserTipsItem.ts"],(function(e){var t,n,i,s,r,o,a,c,l,p,u,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,s=e.sp,r=e.Prefab,o=e._decorator,a=e.Component,c=e.tween,l=e.Vec3,p=e.instantiate,u=e.UITransform},function(e){d=e.UserTipsItem}],execute:function(){var h,m,b,f,g,I,y;i._RF.push({},"17e60QMz3tDp56dqNoLgHlY","UserItem",void 0);const{ccclass:T,property:_}=o;e("UserItem",(h=T("UserItem"),m=_(s.Skeleton),b=_(r),h((I=t((g=class extends a{constructor(){super(...arguments),n(this,"icon",I,this),n(this,"userTipsItem",y,this),this._userObj=null}init(e){this._userObj=e;let t=this._userObj.avatar.split("-"),n="skin"+(Number(t[0])+1);this.node.setScale(0,0,0),c(this.node).delay(.1).call((()=>{this.icon.setSkin(n),Math.random()>.5?this.icon.addAnimation(0,"idle",!0):this.icon.addAnimation(0,"idle2",!0)})).to(.2,{scale:new l(1,1,1)}).start()}onTapBtn(){let e=p(this.userTipsItem);e.parent=this.node.parent.parent;let t=this.node.getPosition();t.y+=this.node.getComponent(u).width/2;let n=this.node.parent.parent.getComponent(u).convertToWorldSpaceAR(t),i=this.node.parent.parent.getComponent(u).convertToNodeSpaceAR(n);e.setPosition(i),e.getComponent(d).init(this._userObj.nickname,this._userObj.avatar)}}).prototype,"icon",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(g.prototype,"userTipsItem",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=g))||f));i._RF.pop()}}}));

System.register("chunks:///_virtual/UserModel.ts",["cc"],(function(s){var t;return{setters:[function(s){t=s.cclegacy}],execute:function(){t._RF.push({},"ff699Thp2JLMo/vCoEFUesS","UserModel",void 0);s("UserModel",class{constructor(){this.userId=void 0,this.username="",this.name=void 0,this.avatar="0-0-0",this.isDebug=!1,this.code=void 0,this.step=void 0,this.stepn=void 0,this.country=void 0}}),t._RF.pop()}}}));

System.register("chunks:///_virtual/UserRankItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AvatarItem.ts"],(function(e){var t,r,a,i,n,s,l,o;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.initializerDefineProperty},function(e){a=e.cclegacy,i=e.Label,n=e.Node,s=e._decorator,l=e.Component},function(e){o=e.AvatarItem}],execute:function(){var u,c,p,m,h,v,b,f,g,k,y;a._RF.push({},"02182qdc8FMs5vC5vcnKjfL","UserRankItem",void 0);const{ccclass:d,property:I}=s;e("UserRankItem",(u=d("UserRankItem"),c=I(i),p=I(i),m=I(i),h=I(n),u((f=t((b=class extends l{constructor(){super(...arguments),r(this,"rank",f,this),r(this,"username",g,this),r(this,"value",k,this),r(this,"avatar",y,this)}init(e){this.rank&&(this.rank.string=`${e.rank}`),e.avatar&&this.avatar.getComponent(o).init(e.avatar),this.username.string=e.username,this.value.string=`${e.chapter}`}}).prototype,"rank",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=t(b.prototype,"username",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=t(b.prototype,"value",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=t(b.prototype,"avatar",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=b))||v));a._RF.pop()}}}));

System.register("chunks:///_virtual/UserRankItem2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AvatarItem.ts","./SpriteEx.ts"],(function(t){var e,i,r,n,a,s,o,l,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){r=t.cclegacy,n=t.Label,a=t.Node,s=t._decorator,o=t.Component},function(t){l=t.AvatarItem},function(t){u=t.SpriteEx}],execute:function(){var p,c,h,m,b,g,k,f,w,y,v,d,z,R,x,I,D;r._RF.push({},"63c6a8DEo5EiKRF0W+RNS6i","UserRankItem",void 0);const{ccclass:E,property:S}=s;t("UserRankItem",(p=E("UserRankItem"),c=S(n),h=S(n),m=S(n),b=S(u),g=S(a),k=S(n),f=S(n),p((v=e((y=class extends o{constructor(){super(...arguments),i(this,"rank",v,this),i(this,"username",d,this),i(this,"amount",z,this),i(this,"token",R,this),i(this,"avatar",x,this),i(this,"pass",I,this),i(this,"weight",D,this)}init(t){this.rank&&(this.rank.string=`${t.rank}`),t.user.avatar&&this.avatar.getComponent(l).init(t.user.avatar),t.token&&"usdt"==t.token.toLowerCase()?this.token.index=0:this.token.index=1,this.pass.string=`${t.pass}`,this.weight.string=`x${t.weight}`,this.username.string=t.user.nickname,this.amount.string=`${t.amount}`}}).prototype,"rank",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=e(y.prototype,"username",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=e(y.prototype,"amount",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=e(y.prototype,"token",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=e(y.prototype,"avatar",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=e(y.prototype,"pass",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=e(y.prototype,"weight",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=y))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/UserTipsItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,n,r,s,o,l,a,c,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,r=e.Label,s=e.sp,o=e.Node,l=e._decorator,a=e.Component,c=e.tween,u=e.Vec3}],execute:function(){var p,d,h,m,b,f,w,y,g;n._RF.push({},"cb23fMUgpBJa46VHVB8TU8L","UserTipsItem",void 0);const{ccclass:U,property:v}=l;e("UserTipsItem",(p=U("UserTipsItem"),d=v(r),h=v(s.Skeleton),m=v(o),p((w=t((f=class extends a{constructor(){super(...arguments),i(this,"username",w,this),i(this,"icon",y,this),i(this,"arrow",g,this)}init(e,t){this.username.string=e;let i=t.split("-"),n="skin"+(Number(i[0])+1);c(this.node).delay(.1).call((()=>{this.icon.setSkin(n),Math.random()>.5?this.icon.addAnimation(0,"idle",!0):this.icon.addAnimation(0,"idle2",!0)})).to(.2,{scale:new u(1,1,1)}).start(),this.setAnim()}onCloseBtn(e){e.preventSwallow=!0,this.node.parent=null}setAnim(){this.node.scale=new u(0,0,0),c(this.node).to(.2,{scale:new u(1.1,1.1,1.1)}).to(.2,{scale:new u(1,1,1)}).start()}}).prototype,"username",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(f.prototype,"icon",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(f.prototype,"arrow",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=f))||b));n._RF.pop()}}}));

System.register("chunks:///_virtual/Util.ts",["cc"],(function(t){var e,r,a,n,o,i,l,s,h,c,g,u,f,d;return{setters:[function(t){e=t.cclegacy,r=t.Component,a=t.Vec3,n=t.Quat,o=t.Vec2,i=t.v2,l=t.Color,s=t.Rect,h=t.screen,c=t.v3,g=t.tween,u=t.misc,f=t.view,d=t.bezier}],execute:function(){e._RF.push({},"2e632+VYKdG5qMiRPU5yd+n","Util",void 0);t("Util",class extends r{static isEmptyObject(t){let e=!0;if(t&&t.constructor===Object){for(let r in t)if(t.hasOwnProperty(r)){e=!1;break}}else e=!1;return e}static getStringLength(t){let e=t,r=0;for(let t=0,a=e.length;t<a;t++){r+=e.charCodeAt(t)<=255?1:2}return Math.ceil(r/2)}static getRandomNFromM(t,e){let r=[],a=0,n=0;for(;n<e&&!(n>=t+1);){a=this.getRandomInt(0,t);let e=0;for(let t=0;t<n;t++)if(r[t]===a){e=1;break}0===e&&(r[n]=a,n++)}return r}static getRandomInt(t,e){let r=Math.random()*(e-t+1)+t;return Math.floor(r)}static randomHit(t){return Math.random()<t/100}static arrayToObject(t,e){let r={};for(let a in t)t.hasOwnProperty(a)&&t[a][e]&&(r[t[a][e]]=t[a])}static clone(t){if(null===t||"object"!=typeof t)return t;let e={};t.constructor===Array&&(e=[]);for(let r in t)t.hasOwnProperty(r)&&(e[r]=this.clone(t[r]));return e}static objectToArray(t){let e=[];for(let r in t)t.hasOwnProperty(r)&&e.push(t[r]);return e}static formatMoney(t){let e=["","K","M","G","T","P","E","Z","Y","B","N","D"],r="";for(let a=0;a<e.length;a++){if(!(t>=1e4)){r=Math.floor(t)+e[a];break}t/=1e3}return""===r&&(r=Math.floor(t)+"U"),r}static newFormatMoney(t){if(t<1e4)return t.toString();let e=["","K","M","G","T","P","E","Z","Y","B","N","D"],r="";for(let a=0;a<e.length;a++){if(!(t>=1e4)){r=t.toFixed(1)+e[a];break}t/=1e3}return""===r&&(r=Math.floor(t)+"U"),r}static isNewDay(t){let e=new Date(t),r=new Date,a=e.getYear(),n=e.getMonth(),o=e.getDate(),i=r.getYear(),l=r.getMonth(),s=r.getDate();return i>a||(l>n||s>o)}static getPropertyCount(t){let e,r=0;for(e in t)t.hasOwnProperty(e)&&r++;return r}static difference(t,e){let r=[];if(t.constructor!==Array||e.constructor!==Array)return r;let a=t.length;for(let n=0;n<a;n++)-1===e.indexOf(t[n])&&r.push(t[n]);return r}static trim(t){return t.replace(/(^\s*)|(\s*$)/g,"")}static format(t,e){return t=t.replace(new RegExp("\\{0\\}","gm"),e)}static format1(t,e){let r=e.length;for(;r--;)t=t.replace(new RegExp("\\{"+r+"\\}","gm"),e[r]);return t}static isNowValid(t,e){let r=new Date(t),a=new Date(e),n=!1;if(r.getDate()+""!="NaN"&&a.getDate()+""!="NaN"){let t=new Date;n=t<a&&t>r}return n}static getDeltaDays(t,e){t=new Date(t),e=new Date(e);let r=t.getFullYear(),a=t.getMonth()+1,n=t.getDate(),o=e.getFullYear(),i=e.getMonth()+1,l=e.getDate();t=new Date(r+"/"+a+"/"+n+" GMT+0800").getTime();let s=(e=new Date(o+"/"+i+"/"+l+" GMT+0800").getTime())-t;return Math.floor(s/864e5)}static getMin(t){let e=null;if(t.constructor===Array){let r=t.length;for(let a=0;a<r;a++)e=0===a?Number(t[0]):e>Number(t[a])?Number(t[a]):e}return e}static formatTwoDigits(t){return(Array(2).join(0)+t).slice(-2)}static getDay(){let t=new Date;return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()}static formatDate(t){let e=new Date(t);return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()}static formatTimeForMillisecond(t){let e=Math.floor(t/1e3%60),r=Math.floor(t/1e3/60%60);return{hour:Math.floor(t/1e3/60/60),minute:r,second:e}}static rand(t){let e=this.clone(t);for(let t=e.length-1;t>=0;t--){const r=Math.floor(Math.random()*(t+1)),a=e[r];e[r]=e[t],e[t]=a}return e}static getOffsetMimutes(t,e){let r=e-t;return Math.floor(r%36e5/6e4)}static formatNumToFixed(t,e){return void 0===e&&(e=0),Number(t.toFixed(e))}static formatNumber(t,e){void 0===e&&(e=2);let r=Number(t).toFixed(e);if(r.indexOf(".")>=0)for(;"0"==r[r.length-1];)r=r.slice(0,-1);return r.indexOf(".")==r.length-1&&(r=r.slice(0,-1)),r}static dayRemainingTime(){let t="",e="",r="",a=(new Date).getTime(),n=new Date((new Date).toLocaleDateString()).getTime()+864e5-a,o=Math.floor(n/1e3%60);r=o>=10?o.toString():"0"+o;let i=Math.floor(n/1e3/60%60);e=i>=10?i.toString():"0"+i;let l=Math.floor(n/1e3/60/60);return t=l>=10?l.toString():"0"+l,[t,e,r]}static lerp(t,e,r){void 0===r&&(r=.25);let a=e;return t>e?a=e+(t-e)*r:t<e&&(a=e-(e-t)*r),a}static base64ToArrayBuffer(t){let e=atob(t),r=e.length,a=new Uint8Array(r);for(let t=0;t<r;t++)a[t]=e.charCodeAt(t);return a.buffer}static uint8arrayToBase64(t){let e,r=0,a=t.length,n="";for(;r<a;)e=t.subarray(r,Math.min(r+32768,a)),n+=String.fromCharCode.apply(null,e),r+=32768;return btoa(n)}static base64ToUint8Array(t){let e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=window.atob(e),a=new Uint8Array(r.length);for(let t=0;t<r.length;++t)a[t]=r.charCodeAt(t);return a}static arrayBufferToBase64(t){let e="",r=new Uint8Array(t),a=r.byteLength;for(let t=0;t<a;t++)e+=String.fromCharCode(r[t]);return window.btoa(e)}static encrypt(t){let e=this._base64encode(t),r=6;if(e.length%2==0&&(r=7),e.length<r)return e;let a="";for(let t=0;t<(e.length-r+1)/2;t++)a+=e[2*t+1],a+=e[2*t];return a+=e.slice(e.length-r+1),a}static decrypt(t){let e=6;if(t.length%2==0&&(e=7),t.length<e)return this._base64Decode(t);let r="";for(let a=0;a<t.length-e;a+=2)r+=t[a+1],r+=t[a];return r+=t.slice(t.length-e+1),r=this._base64Decode(r),r}static _base64encode(t){let e,r,a,n,o,i,l,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h="",c=0;for(t=this._utf8Encode(t);c<t.length;)e=t.charCodeAt(c++),r=t.charCodeAt(c++),a=t.charCodeAt(c++),n=e>>2,o=(3&e)<<4|r>>4,i=(15&r)<<2|a>>6,l=63&a,isNaN(r)?i=l=64:isNaN(a)&&(l=64),h=h+s.charAt(n)+s.charAt(o)+s.charAt(i)+s.charAt(l);return h}static _utf8Encode(t){t=t.replace(/\r\n/g,"\n");let e="";for(let r=0;r<t.length;r++){let a=t.charCodeAt(r);a<128?e+=String.fromCharCode(a):a>127&&a<2048?(e+=String.fromCharCode(a>>6|192),e+=String.fromCharCode(63&a|128)):(e+=String.fromCharCode(a>>12|224),e+=String.fromCharCode(a>>6&63|128),e+=String.fromCharCode(63&a|128))}return e}static _utf8Decode(t){let e="",r=0,a=0,n=0,o=0;for(;r<t.length;)a=t.charCodeAt(r),a<128?(e+=String.fromCharCode(a),r++):a>191&&a<224?(n=t.charCodeAt(r+1),e+=String.fromCharCode((31&a)<<6|63&n),r+=2):(n=t.charCodeAt(r+1),o=t.charCodeAt(r+2),e+=String.fromCharCode((15&a)<<12|(63&n)<<6|63&o),r+=3);return e}static _base64Decode(t){let e,r,a,n,o,i,l,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h="",c=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<t.length;)n=s.indexOf(t.charAt(c++)),o=s.indexOf(t.charAt(c++)),i=s.indexOf(t.charAt(c++)),l=s.indexOf(t.charAt(c++)),e=n<<2|o>>4,r=(15&o)<<4|i>>2,a=(3&i)<<6|l,h+=String.fromCharCode(e),64!=i&&(h+=String.fromCharCode(r)),64!=l&&(h+=String.fromCharCode(a));return h=this._utf8Decode(h),h}static checkTwoPosEulRad(t,e,r,a){return Math.atan2(t-r,e-a)}static getTwoPosXZLength(t,e,r,a){const n=t-r,o=e-a;return Math.sqrt(n*n+o*o)}static setStringToVec3(t){const e=t.split(",");return new a(Number(e[0]),Number(e[1]),Number(e[2]))}static setStringToQuate(t){const e=t.split(",");return new n(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3]))}static getRandomRange(t,e){return e?(Math.random()>.5?1:-1)*Math.random()*t:Math.random()*t}static getDirectionOfDistanceX(t,e){return t*Math.sin(e)}static getDirectionOfDistanceZ(t,e){return t*Math.cos(e)}static angle_to_radian(t){return Math.PI/180*t}static radian_to_angle(t){return 180/Math.PI*t}static angle_to_vector(t){let e=this.angle_to_radian(t),r=Math.cos(e),a=Math.sin(e);return new o(r,a).normalize()}static vector_to_angle(t){if(0==t.x&&0==t.y)return null;let e=i(t.x,t.y).normalize().signAngle(new o(1,0));return-this.radian_to_angle(e)}static timeToString(t){let e=Math.floor(t/86400)<10?"0"+Math.floor(t/86400):Math.floor(t/86400),r=Math.floor(t%86400/3600)<10?"0"+Math.floor(t%86400/3600):Math.floor(t%86400/3600),a=Math.floor(t/60%60)<10?"0"+Math.floor(t/60%60):Math.floor(t/60%60),n=Math.floor(t%60)<10?"0"+Math.floor(t%60):Math.floor(t%60),o="";return"00"!=e?(o=`${e}day ${r}h ${a}m`,o):"00"!=r?(o=`${r}:${a}:${n}`,o):(o=`${a}:${n}`,o)}static timeToStrings(t){let e="";return e=`${Math.floor(t/3600)<10?"0"+Math.floor(t/3600):Math.floor(t/3600)}:${Math.floor(t/60%60)<10?"0"+Math.floor(t/60%60):Math.floor(t/60%60)}:${Math.floor(t%60)<10?"0"+Math.floor(t%60):Math.floor(t%60)}`,e}static getTimeToString(t){let e=Math.floor(t/3600)<10?"0"+Math.floor(t/3600):Math.floor(t/3600),r=Math.floor(t/60%60)<10?"0"+Math.floor(t/60%60):Math.floor(t/60%60),a=Math.floor(t%60)<10?"0"+Math.floor(t%60):Math.floor(t%60),n="";return"00"!=e?(n=`${e}h${r}m`,n):"00"!=r?(n=`${r}m${a}s`,n):(n=`${a}s`,n)}static getTodayRemainingtime(){let t=(new Date).getTime(),e=(new Date((new Date).toLocaleDateString()).getTime()-t)/1e3/3600/24,r=24*(e-Math.floor(e)),a=Math.floor(r),n=60*(r-a),o=Math.floor(n),i=60*(n-o),l=Math.floor(i);return a>0?(a=a<10?"0"+a:a,o=o<10?"0"+o:o,l=l<10?"0"+l:l,`${a}:${o}:${l}:`):(o=o<10?"0"+o:o,l=l<10?"0"+l:l,`${o}:${l}:`)}static getDays(t){let e=Math.floor(t/3600/24),r=Math.floor(t/3600),a=Math.ceil(t/60%60),n="";return e>0?(n=`${e}day(s)`,n):r>0?(n=`${r}hour(s)`,n):void(n=`${a}minute`)}static getMonthDay(){let t=new Date,e=t.getFullYear(),r=t.getMonth()+1;return new Date(e,r,0).getDate()}static getMonth(){return(new Date).getMonth()+1}static stringToColor(t){let e=this.hex2int(t[0],16)+this.hex2int(t[1],1),r=this.hex2int(t[2],16)+this.hex2int(t[3],1),a=this.hex2int(t[4],16)+this.hex2int(t[5],1);return new l(e,r,a,255)}static hex2int(t,e){let r=t.charCodeAt(0);return 48<=r&&r<58?r-=48:r=(223&r)-65+10,r*e}static getDateDetail(t){return new Date(1e3*t).toLocaleString()}static getCircleRandPoint(t,e){let r=e.x+2*(Math.random()-.5)*t,a=e.y+2*(Math.random()-.5)*t;return new o(r,a)}static getCirclePoints(t,e,r,a,n){void 0===a&&(a=60),void 0===n&&(n=1);let i=[],l=n*(Math.PI/180)*Math.round(360/r);for(let n=0;n<r;n++){let r=e.x+t*Math.sin(l*n),s=e.y+t*Math.cos(l*n);i.unshift(new o(r+Math.random()*a,s+Math.random()*a))}return i}static getCircleRandomPoints(t,e,r,n){void 0===n&&(n=60);let o=[],i=Math.PI/180*Math.round(360/r),l=Math.random()*Math.PI;for(let s=0;s<r;s++){let r=e.x+t*Math.sin(i*s+l),h=e.y+t*Math.cos(i*s+l);o.unshift(new a(r+Math.random()*n,h+Math.random()*n,0))}return o}static getCirclePos(t,e,r){let n=Math.PI/180*r,o=e.y+t*Math.cos(n),i=e.x+t*Math.sin(n);return new a(o,i,0)}static getUpDownRandomPoints(t,e,r,n){void 0===n&&(n=300);let o=[];for(let i=0;i<r;i++){let r=Math.floor(100*Math.random())<=50?1:-1,i=2*(Math.random()-.5)*n,l=e.y+(t+60*Math.random())*r;o.unshift(new a(i,l,0))}return o}static getLeftRightRectRandomPoints1(t,e,r,n,i,l){void 0===l&&(l=20);let h=[];t=n>i?i/2-l:n/2-l,t=n/2-l;let c=Math.PI/180*Math.round(360/r),g=Math.random()*Math.PI,u=new s(-n/2,-i/2,n,i),f=0;for(let n=0;n<r;n++){let r=e.x+t*Math.sin(c*n+g),s=e.y+t*Math.cos(c*n+g),d=new o(r+Math.random()*l,s+Math.random()*l);if(u.contains(d))h.unshift(new a(d.x,d.y,0));else if(h.length){f=Math.floor(Math.random()*h.length);let t=this.clone(h[f]),e=new a(t.x+2*(Math.random()-.5)*20,t.y+2*(Math.random()-.5)*20,0);h.unshift(e)}else{t=i/2-l;let e=this.getCircleRandomPoints(t,new a(0,0,0),10,20);f=Math.floor(Math.random()*e.length),h.unshift(e[f])}}return h}static uuid(){let t=[],e="0123456789abcdef";for(let r=0;r<36;r++)t[r]=e.substr(Math.floor(16*Math.random()),1);return t[14]="4",t[19]=e.substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-",t.join("")}static getUuid(t){return Number(Math.random().toString().substr(2,t)+Date.now()).toString(36)}static getMonthDays(t,e){return new Date(t,e,0).getDate()}static getMonthDayMilliseconds(t,e){return new Date(t,e,1).getTime()}static getDayHour(t){let e=new Date(t),r=e.getDate()<10?"0"+e.getDate():e.getDate(),a=e.getHours()<10?"0"+e.getHours():e.getHours();e.getMinutes(),e.getMinutes();return r+"d"+a+"h"}static getWinSize(){return h.windowSize}static getBezierPoint(t,e,r,a,n){const o=t.x*(1-n)*(1-n)*(1-n)+3*e.x*n*(1-n)*(1-n)+3*r.x*n*n*(1-n)+a.x*n*n*n,l=t.y*(1-n)*(1-n)*(1-n)+3*e.y*n*(1-n)*(1-n)+3*r.y*n*n*(1-n)+a.y*n*n*n;return i(o,l)}static bezierTo(t,e,r,a,n,o){o=o||Object.create(null);return o.onUpdate=(e,o)=>{t.position=((t,e,r,a)=>{let n=(1-t)*(1-t)*e.x+2*t*(1-t)*r.x+t*t*a.x,o=(1-t)*(1-t)*e.y+2*t*(1-t)*r.y+t*t*a.y;return c(n,o,0)})(o,r,a,n)},g(t).to(e,{},o)}static playTargetTween(t,e,r){return new Promise(((r,a)=>{let n=t.position,i=t.eulerAngles,l=g(n);new o;l.parallel(g().to(e,{x:-t.position.x},{progress:function(t,e,r,a){return d(t,100,200,e,a)},easing:"smooth",onUpdate:()=>{t.setPosition(n)}}),g().to(e,{y:0},{progress:function(t,e,r,a){return d(t,100,200,e,a)},easing:"smooth",onUpdate:()=>{t.setPosition(n)}})).start(),g(i).to(e,{z:360},{onUpdate:()=>{t.eulerAngles=i}}).call((()=>{r(1)})).start()}))}static targetBezier(t,e,r,a,n,l,s,h){return new Promise(((c,f)=>{let d=new o(e.x,e.y);g({t:0}).to(a,{t:1},{onUpdate:(a,c)=>{const g=i(0,0),f=i(n,l),M=i(s,h),m=i(1,1),y=g.x*(1-c)*(1-c)*(1-c)+3*f.x*c*(1-c)*(1-c)+3*M.x*c*c*(1-c)+m.x*c*c*c,w=g.y*(1-c)*(1-c)*(1-c)+3*f.y*c*(1-c)*(1-c)+3*M.y*c*c*(1-c)+m.y*c*c*c;let x=(r.x-e.x)*y+e.x,D=(r.y-e.y)*w+e.y,b=new o(x,D);t.setPosition(x,D);let C=new o;o.subtract(C,b,d);let p=C.signAngle(i(0,1)),P=u.radiansToDegrees(p);t.angle=-P,d=b.clone()}}).call((()=>{c(1)})).start()}))}static targetScaleBezier(t,e,r,a,n,o,l,s,h,c){return new Promise(((u,f)=>{let d=g(t).to(n,{t:1},{onUpdate:(t,n)=>{const o=i(0,0),g=i(l,s),u=i(h,c),f=i(1,1),d=o.x*(1-n)*(1-n)*(1-n)+3*g.x*n*(1-n)*(1-n)+3*u.x*n*n*(1-n)+f.x*n*n*n,M=o.y*(1-n)*(1-n)*(1-n)+3*g.y*n*(1-n)*(1-n)+3*u.y*n*n*(1-n)+f.y*n*n*n;let m=(a.x-r.x)*d+r.x,y=(a.y-r.y)*M+r.y;e.setPosition(m,y)}}),M=g(t).to(n,{scale:o},{onUpdate:(t,r)=>{e.setScale(t.scale,t.scale,t.scale)}});g(t).parallel(d,M).call((()=>{u(1)})).start()}))}static PFromC(t){let e=0,r=0,a=0,n=Math.ceil(1/t);for(let o=1;o<=n;++o)e=Math.min(1,o*t)*(1-r),r+=e,a+=o*e;return 1/a}static CFromP(t){let e=t,r=0,a=t,n=1;for(;;){a=(e+r)/2;let o=this.PFromC(a);if(Math.abs(o-n)<=5e-5)break;o>t?e=a:r=a,n=o}return a}static segmentsIntr(t,e,r,a){let n=(t.x-r.x)*(e.y-r.y)-(t.y-r.y)*(e.x-r.x),o=(t.x-a.x)*(e.y-a.y)-(t.y-a.y)*(e.x-a.x);if(n*o>=0)return!1;let l=(r.x-t.x)*(a.y-t.y)-(r.y-t.y)*(a.x-t.x);if(l*(l+n-o)>=0)return!1;let s=l/(o-n),h=s*(e.x-t.x),c=s*(e.y-t.y);return i(t.x+h,t.y+c)}static bezier_length(t,e,r,a,n){let i=t,l=0,s=.05;for(let n=0;n<20;n++){let n=t.x*(1-s)*(1-s)*(1-s)+3*e.x*s*(1-s)*(1-s)+3*r.x*s*s*(1-s)+a.x*s*s*s,h=t.y*(1-s)*(1-s)*(1-s)+3*e.y*s*(1-s)*(1-s)+3*r.y*s*s*(1-s)+a.y*s*s*s,c=new o(n,h),g=c.subtract(i);i=c,l+=g.length(),s+=.05}return l}static weightRandomIdx(t){if(t.length<=1)return 0;let e=0;for(let r=0;r<t.length;r++)e+=t[r];let r=Math.random()*e,a=0,n=0;for(let e=0;e<t.length;e++){if(n=a+t[e],a<r&&r<=n)return e;a=n}return 0}static randomIdx(t){if(t.length<=1)return 0;let e=t.length,r=Math.random()*e,a=0,n=0;for(let e=0;e<t.length;e++){if(n=a+1,a<r&&r<=n)return e;a=n}return 0}static numMoveZoro(t){return t.indexOf(".")<0||"."==(t=t.replace(/0+?$/g,""))[t.length-1]&&(t=t.replace(/[.$]/,"")),t}static getRectRandPos(t){let e=new a,r=Math.random()*t.width,n=Math.random()*t.height;return e.x=t.x+r,e.y=t.y+n,e}static adapterScale(){let t=f.getDesignResolutionSize(),e=f.getVisibleSize();return e.width>t.width?1:e.width/t.width}static numberAnimation(t,e,r){void 0===r&&(r=.2);let a={num:Number(t.string)};g(a).to(r,{num:e},{progress:(e,r,a,n)=>(t.string=`${Math.ceil(e+(r-e)*n)}`,e+(r-e)*n)}).start()}}),e._RF.pop()}}}));

System.register("chunks:///_virtual/WalletData.ts",["cc","./Api.ts","./EventListener.ts","./HttpService.ts","./OpenPopupManager.ts","./WalletManager.ts","./GameEvent.ts"],(function(t){var i,s,a,n,e,o,h;return{setters:[function(t){i=t.cclegacy},function(t){s=t.Api},function(t){a=t.EventListener},function(t){n=t.HttpService},function(t){e=t.OpenPopupManager},function(t){o=t.WalletManager},function(t){h=t.GameEvent}],execute:function(){i._RF.push({},"c226fcIbs9Ip7VfhZXWDvLJ","WalletData",void 0);class c{constructor(){this.isWithdrawing=!1,this.billObj=null,this.withdrawAmounts=[],this.withdrawBill=[],this.adObj=null}withdraw(t,i){o.instance.isConnected()?this._withdraw(t,o.instance.getAddress(),i):o.instance.connectWallet((s=>{0==s?this._withdraw(t,o.instance.getAddress(),i):e.instance.showToast("Connect Walelt Failed")}))}_withdraw(t,i,a){this.isWithdrawing||(this.isWithdrawing=!0,n.instance.post(s.WALLET_WITHDRAW,{token:t,address:i,amount:a}).then((t=>{if(0==t.code){let i=t.data.fee;this.getLastBill(),this.getWithdrawInfo(),o.instance.send(t.data.address,i.toString(),t.data.payload,((t,i)=>{this.isWithdrawing=!1}))}else this.isWithdrawing=!1,e.instance.showToast(t.msg)})).catch((t=>{this.isWithdrawing=!1,e.instance.showToast("network.error")})))}getLastBill(){n.instance.post(s.WALLET_BILL_LAST,{}).then((t=>{0==t.code&&(this.billObj=t.data.bill),a.emit(h.UPDATE_WALLET_BILL)}))}getWithdrawInfo(){n.instance.post(s.WALLET_WITHDRAW_INFO).then((t=>{0==t.code&&(this.withdrawAmounts=t.data.amounts,this.adObj=t.data.adTask,a.emit(h.UPDATE_WITHDRAW_INFO))}))}getWithdrawBill(){n.instance.post(s.WALLET_WITHDRAW_BILL).then((t=>{0==t.code&&(this.withdrawBill=t.data.bills,a.emit(h.UPDATE_WALLET_BILL))}))}static get instance(){return this._instance||(this._instance=new c),this._instance}}t("WalletData",c),c._instance=null;t("BillObj",class{constructor(){this.token=void 0,this.amount=void 0,this.state=void 0,this.withdrawTime=void 0}});t("WithdrawInfoObj",class{constructor(){this.amounts=void 0,this.adTask=void 0}});t("WithdrawAmountObj",class{constructor(){this.id=void 0,this.amount=void 0,this.limit=void 0}});t("WithdrawAdObj",class{constructor(){this.target=void 0,this.cur=void 0,this.amounts=void 0}}),i._RF.pop()}}}));

System.register("chunks:///_virtual/WalletManager.ts",["cc","./index.ts","./OpenPopupManager.ts","./EventListener.ts","./GameEvent.ts"],(function(t){var e,n,s,a,i,o,c,r;return{setters:[function(t){e=t.cclegacy},function(t){n=t.TonConnectUI,s=t.GameFi,a=t.Address,i=t.toNano},function(t){o=t.OpenPopupManager},function(t){c=t.EventListener},function(t){r=t.GameEvent}],execute:function(){e._RF.push({},"00275kKo0pP94/BPeN1nIz7","WalletManager",void 0);class l{constructor(){this._walletCfg=null,this._gameFi=null,this.connectUI=null,this.walletInfo=null,this.balance=0}async init(t){this._walletCfg=t;try{this.initGameFi()}catch(t){console.log("initGameFi",t)}}async initGameFi(){if(this._gameFi)return;let t=new n({manifestUrl:this._walletCfg.manifestUrl});const e={network:this._walletCfg.network,contentResolver:{},merchant:{jettonAddress:this._walletCfg.usdtAddress,tonAddress:this._walletCfg.walletAddress}};this._gameFi=await s.create({...e,connector:t}),this.connectUI=this._gameFi.walletConnector,this.walletInfo=this.connectUI.wallet,this.connectUI.onModalStateChange((t=>{c.emit(r.UPDATE_WALLET_INFO)}))}isTonConnectSdkError(t){const e="TON_CONNECT_SDK";return"string"==typeof t?t.includes(e):t.message?.includes(e)}isConnected(){return this.connectUI?this.connectUI.connected:(console.error("ton ui not inited!"),!1)}getAddress(){if(this.isConnected()){const t=this.connectUI.account.address;return a.parseRaw(t).toString({testOnly:!0,bounceable:!1})}return""}async connectWallet(t){if(!this._gameFi)try{await this.initGameFi()}catch(e){return console.log("initGameFi",e),void t(1)}this.isConnected()?this.connectUI.disconnect():(this.connectUI.onStatusChange((e=>{this.walletInfo=e,c.emit(r.UPDATE_WALLET_INFO),t(0)})),this.connectUI.openModal())}async disconnect(){this.connectUI.disconnect(),c.emit(r.UPDATE_WALLET_INFO)}onTransferTon(t){if(this.connectUI.connected){const e={to:t.address,amount:i(.01)};this._gameFi.transferTon(e)}}onBuyWithTon(t){const e={amount:i(t)};this._gameFi.buyWithTon(e)}async getTokenBalance(t){if(this._gameFi){t&&t(this.balance);try{const e=this._gameFi.openJetton(this._gameFi.merchantJettonAddress),n=await e.getWallet(a.parse(this._gameFi.wallet.account.address)),s=await n.getData();return this.balance=Number(s.balance),t&&t(this.balance),s.balance}catch(t){return console.error("failed to load balance",t),0}}}async send(t,e,n,s){const a={validUntil:Math.floor(Date.now()/1e3)+60,messages:[{address:t,amount:e,payload:n}]};try{const t=await this.connectUI.sendTransaction(a);s&&s(0,t)}catch(t){console.log("sendTransaction error",t),s&&s(1);let e="";e=t?"You rejected the transaction. Please confirm it to send to the blockchain":t.toString(),o.instance.showToast(e)}}async buyWithToken(t,e,n){let s=await this.getTokenBalance();if(Number(s)<Number(t))return void o.instance.showToast("usdt.insufficient");let a={to:this._gameFi.merchantAddress,amount:i(Number(t)/10**9),forwardAmount:i(1e-9),forwardPayload:e};this._gameFi.transferJetton(a).then((()=>{n(0)})).catch((t=>{console.log("transferJetton",t);let e=t.message;if(e.indexOf("TON_CONNECT_SDK_ERROR")){let t=["TonConnectUIError","TonConnectError","[TON_CONNECT_SDK_ERROR]",":"];for(let n=0;n<t.length;n++){let s=t[n];e.indexOf(s)>=0&&(e=e.slice(e.indexOf(s)+s.length))}e.indexOf(".")>=0&&(e=e.slice(0,e.indexOf(".")+1)),e=e.replace("\n","")}o.instance.showToast(e)}))}static get instance(){return this._instance||(this._instance=new l),this._instance}}t("WalletManager",l),l._instance=null,e._RF.pop()}}}));

System.register("chunks:///_virtual/WalletPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./WalletManager.ts","./OpenPopupManager.ts","./Constants.ts"],(function(e){var t,n,a,s,o,i,l,r,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){a=e.cclegacy,s=e.Label,o=e._decorator,i=e.Component},function(e){l=e.WalletManager},function(e){r=e.OpenPopupManager},function(e){c=e.Constants}],execute:function(){var p,u,d,g,b,h,P;a._RF.push({},"c1313u8kaNIBIMt4X1M2Sw7","WalletPopup",void 0);const{ccclass:f,property:W}=o;e("WalletPopup",(p=f("WalletPopup"),u=W(s),d=W(s),p((h=t((b=class extends i{constructor(){super(...arguments),n(this,"address",h,this),n(this,"balance",P,this)}show(){let e=l.instance.getAddress();this.address.string=e.substring(0,4)+"..."+e.substring(e.length-4),l.instance.getTokenBalance((e=>{this.balance.string=Number(Number(e)/10**9).toFixed(2)}))}onDisconnectBtn(){l.instance.disconnect(),r.instance.hide(c.PopupUI.WalletPopup)}onCloseTouch(){r.instance.hide(c.PopupUI.WalletPopup)}}).prototype,"address",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=t(b.prototype,"balance",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=b))||g));a._RF.pop()}}}));

System.register("chunks:///_virtual/WarehourseItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RewardItem.ts","./OpenPopupManager.ts","./Constants.ts"],(function(e){var t,n,r,i,o,a,s,u,p,c,l,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){r=e.cclegacy,i=e.Node,o=e.Prefab,a=e._decorator,s=e.Component,u=e.instantiate},function(e){p=e.RewardItem},function(e){c=e.OpenPopupManager,l=e.LayerType},function(e){d=e.Constants}],execute:function(){var h,m,f,I,b,w,y;r._RF.push({},"e8241LtopRPxKNiffmcyq3D","WarehourseItem",void 0);const{ccclass:_,property:P}=a;e("WarehouseItem",(h=_("WarehouseItem"),m=P(i),f=P(o),h((w=t((b=class extends s{constructor(){super(...arguments),n(this,"content",w,this),n(this,"rewardItem",y,this),this._rewardObj=null,this._equipBoxIds=[671,672,673,674,675,676,677,678,679,680]}init(e){this._rewardObj=e;let t=u(this.rewardItem);t.getComponent(p).init(e),t.parent=this.content}onDetailBtn(){let e=this._rewardObj.itemId;this._equipBoxIds.indexOf(e)>=0&&c.instance.show(d.PopupUI.EquipBoxDetailPopup,null,l.TOP,!1,this._rewardObj)}}).prototype,"content",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=t(b.prototype,"rewardItem",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=b))||I));r._RF.pop()}}}));

System.register("chunks:///_virtual/WarehouseData.ts",["cc","./HttpService.ts","./Api.ts","./EventListener.ts","./GameEvent.ts","./OpenPopupManager.ts","./Constants.ts","./AdManager.ts"],(function(t){var e,n,s,i,o,a,c,p,u,r,h;return{setters:[function(t){e=t.cclegacy,n=t._decorator},function(t){s=t.HttpService},function(t){i=t.Api},function(t){o=t.EventListener},function(t){a=t.GameEvent},function(t){c=t.OpenPopupManager,p=t.LayerType},function(t){u=t.Constants},function(t){r=t.AdManager,h=t.AdType}],execute:function(){var E,_;e._RF.push({},"99866BSbSJN+LRyERv6Y6Vs","WarehouseData",void 0);const{ccclass:m,property:d}=n;t("WarehouseData",m("WarehouseData")(((_=class t{constructor(){this.items=[]}getItemsFromNetwork(){s.instance.post(i.ITEM_LIST,{}).then((t=>{0==t.code&&(this.items=t.data.items,o.emit(a.UPDATE_WAREHOUSE_DATA))}))}openEquipBox(t,e,n){"ad"==n?r.instance.showAd(h.EQUIPBOX,0,((n,s)=>{0==n&&this._openEquipBox(t,e,s)})):this._openEquipBox(t,e,"")}_openEquipBox(t,e,n){s.instance.post(i.EQUIP_OPEN,{itemId:t,count:e,sign:n}).then((t=>{0==t.code?(c.instance.hide(u.PopupUI.EquipBoxDetailPopup),c.instance.show(u.PopupUI.EquipOpenPopup,null,p.TOP,!1,t.data.items),this.getItemsFromNetwork()):c.instance.showToast(t.msg)}))}static get instance(){return this._instance||(this._instance=new t),this._instance}})._instance=null,E=_))||E);e._RF.pop()}}}));

System.register("chunks:///_virtual/WarehousePopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./WarehouseData.ts","./GameEvent.ts","./EventListener.ts","./WarehourseItem.ts"],(function(e){var t,n,o,i,s,r,a,c,u,h,p,l,f,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){o=e.cclegacy,i=e.Node,s=e.Prefab,r=e._decorator,a=e.Component,c=e.instantiate},function(e){u=e.OpenPopupManager},function(e){h=e.Constants},function(e){p=e.WarehouseData},function(e){l=e.GameEvent},function(e){f=e.EventListener},function(e){m=e.WarehouseItem}],execute:function(){var P,d,g,E,W,b,v;o._RF.push({},"15f90a1uElPg50YMdxawpfA","WarehousePopup",void 0);const{ccclass:D,property:I}=r;e("WarehousePopup",(P=D("WarehousePopup"),d=I(i),g=I(s),P((b=t((W=class extends a{constructor(){super(...arguments),n(this,"content",b,this),n(this,"warehouseItem",v,this)}show(){p.instance.getItemsFromNetwork()}setItemContent(){let e=p.instance.items;e.forEach(((e,t)=>{if(e.count>0)if(this.content.children[t])this.content.children[t].getComponent(m).init(e),this.content.children[t].active=!0;else{let t=c(this.warehouseItem);t.getComponent(m).init(e),t.parent=this.content}}));for(let t=e.length;t<this.content.children.length;t++)this.content.children[t].active=!1}onCloseBtn(){u.instance.hide(h.PopupUI.WarehousePopup)}onEnable(){f.on(l.UPDATE_WAREHOUSE_DATA,this.setItemContent,this)}onDisable(){f.off(l.UPDATE_WAREHOUSE_DATA,this.setItemContent,this)}}).prototype,"content",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=t(W.prototype,"warehouseItem",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=W))||E));o._RF.pop()}}}));

System.register("chunks:///_virtual/WeaponAdvancedItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./ResourcesUtil.ts","./SpriteEx.ts","./SkillData.ts","./LanguageManager.ts","./BagData.ts","./SkillUpgradeData.ts","./SkillGetItem.ts"],(function(t){var e,i,l,n,s,a,r,o,c,u,h,p,k,f,g,b,d,m,I;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){l=t.cclegacy,n=t.Sprite,s=t.Label,a=t.RichText,r=t.Prefab,o=t.Node,c=t._decorator,u=t.Component,h=t.instantiate},function(t){p=t.Constants},function(t){k=t.ResourcesUtil},function(t){f=t.SpriteEx},function(t){g=t.SkillData},function(t){b=t.LanguageManager},function(t){d=t.BagData},function(t){m=t.SkillUpgradeData},function(t){I=t.SkillGetItem}],execute:function(){var C,_,S,y,L,w,v,z,D,F,A,B,P,W,x,U,G,R,N;l._RF.push({},"84a5eCsruBIzZd80/Ki8p/o","WeaponAdvancedItem",void 0);const{ccclass:E,property:M}=c;t("WeaponAdvancedItem",(C=E("WeaponAdvancedItem"),_=M(n),S=M(s),y=M(n),L=M(f),w=M(n),v=M(a),z=M(r),D=M(o),C((B=e((A=class extends u{constructor(){super(...arguments),i(this,"icon",B,this),i(this,"skillName",P,this),i(this,"typeIcon",W,this),i(this,"skillFrame",x,this),i(this,"skillIon",U,this),i(this,"desc",G,this),i(this,"skillGetPrefab",R,this),i(this,"skillList",N,this),this._weaponId=0,this._selectCallback=null,this._closeCallback=null,this._skillCfg=null}init(t,e,i,l){this._selectCallback=i,this._closeCallback=l,this._weaponId=t,this._skillCfg=g.instance.getSkillCfgById(e),this.setAdvanceInfo()}setAdvanceInfo(){let t=p.weaponIconPath+this._skillCfg.res+"/spriteFrame";k.setSpriteFrame(t,this.icon),this.skillFrame.index=this._skillCfg.quality-1,this.desc.string=b.instance.getLang(this._skillCfg.desc),this.skillName.string=b.instance.getLang(this._skillCfg.name),this.setSkillIcon(),this.setSkillList()}setSkillIcon(){let t=d.instance.getWeaponSkillArrByWeaponId(this._skillCfg.Id),e=d.instance.getWeaponUpgradeSkillCfgById(t[0]),i=p.skillIconPath+e.icon+"/spriteFrame";k.setSpriteFrame(i,this.skillIon)}setSkillList(){this.skillList.removeAllChildren();let t=d.instance.getUnlockSkillsEntry(this._weaponId,100);for(let e=0;e<t.length;e++){const i=t[e];if(i.doubleSkill==this._skillCfg.Id){let t=h(this.skillGetPrefab);t.parent=this.skillList;let e=m.instance.hasLearnSkill(i.Id);t.getComponent(I).init(i,e)}}}onSelectBtn(){this._selectCallback&&this._selectCallback(this._skillCfg),this._closeCallback&&this._closeCallback()}}).prototype,"icon",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(A.prototype,"skillName",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(A.prototype,"typeIcon",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(A.prototype,"skillFrame",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(A.prototype,"skillIon",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(A.prototype,"desc",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(A.prototype,"skillGetPrefab",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(A.prototype,"skillList",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=A))||F));l._RF.pop()}}}));

System.register("chunks:///_virtual/WeaponBgItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEvent.ts","./EventListener.ts","./ResourcesUtil.ts","./WeaponData.ts","./GridData.ts","./Constants.ts","./OpenPopupManager.ts","./AdModel.ts"],(function(t){var e,i,n,s,o,h,r,a,c,u,p,d,l,_,g,C,T,A,f,E,S;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,s=t.Sprite,o=t._decorator,h=t.Component,r=t.UITransform,a=t.Layout,c=t.instantiate,u=t.UIOpacity,p=t.Vec3,d=t.v2},function(t){l=t.GameEvent},function(t){_=t.EventListener},function(t){g=t.ResourcesUtil},function(t){C=t.WeaponData},function(t){T=t.GridData,A=t.GridObj},function(t){f=t.Constants},function(t){E=t.OpenPopupManager},function(t){S=t.AdGameType}],execute:function(){var b,m,G,y,N,O,M;n._RF.push({},"f96cd2ocN1Av7siZ2Mlbz07","WeaponBgItem",void 0);const{ccclass:D,property:P}=o;t("WeaponBgItem",(b=D("WeaponBgItem"),m=P(s),G=P(s),b((O=e((N=class extends h{constructor(){super(...arguments),i(this,"icon",O,this),i(this,"bubble",M,this),this._touchStatus=0,this._weaponKey="",this._gridCfg=null,this._point=null,this._pointGridObj=[],this._placeStatus=!0,this._isTouch=!1,this._needAd=!1}get point(){return this._point}get gridCfg(){return this._gridCfg}get weaponKey(){return this._weaponKey}set placeStatus(t){this._placeStatus=t}get needAd(){return this._needAd}init(t,e,i,n){this._pointGridObj=[],this._placeStatus=i,this._weaponKey=e,this._gridCfg=t,this._point=this.node.getChildByName("point"),this.initWeaponSize(),this.setPointPosArr(),this.setGridIcon(),this.setNodeAngel(),this._needAd=n||!1,this._needAd&&this.setGridAdBubble()}initWeaponSize(){let t=this._gridCfg.gridType.split("_"),e=Number(t[1]),i=Number(t[0]),n=T.instance.getGridSizeByRowCol(e,i),s=T.instance.iconScale;this.node.getComponent(r).setContentSize(n),this.point.setPosition(-n.width/2,n.height/2),this.icon.node.setScale(s,s,s)}setPointPosArr(){this._pointGridObj=[];let t=this._gridCfg.points;for(let e=0;e<t.length;e++){const i=t[e];for(let t=0;t<i.length;t++){if(i[t]){let i=new A;i.row=e,i.col=t,this._pointGridObj.push(i)}}}}setGridIcon(){let t=f.weaponIconPath+this._gridCfg.res+"/spriteFrame";g.getSpriteFrame(t).then((t=>{this.icon.spriteFrame=t;let e=this.icon.node.parent,i=this._gridCfg.gridType.split("_"),n=T.instance.getGridSizeByRowCol(Number(i[1]),Number(i[0])),s=this._gridCfg.points;e.getComponent(a).spacingX=T.instance.space,e.getComponent(a).spacingY=T.instance.space,e.getComponent(r).width=n.width,e.getComponent(a).updateLayout(!0);for(let t=0;t<s.length;t++){const i=s[t];for(let t=0;t<i.length;t++){const n=i[t];let s=c(this.icon.node);s.active=!0,s.parent=e,s.getComponent(u).opacity=n?255:0}}}))}setNodeAngel(){let t=this._placeStatus?0:10;this.node.angle=t}setGridAdBubble(){let t=[];for(let e=0;e<this._gridCfg.points.length;e++)t.push(this._gridCfg.points[e].join(""));let e=f.gridPath+"bubble_"+t.join("_")+"/spriteFrame";g.geSpriteFrame(e).then((t=>{this.bubble.spriteFrame=t;let e=this._gridCfg.gridType.split("_"),i=Number(e[1]),n=Number(e[0]),s=T.instance.getGridSizeByRowCol(i,n);s.width=1.2*s.width,this.node.getComponent(r).setContentSize(s),this.point.setPosition(-s.width/2,s.height/2)}))}removeGridAdBubble(){this.bubble.destroy(),this.initWeaponSize(),this.setNodeAngel(),this._needAd=!1}onGridRemove(){this.placeStatus=!1,this.setNodeAngel()}onPlaceFinish(){this._touchStatus==R.MOVE&&_.emit(l.PLACE_GRID_END,this)}onTouchStart(t){let e=this.point.getComponent(r).convertToNodeSpaceAR(new p(t.x,t.y,0));if(T.instance.checkPointinGrid(d(e.x,e.y),this._pointGridObj)&&!C.instance.isSelect){this._isTouch=!0,C.instance.isSelect=!0,this._touchStatus=R.START,this.placeStatus=!0,this.setNodeAngel(),_.emit(l.PLACE_GRID_START,this,t);let e=this.node.parent.getComponent(r).convertToNodeSpaceAR(new p(t.x,t.y,0));this.node.setPosition(e.x,e.y)}}onTouchMove(t){if(this._isTouch){this._touchStatus=R.MOVE;let e=this.node.parent.getComponent(r).convertToNodeSpaceAR(new p(t.x,t.y,0));this.node.setPosition(e.x,e.y),_.emit(l.PLACE_GRID_MOVE,this,t)}}onTouchEnd(t){this._isTouch&&(this._touchStatus==R.START&&this._needAd&&E.instance.showAdTipsPopup(S.GAME_TYPE_GRID,this._gridCfg,(t=>{t&&this.removeGridAdBubble(),_.emit(l.PLACE_GRID_END,this)})),this._isTouch=!1,C.instance.isSelect=!1,this.onPlaceFinish(),this._touchStatus=R.END)}onTouchCancle(t){this._isTouch&&(this._isTouch=!1,C.instance.isSelect=!1,this._touchStatus=R.CANCEL,_.emit(l.ADD_REMOVE_WEAPON_LIST,this.node))}onEnable(){_.on(l.GAME_TOUCH_START,this.onTouchStart,this),_.on(l.GAME_TOUCH_MOVE,this.onTouchMove,this),_.on(l.GAME_TOUCH_END,this.onTouchEnd,this),_.on(l.GAME_TOUCH_CANCLE,this.onTouchEnd,this)}onDisable(){_.off(l.GAME_TOUCH_START,this.onTouchStart,this),_.off(l.GAME_TOUCH_MOVE,this.onTouchMove,this),_.off(l.GAME_TOUCH_END,this.onTouchEnd,this),_.off(l.GAME_TOUCH_CANCLE,this.onTouchEnd,this)}}).prototype,"icon",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(N.prototype,"bubble",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=N))||y));let R=t("TouchStatus",function(t){return t[t.DEFAULT=0]="DEFAULT",t[t.START=1]="START",t[t.MOVE=2]="MOVE",t[t.END=3]="END",t[t.CANCEL=4]="CANCEL",t}({}));n._RF.pop()}}}));

System.register("chunks:///_virtual/WeaponBuffItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,n,o,r,s,u,f,a,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,o=e.Sprite,r=e.ParticleSystem2D,s=e._decorator,u=e.Component,f=e.Tween,a=e.tween,p=e.v3}],execute:function(){var c,l,h,m,A,b,d,w,y;n._RF.push({},"c68dbCvAtdJV5IjAxnaga0t","WeaponBuffItem",void 0);const{ccclass:v,property:g}=s;e("WeaponBuffItem",(c=v("WeaponBuffItem"),l=g(o),h=g(r),m=g(r),c((d=t((b=class extends u{constructor(){super(...arguments),i(this,"upArrowAnim",d,this),i(this,"buffAnim1",w,this),i(this,"buffAnim2",y,this)}init(e){let t=.75;this.upArrowAnim.node.setPosition(0,0,0),f.stopAllByTarget(this.upArrowAnim.node),a(this.upArrowAnim.node).by(t,{position:p(0,-15,0)}).by(t,{position:p(0,15,0)}).by(t,{position:p(0,15,0)}).by(t,{position:p(0,-15,0)}).union().repeatForever().start(),"arrow"==e?this.showArrow():this.showBuff()}showBuff(){this.buffAnim1.node.active=!0,this.buffAnim2.node.active=!0,this.buffAnim1.getComponent(r).resetSystem(),this.buffAnim2.getComponent(r).resetSystem(),this.scheduleOnce((()=>{this.hideBuff()}),1)}hideBuff(){this.buffAnim1.node.active=!1,this.buffAnim2.node.active=!1}showArrow(){this.upArrowAnim.node.active=!0}hideArrow(){this.upArrowAnim.node.active=!1}clear(){this.node.destroy()}}).prototype,"upArrowAnim",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(b.prototype,"buffAnim1",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(b.prototype,"buffAnim2",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=b))||A));n._RF.pop()}}}));

System.register("chunks:///_virtual/WeaponData.ts",["cc","./CfgMgr.ts","./WeaponModel.ts","./BagData.ts","./SkillData.ts"],(function(e){var a,t,n,i,l,p,s;return{setters:[function(e){a=e.cclegacy},function(e){t=e.CfgMgr},function(e){n=e.WeaponCfg,i=e.WeaponType,l=e.WeaponSkillObj},function(e){p=e.BagData},function(e){s=e.SkillData}],execute:function(){a._RF.push({},"91348VvqW5Bi6q8SBb34d+V","WeaponData",void 0);class r{constructor(){this._isSelect=!1,this._weaponObjMapData=new Map,this._weaponSkillMapData=new Map,this._weaponNumberMapData=new Map}get isSelect(){return this._isSelect}set isSelect(e){this._isSelect=e}init(e){let a=p.instance.getCarryWeaponMap(),i=t.getCfgDataArray(new n);for(let e=0;e<i.length;e++){const t=i[e];t.isShow||a.set(t.Id,1)}a.forEach(((e,a)=>{let i=t.getDataById(new n,a),l=i.skillIds.length;i.doubleLevel&&e<i.doubleLevel&&(l-=1);let s=p.instance.calWeaponLevelCfgByLevel(a,e);for(let e=0;e<l;e++){let t=i.skillIds[e],n=e+1,l=this.initSkillObj(i,a,s,t,n),p=a+"|"+n;this._weaponSkillMapData.set(p,l),this._weaponObjMapData.set(l.id,l)}}));for(let a=0;a<e.length;a++){let i=e[a];if(!this._weaponObjMapData.has(i)){let e=t.getCfgDataArray(new n);for(let a=0;a<e.length;a++){const t=e[a];if(t.skillIds.indexOf(i)>=0){let e=t.Id,a=p.instance.getNoWearWeapon(e),n=null!=a?a.level:0,l=p.instance.calWeaponLevelCfgByLevel(e,n),s=t.skillIds.indexOf(i)+1,r=this.initSkillObj(t,e,l,i,s,!0),o=e+"|"+s;this._weaponSkillMapData.set(o,r),this._weaponObjMapData.set(r.id,r)}}}}}initSkillObj(e,a,t,n,p,r){void 0===r&&(r=!1);let o=s.instance.getSkillCfgById(n),d=p-1,h=new l;return h.id=n,h.weaponId=a,h.skillId=n,h.cd=e.cd,h.desc=e.desc,h.gridType=e.gridType,h.level=p,h.maxLevel=p,h.quality=p-1,h.type=e.type,h.targetType=e.targetType,h.name=e.name,h.points=e.points,h.res=o.res,h.scale=o.scale,h.range=e.range,h.weight=r?0:e.weight,h.hp=Math.ceil(e.hcUp[d]*(e.hp+t.addHp)*10)/10,h.addHp=Math.ceil(e.hcUp[d]*(e.addHp+(e.type==i.ARMOR_HP?t.addBuff:0))*10)/10,h.addShield=Math.ceil(e.hcUp[d]*(e.addShield+(e.type==i.ARMOR_SHIELD?t.addBuff:0))*10)/10,h.addHpPer=Math.ceil(e.hcUp[d]*(e.addHpPer+(e.type==i.ARMOR_HP?t.addBuff:0))*10)/10,e.type==i.ARMOR_HP?h.damage=h.addHp:e.type==i.ARMOR_HPPER?h.damage=h.addHpPer:e.type==i.ARMOR_SHIELD?h.damage=h.addShield:e.type==i.ECONOMY?h.damage=Math.ceil(e.hcUp[d]*e.damage*10)/10:h.damage=Math.ceil(e.hcUp[d]*(e.damage+t.addDamage)*10)/10,h}updateWeaponByLevel(e,a,t){let n=a+"|"+e,i=this._weaponSkillMapData.get(n);return i.skillId=t.Id,i.res=t.res,this._weaponSkillMapData.set(n,i),i}getWeaponByLevel(e,a){let t=a+"|"+e;return this._weaponSkillMapData.get(t)}addWeaponNumber(e,a){let t=e+"|"+a;if(this._weaponNumberMapData.has(t)){let e=this._weaponNumberMapData.get(t);e+=1,this._weaponNumberMapData.set(t,e)}else this._weaponNumberMapData.set(t,1)}deleteWeaponNumber(e,a){let t=e+"|"+a;if(this._weaponNumberMapData.has(t)){let e=this._weaponNumberMapData.get(t);e-=1,this._weaponNumberMapData.set(t,e)}}getWeaponNumber(e,a){let t=e+"|"+a;return this._weaponNumberMapData.get(t)}checkWeaponByLevel(e,a){let t=a+"|"+e;return!!this._weaponSkillMapData.has(t)}getWeaponCfgById(e){return t.getDataById(new n,e)}getWeaponByWid(e){return this._weaponObjMapData.get(e)}getWeaponPool(){return Array.from(this._weaponObjMapData.values())}clear(){this._weaponNumberMapData.clear(),this._weaponObjMapData.clear(),this._weaponSkillMapData.clear(),this._isSelect=!1}static get instance(){return this._instance||(this._instance=new r),this._instance}}e("WeaponData",r),r._instance=null,a._RF.pop()}}}));

System.register("chunks:///_virtual/WeaponDetailPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./PopupManager.ts","./ResourcesUtil.ts","./SkillData.ts","./SkillUpgradeData.ts","./GameDefine.ts","./WeaponModel.ts","./BagData.ts","./SkillGetItem.ts","./WeaponData.ts","./LanguageManager.ts","./SpriteEx.ts"],(function(e){var t,n,i,a,o,l,s,g,r,h,p,d,c,u,m,C,y,N,f,k,b,B,L;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,a=e.Sprite,o=e.Label,l=e.Node,s=e.Prefab,g=e._decorator,r=e.Component,h=e.UITransform,p=e.instantiate},function(e){d=e.Constants},function(e){c=e.PopupManager},function(e){u=e.ResourcesUtil},function(e){m=e.SkillData},function(e){C=e.SkillUpgradeData},function(e){y=e.GameDefine},function(e){N=e.WeaponType},function(e){f=e.BagData},function(e){k=e.SkillGetItem},function(e){b=e.WeaponData},function(e){B=e.LanguageManager},function(e){L=e.SpriteEx}],execute:function(){var P,v,S,I,D,A,w,x,M,T,z,G,W,$,R,_,E,H,O,U,q,F,K,j,Y;i._RF.push({},"53b5dmI111O3KHnPNMMZrj5","WeaponDetailPopup",void 0);const{ccclass:Z,property:J}=g;e("WeaponDetailPopup",(P=Z("WeaponDetailPopup"),v=J(a),S=J(o),I=J(o),D=J(o),A=J(o),w=J(l),x=J(l),M=J(l),T=J(l),z=J(s),G=J(l),P((R=t(($=class extends r{constructor(){super(...arguments),n(this,"icon",R,this),n(this,"iconName",_,this),n(this,"level",E,this),n(this,"desc",H,this),n(this,"equipAtkType",O,this),n(this,"targetNode",U,this),n(this,"cdNode",q,this),n(this,"atkNode",F,this),n(this,"rangeNode",K,this),n(this,"skillGetPrefab",j,this),n(this,"skillList",Y,this)}show(e){y.gameTouch=!1,this.setWeaponInfo(e)}setWeaponInfo(e){e.skillId;let t=d.weaponIconPath+e.res+"/spriteFrame";this.iconName.string=B.instance.getLang(e.name),this.level.string=`Lv.${e.level}`,this.desc.string=B.instance.getLang(e.desc),this.equipAtkType.string=f.instance.getEquipAtkType(e.type),u.geSpriteFrame(t).then((e=>{this.icon.spriteFrame=e;let t=this.icon.getComponent(h).contentSize,n=Math.min(1e3,Math.min(150/t.width,150/t.height));this.icon.node.setScale(n,n)})),this.setAttInfo(e)}setAttInfo(e){this.targetNode.getChildByName("value").getComponent(o).string=`${f.instance.getEquipAtkTargetType(e.targetType)}`,this.cdNode.getChildByName("value").getComponent(o).string=`${e.cd}s`,this.rangeNode.active=!0,e.type==N.ATTACK_PHYSICAL||e.type==N.ATTACK_MAGIC?(this.atkNode.getChildByName("icon").getComponent(L).index=0,this.rangeNode.getChildByName("icon").getComponent(L).index=0,this.atkNode.getChildByName("desc").getComponent(o).string=B.instance.getLang("game.atk"),this.rangeNode.getChildByName("desc").getComponent(o).string=B.instance.getLang("game.range"),this.atkNode.getChildByPath("layout/value").getComponent(o).string=`${e.damage}`,this.rangeNode.getChildByPath("layout/value").getComponent(o).string=`${e.range}`):e.type==N.ARMOR_HP?(this.atkNode.getChildByName("icon").getComponent(L).index=1,this.rangeNode.getChildByName("icon").getComponent(L).index=1,this.atkNode.getChildByName("desc").getComponent(o).string=B.instance.getLang("game.hp"),this.rangeNode.getChildByName("desc").getComponent(o).string=B.instance.getLang("game.healing"),this.atkNode.getChildByPath("layout/value").getComponent(o).string=`${e.hp}`,this.rangeNode.getChildByPath("layout/value").getComponent(o).string=`${e.addHp}`):e.type==N.ARMOR_HPPER?(this.atkNode.getChildByName("icon").getComponent(L).index=1,this.rangeNode.getChildByName("icon").getComponent(L).index=3,this.atkNode.getChildByName("desc").getComponent(o).string=B.instance.getLang("game.hp"),this.rangeNode.getChildByName("desc").getComponent(o).string=B.instance.getLang("game.healing"),this.atkNode.getChildByPath("layout/value").getComponent(o).string=`${e.hp}`,this.rangeNode.getChildByPath("layout/value").getComponent(o).string=`${e.addHpPer}%`):e.type==N.ARMOR_SHIELD?(this.atkNode.getChildByName("icon").getComponent(L).index=1,this.rangeNode.getChildByName("icon").getComponent(L).index=2,this.atkNode.getChildByName("desc").getComponent(o).string=B.instance.getLang("game.hp"),this.rangeNode.getChildByName("desc").getComponent(o).string=B.instance.getLang("game.armor"),this.atkNode.getChildByPath("layout/value").getComponent(o).string=`${e.hp}`,this.rangeNode.getChildByPath("layout/value").getComponent(o).string=`${e.addShield}`):e.type==N.ECONOMY&&(this.atkNode.getChildByName("icon").getComponent(L).index=2,this.atkNode.getChildByName("desc").getComponent(o).string=B.instance.getLang("game.money"),this.rangeNode.active=!1,this.atkNode.getChildByPath("layout/value").getComponent(o).string=`${e.damage}`),this.skillGetList(e.weaponId,e.maxLevel)}skillGetList(e,t){let n=f.instance.getUnlockSkillsEntry(e,t),i=b.instance.getWeaponCfgById(e),a=!(0==i.doubleLevel||t<i.doubleLevel);if(this.skillList.removeAllChildren(),a){let t=b.instance.getWeaponByLevel(5,e),i=m.instance.getSkillCfgById(t.skillId),a=0==i.doubleSkills.length;for(let e=0;e<4;e++){const t=n[e];let i=p(this.skillGetPrefab);i.parent=this.skillList;let a=C.instance.hasLearnSkill(t.Id);i.getComponent(k).init(t,a)}if(a)for(let e=5;e<n.length;e++){const t=n[e];if(t.aimSkills.indexOf(i.Id)>=0){let e=p(this.skillGetPrefab);e.parent=this.skillList;let n=C.instance.hasLearnSkill(t.Id);e.getComponent(k).init(t,n)}}else{const e=n[4];let t=p(this.skillGetPrefab);t.parent=this.skillList;let i=C.instance.hasLearnSkill(e.Id);t.getComponent(k).init(e,i)}}else for(let e=0;e<n.length;e++){const t=n[e];let i=p(this.skillGetPrefab);i.parent=this.skillList;let a=C.instance.hasLearnSkill(t.Id);i.getComponent(k).init(t,a)}}onCloseBtn(){y.gameTouch=!0,c.instance.hide(d.PopupUI.WeaponDetailPopup)}}).prototype,"icon",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t($.prototype,"iconName",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t($.prototype,"level",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t($.prototype,"desc",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t($.prototype,"equipAtkType",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t($.prototype,"targetNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=t($.prototype,"cdNode",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=t($.prototype,"atkNode",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=t($.prototype,"rangeNode",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=t($.prototype,"skillGetPrefab",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t($.prototype,"skillList",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=$))||W));i._RF.pop()}}}));

System.register("chunks:///_virtual/WeaponDoubleSkillItem.ts",["cc","./Constants.ts","./OpenPopupManager.ts"],(function(e){var n,t,o,p,s,c;return{setters:[function(e){n=e.cclegacy,t=e.Component,o=e._decorator},function(e){p=e.Constants},function(e){s=e.OpenPopupManager,c=e.LayerType}],execute:function(){var l;n._RF.push({},"c4bf6/Sf5xHW6HSzw4xt5XA","WeaponDoubleSkillItem",void 0);const{ccclass:a,property:u}=o;e("WeaponSkillItem",a("WeaponDoubleSkillItem")(l=class extends t{onClicked(e,n){let t=n.split(","),o=Number(t[0]),l=Number(t[1]);s.instance.show(p.PopupUI.WeaponStylePopup,null,c.TOP,!1,o,l)}})||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/WeaponElementItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SpriteEx.ts"],(function(e){var t,n,i,r,o,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,r=e._decorator,o=e.Component},function(e){c=e.SpriteEx}],execute:function(){var l,p,s,a,u;i._RF.push({},"c6b18W4NmlO/pKOWmn1Qlr+","WeaponElementItem",void 0);const{ccclass:m,property:f}=r;e("WeaponElementItem",(l=m("WeaponElementItem"),p=f(c),l((u=t((a=class extends o{constructor(){super(...arguments),n(this,"icon",u,this)}init(e){this.icon.index=e}}).prototype,"icon",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=a))||s));i._RF.pop()}}}));

System.register("chunks:///_virtual/WeaponItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEvent.ts","./EventListener.ts","./ResourcesUtil.ts","./WeaponData.ts","./WeaponMergeItem.ts","./GridData.ts","./Constants.ts","./AudioManager.ts","./OpenPopupManager.ts","./WeaponBuffItem.ts","./SkillData.ts","./SkillUpgradeData.ts","./HeroData.ts","./GuideData.ts","./AdModel.ts"],(function(e){var t,n,i,o,s,a,h,p,r,c,l,u,_,d,b,f,E,S,O,w,A,I,T,P,m,W,g,N,j,D,U,R,G;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,o=e.Label,s=e.Sprite,a=e.Node,h=e._decorator,p=e.Component,r=e.UITransform,c=e.Color,l=e.Tween,u=e.tween,_=e.v3,d=e.instantiate,b=e.Vec3,f=e.v2},function(e){E=e.GameEvent},function(e){S=e.EventListener},function(e){O=e.ResourcesUtil},function(e){w=e.WeaponData},function(e){A=e.WeaponMergeItem},function(e){I=e.GridData,T=e.GridObj},function(e){P=e.Constants},function(e){m=e.AudioManager},function(e){W=e.OpenPopupManager},function(e){g=e.WeaponBuffItem},function(e){N=e.SkillData},function(e){j=e.SkillUpgradeData},function(e){D=e.HeroData},function(e){U=e.GuideData,R=e.GuideStep},function(e){G=e.AdGameType}],execute:function(){var C,M,v,y,H,B,L,k,F,K,z;i._RF.push({},"25dfdn2NRZPKLZpIOwY85wi","WeaponItem",void 0);const{ccclass:V,property:x}=h;e("WeaponItem",(C=V("WeaponItem"),M=x(o),v=x(s),y=x(s),H=x(a),C((k=t((L=class extends p{constructor(){super(...arguments),n(this,"level",k,this),n(this,"icon",F,this),n(this,"bubble",K,this),n(this,"arrow",z,this),this._touchStatus=0,this._weaponKey="",this._weaponObj=null,this._point=null,this._pointGridObj=[],this._isShake=!1,this._isUp=!1,this._buffItem=null,this._placeStatus=!0,this._isTouch=!1,this._needAd=!1}get point(){return this._point}get weaponObj(){return this._weaponObj}get weaponKey(){return this._weaponKey}get needAd(){return this._needAd}set placeStatus(e){this._placeStatus=e}init(e,t,n,i){this._pointGridObj=[],this._placeStatus=n,this._weaponKey=t,this._weaponObj=e,this._isShake=!1,this._isUp=!1,this._point=this.node.getChildByName("point"),this.level.string=`Lv${e.level}`,this.initWeaponSize(),this.setPointPosArr(),this.setWeaponIcon(),this.setNodeAngel(),this._needAd=i||!1,this._needAd&&this.setWeaponAdBubble(),w.instance.addWeaponNumber(this.weaponObj.weaponId,this.weaponObj.level)}initWeaponSize(){let e=this._weaponObj.gridType.split("_"),t=Number(e[1]),n=Number(e[0]),i=I.instance.getGridSizeByRowCol(t,n);this.node.getComponent(r).setContentSize(i),this.point.setPosition(-i.width/2,i.height/2),this.icon.node.setScale(this.weaponObj.scale,this.weaponObj.scale)}setPointPosArr(){this._pointGridObj=[];let e=this._weaponObj.points;for(let t=0;t<e.length;t++){const n=e[t];for(let e=0;e<n.length;e++){if(n[e]){let n=new T;n.row=t,n.col=e,this._pointGridObj.push(n)}}}}setWeaponIcon(){let e=P.weaponIconPath+this.weaponObj.res+"/spriteFrame";O.geSpriteFrame(e).then((e=>{this.icon.spriteFrame=e,this.icon.node.setScale(this.weaponObj.scale,this.weaponObj.scale)}))}setWeaponAdBubble(){let e=[];for(let t=0;t<this.weaponObj.points.length;t++)e.push(this.weaponObj.points[t].join(""));let t=P.gridPath+"bubble_"+e.join("_")+"/spriteFrame";O.geSpriteFrame(t).then((e=>{this.bubble.spriteFrame=e;let t=this._weaponObj.gridType.split("_"),n=Number(t[1]),i=Number(t[0]),o=I.instance.getGridSizeByRowCol(n,i);o.width=1.2*o.width,this.node.getComponent(r).setContentSize(o)}))}removeWeaponAdBubble(){this.bubble.destroy(),this.initWeaponSize(),this._needAd=!1}setBuildWeaponPos(e,t){this._weaponKey==e&&this.node.setPosition(t)}setIconYellow(){this.icon.getComponent(s).color=(new c).fromHEX("dbc464")}setIconDefault(){this.icon.getComponent(s).color=(new c).fromHEX("ffffff")}onSetIconStatus(e,t){this.weaponKey==e&&(t?this.setIconYellow():this.setIconDefault())}setNodeAngel(){let e=this._placeStatus?0:10;this.node.angle=e,this.arrow.angle=-e}onSetStatusInit(){this.setIconDefault(),this._isShake=!1,this._isUp=!1,this.onHideUpArrow(),l.stopAllByTarget(this.icon.node)}onSetIconShake(e){if(this.weaponKey==e&&!this._isShake){this._isShake=!0;let e=5,t=.1;this.icon.node.setPosition(0,0,0),l.stopAllByTarget(this.icon.node),u(this.icon.node).by(t,{position:_(-e,0,0)}).by(t,{position:_(e,0,0)}).by(t,{position:_(e,0,0)}).by(t,{position:_(-e,0,0)}).union().repeatForever().start()}}onSetIconMerge(){let e=w.instance.getWeaponNumber(this.weaponObj.weaponId,this.weaponObj.level);this.arrow.active=e>=2}onSetIconUpArrow(e){if(this.weaponKey==e&&!this._isUp)if(this._isUp=!0,this._buffItem)this._buffItem.showArrow();else{let e=P.weaponBuffPath;O.getPrefab(e).then((e=>{let t=d(e);this._buffItem||(t.parent=this.node,this._buffItem=t.getComponent(g),this._buffItem.init("arrow"))}))}}onSetIconBuff(e){if(this.weaponKey==e)if(this._buffItem)this._buffItem.showBuff();else{let e=P.weaponBuffPath;O.getPrefab(e).then((e=>{let t=d(e);this._buffItem||(t.parent=this.node,this._buffItem=t.getComponent(g),this._buffItem.init("buff"))}))}}onHideUpArrow(){this._buffItem&&this._buffItem.hideArrow()}onPenWeaponPopup(){if(this._touchStatus==Y.START){P.itemsPath,this.weaponObj.res}}onWeaponRemove(e){this.weaponKey==e&&(this._weaponObj.hp>0&&(D.instance.subHp(this._weaponObj.hp,this.weaponKey),S.emit(E.UPDATE_HERO_HP)),S.emit(E.ADD_REMOVE_WEAPON_LIST,this.node),this.placeStatus=!1,this.setNodeAngel())}onWeapoPreRemove(){this._touchStatus==Y.START&&(S.emit(E.ADD_PRE_WEAPON_LIST,this.node),this.placeStatus=!0,this.setNodeAngel())}onPlaceFinish(){this._touchStatus==Y.MOVE&&S.emit(E.WEAPON_PlACE,this)}onWeaponUpgrade(e,t){if(this._weaponKey==e){let n=this._weaponObj.level+1,i=this._weaponObj.weaponId,o=w.instance.getWeaponByLevel(n,i),s=N.instance.getSkillCfgById(o.skillId);s.doubleSkills.length>0?W.instance.showWeaponSelectPopup(i,s.doubleSkills,(o=>{t&&this._weaponObj.hp>0&&(D.instance.subHp(this._weaponObj.hp,e),S.emit(E.UPDATE_HERO_HP)),this._weaponObj=w.instance.updateWeaponByLevel(n,i,o),this.level.string=`Lv${this._weaponObj.level}`,I.instance.updateGridItemData(e,this._weaponObj.id),this.setMergeEffect(),this.setWeaponIcon(),j.instance.setDoubleSkillGroup(this._weaponObj.weaponId,o.Id),t&&this._weaponObj.hp>0&&(D.instance.addHp(this._weaponObj.hp,e),S.emit(E.UPDATE_HERO_HP)),this.updateWeaponNumber()})):(t&&this._weaponObj.hp>0&&(D.instance.subHp(this._weaponObj.hp,e),S.emit(E.UPDATE_HERO_HP)),this.setWeaponUpgrade(e,n,i),t&&this._weaponObj.hp>0&&(D.instance.addHp(this._weaponObj.hp,e),S.emit(E.UPDATE_HERO_HP)),this.updateWeaponNumber()),U.instance.battleMode&&S.emit(E.GUIDE_BATTLE_ACTION)}}updateWeaponNumber(){let e=this.weaponObj.level-1;w.instance.deleteWeaponNumber(this.weaponObj.weaponId,e),w.instance.checkWeaponByLevel(this.weaponObj.level+1,this.weaponObj.weaponId)&&w.instance.addWeaponNumber(this.weaponObj.weaponId,this.weaponObj.level),S.emit(E.WEAPON_ICON_MERGE)}setWeaponUpgrade(e,t,n){this._weaponObj=w.instance.getWeaponByLevel(t,n),this.level.string=`Lv${this._weaponObj.level}`,I.instance.updateGridItemData(e,this._weaponObj.id),this.setMergeEffect(),this.setWeaponIcon()}setMergeEffect(){let e=P.weaponMergePath;O.getPrefab(e).then((e=>{m.instance.playSound(4);let t=d(e);t.parent=this.node,t.getComponent(A).init()}))}onTouchStart(e){if(U.instance.battleMode&&(U.instance.curStep==R.GUIDE_STEP4_MERGE_WEAPON||U.instance.curStep==R.GUIDE_STEP11_PLACE_GRID)){let e=U.instance.getCurGuideData();if(this._weaponObj.weaponId!=e[0])return}let t=this.point.getComponent(r).convertToNodeSpaceAR(new b(e.x,e.y,0));!I.instance.checkPointinGrid(f(t.x,t.y),this._pointGridObj)||w.instance.isSelect||I.instance.gridEditMode||(this._isTouch=!0,w.instance.isSelect=!0,this._touchStatus=Y.START)}onTouchMove(e){if(this._isTouch){this.onWeapoPreRemove(),this._touchStatus=Y.MOVE;let t=this.node.parent.getComponent(r).convertToNodeSpaceAR(new b(e.x,e.y,0));this.node.setPosition(t),S.emit(E.WEAPON_MOVE,this),U.instance.battleMode&&S.emit(E.GUIDE_HIDE_FINGER)}}onTouchEnd(e){if(this._isTouch){if(this._touchStatus==Y.START)if(this._needAd)W.instance.showAdTipsPopup(G.GAME_TYPE_WEAPON,this._weaponObj,(e=>{e&&this.removeWeaponAdBubble()}));else{if(U.instance.battleMode&&(U.instance.curStep==R.GUIDE_STEP2_DRAG_WEAPON||U.instance.curStep==R.GUIDE_STEP3_REFRESH_WEAPON||U.instance.curStep==R.GUIDE_STEP4_MERGE_WEAPON||U.instance.curStep==R.GUIDE_STEP5_DRAG_WEAPON||U.instance.curStep==R.GUIDE_STEP6_PURSE||U.instance.curStep==R.GUIDE_STEP3_REFRESH_WEAPON))return;W.instance.showWeaponDetailPopup(this._weaponObj)}this._isTouch=!1,w.instance.isSelect=!1,this.onPenWeaponPopup(),this.onPlaceFinish(),this.onHideUpArrow(),this._touchStatus=Y.END}}onTouchCancle(e){this._isTouch&&(this._isTouch=!1,w.instance.isSelect=!1,this._touchStatus=Y.CANCEL,S.emit(E.ADD_REMOVE_WEAPON_LIST,this.node),S.emit(E.SET_BATTLE_BTN_STATUS))}onEnable(){S.on(E.GAME_TOUCH_START,this.onTouchStart,this),S.on(E.GAME_TOUCH_MOVE,this.onTouchMove,this),S.on(E.GAME_TOUCH_END,this.onTouchEnd,this),S.on(E.GAME_TOUCH_CANCLE,this.onTouchEnd,this),S.on(E.WEAPON_REMOVE,this.onWeaponRemove,this),S.on(E.WEAPON_ICON_STATUS,this.onSetIconStatus,this),S.on(E.WEAPON_ICON_STATUS_INIT,this.onSetStatusInit,this),S.on(E.WEAPON_SHAKE,this.onSetIconShake,this),S.on(E.WEAPON_UPARROW,this.onSetIconUpArrow,this),S.on(E.WEAPON_BUFF,this.onSetIconBuff,this),S.on(E.WEAPON_ICON_MERGE,this.onSetIconMerge,this),S.on(E.WEAPON_UPGRADE,this.onWeaponUpgrade,this)}onDisable(){w.instance.deleteWeaponNumber(this.weaponObj.weaponId,this.weaponObj.level),S.off(E.GAME_TOUCH_START,this.onTouchStart,this),S.off(E.GAME_TOUCH_MOVE,this.onTouchMove,this),S.off(E.GAME_TOUCH_END,this.onTouchEnd,this),S.off(E.GAME_TOUCH_CANCLE,this.onTouchEnd,this),S.off(E.WEAPON_REMOVE,this.onWeaponRemove,this),S.off(E.WEAPON_ICON_STATUS,this.onSetIconStatus,this),S.off(E.WEAPON_ICON_STATUS_INIT,this.onSetStatusInit,this),S.off(E.WEAPON_SHAKE,this.onSetIconShake,this),S.off(E.WEAPON_ICON_MERGE,this.onSetIconMerge,this),S.off(E.WEAPON_UPGRADE,this.onWeaponUpgrade,this),S.off(E.WEAPON_UPARROW,this.onSetIconUpArrow,this),S.off(E.WEAPON_BUFF,this.onSetIconBuff,this)}}).prototype,"level",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(L.prototype,"icon",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(L.prototype,"bubble",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(L.prototype,"arrow",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=L))||B));let Y=e("TouchStatus",function(e){return e[e.DEFAULT=0]="DEFAULT",e[e.START=1]="START",e[e.MOVE=2]="MOVE",e[e.END=3]="END",e[e.CANCEL=4]="CANCEL",e}({}));i._RF.pop()}}}));

System.register("chunks:///_virtual/WeaponLevelModel.ts",["cc"],(function(e){var i;return{setters:[function(e){i=e.cclegacy}],execute:function(){i._RF.push({},"00201rzndxJprcJJQjlCRpH","WeaponLevelModel",void 0);e("WeaponLevelCfg",class{constructor(){this.ClassName="WeaponLevel",this.Id=void 0,this.weaponId=void 0,this.level=void 0,this.fragment=void 0,this.blueprint=void 0,this.addDamage=void 0,this.addHp=void 0,this.addBuff=void 0,this.gold=void 0}}),i._RF.pop()}}}));

System.register("chunks:///_virtual/WeaponManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GridData.ts","./ResourcesUtil.ts","./WeaponData.ts","./WeaponShopData.ts","./EventListener.ts","./GameEvent.ts","./Util.ts","./WeaponModel.ts","./Constants.ts","./WeaponItem.ts","./WeaponBgItem.ts","./SkillUpgradeData.ts","./CoinMode.ts","./HeroData.ts","./OpenPopupManager.ts","./GridModel.ts","./CfgMgr.ts","./GuideData.ts","./AdModel.ts","./SkillData.ts","./SkillModel.ts","./GameDefine.ts"],(function(e){var t,n,i,o,a,s,p,l,r,d,c,h,m,W,g,u,P,E,_,A,f,S,O,I,L,w,v,T,D,N,b,y,C,G,R,B,M;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,o=e.Node,a=e._decorator,s=e.Component,p=e.instantiate,l=e.UITransform,r=e.v3,d=e.Layout,c=e.view,h=e.Intersection2D,m=e.v2,W=e.Size},function(e){g=e.GridData},function(e){u=e.ResourcesUtil},function(e){P=e.WeaponData},function(e){E=e.WeaponShopData},function(e){_=e.EventListener},function(e){A=e.GameEvent},function(e){f=e.Util},function(e){S=e.WeaponType},function(e){O=e.Constants},function(e){I=e.WeaponItem},function(e){L=e.WeaponBgItem},function(e){w=e.SkillUpgradeData},function(e){v=e.CoinObj},function(e){T=e.HeroData},function(e){D=e.OpenPopupManager},function(e){N=e.GridCfg},function(e){b=e.CfgMgr},function(e){y=e.GuideData,C=e.GuideStep},function(e){G=e.AdGameType},function(e){R=e.SkillData},function(e){B=e.SkillObj},function(e){M=e.GameDefine}],execute:function(){var U,j,H,k,z,x,F,V,K;i._RF.push({},"89793GPOqNFqIh+e1RC7vod","WeaponManager",void 0);const{ccclass:q,property:Y}=a;e("WeaponManager",(U=q("WeaponManager"),j=Y(o),H=Y(o),k=Y(o),U((F=t((x=class extends s{constructor(){super(...arguments),n(this,"weaponList",F,this),n(this,"preWeaponList",V,this),n(this,"removeWeaponList",K,this)}init(){this.initWeaponListPos(),this.initWeaponList(),this.initRemoveWeaponList(!0)}initWeaponListPos(){let e=g.instance.getGridMapSize();this.weaponList.setPosition(-e.width/2,e.height/2),this.preWeaponList.setPosition(-e.width/2,e.height/2)}initWeaponList(){g.instance.getGridItemMapData().forEach(((e,t)=>{let n=e.data,i=P.instance.getWeaponByWid(e.wid),o=O.weaponPath,a=g.instance.getItemPosByTiledObj(n);u.getPrefab(o).then((e=>{let n=p(e);n.parent=this.weaponList,n.setPosition(a),n.getComponent(I).init(i,t,!0),_.emit(A.WEAPON_ICON_MERGE)}))}))}initRemoveWeaponList(e,t,n){let i=E.instance.getWeaponPool(e,t,n);this.removeWeaponList.removeAllChildren();for(let e=0;e<i.length;e++){let t=i[e].id,n=i[e].type,o=i[e].needAd,a=f.getUuid(10),s=n?O.weaponPath:O.weaponBgPath;u.getPrefab(s).then((e=>{let i=p(e);if(i.setPosition(1e4,1e4),i.parent=this.removeWeaponList,y.instance.battleMode&&y.instance.curStep==C.GUIDE_STEP11_PLACE_GRID&&!n&&this.removeWeaponList.children[this.removeWeaponList.children.length-1].setSiblingIndex(0),n){let e=P.instance.getWeaponByWid(t);i.getComponent(I).init(e,a,!1,o),_.emit(A.WEAPON_ICON_MERGE)}else{let e=b.getDataById(new N,t);i.getComponent(L).init(e,a,!1,o)}this.updateRemoveLayOut()}))}}onRebuildWeaponPos(){g.instance.getGridItemMapData().forEach(((e,t)=>{let n=e.data,i=g.instance.getItemPosByTiledObj(n),o=this.weaponList.children;for(let e=0;e<o.length;e++){o[e].getComponent(I).setBuildWeaponPos(t,i)}}))}showPurseFlyGoldAnim(){if(this.weaponList.children.length){let e=this.weaponList.children;for(let t=0;t<e.length;t++){const n=e[t];let i=n.getComponent(I).weaponObj;if(i.type==S.ECONOMY){let e=R.instance.getSkillCfgById(i.skillId),t=new B;t.Id=e.Id;for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const i=e[n];t.hasOwnProperty(n)&&(t[n]=i)}t=w.instance.getUpgradeSkillBySkillId(t);let o=i.damage;t.probability>0&&f.randomHit(t.probability)&&(o+=Math.floor(i.damage*t.damagePer/100));let a=new v;a.pos=n.getComponent(l).convertToWorldSpaceAR(r(0,0,0)),a.num=o,_.emit(A.GAME_CHANGE_COIN,a)}}}}showHideRemoveList(e){this.removeWeaponList.active=e}updateRemoveLayOut(){let e=this.removeWeaponList.children.length,t=0-10*(e-3>0?e-3:0);this.removeWeaponList.getComponent(d).spacingX=t;let n=M.viewWidth>c.getVisibleSize().width?c.getVisibleSize().width:M.viewWidth;this.removeWeaponList.getComponent(l).setContentSize(n-75,this.removeWeaponList.getComponent(l).contentSize.height),this.removeWeaponList.getComponent(d).updateLayout(!0);for(let e in this.removeWeaponList.children);}onAddRemoveWeaponList(e){e.parent=this.removeWeaponList,e.getComponent(L)&&e.getComponent(L).onGridRemove(),this.updateRemoveLayOut()}onAddPreWeaponList(e){e.parent=this.preWeaponList}onWeaponPlace(e){let t=g.instance.curWeaponTildeIndex;if(t.includes(-1))_.emit(A.WEAPON_PlACE_FINISH,e),this.removeSynAction(e),_.emit(A.SET_BATTLE_BTN_STATUS),_.emit(A.WEAPON_ICON_STATUS_INIT);else{e.needAd?D.instance.showAdTipsPopup(G.GAME_TYPE_WEAPON,e.weaponObj,(n=>{n?(e.removeWeaponAdBubble(),this._weaponPlace(e,t)):(_.emit(A.WEAPON_PlACE_FINISH,e),this.removeSynAction(e),_.emit(A.SET_BATTLE_BTN_STATUS),_.emit(A.WEAPON_ICON_STATUS_INIT))})):this._weaponPlace(e,t)}y.instance.battleMode&&(y.instance.curStep!=C.GUIDE_STEP2_DRAG_WEAPON&&y.instance.curStep!=C.GUIDE_STEP5_DRAG_WEAPON&&y.instance.curStep!=C.GUIDE_STEP6_PURSE&&y.instance.curStep!=C.GUIDE_STEP7_DRAG_WEAPON&&y.instance.curStep!=C.GUIDE_STEP13_DRAG_WEAPON||0!=this.removeWeaponList.children.length||_.emit(A.GUIDE_BATTLE_ACTION))}_weaponPlace(e,t){_.emit(A.WEAPON_PlACE_FINISH,e);let n=!1,i="",o=0,a=[],s=[];for(let p=0;p<t.length;p++){const l=t[p];let r=g.instance.getGridTiledByIndex(l),d=g.instance.getGridMapData();if(s.push(r),d[r.row][r.col]&&"0"!=d[r.row][r.col]){n||(n=!0);let t=d[r.row][r.col];a.push(t),g.instance.checkSameWeapoIdByKey(t,e.weaponObj.id)&&(o++,i=t)}}if(n){let n=e.weaponObj.level,p=e.weaponObj.weaponId;o==t.length&&P.instance.checkWeaponByLevel(n+1,p)?(e.node.removeFromParent(),_.emit(A.WEAPON_UPGRADE,i,!0)):(this.weaponRemove(a),this.weaponPlace(e,s),this.addHp(e.weaponObj,e.weaponKey))}else this.weaponPlace(e,s),this.addHp(e.weaponObj,e.weaponKey);let p=w.instance.getWeaponBuffSkillIds(e.weaponObj.weaponId);if(p.length>0){let e=g.instance.getGridMapData(),n=[],i=[];for(let e=0;e<t.length;e++)i.push(g.instance.getGridTiledByIndex(t[e]));let o=g.instance.getNearbyGridIndexByTiled(i),a="";for(let t=0;t<o.length;t++){let i=g.instance.getGridTiledByIndex(o[t]);a=e[i.row][i.col];let s=g.instance.getGridItemWid(a);if(0!=s){let e=P.instance.getWeaponByWid(s);e&&p.indexOf(e.skillId)>=0&&(n.includes(a)||n.push(a))}}for(let e=0;e<n.length;e++){const t=n[e];_.emit(A.WEAPON_BUFF,t)}}_.emit(A.SET_BATTLE_BTN_STATUS),_.emit(A.WEAPON_ICON_STATUS_INIT)}addHp(e,t){e.hp>0&&(T.instance.addHp(e.hp,t),_.emit(A.UPDATE_HERO_HP))}weaponRemove(e){for(let t=0;t<e.length;t++){const n=e[t];g.instance.deletGridDataByWeaponId(n),_.emit(A.WEAPON_REMOVE,n)}}removeSynAction(e){let t=e.node.getPosition(),n=!1,i="",o=this.removeWeaponList.children,a=[],s=0;for(let p=0;p<o.length;p++){const d=o[p];if(d.getComponent(I)){let o=d.getChildByName("icon").getComponent(l).convertToWorldSpaceAR(r(0,0,0)),c=this.preWeaponList.getComponent(l).convertToNodeSpaceAR(o),W=100;if(h.circleCircle(m(t.x,t.y),100,m(c.x,c.y),W)){let t=d.getComponent(I),o=e.weaponObj.level,a=e.weaponObj.weaponId;!t.needAd&&e.weaponObj.id==t.weaponObj.id&&P.instance.checkWeaponByLevel(o+1,a)&&(n=!0,i=t.weaponKey)}0==s&&t.x<c.x&&(s=p+1),a.push(s+p)}}if(a.push(0==s?o.length+1:s-1),n)e.node.removeFromParent(),_.emit(A.WEAPON_UPGRADE,i,!1);else{e.node.parent=this.removeWeaponList,e.placeStatus=!1;let t=a.length-1;this.removeWeaponList.getComponent(d).enabled=!1,this.removeWeaponList.children[t]&&this.removeWeaponList.children[t].setSiblingIndex(a[t]);let n=M.viewWidth>c.getVisibleSize().width?c.getVisibleSize().width:M.viewWidth;this.removeWeaponList.getComponent(l).setContentSize(n-75,this.removeWeaponList.getComponent(l).contentSize.height),this.removeWeaponList.getComponent(d).enabled=!0,e.setNodeAngel(),this.updateRemoveLayOut()}}weaponPlace(e,t){e.node.parent=this.weaponList,g.instance.addGridDataByWeaponId(t,e.weaponObj.id,e.weaponObj.level,e.weaponKey);let n=g.instance.getItemPosByTiledObj(t);if(e.node.setPosition(n),e.placeStatus=!0,e.setNodeAngel(),y.instance.curStep==C.GUIDE_STEP5_DRAG_WEAPON){let t=y.instance.getCurGuideData();if(e.weaponObj.weaponId==t[0]){let t=new W;t.width=e.node.getComponent(l).contentSize.height,t.height=t.width,e.node.getComponent(l).contentSize=t,_.emit(A.GUIDE_BATTLE_ACTION,e)}}}onEnable(){_.on(A.ADD_REMOVE_WEAPON_LIST,this.onAddRemoveWeaponList,this),_.on(A.ADD_PRE_WEAPON_LIST,this.onAddPreWeaponList,this),_.on(A.WEAPON_PlACE,this.onWeaponPlace,this),_.on(A.WEAPON_REMOVE_REFRESH,this.initRemoveWeaponList,this),_.on(A.INIT_BUILD_WEAPON_POS,this.onRebuildWeaponPos,this)}onDisable(){_.off(A.ADD_REMOVE_WEAPON_LIST,this.onAddRemoveWeaponList,this),_.off(A.ADD_PRE_WEAPON_LIST,this.onAddPreWeaponList,this),_.off(A.WEAPON_PlACE,this.onWeaponPlace,this),_.off(A.WEAPON_REMOVE_REFRESH,this.initRemoveWeaponList,this),_.off(A.INIT_BUILD_WEAPON_POS,this.onRebuildWeaponPos,this)}clear(){P.instance.clear(),E.instance.clear()}}).prototype,"weaponList",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(x.prototype,"preWeaponList",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(x.prototype,"removeWeaponList",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=x))||z));i._RF.pop()}}}));

System.register("chunks:///_virtual/WeaponMergeItem.ts",["cc"],(function(e){var t,n,o,r;return{setters:[function(e){t=e.cclegacy,n=e.Component,o=e.dragonBones,r=e._decorator}],execute:function(){var s;t._RF.push({},"6f664azpR1P674rPvf42GZp","WeaponMergeItem",void 0);const{ccclass:c,property:a}=r;e("WeaponMergeItem",c("WeaponMergeItem")(s=class extends n{init(){let e=this.node.getComponent(o.ArmatureDisplay);e.addEventListener(o.EventObject.COMPLETE,(()=>{this.node.destroy()}),e)}})||s);t._RF.pop()}}}));

System.register("chunks:///_virtual/WeaponModel.ts",["cc"],(function(i){var d;return{setters:[function(i){d=i.cclegacy}],execute:function(){d._RF.push({},"cef42/LHrdNd5rGXORftRTM","WeaponModel",void 0);i("WeaponCfg",class{constructor(){this.ClassName="Weapon",this.Id=void 0,this.name=void 0,this.desc=void 0,this.type=void 0,this.gridType=void 0,this.grid=void 0,this.points=void 0,this.level=void 0,this.quality=void 0,this.damage=void 0,this.range=void 0,this.weight=void 0,this.cd=void 0,this.hp=void 0,this.addShield=void 0,this.addHp=void 0,this.addHpPer=void 0,this.targetType=void 0,this.sid=void 0,this.hcUp=void 0,this.skillIds=void 0,this.doubleLevel=void 0,this.upgradeSkillIds=void 0,this.isShow=void 0}});i("WeaponType",function(i){return i[i.ATTACK_PHYSICAL=1]="ATTACK_PHYSICAL",i[i.ATTACK_MAGIC=2]="ATTACK_MAGIC",i[i.ARMOR_SHIELD=3]="ARMOR_SHIELD",i[i.ARMOR_SHIELDPER=4]="ARMOR_SHIELDPER",i[i.ARMOR_HP=5]="ARMOR_HP",i[i.ARMOR_HPPER=6]="ARMOR_HPPER",i[i.ECONOMY=7]="ECONOMY",i}({}));i("WeaponSkillObj",class{constructor(){this.id=void 0,this.weaponId=void 0,this.name=void 0,this.desc=void 0,this.res=void 0,this.scale=void 0,this.type=void 0,this.gridType=void 0,this.points=void 0,this.level=void 0,this.maxLevel=void 0,this.quality=void 0,this.targetType=void 0,this.cd=void 0,this.damage=void 0,this.range=void 0,this.skillId=void 0,this.hp=void 0,this.addHp=void 0,this.addHpPer=void 0,this.addShield=void 0,this.weight=void 0}}),d._RF.pop()}}}));

System.register("chunks:///_virtual/WeaponSelectPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./OpenPopupManager.ts","./WeaponAdvancedItem.ts","./GameController.ts"],(function(e){var t,n,o,i,a,s,r,p,l,c,u,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){o=e.cclegacy,i=e.Node,a=e.Prefab,s=e._decorator,r=e.Component,p=e.instantiate},function(e){l=e.Constants},function(e){c=e.OpenPopupManager},function(e){u=e.WeaponAdvancedItem},function(e){d=e.default}],execute:function(){var f,h,P,b,v,m,A;o._RF.push({},"96107yYH2pJhb8rYAxG++Ai","WeaponSelectPopup",void 0);const{ccclass:g,property:y}=s;e("WeaponSelectPopup",(f=g("WeaponSelectPopup"),h=y(i),P=y(a),f((m=t((v=class extends r{constructor(){super(...arguments),n(this,"list",m,this),n(this,"weaponAdvancedPrefab",A,this)}show(e,t,n){this.setAdvanceList(e,t,n)}setAdvanceList(e,t,n){this.list.removeAllChildren();for(let o=0;o<t.length;o++){const i=t[o];let a=p(this.weaponAdvancedPrefab);a.parent=this.list,a.getComponent(u).init(e,i,n,this.onCloseBtn)}}onCloseBtn(){d.resume(),c.instance.hide(l.PopupUI.WeaponSelectPopup)}}).prototype,"list",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(v.prototype,"weaponAdvancedPrefab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=v))||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/WeaponShopData.ts",["cc","./CfgMgr.ts","./Util.ts","./GridModel.ts","./WeaponShopModel.ts","./WeaponModel.ts","./GridData.ts","./WeaponData.ts","./GuideData.ts","./GameDefine.ts"],(function(e){var t,i,n,r,s,h,o,a,f,p,l;return{setters:[function(e){t=e.cclegacy},function(e){i=e.CfgMgr},function(e){n=e.Util},function(e){r=e.GridCfg},function(e){s=e.WeaponShopCfg},function(e){h=e.WeaponType},function(e){o=e.GridData},function(e){a=e.WeaponData},function(e){f=e.GuideData,p=e.GuideStep},function(e){l=e.GameDefine}],execute:function(){t._RF.push({},"263acliHdNKY46x3YQSf7Pp","WeaponShopData",void 0);class g{constructor(){this._curShopId=0,this._shopCfg=void 0,this._weapon2Number=void 0,this._weaponGridData=new Map,this._coin=0,this._refreshNumber=0,this._freeRefreshNumber=0,this._curRefreshNumber=0}get coin(){return this._coin}set coin(e){this._coin+=e}get price(){return Math.ceil(this._shopCfg.price*(100-this._shopCfg.discountPer)/100)}get freeRefreshNumber(){return this._freeRefreshNumber}set freeRefreshNumber(e){this._freeRefreshNumber-=e}get weapon2Number(){return this._weapon2Number}get totalWeapon2Number(){return this._shopCfg.weapon2Number}init(){this._curShopId=l.gameMode,this._shopCfg=n.clone(i.getDataById(new s,this._curShopId)),this._freeRefreshNumber=this._shopCfg.freeRefreshNumber,this._refreshNumber=0,this._weapon2Number=this._shopCfg.weapon2Number,this._coin=this._shopCfg.coinNumber;let e=i.getCfgDataArray(new r);for(let t=0;t<e.length;t++){const i=e[t];this._weaponGridData.set(i.Id,i)}}getGridCfgById(e){return this._weaponGridData.get(e)}upgradeSkill(e){for(let t=0;t<e.length;t++){let i=e[t];Array.isArray(this._shopCfg[i.key])?this._shopCfg[i.key].push(i.value):this._shopCfg[i.key]+=i.value}}getWeaponPool(e,t,i){i&&this._shopCfg.freeRefresh2Per>0&&n.randomHit(this._shopCfg.freeRefresh2Per)&&(this._freeRefreshNumber+=1),this._refreshNumber++,t&&this._weapon2Number--;let r=this._shopCfg.weaponNumber;e&&(r+=this._shopCfg.freeWeapnNumber),this._shopCfg.refreshAddOneWeapnPer>0&&n.randomHit(this._shopCfg.refreshAddOneWeapnPer)&&(r+=1);let s=[];if(1==this._refreshNumber&&this._shopCfg.initRefreshGrid){let e=new u;e.id=this._shopCfg.initRefreshGrid,e.needAd=!1,e.type=0,e.level=0,s.push(e),r-=1}if(f.instance.battleMode&&(f.instance.curStep==p.GUIDE_STEP1_BATTLE_FIRST||f.instance.curStep==p.GUIDE_STEP4_MERGE_WEAPON||f.instance.curStep==p.GUIDE_STEP10_WAVE1_DONE||f.instance.curStep==p.GUIDE_STEP11_PLACE_GRID||f.instance.curStep==p.GUIDE_STEP14_REFRESH_WEAPON)){let e=f.instance.getCurGuideData();for(let t=0;t<e.length;t++)if(Number(e[t])<1e3){let i=new u;i.id=e[t],i.needAd=!1,i.type=0,i.level=0,s.push(i)}else{let i=this.getRandomWeapon(1,[],e[t]);s.push(i)}return s}{let e=!1;for(let t=0;t<r;t++){let t=[this._shopCfg.gridWeight,this._shopCfg.weapon1Weight,Math.ceil(this._shopCfg.weapon2Weight*(100+this._shopCfg.weapon2WeightPer)/100),this._shopCfg.weapon3Weight,this._shopCfg.coinWeight],i=n.weightRandomIdx(t);e&&0==i&&(i=1);let r=new u;if(0==i){let t=this.getRandomPlaceGrid();t.id?r=t:(r=this.getRandomWeapon(1,[]),e=!0)}else if(1==i||2==i||3==i){let e=i;r=this.getRandomWeapon(e,[h.ATTACK_PHYSICAL,h.ATTACK_MAGIC,h.ARMOR_HP,h.ARMOR_HPPER,h.ARMOR_SHIELD])}else if(4==i){let e=1;r=this.getRandomWeapon(e,[h.ECONOMY])}s.push(r)}}if(1==this._freeRefreshNumber){let e=!1;for(let t in s)s[t].needAd||s[t].type!=h.ATTACK_PHYSICAL&&s[t].type!=h.ATTACK_MAGIC||(e=!0);if(!e){let e=this.getRandomWeapon(1,[h.ATTACK_PHYSICAL,h.ATTACK_MAGIC]);e.id&&(s[s.length-1]=e)}}if(t){let e=!1;for(let t in s)2==s[t].level&&(e=!0);if(!e){let e=this.getRandomWeapon(2,[]);s[0]=e}}return s}getInitCarryWeapon(){return this._shopCfg.initCarryWeapon}getRandomWeapon(e,t,i){let r=a.instance.getWeaponPool(),s=[],h=[];for(let n=0;n<r.length;n++){const o=r[n];o.level!=e||!(0==t.length||t.indexOf(o.type)>=0)||i&&i!=o.weaponId||(s.push(r[n].weight),h.push(n))}let o=new u;if(0==h.length)return o;let f=h[n.weightRandomIdx(s)];return o.id=r[f].id,o.type=r[f].type,o.needAd=3==e,o.level=e,o}getRandomPlaceGrid(){let e=o.instance.bagCfg.max_gridLen.split("_"),t=Number(e[0]),i=Number(e[1]),r=[];for(let e=0;e<t;e++){let e=[];for(let t=0;t<i;t++)e.push(1);r.push(e)}let s=o.instance.getGridMapData();for(let e=0;e<s.length;e++){const t=s[e];for(let i=0;i<t.length;i++){t[i]&&(r[e][i]=0)}}let h=this.getPlaceGridByWeight(r),a=new u;if(h.Id>0){let e=0!=n.weightRandomIdx(h.ad);a.id=h.Id,a.needAd=e,a.type=0,a.level=0}return a}getPlaceGridByWeight(e){let t=[];this._weaponGridData.size&&this._weaponGridData.forEach(((i,n)=>{this.countRegionOccurrences(e,i.points)&&t.push(i)}));let i=new r;if(t.length){let e=0,n=0,r=0;for(let e=0;e<t.length;e++){r+=t[e].weight}let s=Math.floor(Math.random()*r),h=0;t.some(((t,i)=>{if(n=e+t.weight,s>=e&&s<n)return h=i,!0;e=n})),i=t[h]}return i}countRegionOccurrences(e,t){let i=0;const n=t.length,r=t[0].length;for(let s=0;s<=e.length-n;s++)for(let h=0;h<=e[0].length-r;h++){let o=!0;for(let i=0;i<n;i++){for(let n=0;n<r;n++)if(e[s+i][h+n]!==t[i][n]){o=!1;break}if(!o)break}o&&i++}return i}clear(){this._shopCfg=null,this._coin=0,this._freeRefreshNumber=0,this._weaponGridData.clear()}static get instance(){return this._instance||(this._instance=new g),this._instance}}e("WeaponShopData",g),g._instance=void 0;class u{constructor(){this.id=void 0,this.type=void 0,this.needAd=void 0,this.level=void 0}}e("WeaponShopObj",u),t._RF.pop()}}}));

System.register("chunks:///_virtual/WeaponShopModel.ts",["cc"],(function(e){var i;return{setters:[function(e){i=e.cclegacy}],execute:function(){i._RF.push({},"46fe46eWbxHUokIj306NYjr","WeaponShopModel",void 0);e("WeaponShopCfg",class{constructor(){this.ClassName="WeaponShop",this.Id=void 0,this.weaponNumber=void 0,this.freeWeapnNumber=void 0,this.freeRefreshNumber=void 0,this.price=void 0,this.discountPer=void 0,this.coinNumber=void 0,this.coinWeight=void 0,this.gridWeight=void 0,this.weapon1Weight=void 0,this.weapon2Weight=void 0,this.weapon3Weight=void 0,this.weapon2WeightPer=void 0,this.weapon2Number=void 0,this.initRefreshGrid=void 0,this.initCarryWeapon=void 0,this.freeRefresh2Per=void 0,this.refreshAddOneWeapnPer=void 0}}),i._RF.pop()}}}));

System.register("chunks:///_virtual/WeaponSkillInfoPopup.ts",["cc"],(function(o){var e,n,p;return{setters:[function(o){e=o.cclegacy,n=o.Component,p=o._decorator}],execute:function(){var c;e._RF.push({},"736f5AFeelFm7qO9RP/zJ3Y","WeaponSkillInfoPopup",void 0);const{ccclass:t,property:s}=p;o("WeaponSkillInfoPopup",t("WeaponSkillInfoPopup")(c=class extends n{show(){}})||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/WeaponSkillItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Constants.ts","./EventListener.ts","./ResourcesUtil.ts","./SpriteEx.ts","./GameEvent.ts","./BagData.ts","./LanguageManager.ts"],(function(e){var t,n,i,o,r,a,l,s,c,u,p,f,h,g,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,o=e.Sprite,r=e.RichText,a=e.Node,l=e._decorator,s=e.Component},function(e){c=e.Constants},function(e){u=e.EventListener},function(e){p=e.ResourcesUtil},function(e){f=e.SpriteEx},function(e){h=e.GameEvent},function(e){g=e.BagData},function(e){d=e.LanguageManager}],execute:function(){var m,b,I,v,E,k,y,F,P,_,D,L,S;i._RF.push({},"85fdaNs7RBNF6/zCQmWNvsT","WeaponSkillItem",void 0);const{ccclass:w,property:C}=l;e("WeaponSkillItem",(m=w("WeaponSkillItem"),b=C(f),I=C(f),v=C(o),E=C(r),k=C(a),m((P=t((F=class extends s{constructor(){super(...arguments),n(this,"bgFrame",P,this),n(this,"iconFrame",_,this),n(this,"icon",D,this),n(this,"desc",L,this),n(this,"mask",S,this),this._skillId=0}init(e){this._skillId=e;let t=g.instance.getWeaponUpgradeSkillCfgById(e),n=g.instance.getWeaponObjById(t.weaponId),i=c.skillIconPath+t.icon+"/spriteFrame",r=d.instance.getLang(t.desc);if(r=r.replace(/ffffff/g,"071e3e").replace(/59c535/g,"ea35c1"),-1==r.indexOf("071e3e")&&(r="<color=#071e3e>"+r+"</color>"),r="<b>"+r+"</b>",this.desc.string=!n||n.level>=t.weaponLevel?r:"<color=#59c535>Lv."+t.weaponLevel+": </color>"+r,this.mask.active=!(!n||n.level>=t.weaponLevel),this.iconFrame.index=t.quality-1,p.setSpriteFrame(i,this.icon),this.bgFrame.index){let e=this.node.getComponentsInChildren(o);for(let t=0;t<e.length;t++){e[t]}}}updateEquipInfo(){let e=this.node.getComponentsInChildren(o);for(let t=0;t<e.length;t++){e[t]}this.init(this._skillId)}onEnable(){u.on(h.UPDATE_POPUP_UPGRADE_INFO,this.updateEquipInfo,this)}onDisable(){u.off(h.UPDATE_POPUP_UPGRADE_INFO,this.updateEquipInfo,this)}}).prototype,"bgFrame",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(F.prototype,"iconFrame",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(F.prototype,"icon",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(F.prototype,"desc",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(F.prototype,"mask",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=F))||y));i._RF.pop()}}}));

System.register("chunks:///_virtual/WeaponStylePopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BagData.ts","./Constants.ts","./ResourcesUtil.ts","./OpenPopupManager.ts","./LanguageManager.ts","./SkillData.ts","./WeaponSkillItem.ts","./WeaponElementItem.ts","./WeaponModel.ts"],(function(e){var t,i,n,l,s,a,o,p,r,h,u,c,g,f,m,d,_;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,l=e.Label,s=e.Sprite,a=e.Node,o=e._decorator,p=e.Component},function(e){r=e.BagData},function(e){h=e.Constants},function(e){u=e.ResourcesUtil},function(e){c=e.OpenPopupManager},function(e){g=e.LanguageManager},function(e){f=e.SkillData},function(e){m=e.WeaponSkillItem},function(e){d=e.WeaponElementItem},function(e){_=e.WeaponType}],execute:function(){var k,b,S,y,w,I,C,W,v,B,x,P,T,z,L,A,D;n._RF.push({},"3e0b9TneVNF66IV6NFveBks","WeaponStylePopup",void 0);const{ccclass:F,property:M}=o;e("WeaponStylePopup",(k=F("WeaponStylePopup"),b=M(l),S=M(l),y=M(s),w=M(a),I=M(a),C=M(a),W=M(a),k((x=t((B=class extends p{constructor(){super(...arguments),i(this,"title",x,this),i(this,"level",P,this),i(this,"icon",T,this),i(this,"element",z,this),i(this,"weaponSkillItem",L,this),i(this,"leftBtn",A,this),i(this,"rightBtn",D,this),this._weaponCfg=null,this._index=0,this._skills=[]}show(e,t){this._index=0,this._weaponCfg=r.instance.getWeaponCfgById(e),this._skills=[];let i=0;for(let e=0;e<this._weaponCfg.skillIds.length;e++){let n=this._weaponCfg.skillIds[e],l=f.instance.getSkillCfgById(n);if(n==t&&(this._index=i),0==l.doubleSkills.length)l.name=this._weaponCfg.name,this._skills.push(l),i++;else for(let e=0;e<l.doubleSkills.length;e++){let n=f.instance.getSkillCfgById(l.doubleSkills[e]);l.doubleSkills[e]==t&&(this._index=i),this._skills.push(n),i++}}this.setWeaponSkill()}setWeaponSkill(){0==this._index?this.leftBtn.active=!1:this.leftBtn.active=!0,this._index==this._skills.length-1?this.rightBtn.active=!1:this.rightBtn.active=!0;let e=this._index+1>=5?5:this._index+1;this.level.string=g.instance.getLang("bag.craftt",[e]);let t=this._skills[this._index];if(this.title.string=g.instance.getLang(t.name),t.desc){this.weaponSkillItem.active=!0;let e=r.instance.getWeaponSkillArrByWeaponId(t.Id);this.weaponSkillItem.getComponent(m).init(e[0])}else this.weaponSkillItem.active=!1;this._weaponCfg.type==_.ATTACK_MAGIC||this._weaponCfg.type==_.ATTACK_PHYSICAL?(this.element.getComponent(d).init(t.element),this.element.active=!0):this.element.active=!1;let i=h.weaponIconPath+t.res+"/spriteFrame";u.geSpriteFrame(i).then((e=>{this.icon.spriteFrame=e}))}onLeftTouch(){this._index>0&&(this._index--,this.setWeaponSkill())}onRightTouch(){this._index<this._skills.length-1&&(this._index++,this.setWeaponSkill())}onCloseTouch(){c.instance.hide(h.PopupUI.WeaponStylePopup)}}).prototype,"title",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=t(B.prototype,"level",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=t(B.prototype,"icon",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(B.prototype,"element",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=t(B.prototype,"weaponSkillItem",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=t(B.prototype,"leftBtn",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(B.prototype,"rightBtn",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=B))||v));n._RF.pop()}}}));

System.register("chunks:///_virtual/WeeklyItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./QuestData.ts","./DailySubItem.ts","./ChestModel.ts","./RewardChestItem.ts","./GameEvent.ts","./EventListener.ts","./Constants.ts","./ResourcesUtil.ts"],(function(t){var e,i,n,s,o,r,a,l,c,h,u,p,m,b,d,f,I,P,g,y,w;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,s=t.Node,o=t.Label,r=t.ProgressBar,a=t.Prefab,l=t._decorator,c=t.Component,h=t.instantiate,u=t.UITransform,p=t.tween,m=t.v3},function(t){b=t.QuestData},function(t){d=t.DailySubItem},function(t){f=t.ChestAnim},function(t){I=t.RewardChestItem},function(t){P=t.GameEvent},function(t){g=t.EventListener},function(t){y=t.Constants},function(t){w=t.ResourcesUtil}],execute:function(){var k,L,A,C,D,_,v,E,T,U,R,x,z,N,O,S,M;n._RF.push({},"a3c4e4lbHdIS4ESfMF/s5Ta","WeeklyItem",void 0);const{ccclass:Q,property:F}=l;t("WeeklyItem",(k=Q("WeeklyItem"),L=F(s),A=F(s),C=F(o),D=F(r),_=F(a),v=F(a),E=F(s),k((R=e((U=class extends c{constructor(){super(...arguments),i(this,"taskList",R,this),i(this,"boxList",x,this),i(this,"credits",z,this),i(this,"progress",N,this),i(this,"taskItem",O,this),i(this,"rewardItem",S,this),i(this,"icon",M,this)}init(){this.setContent()}setContent(){let t=b.instance.dailyQuest;if(null!=t){this.credits.string=t.weeklyPoint+"",this.progress.progress=t.weeklyPoint/100,t.weekly.forEach(((t,e)=>{if(this.taskList.children[e])this.taskList.children[e].getComponent(d).init(t);else{let e=h(this.taskItem);e.getComponent(d).init(t),e.parent=this.taskList}}));for(let e=this.taskList.children.length-1;e>t.weekly.length-1;e--)this.taskList.children[e].removeFromParent();t.weeklyPointsRewards.forEach(((e,i)=>{let n=f.Received;if(e.draw||(n=t.weeklyPoint<e.points?f.Unavailable:f.Available),this.boxList.children[i])this.boxList.children[i].getComponent(I).init(e.rewards,e.points,n,"quest",e.id);else{let t=h(this.rewardItem);t.getComponent(I).init(e.rewards,e.points,n,"quest",e.id),t.parent=this.boxList}}))}}onPointAnimation(t){let e=this.icon.getPosition(),i=t.num,n=this.icon.parent.getComponent(u).convertToNodeSpaceAR(t.pos),s=y.commonPreabPath+"badgeItem";w.getPrefab(s).then((t=>{for(let s=0;s<i;s++){let i=h(t),o=2*(Math.random()-.5)*50+n.x,r=2*(Math.random()-.5)*100+n.y;i.parent=this.icon.parent,i.setPosition(n),this.scheduleOnce((()=>{p(i).to(.2,{position:m(o,r,0)},{easing:"sineIn"}).delay(.2).to(1,{position:e},{easing:"sineInOut"}).call((()=>{i.destroy()})).start()}),.05+.05*s)}}))}onEnable(){g.on(P.UPDATE_DAILY_QUEST_POPUP,this.setContent,this),g.on(P.UPDATE_DAILY_POINT_ANIMATION,this.onPointAnimation,this)}onDisable(){g.off(P.UPDATE_DAILY_QUEST_POPUP,this.setContent,this),g.off(P.UPDATE_DAILY_POINT_ANIMATION,this.onPointAnimation,this)}}).prototype,"taskList",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=e(U.prototype,"boxList",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=e(U.prototype,"credits",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=e(U.prototype,"progress",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=e(U.prototype,"taskItem",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=e(U.prototype,"rewardItem",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=e(U.prototype,"icon",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=U))||T));n._RF.pop()}}}));

System.register("chunks:///_virtual/WithdrawBillPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameEvent.ts","./EventListener.ts","./WalletData.ts","./BillItem.ts","./OpenPopupManager.ts","./Constants.ts"],(function(t){var e,i,n,l,o,a,r,s,c,p,u,h,d,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,l=t.ScrollView,o=t.Prefab,a=t._decorator,r=t.Component,s=t.instantiate},function(t){c=t.GameEvent},function(t){p=t.EventListener},function(t){u=t.WalletData},function(t){h=t.BillItem},function(t){d=t.OpenPopupManager},function(t){f=t.Constants}],execute:function(){var w,B,P,b,m,E,L;n._RF.push({},"1c148JBO+lOMaamE3PnZV8O","WithdrawBillPopup",void 0);const{ccclass:g,property:W}=a;t("WithdrawBillPopup",(w=g("WithdrawBillPopup"),B=W(l),P=W(o),w((E=e((m=class extends r{constructor(){super(...arguments),i(this,"scrollView",E,this),i(this,"billItem",L,this)}show(){u.instance.getWithdrawBill()}onUpdateBill(){let t=u.instance.withdrawBill;0==this.scrollView.content.children.length&&t.forEach(((t,e)=>{var i=s(this.billItem);i.getComponent(h).init(t),i.setScale(.9,.9),i.parent=this.scrollView.content}))}onCloseTouch(){d.instance.hide(f.PopupUI.WithdrawBillPopup)}onEnable(){p.on(c.UPDATE_WALLET_BILL,this.onUpdateBill,this)}onDisable(){p.off(c.UPDATE_WALLET_BILL,this.onUpdateBill,this)}}).prototype,"scrollView",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=e(m.prototype,"billItem",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=m))||b));n._RF.pop()}}}));

System.register("chunks:///_virtual/WithdrawPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./OpenPopupManager.ts","./Constants.ts","./WalletData.ts","./WalletManager.ts","./LanguageManager.ts","./GameEvent.ts","./EventListener.ts","./PlayerData.ts","./BillItem.ts"],(function(t){var e,i,n,a,o,l,s,r,u,c,h,p,d,b,g,m,w,f,L,P;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,a=t.Node,o=t.Label,l=t.ProgressBar,s=t._decorator,r=t.Component,u=t.instantiate,c=t.Sprite,h=t.Color},function(t){p=t.OpenPopupManager},function(t){d=t.Constants},function(t){b=t.WalletData},function(t){g=t.WalletManager},function(t){m=t.LanguageManager},function(t){w=t.GameEvent},function(t){f=t.EventListener},function(t){L=t.PlayerData},function(t){P=t.BillItem}],execute:function(){var _,y,W,T,v,A,B,D,I,U,E,C,z,M,N,O,k,F,j,x,H,R,S,V,G,K,X,Y,q,J,Q;n._RF.push({},"4028cv4/uBMn75KBycwPxXo","WithdrawPopup",void 0);const{ccclass:Z,property:$}=s;t("WithdrawPopup",(_=Z("WithdrawPopup"),y=$(a),W=$(a),T=$(o),v=$(o),A=$(a),B=$(o),D=$(a),I=$(o),U=$(a),E=$(a),C=$(a),z=$(o),M=$(l),N=$(o),_((F=e((k=class extends r{constructor(){super(...arguments),i(this,"amountList",F,this),i(this,"amountItem",j,this),i(this,"balanceLabel",x,this),i(this,"feeLabel",H,this),i(this,"dropdownMenu",R,this),i(this,"tokenLabel",S,this),i(this,"disconnectBtn",V,this),i(this,"withdrawLabel",G,this),i(this,"billItem",K,this),i(this,"billTips",X,this),i(this,"ad",Y,this),i(this,"adDesc",q,this),i(this,"adProgress",J,this),i(this,"adProgressValue",Q,this),this._address="",this._amount="0.0",this._curToken="usdt"}show(){f.emit(w.UPDATE_CHAPTER_STOP_ANIM),b.instance.getWithdrawInfo(),b.instance.getLastBill(),this.balanceLabel.string=Number(L.instance.assetObj.usdt).toFixed(3),this._amount=Number(L.instance.assetObj.usdt).toFixed(3),this.onUpdateWallet(),this.onUpdateBill()}onUpdateWithdrawAmount(){this.amountList.removeAllChildren(),b.instance.withdrawAmounts.forEach(((t,e)=>{let i=u(this.amountItem);i.getChildByName("value").getComponent(o).string=t.amount+" usdt",i.getChildByName("bg").getComponent(c).color=new h(17,138,247,255),i.parent=this.amountList,i.on("click",(()=>{if(0==t.limit)return void p.instance.showToast("cash.uncomplete");this._amount=t.amount+"",this.amountList.children.forEach(((t,e)=>{t.getChildByName("bg").getComponent(c).color=new h(17,138,247,255)})),i.getChildByName("bg").getComponent(c).color=new h(26,208,254,255);let e=b.instance.adObj;!b.instance.billObj&&e.amounts.indexOf(t.amount)>=0?(this.ad.active=!0,this.adDesc.string=m.instance.getLang("event.dailytask10",[e.target]),this.adProgress.progress=e.cur/e.target,this.adProgressValue.string=e.cur+"/"+e.target):this.ad.active=!1}))}))}onSwitchDropdown(){this.dropdownMenu.active=!this.dropdownMenu.active}onTokenChange(t,e){this._curToken=e,this.tokenLabel.string=e.toLocaleUpperCase(),this.dropdownMenu.active=!1}onWithdrawBtn(){b.instance.withdraw(this._curToken,this._amount)}onDisconnect(){g.instance.disconnect()}onUpdateWallet(){g.instance.isConnected()?(this.disconnectBtn.active=!0,this.withdrawLabel.string=m.instance.getLang("wallet.withdraw")):(this.disconnectBtn.active=!1,this.withdrawLabel.string=m.instance.getLang("wallet.connect"))}onCloseBtn(){f.emit(w.UPDATE_CHAPTER_PLAY_ANIM),p.instance.hide(d.PopupUI.WithdrawPopup)}onUpdateBill(){this.billTips.active=!1;let t=b.instance.billObj;t?(this.billItem.getComponent(P).init(t),this.billItem.parent.active=!0,"pending"==t.state&&(this.billTips.active=!0),this.ad.active=!1):this.billItem.parent.active=!1}toHistory(){p.instance.show(d.PopupUI.WithdrawBillPopup)}onEnable(){f.on(w.UPDATE_WALLET_INFO,this.onUpdateWallet,this),f.on(w.UPDATE_WALLET_BILL,this.onUpdateBill,this),f.on(w.UPDATE_WITHDRAW_INFO,this.onUpdateWithdrawAmount,this)}onDisable(){f.off(w.UPDATE_WALLET_INFO,this.onUpdateWallet,this),f.off(w.UPDATE_WALLET_BILL,this.onUpdateBill,this),f.off(w.UPDATE_WITHDRAW_INFO,this.onUpdateWithdrawAmount,this)}}).prototype,"amountList",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j=e(k.prototype,"amountItem",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=e(k.prototype,"balanceLabel",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=e(k.prototype,"feeLabel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=e(k.prototype,"dropdownMenu",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=e(k.prototype,"tokenLabel",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=e(k.prototype,"disconnectBtn",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=e(k.prototype,"withdrawLabel",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=e(k.prototype,"billItem",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X=e(k.prototype,"billTips",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=e(k.prototype,"ad",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=e(k.prototype,"adDesc",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=e(k.prototype,"adProgress",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q=e(k.prototype,"adProgressValue",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=k))||O));n._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});